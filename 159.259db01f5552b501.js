"use strict";(self.webpackChunkmakatiportal2022=self.webpackChunkmakatiportal2022||[]).push([[159],{2159:(Be,A,d)=>{d.r(A),d.d(A,{ContentModule:()=>Ie});var g=d(9808),v=d(4776),e=d(4893),M=d(3650);let S=(()=>{class t{constructor(o,n){this._auth_service=o,this.router=n}canActivate(o,n){return!!this._auth_service.is_authenticated||this.router.createUrlTree(["/auth"])}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(M.e),e.LFG(v.F0))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var J=d(1135),Q=d(1884),Y=d(8372),Z=d(7787);let L=(()=>{class t{constructor(){}ngOnInit(){console.log("init")}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-mayors-corner-gallery"]],decls:2,vars:0,template:function(o,n){1&o&&(e.TgZ(0,"p"),e._uU(1,"mayors-corner-gallery works!"),e.qZA())},styles:[""]}),t})();const B=function(t){return{"text-primary tx-active":t}};function V(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",11)(1,"div",12),e.NdJ("click",function(){const a=e.CHM(o).$implicit;return e.oxw().navigate(a)}),e.TgZ(2,"span",13),e.ALo(3,"async"),e._uU(4),e.qZA()()()}if(2&t){const o=i.$implicit,n=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(4,B,e.lcZ(3,2,n.active_cont$)==o)),e.xp6(2),e.hij(" ",o," ")}}function k(t,i){1&t&&(e.TgZ(0,"div")(1,"h2",14),e._UZ(2,"div",15),e._uU(3," Featured Album "),e.qZA(),e._UZ(4,"app-mayors-corner-gallery"),e.qZA())}function G(t,i){1&t&&(e.TgZ(0,"div"),e._uU(1,"Invalid Selection"),e.qZA())}let j=(()=>{class t{constructor(o,n){this.route=o,this.router=n,this.sidebar_content=["Gallery","Photo Release","Speeches","Achievements"],this._active_cont=new J.X(""),this.active_cont$=this._active_cont.asObservable(),this._subs=[]}ngOnInit(){const o=this.route.params.pipe((0,Q.x)(),(0,Y.b)(200)).subscribe(n=>{this.set_active_cont()});this._subs.push(o)}set_active_cont(){let o=this.route.snapshot.paramMap.get("type");o=o.toLowerCase().trim().replace(/-/g," ");const n=this.sidebar_content.filter(r=>r.toLowerCase().trim()==o);!n||this._active_cont.next(n[0])}navigate(o){let n=o.toLowerCase().trim().replace(/ /g,"-");this.router.navigate(["/content/mayors-corner",n])}ngOnDestroy(){this._subs.forEach(o=>o.unsubscribe())}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(v.gz),e.Y36(v.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-mayors-corner"]],decls:13,vars:8,consts:[[3,"title","is_cms_content","show_mayora"],[1,"bg-white","py-5","mayora-overflow-fix"],[1,"container","layout-container"],[1,"row"],[1,"col-md-4","mb-5"],[1,"sidebar-bg"],["class","d-flex flex-column p-3",4,"ngFor","ngForOf"],[1,"col-md-8",3,"ngSwitch"],[1,"cms-cont","ms-3"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","justify-content-between","c-pointer",3,"click"],[1,"pb-3","tx",3,"ngClass"],[1,"cms-title","mb-3","p-relative"],[1,"priority"]],template:function(o,n){1&o&&(e.TgZ(0,"div"),e._UZ(1,"util-page-title",0),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e.YNc(7,V,5,6,"div",6),e.qZA()(),e.TgZ(8,"div",7),e.ALo(9,"async"),e.TgZ(10,"div",8),e.YNc(11,k,5,0,"div",9),e.YNc(12,G,2,0,"div",10),e.qZA()()()()()()),2&o&&(e.xp6(1),e.Q6J("title","The Mayor's Corner")("is_cms_content",!1)("show_mayora",!0),e.xp6(6),e.Q6J("ngForOf",n.sidebar_content),e.xp6(1),e.Q6J("ngSwitch",e.lcZ(9,6,n.active_cont$)),e.xp6(3),e.Q6J("ngSwitchCase","Gallery"))},directives:[Z.T,g.sg,g.mk,g.RF,g.n9,L,g.ED],pipes:[g.Ov],styles:[""]}),t})(),z=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-news"]],decls:6,vars:2,consts:[["cms",""],[3,"title","is_cms_content"],[1,"bg-white","py-5","mayora-overflow-fix"],[1,"container"]],template:function(o,n){1&o&&(e.TgZ(0,"div",null,0),e._UZ(2,"util-page-title",1),e.TgZ(3,"div",2)(4,"div",3),e._uU(5," Lorem ipsum dolor, sit amet consectetur adipisicing elit. Eveniet illo odio amet possimus eaque atque! Minus impedit aut modi consequatur ea maiores placeat quaerat. Nam, inventore deleniti? Exercitationem, non quis! "),e.qZA()()()),2&o&&(e.xp6(2),e.Q6J("title","Makati News")("is_cms_content",!1))},directives:[Z.T],styles:[""]}),t})();var q=d(695),P=d(6470),l=d(3075),E=d(3900),H=d(9646),N=d(628),C=d(7854),D=d(2313),b=d(3290),X=d(655),h=(()=>{return(t=h||(h={}))[t.Up=1]="Up",t[t.Down=3]="Down",t[t.Right=6]="Right",t[t.Left=8]="Left",t[t.UpMirrored=2]="UpMirrored",t[t.DownMirrored=4]="DownMirrored",t[t.LeftMirrored=5]="LeftMirrored",t[t.RightMirrored=7]="RightMirrored",t[t.Default=0]="Default",t[t.NotJpeg=-1]="NotJpeg",t[t.NotDefined=-2]="NotDefined",h;var t})();class p{}p.getOrientation=t=>new Promise((i,o)=>{try{const n=new FileReader;n.onload=()=>{const r=new DataView(n.result);if(!r.byteLength||65496!==r.getUint16(0,!1))return i(h.NotDefined);const a=r.byteLength;let s=2;for(;s<a;){const f=r.getUint16(s,!1);if(s+=2,65505===f){if(1165519206!==r.getUint32(s+=2,!1))return i(h.NotJpeg);const _=18761===r.getUint16(s+=6,!1);s+=r.getUint32(s+4,_);const u=r.getUint16(s,_);s+=2;for(let c=0;c<u;c++)if(274===r.getUint16(s+12*c,_))return i(r.getUint16(s+12*c+8,_))}else{if(65280!=(65280&f))break;s+=r.getUint16(s,!1)}}return i(h.NotJpeg)},n.readAsArrayBuffer(t)}catch(n){return o(h.Default)}}),p.uploadFile=(t,i=!0,o=!1)=>new Promise(function(n,r){const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);Promise.resolve(a).then(s=>s?p.generateUploadInputNative(window.document,i,o):p.generateUploadInputRenderer(t,i,o)).then(s=>{const f=s?Array.from(s):[],_=f.map(m=>p.getOrientation(m)),u=f.map(m=>p.fileToDataURL(m));let c=[];Promise.all(_).then(m=>(c=m,Promise.all(u))).then(m=>{const x=m.map((w,T)=>({image:w.dataUrl,orientation:c[T],fileName:w.fileName}));n(i?x:x[0])})}).catch(s=>r(s))}),p.fileToDataURL=t=>new Promise((i,o)=>{const n=new FileReader;n.onload=r=>{i({dataUrl:r.target.result,fileName:t.name})};try{n.readAsDataURL(t)}catch(r){o(`ngx-image-compress - probably no file have been selected: ${r}`)}}),p.generateUploadInputRenderer=(t,i=!0,o=!1)=>{let n=!1;return new Promise((r,a)=>{const s=t.createElement("input");t.setStyle(s,"display","none"),t.setProperty(s,"type","file"),t.setProperty(s,"accept","image/*"),i&&t.setProperty(s,"multiple","true"),t.listen(s,"click",f=>{f.target.value=""}),t.listen(s,"change",f=>{n=!0,r(f.target.files)}),o&&window.addEventListener("focus",()=>{setTimeout(()=>{n||a(new Error("file upload on blur - no file selected"))},300)},{once:!0}),s.click()})},p.generateUploadInputNative=(t,i=!0,o=!1)=>{let n=!1;return new Promise((r,a)=>{const s=t.createElement("input");s.id="upload-input"+new Date,s.style.display="none",s.setAttribute("type","file"),i&&s.setAttribute("multiple","true"),t.body.appendChild(s),s.addEventListener("change",()=>{n=!0,r(s.files),t.body.removeChild(t.getElementById(s.id))},{once:!0}),o&&window.addEventListener("focus",()=>{setTimeout(()=>{!n&&t.getElementById(s.id)&&(a(new Error("file upload on blur - no file selected")),t.body.removeChild(t.getElementById(s.id)))},300)},{once:!0}),s.click()})},p.compress=(t,i,o,n=50,r=50,a=0,s=0)=>new Promise(function(f,_){r/=100,n/=100;const u=new Image;u.onload=()=>{const c=o.createElement("canvas"),m=c.getContext("2d");if(!m)return _("No canvas context available");let x=u.naturalWidth,w=u.naturalHeight;if(!CSS.supports("image-orientation","from-image")&&(i===h.Right||i===h.Left)){const Le=x;x=w,w=Le}n=Math.min(n,a?a/x:1,s?s/w:1),c.width=x*n,c.height=w*n;const U=Math.PI/180;CSS.supports("image-orientation","from-image")||i===h.Up?m.drawImage(u,0,0,c.width,c.height):i===h.Right?(m.save(),m.rotate(90*U),m.translate(0,-c.width),m.drawImage(u,0,0,c.height,c.width),m.restore()):i===h.Left?(m.save(),m.rotate(-90*U),m.translate(-c.width,0),m.drawImage(u,0,0,c.height,c.width),m.restore()):i===h.Down?(m.save(),m.rotate(180*U),m.translate(-c.width,-c.height),m.drawImage(u,0,0,c.width,c.height),m.restore()):m.drawImage(u,0,0,c.width,c.height);const Qe=t.substr(5,t.split(";")[0].length-5),Ye=c.toDataURL(Qe,r);f(Ye)},u.onerror=c=>_(c),u.src=t}),p.byteCount=t=>encodeURI(t).split(/%..|./).length-1,p.getImageMaxSize=(t,i,o)=>(0,X.mG)(void 0,void 0,void 0,function*(){const r=f=>(f/1024/1024).toFixed(2);i&&console.debug("NgxImageCompress - Opening upload window");let s,a=yield p.uploadFile(o,!1);for(let f=0;f<10;f++){const _=p.byteCount(a.image);s=yield p.compress(a.image,a.orientation,o,50,100);const u=p.byteCount(s);if(console.debug("NgxImageCompress -","Compression from",r(_),"MB to",r(u),"MB"),u>=_)throw 0===f?(i&&console.debug("NgxImageCompress -","File can't be reduced at all - returning the original",r(_),"MB large"),a.image):(i&&console.debug("NgxImageCompress -","File can't be reduced more - returning the best we can, which is ",r(_),"MB large"),a.image);if(u<1024*t*1024)return i&&console.debug("NgxImageCompress -","Here your file",r(u),"MB large"),s;if(9===f)throw i&&console.debug("NgxImageCompress -","File can't reach the desired size after",10,"tries. Returning file ",r(_),"MB large"),a.image;i&&console.debug("NgxImageCompress -","Reached",r(u),"MB large. Trying another time after",f+1,"times"),a.image=s}throw i&&console.debug("NgxImageCompress - Unexpected error"),""});let K=(()=>{class t{constructor(o){this.DOC_ORIENTATION=h,this.render=o.createRenderer(null,null)}byteCount(o){return p.byteCount(o)}getOrientation(o){return p.getOrientation(o)}uploadFile(){return p.uploadFile(this.render,!1)}uploadMultipleFiles(){return p.uploadFile(this.render,!0)}uploadFileOrReject(){return p.uploadFile(this.render,!1,!0)}uploadMultipleFilesOrReject(){return p.uploadFile(this.render,!0,!0)}compressFile(o,n,r=50,a=50,s=0,f=0){return p.compress(o,n,this.render,r,a,s,f)}uploadAndGetImageWithMaxSize(o=1,n=!1){return p.getImageMaxSize(o,n,this.render)}}return t.\u0275fac=function(o){return new(o||t)(e.LFG(e.FYo))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),R=(()=>{class t{constructor(o){this.imageCompress=o,this.base64_image="",this.default_image="/assets/images/illustrations/undraw_male_avatar_re_y880.svg",this.on_change=new e.vpe,this.img=this.default_image}ngOnInit(){this.base64_image&&(this.img=this.base64_image)}compressFile(){this.imageCompress.uploadFile().then(({image:o,orientation:n})=>{this.imageCompress.compressFile(o,n,50,50,200,200).then(r=>{this.on_change.emit(r)})})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(K))},t.\u0275cmp=e.Xpm({type:t,selectors:[["util-img-base64"]],inputs:{base64_image:"base64_image",default_image:"default_image"},outputs:{on_change:"on_change"},decls:5,vars:1,consts:[[1,"p-relative","img-holder"],["alt","","width","100%",3,"src"],[1,"upload-btn","c-pointer",3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"div")(1,"div",0),e._UZ(2,"img",1),e.TgZ(3,"span",2),e.NdJ("click",function(){return n.compressFile()}),e._uU(4,"Edit"),e.qZA()()()),2&o&&(e.xp6(2),e.Q6J("src",n.img,e.LSH))},styles:["img[_ngcontent-%COMP%]{aspect-ratio:1 / 1;object-fit:cover}.upload-btn[_ngcontent-%COMP%]{background-color:#00000080;color:#fff;text-align:center;width:100%;position:absolute;bottom:0;left:0;padding:.5em 0}.img-holder[_ngcontent-%COMP%]{border-radius:50%;overflow:hidden}"]}),t})();function W(t,i){if(1&t&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.validation_msg("firstName","First Name")," ")}}function O(t,i){if(1&t&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.validation_msg("middleName","Middle Name")," ")}}function ee(t,i){if(1&t&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.validation_msg("lastName","Last Name")," ")}}function te(t,i){if(1&t&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.validation_msg("birthdate","Birthdate")," ")}}function oe(t,i){if(1&t&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.validation_msg("gender","Gender")," ")}}function ie(t,i){1&t&&(e.TgZ(0,"div")(1,"small",27),e._uU(2,"reCAPTCHA is required."),e.qZA()())}const y=function(t){return{"is-invalid":t}};function ne(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){return e.CHM(o),e.oxw().submit()}),e.TgZ(1,"div",2)(2,"div",3)(3,"div",4)(4,"label",5),e._uU(5,"First Name"),e.qZA(),e._UZ(6,"input",6),e.YNc(7,W,2,1,"div",7),e.qZA(),e.TgZ(8,"div",4)(9,"label",8),e._uU(10,"Middle Name"),e.qZA(),e._UZ(11,"input",9),e.YNc(12,O,2,1,"div",7),e.qZA(),e.TgZ(13,"div",4)(14,"label",10),e._uU(15,"Last Name"),e.qZA(),e._UZ(16,"input",11),e.YNc(17,ee,2,1,"div",7),e.qZA(),e.TgZ(18,"div",4)(19,"label",12),e._uU(20,"Birthdate"),e.qZA(),e._UZ(21,"input",13),e.ALo(22,"date"),e.YNc(23,te,2,1,"div",7),e.qZA(),e.TgZ(24,"div",2)(25,"div",14)(26,"div",4)(27,"label",15),e._uU(28,"Gender"),e.qZA(),e.TgZ(29,"select",16)(30,"option",17),e._uU(31,"Please Select"),e.qZA(),e.TgZ(32,"option",18),e._uU(33,"Male"),e.qZA(),e.TgZ(34,"option",19),e._uU(35,"Female"),e.qZA()(),e.YNc(36,oe,2,1,"div",7),e.qZA()()(),e.TgZ(37,"div",4),e._UZ(38,"re-captcha",20),e.YNc(39,ie,3,0,"div",21),e.qZA()(),e.TgZ(40,"div",22)(41,"div",23)(42,"util-img-base64",24),e.NdJ("on_change",function(r){return e.CHM(o),e.oxw().image_change(r)}),e.qZA()()()(),e.TgZ(43,"button",25),e._uU(44,"Submit"),e.qZA()()}if(2&t){const o=e.oxw();e.Q6J("formGroup",o.form),e.xp6(6),e.Q6J("ngClass",e.VKq(19,y,o.control_is_invalid("firstName"))),e.xp6(1),e.Q6J("ngIf",o.control_is_invalid("firstName")),e.xp6(4),e.Q6J("ngClass",e.VKq(21,y,o.control_is_invalid("middleName"))),e.xp6(1),e.Q6J("ngIf",o.control_is_invalid("middleName")),e.xp6(4),e.Q6J("ngClass",e.VKq(23,y,o.control_is_invalid("lastName"))),e.xp6(1),e.Q6J("ngIf",o.control_is_invalid("lastName")),e.xp6(4),e.Q6J("max",e.xi3(22,16,o.now,"y-LL-dd"))("ngClass",e.VKq(25,y,o.control_is_invalid("birthdate"))),e.xp6(2),e.Q6J("ngIf",o.control_is_invalid("birthdate")),e.xp6(6),e.Q6J("ngClass",e.VKq(27,y,o.control_is_invalid("gender"))),e.xp6(7),e.Q6J("ngIf",o.control_is_invalid("gender")),e.xp6(3),e.Q6J("ngIf",o.control_is_invalid("recaptcha")),e.xp6(3),e.Q6J("base64_image",o.img)("default_image",o.img),e.xp6(1),e.Q6J("disabled",o.is_pending)}}let re=(()=>{class t extends N.l{constructor(o,n,r,a,s){super(o),this._fb=n,this._profile_service=r,this._router=a,this._sanitizer=s,this.img=C.tb}ngOnInit(){this.now=new Date,this.initialValue=this._profile_service.get_profile(!0).pipe((0,E.w)(o=>o?(0,H.of)(o):this._profile_service.get_profile(!1))).subscribe({next:o=>{this.initialValue=o,this.initialValue.birthdate&&(this.initialValue.birthdate=this.initialValue.birthdate.split("T")[0]),this.set_image(),this.initialize(this._fb.group({profilePicture:[""],firstName:["",l.kI.required],middleName:[""],lastName:["",l.kI.required],birthdate:["",l.kI.required],gender:["",l.kI.required],recaptcha:["",l.kI.required]}))},error:o=>{this._alert_service.add_alert("Could not load profile."),this._router.navigate(["/"])}})}image_change(o){var n;null===(n=this.ctrl("profilePicture"))||void 0===n||n.setValue(o.split(",")[1])}set_image(){if(this.initialValue.profilePicture)try{return void(this.img=this._sanitizer.bypassSecurityTrustUrl((0,C.qo)(this.initialValue.profilePicture)))}catch(o){return void(this.img=this.get_default_image())}this.img=this.get_default_image()}get_default_image(){return this.initialValue.gender?"MALE"==this.initialValue.gender.toUpperCase().trim()?C.tb:C.Ld:C.tb}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(P.c),e.Y36(l.qu),e.Y36(q.H),e.Y36(v.F0),e.Y36(D.H7))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-profile-form"]],features:[e.qOj],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-8"],[1,"mb-3"],["for","firstName",1,"form-label","sform-label"],["type","text","id","firstName","placeholder","Type here","autocomplete","false","formControlName","firstName","tabindex","1",1,"form-control","sform-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","middleName",1,"form-label","sform-label"],["type","text","id","middleName","placeholder","Type here","autocomplete","false","formControlName","middleName","tabindex","2",1,"form-control","sform-control",3,"ngClass"],["for","lastName",1,"form-label","sform-label"],["type","text","id","lastName","placeholder","Type here","autocomplete","false","formControlName","lastName","tabindex","3",1,"form-control","sform-control",3,"ngClass"],["for","birthdate",1,"form-label","sform-label"],["type","date","id","birthdate","autocomplete","false","formControlName","birthdate","tabindex","4",1,"form-control","sform-control",3,"max","ngClass"],[1,"col-lg-5"],["for","gender",1,"form-label","sform-label"],["id","gender","formControlName","gender","tabindex","5",1,"form-select","sform-control",3,"ngClass"],["selected","","value",""],["value","MALE"],["value","FEMALE"],["tabindex","2","formControlName","recaptcha"],[4,"ngIf"],[1,"col-lg-4"],[1,"d-none","d-lg-block"],[3,"base64_image","default_image","on_change"],["type","submit","tabindex","3",1,"btn","btn-primary","px-5","py-2","mt-3",3,"disabled"],[1,"invalid-feedback"],[1,"text-danger"]],template:function(o,n){1&o&&e.YNc(0,ne,45,29,"form",0),2&o&&e.Q6J("ngIf",n.form)},directives:[g.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,g.mk,l.EJ,l.YN,l.Kr,b.wT,b.Vd,R],pipes:[g.uU],styles:[""]}),t})();var I=d(4986),se=d(8306),ae=d(3532);function de(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,".\xa0"),e.qZA())}let pe=(()=>{class t{constructor(){this.message="Loading",this.description="Please wait.",this.is_loading=!1,this.dot=[],this._subs=[]}ngOnInit(){if(!0===this.is_loading){const o=function me(t=0,i=I.z){return t<0&&(t=0),function ce(t=0,i,o=I.P){let n=-1;return null!=i&&((0,ae.K)(i)?o=i:n=i),new se.y(r=>{let a=function le(t){return t instanceof Date&&!isNaN(t)}(t)?+t-o.now():t;a<0&&(a=0);let s=0;return o.schedule(function(){r.closed||(r.next(s++),0<=n?this.schedule(void 0,n):r.complete())},a)})}(t,t,i)}(500).subscribe(n=>{this.dot.length>=3?this.dot=[]:this.dot.push(1)});this._subs.push(o)}}ngOnDestroy(){this._subs.forEach(o=>o.unsubscribe())}}return t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["util-message"]],inputs:{message:"message",description:"description",is_loading:"is_loading"},decls:8,vars:3,consts:[[1,"d-flex","flex-column","align-items-center"],["src","/assets/images/illustrations/undraw_my_personal_files_re_3q0p.svg","width","300px","alt","",1,"m-auto","mb-3"],[1,"sheader","p-relative"],[1,"ld"],[4,"ngFor","ngForOf"],[1,"sheadersub","mb-3","text-center"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"div",2),e._uU(3),e.TgZ(4,"div",3),e.YNc(5,de,2,0,"span",4),e.qZA()(),e.TgZ(6,"div",5),e._uU(7),e.qZA()()),2&o&&(e.xp6(3),e.hij(" ",n.message," "),e.xp6(2),e.Q6J("ngForOf",n.dot),e.xp6(2),e.hij(" ",n.description," "))},directives:[g.sg],styles:[".ld[_ngcontent-%COMP%]{position:absolute;right:-2.1em;top:0;width:2em}"]}),t})();function fe(t,i){if(1&t&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.validation_msg("oldPassword","Old Password")," ")}}const ge=function(){return{name:"pattern",msg:"New Password should be atleast 6 characters length that consists of alteast 1 Uppercase, 1 Lowercase, 1 Numeric and 1 Special Character."}},_e=function(t){return[t]};function he(t,i){if(1&t&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.hij(" ",o.validation_msg("newPassword","New Password",null,e.VKq(2,_e,e.DdM(1,ge)))," ")}}function ve(t,i){if(1&t&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&t){const o=e.oxw(3);e.xp6(1),e.Oqu(o.validation_msg("confirmPassword","Password confirmation"))}}function xe(t,i){1&t&&(e.TgZ(0,"span"),e._uU(1,"Password does not match."),e.qZA())}function we(t,i){if(1&t&&(e.TgZ(0,"div",14),e.YNc(1,ve,2,1,"span",12),e.YNc(2,xe,2,0,"span",12),e.qZA()),2&t){const o=e.oxw(2);e.xp6(1),e.Q6J("ngIf",o.control_is_invalid("confirmPassword")),e.xp6(1),e.Q6J("ngIf",o.form.hasError("notSame"))}}function be(t,i){1&t&&(e.TgZ(0,"div")(1,"small",15),e._uU(2,"reCAPTCHA is required."),e.qZA()())}const F=function(t){return{"is-invalid":t}};function Ce(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){return e.CHM(o),e.oxw().submit()}),e.TgZ(1,"div",2)(2,"label",3),e._uU(3,"Old Password "),e.qZA(),e._UZ(4,"input",4),e.YNc(5,fe,2,1,"div",5),e.qZA(),e.TgZ(6,"div",2)(7,"label",6),e._uU(8,"New Password "),e.qZA(),e._UZ(9,"input",7),e.YNc(10,he,2,4,"div",5),e.qZA(),e.TgZ(11,"div",8)(12,"label",9),e._uU(13,"Confirm Password "),e.qZA(),e._UZ(14,"input",10),e.YNc(15,we,3,2,"div",5),e.qZA(),e.TgZ(16,"div",2),e._UZ(17,"re-captcha",11),e.YNc(18,be,3,0,"div",12),e.qZA(),e.TgZ(19,"button",13),e._uU(20,"Submit"),e.qZA()()}if(2&t){const o=e.oxw();e.Q6J("formGroup",o.form),e.xp6(4),e.Q6J("ngClass",e.VKq(9,F,o.control_is_invalid("oldPassword"))),e.xp6(1),e.Q6J("ngIf",o.control_is_invalid("oldPassword")),e.xp6(4),e.Q6J("ngClass",e.VKq(11,F,o.control_is_invalid("newPassword"))),e.xp6(1),e.Q6J("ngIf",o.control_is_invalid("newPassword")),e.xp6(4),e.Q6J("ngClass",e.VKq(13,F,o.form.hasError("notSame")||o.control_is_invalid("confirmPassword"))),e.xp6(1),e.Q6J("ngIf",o.form.hasError("notSame")||o.control_is_invalid("password")),e.xp6(3),e.Q6J("ngIf",o.control_is_invalid("recaptcha")),e.xp6(1),e.Q6J("disabled",o.is_pending)}}let ye=(()=>{class t extends N.l{constructor(o,n){super(o),this._fb=n,this.checkPasswords=r=>{var a,s;return(null===(a=null==r?void 0:r.get("newPassword"))||void 0===a?void 0:a.value)===(null===(s=null==r?void 0:r.get("confirmPassword"))||void 0===s?void 0:s.value)?null:{notSame:!0}}}ngOnInit(){this.initialize(this._fb.group({confirmPassword:["",l.kI.required],newPassword:["",[l.kI.required,l.kI.pattern("^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{6,}$")]],oldPassword:["",l.kI.required],recaptcha:["",l.kI.required]},{validators:this.checkPasswords}))}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(P.c),e.Y36(l.qu))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-change-password-form"]],features:[e.qOj],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","oldPassword",1,"form-label","sform-label"],["type","password","id","oldPassword","placeholder","Type here","autocomplete","false","formControlName","oldPassword","tabindex","1",1,"form-control","sform-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","newPassword",1,"form-label","sform-label"],["type","password","id","newPassword","placeholder","Type here","autocomplete","false","formControlName","newPassword","tabindex","2",1,"form-control","sform-control",3,"ngClass"],[1,"mb-4"],["for","confirmPassword",1,"form-label","sform-label"],["type","password","id","confirmPassword","placeholder","Type here","autocomplete","false","formControlName","confirmPassword","tabindex","3",1,"form-control","sform-control",3,"ngClass"],["tabindex","4","formControlName","recaptcha"],[4,"ngIf"],["type","submit","tabindex","5",1,"btn","btn-primary","px-5","py-2","mt-3",3,"disabled"],[1,"invalid-feedback"],[1,"text-danger"]],template:function(o,n){1&o&&e.YNc(0,Ce,21,15,"form",0),2&o&&e.Q6J("ngIf",n.form)},directives:[g.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,g.mk,b.wT,b.Vd],styles:[""]}),t})();const Ze=function(t){return{"text-primary tx-active":t}};function Pe(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div",10)(1,"div",11),e.NdJ("click",function(){const a=e.CHM(o).$implicit;return e.oxw().navigate(a)}),e.TgZ(2,"span",12),e.ALo(3,"async"),e._uU(4),e.qZA()()()}if(2&t){const o=i.$implicit,n=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(4,Ze,e.lcZ(3,2,n.active_cont$)==o)),e.xp6(2),e.hij(" ",o," ")}}function Fe(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"app-profile-form",17),e.NdJ("on_submit",function(r){return e.CHM(o),e.oxw(2).update_profile(r)}),e.qZA()}if(2&t){const o=e.oxw(2);e.Q6J("is_pending",o.is_pending)}}function Te(t,i){1&t&&e._UZ(0,"util-message",18),2&t&&e.Q6J("message","Loading")("is_loading",!0)("description","Please wait while we load your profile.")}function Ue(t,i){if(1&t&&(e.TgZ(0,"div")(1,"h2",13),e._UZ(2,"div",14),e._uU(3," Personal Details "),e.qZA(),e.YNc(4,Fe,1,1,"app-profile-form",15),e.ALo(5,"async"),e.YNc(6,Te,1,3,"ng-template",null,16,e.W1O),e.qZA()),2&t){const o=e.MAs(7),n=e.oxw();e.xp6(4),e.Q6J("ngIf",0==e.lcZ(5,2,n.profile_service.profile_loading$))("ngIfElse",o)}}function Ae(t,i){if(1&t){const o=e.EpF();e.TgZ(0,"div")(1,"h2",13),e._UZ(2,"div",14),e._uU(3," Change Password "),e.qZA(),e.TgZ(4,"app-change-password-form",17),e.NdJ("on_submit",function(r){return e.CHM(o),e.oxw().change_password(r)}),e.qZA()()}if(2&t){const o=e.oxw();e.xp6(4),e.Q6J("is_pending",o.is_pending)}}const Me=[{path:"profile",component:(()=>{class t{constructor(o,n,r){this.profile_service=o,this._alert_service=n,this._auth_service=r,this.sidebar_content=["Personal Details","Change Password"],this._active_cont=new J.X("Personal Details"),this.active_cont$=this._active_cont.asObservable(),this.is_pending=!1}ngOnInit(){this.profile_service.get_profile(!0).subscribe()}load_profile(){}navigate(o){this._active_cont.next(o)}ngOnDestroy(){}update_profile(o){this.is_pending=!0,this.profile_service.submit(o).subscribe({next:n=>{this.is_pending=!1,this._alert_service.add_alert("Profile successfully updated.")},error:n=>{this.is_pending=!1,this._alert_service.http_error(n)}})}change_password(o){this.is_pending=!0,this._auth_service.change_password(o).subscribe({next:n=>{this.is_pending=!1,this._alert_service.add_alert("Password changed successfully."),this._active_cont.next(""),setTimeout(()=>{this._active_cont.next("Change Password")},50)},error:n=>{this.is_pending=!1,this._alert_service.http_error(n)}})}}return t.\u0275fac=function(o){return new(o||t)(e.Y36(q.H),e.Y36(P.c),e.Y36(M.e))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-profile"]],decls:13,vars:8,consts:[[3,"title","is_cms_content"],[1,"bg-white","py-5","mayora-overflow-fix"],[1,"container","layout-container"],[1,"row"],[1,"col-md-4","mb-5"],[1,"sidebar-bg"],["class","d-flex flex-column p-3",4,"ngFor","ngForOf"],[1,"col-md-8",3,"ngSwitch"],[1,"cms-cont","ms-3"],[4,"ngSwitchCase"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","justify-content-between","c-pointer",3,"click"],[1,"pb-3","tx",3,"ngClass"],[1,"cms-title","mb-3","p-relative"],[1,"priority"],[3,"is_pending","on_submit",4,"ngIf","ngIfElse"],["profile_loading",""],[3,"is_pending","on_submit"],[3,"message","is_loading","description"]],template:function(o,n){1&o&&(e.TgZ(0,"div"),e._UZ(1,"util-page-title",0),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e.YNc(7,Pe,5,6,"div",6),e.qZA()(),e.TgZ(8,"div",7),e.ALo(9,"async"),e.TgZ(10,"div",8),e.YNc(11,Ue,8,4,"div",9),e.YNc(12,Ae,5,1,"div",9),e.qZA()()()()()()),2&o&&(e.xp6(1),e.Q6J("title","Profile")("is_cms_content",!1),e.xp6(6),e.Q6J("ngForOf",n.sidebar_content),e.xp6(1),e.Q6J("ngSwitch",e.lcZ(9,6,n.active_cont$)),e.xp6(3),e.Q6J("ngSwitchCase","Personal Details"),e.xp6(1),e.Q6J("ngSwitchCase","Change Password"))},directives:[Z.T,g.sg,g.mk,g.RF,g.n9,g.O5,re,pe,ye],pipes:[g.Ov],styles:[""]}),t})(),canActivate:[S]},{path:"news",component:z},{path:"mayors-corner/:type",component:j}];let Je=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[v.Bz.forChild(Me)],v.Bz]}),t})();var qe=d(8231),Ne=d(2234);let Ie=(()=>{class t{}return t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[g.ez,Je,qe.A,Ne.m,l.u5,l.UX,v.Bz,b.a,b.lQ]]}),t})()}}]);