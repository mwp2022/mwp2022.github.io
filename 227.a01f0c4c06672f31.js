"use strict";(self.webpackChunkmakatiportal2022=self.webpackChunkmakatiportal2022||[]).push([[227],{1935:(J,Z,s)=>{s.d(Z,{T:()=>D});var u=s(1135),p=s(4004),M=s(1884),t=s(7854),r=s(4893),g=s(4573),m=s(9808);let T=(()=>{class d{transform(l){return l?(0,t.b1)(l):""}}return d.\u0275fac=function(l){return new(l||d)},d.\u0275pipe=r.Yjl({name:"stripHtml",type:d,pure:!0}),d})();const y=function(d){return{default:d}};function C(d,v){if(1&d){const l=r.EpF();r.TgZ(0,"span",9),r.NdJ("click",function(){const _=r.CHM(l).$implicit;return r.oxw(2).onBCClick(_)}),r._uU(1),r.ALo(2,"stripHtml"),r.qZA()}if(2&d){const l=v.$implicit;r.Q6J("ngClass",r.VKq(4,y,1==l.is_default)),r.xp6(1),r.hij(" ",r.lcZ(2,2,l.title),"")}}function b(d,v){if(1&d&&(r.TgZ(0,"div",7),r.YNc(1,C,3,6,"span",8),r.qZA()),2&d){const l=r.oxw();r.xp6(1),r.Q6J("ngForOf",l.displayed_bread_crumbs)}}function x(d,v){1&d&&(r.TgZ(0,"div",10)(1,"div",11)(2,"div",12),r._UZ(3,"img",13),r.qZA()()())}const P=["*"];let D=(()=>{class d{constructor(l,f){this.route=l,this.router=f,this._title=new u.X("Title"),this.title$=this._title.asObservable(),this.bread_crumbs=[{title:"Home",path:["/"],is_default:!0}],this.is_cms_content=!0,this.show_mayora=!1,this.displayed_bread_crumbs=[],this._subscriptions=[]}get title(){return this._title.getValue()}set title(l){this._title.next(l)}ngOnDestroy(){this._subscriptions.forEach(l=>l.unsubscribe())}ngOnInit(){if(window.scrollTo(0,0),this.displayed_bread_crumbs=this.bread_crumbs,1==this.is_cms_content){const l=this.route.paramMap.pipe((0,p.U)(f=>{var h,_;return{page_parent_title:(0,t.s)(null!==(h=f.get("grandParentTitle"))&&void 0!==h?h:""),page_title:(0,t.s)(null!==(_=f.get("pageTitle"))&&void 0!==_?_:"")}})).subscribe(f=>{var h,_;null!=this.bread_crumbs&&(this.displayed_bread_crumbs="content"==f.page_parent_title.toLowerCase().trim()?this.bread_crumbs:[{title:"Home",path:["/"]},{title:null!==(h=f.page_parent_title)&&void 0!==h?h:""}]),this.title=(0,t.s)(null!==(_=f.page_title)&&void 0!==_?_:"")});this._subscriptions.push(l)}else this.set_static_title()}onBCClick(l){l.path&&this.router.navigate(l.path)}set_static_title(){if(null!=this.bread_crumbs){const l=this._title.pipe((0,M.x)()).subscribe(f=>{this.displayed_bread_crumbs=[...this.bread_crumbs,{title:this.title}]});this._subscriptions.push(l)}}}return d.\u0275fac=function(l){return new(l||d)(r.Y36(g.gz),r.Y36(g.F0))},d.\u0275cmp=r.Xpm({type:d,selectors:[["util-page-title"]],inputs:{title:"title",bread_crumbs:"bread_crumbs",is_cms_content:"is_cms_content",show_mayora:"show_mayora"},ngContentSelectors:P,decls:8,vars:3,consts:[[1,"container","h","layout-container","page-title","d-flex","flex-column","justify-content-center","p-relative"],["class","bc",4,"ngIf"],[1,"p-relative"],[1,"priority",2,"top","30px"],[1,"t",3,"innerHTML"],["class","mayora-holder",4,"ngIf"],[1,"logo-holder"],[1,"bc"],[3,"ngClass","click",4,"ngFor","ngForOf"],[3,"ngClass","click"],[1,"mayora-holder"],[1,"d-none","d-lg-block","h-100","w-100","p-relative"],[1,"mayora-circle"],["src","/assets/images/binay 1.png","alt","",1,"mayor"]],template:function(l,f){1&l&&(r.F$t(),r.TgZ(0,"div",0),r.YNc(1,b,2,1,"div",1),r.TgZ(2,"div",2),r._UZ(3,"div",3)(4,"div",4),r.Hsn(5),r.qZA(),r.YNc(6,x,4,0,"div",5),r._UZ(7,"div",6),r.qZA()),2&l&&(r.xp6(1),r.Q6J("ngIf",f.displayed_bread_crumbs),r.xp6(3),r.Q6J("innerHTML",f.title,r.oJD),r.xp6(2),r.Q6J("ngIf",f.show_mayora))},directives:[m.O5,m.sg,m.mk],pipes:[T],styles:['.page-title[_ngcontent-%COMP%]{padding:30px 0 70px}.t[_ngcontent-%COMP%]{font-size:70px;font-weight:700;color:#fff;z-index:10}.bc[_ngcontent-%COMP%]{font-weight:600;color:#fff}.bc[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{cursor:pointer}.bc[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:not(:first-child):before{content:" / ";color:#fff;font-weight:700}.bc[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child:not(.default){color:#fdd200;cursor:unset}.mayora-holder[_ngcontent-%COMP%]{position:absolute;width:350px;height:350px;bottom:-100px;right:0;z-index:9}.mayora-circle[_ngcontent-%COMP%]{position:absolute;left:0;top:0;background-color:#2969d6;border-radius:50%;height:100%;width:100%}.mayora-holder[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;width:280px;left:50px;bottom:90px}']}),d})()},2227:(J,Z,s)=>{s.r(Z),s.d(Z,{DirectoryModule:()=>ft});var u=s(9808),p=s(4573),M=s(8231),t=s(4893),r=s(1935);let g=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-default"]],decls:5,vars:3,consts:[[3,"title","is_cms_content","show_mayora"],[1,"bg-white","py-5","mayora-overflow-fix"],[1,"container","layout-container"]],template:function(e,o){1&e&&(t.TgZ(0,"div"),t._UZ(1,"util-page-title",0),t.TgZ(2,"div",1)(3,"div",2),t._UZ(4,"router-outlet"),t.qZA()()()),2&e&&(t.xp6(1),t.Q6J("title","Office Directory")("is_cms_content",!1)("show_mayora",!0))},directives:[r.T,p.lC],styles:[""]}),i})();var m=s(4004),T=s(8372),y=s(1884),C=s(8505),b=s(7854),x=s(2340),P=s(6947),D=s(520);let d=(()=>{class i{constructor(e){this._http=e}get_building_info(){return(0,b._B)(`${P.nm}_c`,[],this._http,`${x.N.api}/api/OdBuildings/GetBuildingInfo`,!0,!0).pipe((0,m.U)(e=>e.map(o=>(o.floors=o.floors.map(a=>(a.offices=a.offices.filter(c=>"NO OFFICE ASSIGNED YET"!=c.office.name),a)),o))))}get_office_info(e){return this._http.get(`${x.N.api}/api/OdOffices/${e}`).pipe((0,b.II)())}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(D.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var v=s(801),l=s(1135),f=s(9300),h=s(9444),_=s(3075);function q(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",9),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(3).navigate(c.floor.queryParams)}),t.TgZ(1,"div")(2,"strong"),t._uU(3),t.qZA()(),t.TgZ(4,"div",10)(5,"small"),t._uU(6),t.qZA()()()}if(2&i){const e=n.$implicit;t.xp6(3),t.hij(" ",e.floor.title," "),t.xp6(3),t.AsE(" ",e.floor.building," > ",e.floor.floor," ")}}function N(i,n){if(1&i&&(t.TgZ(0,"div"),t.YNc(1,q,7,3,"div",8),t.qZA()),2&i){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.search_result)}}function S(i,n){1&i&&(t.TgZ(0,"div",11),t._uU(1," No Results "),t.qZA())}function L(i,n){if(1&i&&(t.TgZ(0,"div",5),t.YNc(1,N,2,1,"div",6),t.YNc(2,S,2,0,"ng-template",null,7,t.W1O),t.qZA()),2&i){const e=t.MAs(3),o=t.oxw();t.xp6(1),t.Q6J("ngIf",o.search_result.length>0)("ngIfElse",e)}}let Q=(()=>{class i{constructor(e){this._router=e,this.faSearch=v.wn1,this._search=new l.X(""),this.search$=this._search.asObservable(),this.search_result=[],this._subscriptions=[]}get search(){return this._search.getValue()}set search(e){this._search.next(e)}ngOnDestroy(){this._subscriptions.forEach(e=>e.unsubscribe())}ngOnInit(){const e=this._search.pipe((0,C.b)(o=>this.search_result=[]),(0,f.h)(o=>null!=o&&""!=o),(0,T.b)(200)).subscribe(o=>{const a=this.items.map(c=>c.floors.map(F=>F.offices.filter(I=>I.office.name.toLowerCase().includes(o.trim().toLowerCase()))).reduce((F,I)=>[...F,...I],[])).reduce((c,O)=>[...c,...O],[]).slice(0,10).map(c=>(c.floor=this.get_office_floor(c),c));this.search_result=a});this._subscriptions.push(e)}navigate(e){this.search="",this.search_result=[],this._router.navigate(["/directory"],{queryParams:e})}get_office_floor(e){const o=(0,b.JG)(this.items.find(a=>a.floors.find(c=>c.floor.id==e.floorId)));return o.floor=o.floors.find(a=>a.floor.id==e.floorId).floor,{title:e.office.name,building:o.building.name,floor:o.floor.floorNoWords,queryParams:{building:o.building.dirloc,floor:o.floor.id,office:e.office.id}}}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-search"]],inputs:{items:"items"},decls:5,vars:3,consts:[[1,"input-group","mb-3","p-relative"],["id","inputGroup-sizing-default",1,"input-group-text","text-muted"],[3,"icon"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["class","search-results",4,"ngIf"],[1,"search-results"],[4,"ngIf","ngIfElse"],["no_results",""],["class","p-3 c-pointer",3,"click",4,"ngFor","ngForOf"],[1,"p-3","c-pointer",3,"click"],[1,"text-muted"],[1,"bg-white","p-3"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"span",1),t._UZ(2,"fa-icon",2),t.qZA(),t.TgZ(3,"input",3),t.NdJ("ngModelChange",function(c){return o.search=c}),t.qZA(),t.YNc(4,L,4,2,"div",4),t.qZA()),2&e&&(t.xp6(2),t.Q6J("icon",o.faSearch),t.xp6(1),t.Q6J("ngModel",o.search),t.xp6(1),t.Q6J("ngIf",o.search))},directives:[h.BN,_.Fj,_.JJ,_.On,u.O5,u.sg],styles:[".search-results[_ngcontent-%COMP%]{position:absolute;top:38px;left:0;width:100%;background-color:#fff;-webkit-box-shadow:0 2px 2px 0 rgb(0 0 0 / 14%),0 3px 1px -2px rgb(0 0 0 / 12%),0 1px 5px 0 rgb(0 0 0 / 20%)}"]}),i})();const w=function(){return["./"]},U=function(i,n){return{building:i,floor:n}},A=function(){return["text-primary","tx-active"]};function k(i,n){if(1&i&&(t.TgZ(0,"a",12)(1,"div",13)(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"span",2),t._UZ(5,"i",3),t.qZA()()()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.Q6J("routerLink",t.DdM(4,w))("queryParams",t.WLB(5,U,o.item.building.dirloc,e.floor.id))("routerLinkActive",t.DdM(8,A)),t.xp6(3),t.hij(" ",e.floor.floorNoWords," ")}}const Y=function(i,n,e){return{building:i,floor:n,office:e}};function E(i,n){if(1&i&&(t.TgZ(0,"div",7)(1,"a",1)(2,"span"),t._uU(3),t.qZA()()()),2&i){const e=n.$implicit,o=t.oxw().$implicit,a=t.oxw(2);t.xp6(1),t.Q6J("routerLink",t.DdM(4,w))("queryParams",t.kEZ(5,Y,a.item.building.dirloc,o.floor.id,e.office.id))("routerLinkActive",t.DdM(9,A)),t.xp6(2),t.hij(" ",e.office.name," ")}}function $(i,n){if(1&i&&(t.TgZ(0,"a",1)(1,"span"),t._uU(2),t.qZA()()),2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.Q6J("routerLink",t.DdM(4,w))("queryParams",t.WLB(5,U,o.item.building.dirloc,e.floor.id))("routerLinkActive",t.DdM(8,A)),t.xp6(2),t.hij(" ",e.floor.floorNoWords," ")}}function j(i,n){if(1&i&&(t.TgZ(0,"div",7),t.YNc(1,k,6,9,"a",8),t.TgZ(2,"div",9),t.YNc(3,E,4,10,"div",10),t.qZA(),t.YNc(4,$,3,9,"ng-template",null,11,t.W1O),t.qZA()),2&i){const e=n.$implicit,o=t.MAs(5);t.xp6(1),t.Q6J("ngIf",e.offices.length>0)("ngIfElse",o),t.xp6(2),t.Q6J("ngForOf",e.offices)}}function B(i,n){if(1&i&&(t.TgZ(0,"div",5),t.YNc(1,j,6,3,"div",6),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.item.floors)}}const V=function(i){return{building:i}};let H=(()=>{class i{constructor(e){this._route=e,this.is_toggled=!1,this.active_floor$=this._route.queryParamMap.pipe((0,m.U)(o=>o.get("floor")||"")),this._subscriptions=[]}ngOnInit(){const e=this._route.queryParamMap.pipe((0,m.U)(o=>o.get("building"))).subscribe(o=>{this.is_toggled=this.item.building.dirloc==o});this._subscriptions.push(e)}ngOnDestroy(){this._subscriptions.forEach(e=>e.unsubscribe())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.gz))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-sidebar"]],inputs:{item:"item"},decls:7,vars:9,consts:[[1,"d-flex","flex-column","p-3"],[1,"sidebar-link","justify-content-between","d-flex",3,"routerLink","queryParams","routerLinkActive"],[1,""],[1,"bi","bi-chevron-down"],["class","ms-2 mt-2",4,"ngIf"],[1,"ms-2","mt-2"],["class","d-flex flex-column ps-3 pt-3 pb-3 ",4,"ngFor","ngForOf"],[1,"d-flex","flex-column","ps-3","pt-3","pb-3"],["class","sidebar-link  d-flex flex-column floor",3,"routerLink","queryParams","routerLinkActive",4,"ngIf","ngIfElse"],[1,"ms-2","mt-2","floor-office"],["class","d-flex flex-column ps-3 pt-3 pb-3",4,"ngFor","ngForOf"],["no_child",""],[1,"sidebar-link","d-flex","flex-column","floor",3,"routerLink","queryParams","routerLinkActive"],[1,"d-flex","justify-content-between"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"a",1)(2,"span"),t._uU(3),t.qZA(),t.TgZ(4,"span",2),t._UZ(5,"i",3),t.qZA()(),t.YNc(6,B,2,1,"div",4),t.qZA()),2&e&&(t.xp6(1),t.Q6J("routerLink",t.DdM(5,w))("queryParams",t.VKq(6,V,o.item.building.dirloc))("routerLinkActive",t.DdM(8,A)),t.xp6(2),t.hij(" ",o.item.building.name," "),t.xp6(3),t.Q6J("ngIf",1==o.is_toggled))},directives:[p.yS,p.Od,u.O5,u.sg],styles:[".floor-office[_ngcontent-%COMP%]{display:none}.floor.tx-active[_ngcontent-%COMP%] + .floor-office[_ngcontent-%COMP%]{display:block}"]}),i})();function z(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"area",3),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw().navigate(c)}),t.qZA()}if(2&i){const e=n.$implicit,o=n.index;t.Q6J("title",e.office.name)("tabindex",o)("coords",e.office.coords)("shape",e.office.imgshape)}}const W=function(){return["/directory"]};function K(i,n){if(1&i&&(t.TgZ(0,"a",4),t._uU(1),t.qZA()),2&i){const e=n.$implicit,o=t.oxw();t.Akn(o.get_style(e)),t.Q6J("queryParams",o.get_query_param(e))("routerLinkActive","map-active")("routerLink",t.DdM(6,W)),t.xp6(1),t.hij(" ",e.office.name," ")}}let X=(()=>{class i{constructor(e,o){this._route=e,this._router=o,this.building="",this.floor="",this._subscriptions=[]}ngOnInit(){this.set_building_floor(),this.on_querymap_changes()}on_querymap_changes(){const e=this._route.queryParamMap.pipe((0,y.x)()).subscribe(o=>this.set_building_floor());this._subscriptions.push(e)}set_building_floor(){var e,o;this.building=null!==(e=this._route.snapshot.queryParamMap.get("building"))&&void 0!==e?e:"",this.floor=null!==(o=this._route.snapshot.queryParamMap.get("floor"))&&void 0!==o?o:""}get_style(e){const o=e.office.coords.split(","),a=+o[2]-+o[0],c={top:o[1]+"px",left:o[0]+"px","max-width":a+"px"};return a<120&&(c["font-size"]="13px",c.overflow="hidden",c["text-overflow"]="ellipsis"),c}get_query_param(e){return{building:this.building,floor:this.floor,office:e.office.id}}navigate(e){this._router.navigate([],{relativeTo:this._route,queryParams:{office:e.office.id},queryParamsHandling:"merge"})}ngOnDestroy(){this._subscriptions.forEach(e=>e.unsubscribe())}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(p.gz),t.Y36(p.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-directory-map"]],inputs:{offices:"offices"},decls:4,vars:2,consts:[["name","image-map"],["class","c-pointer","nohref","","target","_blank",3,"title","tabindex","coords","shape","click",4,"ngFor","ngForOf"],["class","map-link",3,"style","queryParams","routerLinkActive","routerLink",4,"ngFor","ngForOf"],["nohref","","target","_blank",1,"c-pointer",3,"title","tabindex","coords","shape","click"],[1,"map-link",3,"queryParams","routerLinkActive","routerLink"]],template:function(e,o){1&e&&(t.TgZ(0,"map",0),t.YNc(1,z,1,4,"area",1),t.qZA(),t.TgZ(2,"div"),t.YNc(3,K,2,7,"a",2),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.offices),t.xp6(2),t.Q6J("ngForOf",o.offices))},directives:[u.sg,p.yS,p.Od],styles:[".map-link[_ngcontent-%COMP%]{position:absolute;padding:5px;text-decoration:none;color:#6c757d}.map-active[_ngcontent-%COMP%]{font-weight:700;color:#132540;text-decoration:underline}"]}),i})();var R=s(9817);function G(i,n){1&i&&t._UZ(0,"app-sidebar",10),2&i&&t.Q6J("item",n.$implicit)}function tt(i,n){if(1&i&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&i){const e=t.oxw(4);t.xp6(1),t.hij(" - ",e.selected_office.name,"")}}function et(i,n){if(1&i&&(t.TgZ(0,"div",19),t._uU(1),t.YNc(2,tt,2,1,"span",20),t.qZA()),2&i){const e=t.oxw(3);t.xp6(1),t.hij(" ",e.selected_floor.floorNoWords,""),t.xp6(1),t.Q6J("ngIf",e.selected_office)}}function it(i,n){if(1&i&&t._UZ(0,"app-directory-map",21),2&i){const e=t.oxw(3);t.Q6J("offices",e.floor_offices)}}function ot(i,n){if(1&i&&(t.TgZ(0,"div")(1,"div",11),t._UZ(2,"div",12),t._uU(3),t.qZA(),t.YNc(4,et,3,2,"div",13),t.TgZ(5,"div",14)(6,"div",15)(7,"div",16),t._UZ(8,"img",17),t.YNc(9,it,1,1,"app-directory-map",18),t.qZA()()()()),2&i){const e=t.oxw(2);t.xp6(3),t.hij(" ",e.selected_building.name," "),t.xp6(1),t.Q6J("ngIf",e.selected_floor),t.xp6(4),t.s9C("src",e.image_path,t.LSH),t.xp6(1),t.Q6J("ngIf",e.floor_offices&&e.floor_offices.length>0)}}const nt=function(i){return{active:i}};function rt(i,n){if(1&i){const e=t.EpF();t.TgZ(0,"div",24)(1,"div",25),t.NdJ("click",function(){const c=t.CHM(e).$implicit;return t.oxw(3).navigate_building(c.building.dirloc)}),t.ALo(2,"async"),t.TgZ(3,"div",16),t._UZ(4,"img",26),t.ALo(5,"safeUrl"),t._UZ(6,"div",27),t.qZA(),t.TgZ(7,"div",28)(8,"strong"),t._uU(9),t.qZA()()()()}if(2&i){const e=n.$implicit,o=t.oxw(3);t.xp6(1),t.Q6J("ngClass",t.VKq(7,nt,e.building.dirloc==t.lcZ(2,3,o.building))),t.xp6(3),t.Q6J("src",t.lcZ(5,5,o.get_image_path(e.building.uploadimage)),t.LSH),t.xp6(5),t.hij(" ",e.building.name," ")}}function st(i,n){if(1&i&&(t.TgZ(0,"div",22),t._UZ(1,"div",12),t._uU(2," Browse by Building "),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,rt,10,9,"div",23),t.qZA()),2&i){const e=t.oxw(2);t.xp6(4),t.Q6J("ngForOf",e.sidebar)}}function ct(i,n){if(1&i&&(t.TgZ(0,"div",2)(1,"div",3),t._UZ(2,"app-search",4),t.TgZ(3,"div",5),t.YNc(4,G,1,1,"app-sidebar",6),t.qZA()(),t.TgZ(5,"div",7),t.YNc(6,ot,10,4,"div",8),t.YNc(7,st,5,1,"ng-template",null,9,t.W1O),t.qZA()()),2&i){const e=t.MAs(8),o=t.oxw();t.xp6(2),t.Q6J("items",o.sidebar),t.xp6(2),t.Q6J("ngForOf",o.sidebar),t.xp6(2),t.Q6J("ngIf",o.selected_floor)("ngIfElse",e)}}function lt(i,n){}const at=[{path:"",component:g,children:[{path:"",component:(()=>{class i{constructor(e,o,a){this._directory_service=e,this._route=o,this._router=a,this.sidebar=[],this._subscriptions=[],this.floor_offices=[],this.image_path="",this.building=this._route.queryParamMap.pipe((0,m.U)(c=>c.get("building")))}ngOnDestroy(){this._subscriptions.forEach(e=>e.unsubscribe())}ngOnInit(){this.on_url_changes(),this._directory_service.get_building_info().subscribe(e=>{this.sidebar=e,this.set_selected_building(),this.set_selected_floor(),this.set_selected_office()})}on_url_changes(){const e=this._route.queryParamMap.pipe((0,T.b)(200),(0,y.x)(),(0,C.b)(o=>{this.selected_building=void 0,this.selected_floor=void 0,this.selected_office=void 0,this.floor_offices=[]})).subscribe(o=>{this.set_selected_building(),this.set_selected_floor(),this.set_selected_office()});this._subscriptions.push(e)}set_selected_building(){const e=this._route.snapshot.queryParamMap.get("building");if(!e)return;const o=this.sidebar.filter(a=>a.building.dirloc===e);o.length>0&&(this.selected_building=o[0].building)}set_selected_floor(){const e=this._route.snapshot.queryParamMap.get("floor");if(!e)return;const o=this.sidebar.map(a=>a.floors.filter(c=>+c.floor.id==+e).map(c=>({floor:c.floor,offices:c.offices}))).reduce((a,c)=>[...a,...c],[]);o.length>0&&(this.floor_offices=o[0].offices,this.selected_floor=o[0].floor,this.image_path=`${x.N.api}/assets/staticdata/${this._route.snapshot.queryParamMap.get("building")}/${this.selected_floor.floorimage}`)}set_selected_office(){const e=this._route.snapshot.queryParamMap.get("office");!e||this._directory_service.get_office_info(+e).subscribe(o=>this.selected_office=o)}get_top(e){return+e.split(",")[1]+5}get_left(e){return+e.split(",")[0]+5}get_image_path(e){return(0,b.qo)(e)}navigate_building(e){this._router.navigate([],{relativeTo:this._route,queryParams:{building:e}})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(d),t.Y36(p.gz),t.Y36(p.F0))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-directory-view-page"]],decls:3,vars:2,consts:[["class","row",4,"ngIf","ngIfElse"],["loading",""],[1,"row"],[1,"col-lg-3","mb-5"],[3,"items"],[1,"sidebar-bg"],[3,"item",4,"ngFor","ngForOf"],[1,"col-lg-9","p-relative"],[4,"ngIf","ngIfElse"],["no_floor_selected",""],[3,"item"],[1,"cms-title","p-relative"],[1,"priority"],["class","text-muted",4,"ngIf"],[1,"d-flex","map-content","mt-4"],[1,"m-auto"],[1,"p-relative"],["alt","","usemap","#image-map",3,"src"],[3,"offices",4,"ngIf"],[1,"text-muted"],[4,"ngIf"],[3,"offices"],[1,"cms-title","mb-3","p-relative"],["class","col-lg-4",4,"ngFor","ngForOf"],[1,"col-lg-4"],[1,"d-flex","flex-column","c-pointer","bldf",3,"ngClass","click"],[1,"building-img",3,"src"],[1,"bldf-layer"],[1,"text-center",2,"font-size","24px"]],template:function(e,o){if(1&e&&(t.YNc(0,ct,9,4,"div",0),t.YNc(1,lt,0,0,"ng-template",null,1,t.W1O)),2&e){const a=t.MAs(2);t.Q6J("ngIf",o.sidebar.length>0)("ngIfElse",a)}},directives:[u.O5,Q,u.sg,H,X,u.mk],pipes:[u.Ov,R.Q],styles:["img[_ngcontent-%COMP%]{max-width:none!important}.map-content[_ngcontent-%COMP%]{overflow:auto}.building-img[_ngcontent-%COMP%]{height:400px;width:100%;object-fit:cover;border-radius:20px}.bldf[_ngcontent-%COMP%]:hover, .bldf.active[_ngcontent-%COMP%]{text-decoration:underline}.bldf[_ngcontent-%COMP%]{position:relative}.bldf-layer[_ngcontent-%COMP%]{display:none;border-radius:20px;position:absolute;background-color:#ffffff80;height:100%;width:100%;top:0;left:0;z-index:2}.bldf.active[_ngcontent-%COMP%]   .bldf-layer[_ngcontent-%COMP%]{display:block}"]}),i})()}]}];let dt=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[p.Bz.forChild(at)],p.Bz]}),i})();var pt=s(6162);let ft=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[u.ez,dt,M.A,p.Bz,h.uH,_.u5,pt.l1]]}),i})()},1884:(J,Z,s)=>{s.d(Z,{x:()=>t});var u=s(4671),p=s(4482),M=s(5403);function t(g,m=u.y){return g=null!=g?g:r,(0,p.e)((T,y)=>{let C,b=!0;T.subscribe((0,M.x)(y,x=>{const P=m(x);(b||!g(C,P))&&(b=!1,C=P,y.next(x))}))})}function r(g,m){return g===m}}}]);