"use strict";(self.webpackChunkmakatiportal2022=self.webpackChunkmakatiportal2022||[]).push([[595],{9595:(Oe,U,c)=>{c.r(U),c.d(U,{ContentModule:()=>ke});var f=c(9808),v=c(4776),e=c(4893),A=c(3650);let E=(()=>{class o{constructor(t,i){this._auth_service=t,this.router=i}canActivate(t,i){return!!this._auth_service.is_authenticated||this.router.createUrlTree(["/auth"])}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(A.e),e.LFG(v.F0))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var J=c(1135),q=c(1884),N=c(8372),P=c(7787),V=c(9841),Q=c(4004),x=c(7854),Y=c(2340),I=c(6947),j=c(520);let $=(()=>{class o{constructor(t){this.http=t}get_featured(t=!0){return(0,x._B)(I.eU,[],this.http,`${Y.N.api}/api/GalleryAlbum/Featured`,t,!0)}get_album(t,i,r=!0){return(0,x._B)(`${I.eU}_${i+t}_c`,[],this.http,`${Y.N.api}/api/GalleryAlbum/ByYearMonth/${i}/${t}`,r,!1)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(j.eN))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var Z=c(6470),l=c(3075),S=c(4986),z=c(8306),H=c(3532);function X(o,n){1&o&&(e.TgZ(0,"span"),e._uU(1,".\xa0"),e.qZA())}let L=(()=>{class o{constructor(){this.message="Loading",this.description="Please wait.",this.is_loading=!1,this.image="/assets/images/illustrations/undraw_my_personal_files_re_3q0p.svg",this.dot=[],this._subs=[]}ngOnInit(){if(!0===this.is_loading){const t=function K(o=0,n=S.z){return o<0&&(o=0),function k(o=0,n,t=S.P){let i=-1;return null!=n&&((0,H.K)(n)?t=n:i=n),new z.y(r=>{let a=function D(o){return o instanceof Date&&!isNaN(o)}(o)?+o-t.now():o;a<0&&(a=0);let s=0;return t.schedule(function(){r.closed||(r.next(s++),0<=i?this.schedule(void 0,i):r.complete())},a)})}(o,o,n)}(500).subscribe(i=>{this.dot.length>=3?this.dot=[]:this.dot.push(1)});this._subs.push(t)}}ngOnDestroy(){this._subs.forEach(t=>t.unsubscribe())}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["util-message"]],inputs:{message:"message",description:"description",is_loading:"is_loading",image:"image"},decls:8,vars:4,consts:[[1,"d-flex","flex-column","align-items-center"],["width","300px","alt","",1,"m-auto","mb-3",3,"src"],[1,"sheader","p-relative"],[1,"ld"],[4,"ngFor","ngForOf"],[1,"sheadersub","mb-3","text-center"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"div",2),e._uU(3),e.TgZ(4,"div",3),e.YNc(5,X,2,0,"span",4),e.qZA()(),e.TgZ(6,"div",5),e._uU(7),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("src",i.image,e.LSH),e.xp6(2),e.hij(" ",i.message," "),e.xp6(2),e.Q6J("ngForOf",i.dot),e.xp6(2),e.hij(" ",i.description," "))},directives:[f.sg],styles:[".ld[_ngcontent-%COMP%]{position:absolute;right:-2.1em;top:0;width:2em}"]}),o})();var R=c(5416);function W(o,n){if(1&o&&(e.TgZ(0,"div",13)(1,"div"),e._UZ(2,"img",14),e.ALo(3,"safeUrl"),e.TgZ(4,"div",15),e._uU(5),e.qZA()()()),2&o){const t=n.$implicit;e.xp6(2),e.Q6J("src",e.lcZ(3,2,t.content),e.LSH),e.xp6(3),e.hij(" ",t.albumName," ")}}function O(o,n){if(1&o&&(e.TgZ(0,"option",16),e._uU(1),e.qZA()),2&o){const t=n.index,i=e.oxw(2);e.s9C("value",t+1),e.xp6(1),e.Oqu(i.months[t])}}function ee(o,n){if(1&o&&(e.TgZ(0,"option",16),e._uU(1),e.qZA()),2&o){const t=n.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function te(o,n){if(1&o&&(e.TgZ(0,"div",13)(1,"div"),e._UZ(2,"img",14),e.ALo(3,"safeUrl"),e.TgZ(4,"div",15),e._uU(5),e.qZA()()()),2&o){const t=n.$implicit;e.xp6(2),e.Q6J("src",e.lcZ(3,2,t.content),e.LSH),e.xp6(3),e.hij(" ",t.albumName," ")}}function oe(o,n){if(1&o&&(e.TgZ(0,"div",3),e.YNc(1,te,6,4,"div",4),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.month_album)}}function ie(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"div",2),e._uU(2," Featured Album "),e.qZA(),e.TgZ(3,"div",3),e.YNc(4,W,6,4,"div",4),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"div",5)(7,"span",6),e._uU(8," Date: "),e.qZA(),e.TgZ(9,"div",7)(10,"div",8)(11,"select",9),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().month=r}),e.YNc(12,O,2,2,"option",10),e.qZA()(),e.TgZ(13,"div",11)(14,"select",9),e.NdJ("ngModelChange",function(r){return e.CHM(t),e.oxw().year=r}),e.YNc(15,ee,2,2,"option",10),e.qZA()()()(),e.TgZ(16,"div",2),e._uU(17," All Album "),e.qZA(),e.YNc(18,oe,2,1,"div",12),e.qZA()}if(2&o){const t=e.oxw(),i=e.MAs(2);e.xp6(4),e.Q6J("ngForOf",t.featureds),e.xp6(7),e.Q6J("ngModel",t.month)("disabled",1==t.is_loading_album),e.xp6(1),e.Q6J("ngForOf",t.months),e.xp6(2),e.Q6J("ngModel",t.year)("disabled",1==t.is_loading_album),e.xp6(1),e.Q6J("ngForOf",t.years),e.xp6(3),e.Q6J("ngIf",0==t.is_loading_album)("ngIfElse",i)}}function ne(o,n){1&o&&e._UZ(0,"util-message",17),2&o&&e.Q6J("message","Loading")("is_loading",!0)("description","Please wait while we load the albums.")("image","/assets/images/illustrations/undraw_photograph_re_up3b.svg")}let re=(()=>{class o{constructor(t,i,r,a){this._mayors_corner_service=t,this._alert_service=i,this._route=r,this._router=a,this._sub=[],this.featureds=[],this.month_album=[],this.is_loading_content=!1,this.is_loading_album=!1,this.months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.years=[],this._year=this._route.snapshot.queryParamMap.get("year"),this._month=this._route.snapshot.queryParamMap.get("month")}get year(){let t=this._year;return t?+t:(new Date).getFullYear()}set year(t){this._router.navigate([],{relativeTo:this._route,queryParams:{month:this.month,year:t},queryParamsHandling:"merge"})}get month(){let t=this._month;return t?+t:(new Date).getMonth()+1}set month(t){this._router.navigate([],{relativeTo:this._route,queryParams:{month:t,year:this.year},queryParamsHandling:"merge"})}ngOnInit(){this.refresh_content();for(let r=(new Date).getFullYear();r>=2010;r--)this.years.push(r);const i=(0,V.a)([this._route.queryParamMap.pipe((0,Q.U)(r=>r.get("month"))),this._route.queryParamMap.pipe((0,Q.U)(r=>r.get("year")))]).pipe((0,N.b)(200),(0,q.x)()).subscribe(r=>{var a,s;return this.show_montly_album(+(null!==(a=r[0])&&void 0!==a?a:this.month),+(null!==(s=r[1])&&void 0!==s?s:this.year))});this._sub.push(i)}show_montly_album(t,i){this.is_loading_album=!0,this._mayors_corner_service.get_album(null!=t?t:this.month,null!=i?i:this.year).subscribe({next:r=>{this.is_loading_album=!1,this.month_album=r.map(a=>(a.content=(0,x.qo)(a.content),a))},error:r=>{this.is_loading_album=!1,this._alert_service.http_error(r)}})}refresh_content(){this.is_loading_content=!0,this._mayors_corner_service.get_featured().subscribe({next:t=>{this.featureds=t.map(i=>(i.content=(0,x.qo)(i.content),i)).slice(0,4),this.is_loading_content=!1},error:t=>{this._alert_service.http_error(t)}})}ngOnDestroy(){this._sub.forEach(t=>t.unsubscribe())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36($),e.Y36(Z.c),e.Y36(v.gz),e.Y36(v.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-mayors-corner-gallery"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"sub-content-header","mb-3"],[1,"row"],["class","col-lg-6 mb-5",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","mb-4"],[2,"font-weight","600","font-size","24px"],[1,"ms-2","row","flex-grow-1"],[1,"col-8","col-lg-4"],[1,"form-select","sform-control",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-4","col-lg-3"],["class","row",4,"ngIf","ngIfElse"],[1,"col-lg-6","mb-5"],[1,"gallery-thumb",3,"src"],[1,"album-name"],[3,"value"],[3,"message","is_loading","description","image"]],template:function(t,i){if(1&t&&(e.YNc(0,ie,19,9,"div",0),e.YNc(1,ne,1,4,"ng-template",null,1,e.W1O)),2&t){const r=e.MAs(2);e.Q6J("ngIf",0==i.is_loading_content)("ngIfElse",r)}},directives:[f.O5,f.sg,l.EJ,l.JJ,l.On,l.YN,l.Kr,L],pipes:[R.Q],styles:[""]}),o})();const se=function(o){return{"text-primary tx-active":o}};function ae(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",11)(1,"div",12),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().navigate(a)}),e.TgZ(2,"span",13),e.ALo(3,"async"),e._uU(4),e.qZA()()()}if(2&o){const t=n.$implicit,i=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(4,se,e.lcZ(3,2,i.active_cont$)==t)),e.xp6(2),e.hij(" ",t," ")}}function le(o,n){1&o&&(e.TgZ(0,"div"),e._UZ(1,"app-mayors-corner-gallery"),e.qZA())}function ce(o,n){1&o&&(e.TgZ(0,"div"),e._uU(1,"Invalid Selection"),e.qZA())}let me=(()=>{class o{constructor(t,i){this.route=t,this.router=i,this.sidebar_content=["Gallery","Photo Release","Speeches","Achievements"],this._active_cont=new J.X(""),this.active_cont$=this._active_cont.asObservable(),this._subs=[]}ngOnInit(){const t=this.route.params.pipe((0,q.x)(),(0,N.b)(200)).subscribe(i=>{this.set_active_cont()});this._subs.push(t)}set_active_cont(){let t=this.route.snapshot.paramMap.get("type");t=t.toLowerCase().trim().replace(/-/g," ");const i=this.sidebar_content.filter(r=>r.toLowerCase().trim()==t);!i||this._active_cont.next(i[0])}navigate(t){let i=t.toLowerCase().trim().replace(/ /g,"-");this.router.navigate(["/content/mayors-corner",i])}ngOnDestroy(){this._subs.forEach(t=>t.unsubscribe())}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(v.gz),e.Y36(v.F0))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-mayors-corner"]],decls:13,vars:8,consts:[[3,"title","is_cms_content","show_mayora"],[1,"bg-white","py-5","mayora-overflow-fix"],[1,"container","layout-container"],[1,"row"],[1,"col-md-4","mb-5"],[1,"sidebar-bg"],["class","d-flex flex-column p-3",4,"ngFor","ngForOf"],[1,"col-md-8",3,"ngSwitch"],[1,"cms-cont","ms-3"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","justify-content-between","c-pointer",3,"click"],[1,"pb-3","tx",3,"ngClass"]],template:function(t,i){1&t&&(e.TgZ(0,"div"),e._UZ(1,"util-page-title",0),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e.YNc(7,ae,5,6,"div",6),e.qZA()(),e.TgZ(8,"div",7),e.ALo(9,"async"),e.TgZ(10,"div",8),e.YNc(11,le,2,0,"div",9),e.YNc(12,ce,2,0,"div",10),e.qZA()()()()()()),2&t&&(e.xp6(1),e.Q6J("title","The Mayor's Corner")("is_cms_content",!1)("show_mayora",!0),e.xp6(6),e.Q6J("ngForOf",i.sidebar_content),e.xp6(1),e.Q6J("ngSwitch",e.lcZ(9,6,i.active_cont$)),e.xp6(3),e.Q6J("ngSwitchCase","Gallery"))},directives:[P.T,f.sg,f.mk,f.RF,f.n9,re,f.ED],pipes:[f.Ov],styles:[""]}),o})(),de=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-news"]],decls:6,vars:2,consts:[["cms",""],[3,"title","is_cms_content"],[1,"bg-white","py-5","mayora-overflow-fix"],[1,"container"]],template:function(t,i){1&t&&(e.TgZ(0,"div",null,0),e._UZ(2,"util-page-title",1),e.TgZ(3,"div",2)(4,"div",3),e._uU(5," Lorem ipsum dolor, sit amet consectetur adipisicing elit. Eveniet illo odio amet possimus eaque atque! Minus impedit aut modi consequatur ea maiores placeat quaerat. Nam, inventore deleniti? Exercitationem, non quis! "),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("title","Makati News")("is_cms_content",!1))},directives:[P.T],styles:[""]}),o})();var G=c(695),pe=c(3900),ue=c(9646),B=c(628),fe=c(2313),w=c(3290),ge=c(655),h=(()=>{return(o=h||(h={}))[o.Up=1]="Up",o[o.Down=3]="Down",o[o.Right=6]="Right",o[o.Left=8]="Left",o[o.UpMirrored=2]="UpMirrored",o[o.DownMirrored=4]="DownMirrored",o[o.LeftMirrored=5]="LeftMirrored",o[o.RightMirrored=7]="RightMirrored",o[o.Default=0]="Default",o[o.NotJpeg=-1]="NotJpeg",o[o.NotDefined=-2]="NotDefined",h;var o})();class p{}p.getOrientation=o=>new Promise((n,t)=>{try{const i=new FileReader;i.onload=()=>{const r=new DataView(i.result);if(!r.byteLength||65496!==r.getUint16(0,!1))return n(h.NotDefined);const a=r.byteLength;let s=2;for(;s<a;){const u=r.getUint16(s,!1);if(s+=2,65505===u){if(1165519206!==r.getUint32(s+=2,!1))return n(h.NotJpeg);const _=18761===r.getUint16(s+=6,!1);s+=r.getUint32(s+4,_);const g=r.getUint16(s,_);s+=2;for(let m=0;m<g;m++)if(274===r.getUint16(s+12*m,_))return n(r.getUint16(s+12*m+8,_))}else{if(65280!=(65280&u))break;s+=r.getUint16(s,!1)}}return n(h.NotJpeg)},i.readAsArrayBuffer(o)}catch(i){return t(h.Default)}}),p.uploadFile=(o,n=!0,t=!1)=>new Promise(function(i,r){const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);Promise.resolve(a).then(s=>s?p.generateUploadInputNative(window.document,n,t):p.generateUploadInputRenderer(o,n,t)).then(s=>{const u=s?Array.from(s):[],_=u.map(d=>p.getOrientation(d)),g=u.map(d=>p.fileToDataURL(d));let m=[];Promise.all(_).then(d=>(m=d,Promise.all(g))).then(d=>{const b=d.map((y,F)=>({image:y.dataUrl,orientation:m[F],fileName:y.fileName}));i(n?b:b[0])})}).catch(s=>r(s))}),p.fileToDataURL=o=>new Promise((n,t)=>{const i=new FileReader;i.onload=r=>{n({dataUrl:r.target.result,fileName:o.name})};try{i.readAsDataURL(o)}catch(r){t(`ngx-image-compress - probably no file have been selected: ${r}`)}}),p.generateUploadInputRenderer=(o,n=!0,t=!1)=>{let i=!1;return new Promise((r,a)=>{const s=o.createElement("input");o.setStyle(s,"display","none"),o.setProperty(s,"type","file"),o.setProperty(s,"accept","image/*"),n&&o.setProperty(s,"multiple","true"),o.listen(s,"click",u=>{u.target.value=""}),o.listen(s,"change",u=>{i=!0,r(u.target.files)}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{i||a(new Error("file upload on blur - no file selected"))},300)},{once:!0}),s.click()})},p.generateUploadInputNative=(o,n=!0,t=!1)=>{let i=!1;return new Promise((r,a)=>{const s=o.createElement("input");s.id="upload-input"+new Date,s.style.display="none",s.setAttribute("type","file"),n&&s.setAttribute("multiple","true"),o.body.appendChild(s),s.addEventListener("change",()=>{i=!0,r(s.files),o.body.removeChild(o.getElementById(s.id))},{once:!0}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{!i&&o.getElementById(s.id)&&(a(new Error("file upload on blur - no file selected")),o.body.removeChild(o.getElementById(s.id)))},300)},{once:!0}),s.click()})},p.compress=(o,n,t,i=50,r=50,a=0,s=0)=>new Promise(function(u,_){r/=100,i/=100;const g=new Image;g.onload=()=>{const m=t.createElement("canvas"),d=m.getContext("2d");if(!d)return _("No canvas context available");let b=g.naturalWidth,y=g.naturalHeight;if(!CSS.supports("image-orientation","from-image")&&(n===h.Right||n===h.Left)){const We=b;b=y,y=We}i=Math.min(i,a?a/b:1,s?s/y:1),m.width=b*i,m.height=y*i;const M=Math.PI/180;CSS.supports("image-orientation","from-image")||n===h.Up?d.drawImage(g,0,0,m.width,m.height):n===h.Right?(d.save(),d.rotate(90*M),d.translate(0,-m.width),d.drawImage(g,0,0,m.height,m.width),d.restore()):n===h.Left?(d.save(),d.rotate(-90*M),d.translate(-m.width,0),d.drawImage(g,0,0,m.height,m.width),d.restore()):n===h.Down?(d.save(),d.rotate(180*M),d.translate(-m.width,-m.height),d.drawImage(g,0,0,m.width,m.height),d.restore()):d.drawImage(g,0,0,m.width,m.height);const Xe=o.substr(5,o.split(";")[0].length-5),Re=m.toDataURL(Xe,r);u(Re)},g.onerror=m=>_(m),g.src=o}),p.byteCount=o=>encodeURI(o).split(/%..|./).length-1,p.getImageMaxSize=(o,n,t)=>(0,ge.mG)(void 0,void 0,void 0,function*(){const r=u=>(u/1024/1024).toFixed(2);n&&console.debug("NgxImageCompress - Opening upload window");let s,a=yield p.uploadFile(t,!1);for(let u=0;u<10;u++){const _=p.byteCount(a.image);s=yield p.compress(a.image,a.orientation,t,50,100);const g=p.byteCount(s);if(console.debug("NgxImageCompress -","Compression from",r(_),"MB to",r(g),"MB"),g>=_)throw 0===u?(n&&console.debug("NgxImageCompress -","File can't be reduced at all - returning the original",r(_),"MB large"),a.image):(n&&console.debug("NgxImageCompress -","File can't be reduced more - returning the best we can, which is ",r(_),"MB large"),a.image);if(g<1024*o*1024)return n&&console.debug("NgxImageCompress -","Here your file",r(g),"MB large"),s;if(9===u)throw n&&console.debug("NgxImageCompress -","File can't reach the desired size after",10,"tries. Returning file ",r(_),"MB large"),a.image;n&&console.debug("NgxImageCompress -","Reached",r(g),"MB large. Trying another time after",u+1,"times"),a.image=s}throw n&&console.debug("NgxImageCompress - Unexpected error"),""});let he=(()=>{class o{constructor(t){this.DOC_ORIENTATION=h,this.render=t.createRenderer(null,null)}byteCount(t){return p.byteCount(t)}getOrientation(t){return p.getOrientation(t)}uploadFile(){return p.uploadFile(this.render,!1)}uploadMultipleFiles(){return p.uploadFile(this.render,!0)}uploadFileOrReject(){return p.uploadFile(this.render,!1,!0)}uploadMultipleFilesOrReject(){return p.uploadFile(this.render,!0,!0)}compressFile(t,i,r=50,a=50,s=0,u=0){return p.compress(t,i,this.render,r,a,s,u)}uploadAndGetImageWithMaxSize(t=1,i=!1){return p.getImageMaxSize(t,i,this.render)}}return o.\u0275fac=function(t){return new(t||o)(e.LFG(e.FYo))},o.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})(),ve=(()=>{class o{constructor(t){this.imageCompress=t,this.base64_image="",this.default_image="/assets/images/illustrations/undraw_male_avatar_re_y880.svg",this.on_change=new e.vpe,this.img=this.default_image}ngOnInit(){this.base64_image&&(this.img=this.base64_image)}compressFile(){this.imageCompress.uploadFile().then(({image:t,orientation:i})=>{this.imageCompress.compressFile(t,i,50,50,200,200).then(r=>{this.on_change.emit(r)})})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(he))},o.\u0275cmp=e.Xpm({type:o,selectors:[["util-img-base64"]],inputs:{base64_image:"base64_image",default_image:"default_image"},outputs:{on_change:"on_change"},decls:5,vars:1,consts:[[1,"p-relative","img-holder"],["alt","","width","100%",3,"src"],[1,"upload-btn","c-pointer",3,"click"]],template:function(t,i){1&t&&(e.TgZ(0,"div")(1,"div",0),e._UZ(2,"img",1),e.TgZ(3,"span",2),e.NdJ("click",function(){return i.compressFile()}),e._uU(4,"Edit"),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("src",i.img,e.LSH))},styles:["img[_ngcontent-%COMP%]{aspect-ratio:1 / 1;object-fit:cover}.upload-btn[_ngcontent-%COMP%]{background-color:#00000080;color:#fff;text-align:center;width:100%;position:absolute;bottom:0;left:0;padding:.5em 0}.img-holder[_ngcontent-%COMP%]{border-radius:50%;overflow:hidden}"]}),o})();function xe(o,n){if(1&o&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.validation_msg("firstName","First Name")," ")}}function be(o,n){if(1&o&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.validation_msg("middleName","Middle Name")," ")}}function ye(o,n){if(1&o&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.validation_msg("lastName","Last Name")," ")}}function we(o,n){if(1&o&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.validation_msg("birthdate","Birthdate")," ")}}function Ce(o,n){if(1&o&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.validation_msg("gender","Gender")," ")}}function Ze(o,n){1&o&&(e.TgZ(0,"div")(1,"small",27),e._uU(2,"reCAPTCHA is required."),e.qZA()())}const C=function(o){return{"is-invalid":o}};function Pe(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().submit()}),e.TgZ(1,"div",2)(2,"div",3)(3,"div",4)(4,"label",5),e._uU(5,"First Name"),e.qZA(),e._UZ(6,"input",6),e.YNc(7,xe,2,1,"div",7),e.qZA(),e.TgZ(8,"div",4)(9,"label",8),e._uU(10,"Middle Name"),e.qZA(),e._UZ(11,"input",9),e.YNc(12,be,2,1,"div",7),e.qZA(),e.TgZ(13,"div",4)(14,"label",10),e._uU(15,"Last Name"),e.qZA(),e._UZ(16,"input",11),e.YNc(17,ye,2,1,"div",7),e.qZA(),e.TgZ(18,"div",4)(19,"label",12),e._uU(20,"Birthdate"),e.qZA(),e._UZ(21,"input",13),e.ALo(22,"date"),e.YNc(23,we,2,1,"div",7),e.qZA(),e.TgZ(24,"div",2)(25,"div",14)(26,"div",4)(27,"label",15),e._uU(28,"Gender"),e.qZA(),e.TgZ(29,"select",16)(30,"option",17),e._uU(31,"Please Select"),e.qZA(),e.TgZ(32,"option",18),e._uU(33,"Male"),e.qZA(),e.TgZ(34,"option",19),e._uU(35,"Female"),e.qZA()(),e.YNc(36,Ce,2,1,"div",7),e.qZA()()(),e.TgZ(37,"div",4),e._UZ(38,"re-captcha",20),e.YNc(39,Ze,3,0,"div",21),e.qZA()(),e.TgZ(40,"div",22)(41,"div",23)(42,"util-img-base64",24),e.NdJ("on_change",function(r){return e.CHM(t),e.oxw().image_change(r)}),e.qZA()()()(),e.TgZ(43,"button",25),e._uU(44,"Submit"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngClass",e.VKq(19,C,t.control_is_invalid("firstName"))),e.xp6(1),e.Q6J("ngIf",t.control_is_invalid("firstName")),e.xp6(4),e.Q6J("ngClass",e.VKq(21,C,t.control_is_invalid("middleName"))),e.xp6(1),e.Q6J("ngIf",t.control_is_invalid("middleName")),e.xp6(4),e.Q6J("ngClass",e.VKq(23,C,t.control_is_invalid("lastName"))),e.xp6(1),e.Q6J("ngIf",t.control_is_invalid("lastName")),e.xp6(4),e.Q6J("max",e.xi3(22,16,t.now,"y-LL-dd"))("ngClass",e.VKq(25,C,t.control_is_invalid("birthdate"))),e.xp6(2),e.Q6J("ngIf",t.control_is_invalid("birthdate")),e.xp6(6),e.Q6J("ngClass",e.VKq(27,C,t.control_is_invalid("gender"))),e.xp6(7),e.Q6J("ngIf",t.control_is_invalid("gender")),e.xp6(3),e.Q6J("ngIf",t.control_is_invalid("recaptcha")),e.xp6(3),e.Q6J("base64_image",t.img)("default_image",t.img),e.xp6(1),e.Q6J("disabled",t.is_pending)}}let Te=(()=>{class o extends B.l{constructor(t,i,r,a,s){super(t),this._fb=i,this._profile_service=r,this._router=a,this._sanitizer=s,this.img=x.tb}ngOnInit(){this.now=new Date,this.initialValue=this._profile_service.get_profile(!0).pipe((0,pe.w)(t=>t?(0,ue.of)(t):this._profile_service.get_profile(!1))).subscribe({next:t=>{this.initialValue=t,this.initialValue.birthdate&&(this.initialValue.birthdate=this.initialValue.birthdate.split("T")[0]),this.set_image(),this.initialize(this._fb.group({profilePicture:[""],firstName:["",l.kI.required],middleName:[""],lastName:["",l.kI.required],birthdate:["",l.kI.required],gender:["",l.kI.required],recaptcha:["",l.kI.required]}))},error:t=>{this._alert_service.add_alert("Could not load profile."),this._router.navigate(["/"])}})}image_change(t){var i;null===(i=this.ctrl("profilePicture"))||void 0===i||i.setValue(t.split(",")[1])}set_image(){if(this.initialValue.profilePicture)try{return void(this.img=this._sanitizer.bypassSecurityTrustUrl((0,x.qo)(this.initialValue.profilePicture)))}catch(t){return void(this.img=this.get_default_image())}this.img=this.get_default_image()}get_default_image(){return this.initialValue.gender?"MALE"==this.initialValue.gender.toUpperCase().trim()?x.tb:x.Ld:x.tb}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.c),e.Y36(l.qu),e.Y36(G.H),e.Y36(v.F0),e.Y36(fe.H7))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-profile-form"]],features:[e.qOj],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-8"],[1,"mb-3"],["for","firstName",1,"form-label","sform-label"],["type","text","id","firstName","placeholder","Type here","autocomplete","false","formControlName","firstName","tabindex","1",1,"form-control","sform-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","middleName",1,"form-label","sform-label"],["type","text","id","middleName","placeholder","Type here","autocomplete","false","formControlName","middleName","tabindex","2",1,"form-control","sform-control",3,"ngClass"],["for","lastName",1,"form-label","sform-label"],["type","text","id","lastName","placeholder","Type here","autocomplete","false","formControlName","lastName","tabindex","3",1,"form-control","sform-control",3,"ngClass"],["for","birthdate",1,"form-label","sform-label"],["type","date","id","birthdate","autocomplete","false","formControlName","birthdate","tabindex","4",1,"form-control","sform-control",3,"max","ngClass"],[1,"col-lg-5"],["for","gender",1,"form-label","sform-label"],["id","gender","formControlName","gender","tabindex","5",1,"form-select","sform-control",3,"ngClass"],["selected","","value",""],["value","MALE"],["value","FEMALE"],["tabindex","2","formControlName","recaptcha"],[4,"ngIf"],[1,"col-lg-4"],[1,"d-none","d-lg-block"],[3,"base64_image","default_image","on_change"],["type","submit","tabindex","3",1,"btn","btn-primary","px-5","py-2","mt-3",3,"disabled"],[1,"invalid-feedback"],[1,"text-danger"]],template:function(t,i){1&t&&e.YNc(0,Pe,45,29,"form",0),2&t&&e.Q6J("ngIf",i.form)},directives:[f.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,f.mk,l.EJ,l.YN,l.Kr,w.wT,w.Vd,ve],pipes:[f.uU],styles:[""]}),o})();function Fe(o,n){if(1&o&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.validation_msg("oldPassword","Old Password")," ")}}const Ue=function(){return{name:"pattern",msg:"New Password should be atleast 6 characters length that consists of alteast 1 Uppercase, 1 Lowercase, 1 Numeric and 1 Special Character."}},Ae=function(o){return[o]};function Je(o,n){if(1&o&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.validation_msg("newPassword","New Password",null,e.VKq(2,Ae,e.DdM(1,Ue)))," ")}}function qe(o,n){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&o){const t=e.oxw(3);e.xp6(1),e.Oqu(t.validation_msg("confirmPassword","Password confirmation"))}}function Ne(o,n){1&o&&(e.TgZ(0,"span"),e._uU(1,"Password does not match."),e.qZA())}function Qe(o,n){if(1&o&&(e.TgZ(0,"div",14),e.YNc(1,qe,2,1,"span",12),e.YNc(2,Ne,2,0,"span",12),e.qZA()),2&o){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.control_is_invalid("confirmPassword")),e.xp6(1),e.Q6J("ngIf",t.form.hasError("notSame"))}}function Ye(o,n){1&o&&(e.TgZ(0,"div")(1,"small",15),e._uU(2,"reCAPTCHA is required."),e.qZA()())}const T=function(o){return{"is-invalid":o}};function Ie(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().submit()}),e.TgZ(1,"div",2)(2,"label",3),e._uU(3,"Old Password "),e.qZA(),e._UZ(4,"input",4),e.YNc(5,Fe,2,1,"div",5),e.qZA(),e.TgZ(6,"div",2)(7,"label",6),e._uU(8,"New Password "),e.qZA(),e._UZ(9,"input",7),e.YNc(10,Je,2,4,"div",5),e.qZA(),e.TgZ(11,"div",8)(12,"label",9),e._uU(13,"Confirm Password "),e.qZA(),e._UZ(14,"input",10),e.YNc(15,Qe,3,2,"div",5),e.qZA(),e.TgZ(16,"div",2),e._UZ(17,"re-captcha",11),e.YNc(18,Ye,3,0,"div",12),e.qZA(),e.TgZ(19,"button",13),e._uU(20,"Submit"),e.qZA()()}if(2&o){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("ngClass",e.VKq(9,T,t.control_is_invalid("oldPassword"))),e.xp6(1),e.Q6J("ngIf",t.control_is_invalid("oldPassword")),e.xp6(4),e.Q6J("ngClass",e.VKq(11,T,t.control_is_invalid("newPassword"))),e.xp6(1),e.Q6J("ngIf",t.control_is_invalid("newPassword")),e.xp6(4),e.Q6J("ngClass",e.VKq(13,T,t.form.hasError("notSame")||t.control_is_invalid("confirmPassword"))),e.xp6(1),e.Q6J("ngIf",t.form.hasError("notSame")||t.control_is_invalid("password")),e.xp6(3),e.Q6J("ngIf",t.control_is_invalid("recaptcha")),e.xp6(1),e.Q6J("disabled",t.is_pending)}}let Se=(()=>{class o extends B.l{constructor(t,i){super(t),this._fb=i,this.checkPasswords=r=>{var a,s;return(null===(a=null==r?void 0:r.get("newPassword"))||void 0===a?void 0:a.value)===(null===(s=null==r?void 0:r.get("confirmPassword"))||void 0===s?void 0:s.value)?null:{notSame:!0}}}ngOnInit(){this.initialize(this._fb.group({confirmPassword:["",l.kI.required],newPassword:["",[l.kI.required,l.kI.pattern("^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{6,}$")]],oldPassword:["",l.kI.required],recaptcha:["",l.kI.required]},{validators:this.checkPasswords}))}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(Z.c),e.Y36(l.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-change-password-form"]],features:[e.qOj],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","oldPassword",1,"form-label","sform-label"],["type","password","id","oldPassword","placeholder","Type here","autocomplete","false","formControlName","oldPassword","tabindex","1",1,"form-control","sform-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","newPassword",1,"form-label","sform-label"],["type","password","id","newPassword","placeholder","Type here","autocomplete","false","formControlName","newPassword","tabindex","2",1,"form-control","sform-control",3,"ngClass"],[1,"mb-4"],["for","confirmPassword",1,"form-label","sform-label"],["type","password","id","confirmPassword","placeholder","Type here","autocomplete","false","formControlName","confirmPassword","tabindex","3",1,"form-control","sform-control",3,"ngClass"],["tabindex","4","formControlName","recaptcha"],[4,"ngIf"],["type","submit","tabindex","5",1,"btn","btn-primary","px-5","py-2","mt-3",3,"disabled"],[1,"invalid-feedback"],[1,"text-danger"]],template:function(t,i){1&t&&e.YNc(0,Ie,21,15,"form",0),2&t&&e.Q6J("ngIf",i.form)},directives:[f.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,f.mk,w.wT,w.Vd],styles:[""]}),o})();const Le=function(o){return{"text-primary tx-active":o}};function Ge(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().navigate(a)}),e.TgZ(2,"span",12),e.ALo(3,"async"),e._uU(4),e.qZA()()()}if(2&o){const t=n.$implicit,i=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(4,Le,e.lcZ(3,2,i.active_cont$)==t)),e.xp6(2),e.hij(" ",t," ")}}function Be(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"app-profile-form",17),e.NdJ("on_submit",function(r){return e.CHM(t),e.oxw(2).update_profile(r)}),e.qZA()}if(2&o){const t=e.oxw(2);e.Q6J("is_pending",t.is_pending)}}function Ee(o,n){1&o&&e._UZ(0,"util-message",18),2&o&&e.Q6J("message","Loading")("is_loading",!0)("description","Please wait while we load your profile.")}function Ve(o,n){if(1&o&&(e.TgZ(0,"div")(1,"h2",13),e._UZ(2,"div",14),e._uU(3," Personal Details "),e.qZA(),e.YNc(4,Be,1,1,"app-profile-form",15),e.ALo(5,"async"),e.YNc(6,Ee,1,3,"ng-template",null,16,e.W1O),e.qZA()),2&o){const t=e.MAs(7),i=e.oxw();e.xp6(4),e.Q6J("ngIf",0==e.lcZ(5,2,i.profile_service.profile_loading$))("ngIfElse",t)}}function je(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"div")(1,"h2",13),e._UZ(2,"div",14),e._uU(3," Change Password "),e.qZA(),e.TgZ(4,"app-change-password-form",17),e.NdJ("on_submit",function(r){return e.CHM(t),e.oxw().change_password(r)}),e.qZA()()}if(2&o){const t=e.oxw();e.xp6(4),e.Q6J("is_pending",t.is_pending)}}const $e=[{path:"profile",component:(()=>{class o{constructor(t,i,r){this.profile_service=t,this._alert_service=i,this._auth_service=r,this.sidebar_content=["Personal Details","Change Password"],this._active_cont=new J.X("Personal Details"),this.active_cont$=this._active_cont.asObservable(),this.is_pending=!1}ngOnInit(){this.profile_service.get_profile(!0).subscribe()}load_profile(){}navigate(t){this._active_cont.next(t)}ngOnDestroy(){}update_profile(t){this.is_pending=!0,this.profile_service.submit(t).subscribe({next:i=>{this.is_pending=!1,this._alert_service.add_alert("Profile successfully updated.")},error:i=>{this.is_pending=!1,this._alert_service.http_error(i)}})}change_password(t){this.is_pending=!0,this._auth_service.change_password(t).subscribe({next:i=>{this.is_pending=!1,this._alert_service.add_alert("Password changed successfully."),this._active_cont.next(""),setTimeout(()=>{this._active_cont.next("Change Password")},50)},error:i=>{this.is_pending=!1,this._alert_service.http_error(i)}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(G.H),e.Y36(Z.c),e.Y36(A.e))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-profile"]],decls:13,vars:8,consts:[[3,"title","is_cms_content"],[1,"bg-white","py-5","mayora-overflow-fix"],[1,"container","layout-container"],[1,"row"],[1,"col-md-4","mb-5"],[1,"sidebar-bg"],["class","d-flex flex-column p-3",4,"ngFor","ngForOf"],[1,"col-md-8",3,"ngSwitch"],[1,"cms-cont","ms-3"],[4,"ngSwitchCase"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","justify-content-between","c-pointer",3,"click"],[1,"pb-3","tx",3,"ngClass"],[1,"cms-title","mb-3","p-relative"],[1,"priority"],[3,"is_pending","on_submit",4,"ngIf","ngIfElse"],["profile_loading",""],[3,"is_pending","on_submit"],[3,"message","is_loading","description"]],template:function(t,i){1&t&&(e.TgZ(0,"div"),e._UZ(1,"util-page-title",0),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e.YNc(7,Ge,5,6,"div",6),e.qZA()(),e.TgZ(8,"div",7),e.ALo(9,"async"),e.TgZ(10,"div",8),e.YNc(11,Ve,8,4,"div",9),e.YNc(12,je,5,1,"div",9),e.qZA()()()()()()),2&t&&(e.xp6(1),e.Q6J("title","Profile")("is_cms_content",!1),e.xp6(6),e.Q6J("ngForOf",i.sidebar_content),e.xp6(1),e.Q6J("ngSwitch",e.lcZ(9,6,i.active_cont$)),e.xp6(3),e.Q6J("ngSwitchCase","Personal Details"),e.xp6(1),e.Q6J("ngSwitchCase","Change Password"))},directives:[P.T,f.sg,f.mk,f.RF,f.n9,f.O5,Te,L,Se],pipes:[f.Ov],styles:[""]}),o})(),canActivate:[E]},{path:"news",component:de},{path:"mayors-corner/:type",component:me}];let ze=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[v.Bz.forChild($e)],v.Bz]}),o})();var He=c(8231),De=c(2234);let ke=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[[f.ez,ze,He.A,De.m,l.u5,l.UX,v.Bz,w.a,w.lQ]]}),o})()}}]);