var ft=Object.defineProperty,pt=Object.defineProperties,gt=Object.getOwnPropertyDescriptors,et=Object.getOwnPropertySymbols,_t=Object.prototype.hasOwnProperty,mt=Object.prototype.propertyIsEnumerable,qe=(be,L,K)=>L in be?ft(be,L,{enumerable:!0,configurable:!0,writable:!0,value:K}):be[L]=K,$e=(be,L)=>{for(var K in L||(L={}))_t.call(L,K)&&qe(be,K,L[K]);if(et)for(var K of et(L))mt.call(L,K)&&qe(be,K,L[K]);return be},Ye=(be,L)=>pt(be,gt(L)),We=(be,L,K)=>(qe(be,"symbol"!=typeof L?L+"":L,K),K),Qe=(be,L,K)=>{if(!L.has(be))throw TypeError("Cannot "+K)},Ce=(be,L,K)=>(Qe(be,L,"read from private field"),K?K.call(be):L.get(be)),Ee=(be,L,K)=>{if(L.has(be))throw TypeError("Cannot add the same private member more than once");L instanceof WeakSet?L.add(be):L.set(be,K)},Fe=(be,L,K,g)=>(Qe(be,L,"write to private field"),g?g.call(be,K):L.set(be,K),K),tt=(be,L,K,g)=>({set _(_e){Fe(be,L,_e,K)},get _(){return Ce(be,L,g)}}),xe=(be,L,K)=>(Qe(be,L,"access private method"),K);(self.webpackChunkmakatiportal2022=self.webpackChunkmakatiportal2022||[]).push([[595],{595:(be,L,K)=>{"use strict";K.r(L),K.d(L,{CmsModule:()=>pe});var g=K(9808),_e=K(8231),re=K(4776),ne=K(9841),ee=K(4004),D=K(9646),d=K(8056);const x=[{title:"Support",url:"/content/support"},{title:"Mayor's Corner",url:"/content/mayors-corner/gallery"},{title:"Makati News",url:"/content/news"},{title:"Makati News",url:"/content/events"},{title:"Makati News",url:"/content/makati-videos"},{title:"Are you satisfied?",url:"/content/content/customer-satisfaction-survey-form"},{title:"I Want To",url:"/content/i-want-to"},{title:"Downloads",url:"/content/downloads"}];var b=K(7854),r=K(4893),C=K(817),o=K(7787),s=K(7045);function n(N,ie){1&N&&(r.TgZ(0,"span"),r._UZ(1,"i",6),r.qZA())}function c(N,ie){if(1&N){const v=r.EpF();r.TgZ(0,"shrd-sidebar-item",7),r.NdJ("on_is_active",function(le){const Pe=r.CHM(v).index;return r.oxw().set_up_parent(le,Pe)})("on_select",function(le){return r.CHM(v),r.oxw().on_select.emit(le)}),r.qZA()}if(2&N){const v=ie.$implicit;r.Q6J("is_child_menu",!0)("item",v)}}const P=function(N,ie){return{"ps-3 pt-3":N,"p-3":ie}},f=function(N){return{"text-primary tx-active":N}};let p=(()=>{class N{constructor(v,W){this.route=v,this.router=W,this.is_child_menu=!1,this.on_select=new r.vpe,this.on_is_active=new r.vpe(!1),this._is_active=!1,this.is_collapsed=!0,this._subscriptions=[],this.child_statuses=[]}ngOnInit(){this.set_up_is_active()}on_click(){this.item.children.length>0?this.is_collapsed=!this.is_collapsed:this.on_select.emit(this.item)}ngOnDestroy(){this._subscriptions.forEach(v=>v.unsubscribe())}ngAfterViewInit(){if(0!=this.item.menuId&&0==this.item.children.length==1){const W=this.router.events.subscribe(le=>{le instanceof re.m2&&this.set_up_is_active()});this._subscriptions.push(W)}}set_up_is_active(){var v,W;const le=null!==(v=this.route.snapshot.queryParamMap.get("content"))&&void 0!==v?v:0,Ae=null!==(W=this.route.snapshot.paramMap.get("pageId"))&&void 0!==W?W:0;this.is_active=+this.item.menuId==+(0!=+le?+le:+Ae)}set is_active(v){setTimeout(()=>{this._is_active=v,this.on_is_active.emit(v),this.is_collapsed=!v,this.child_statuses=[]},20)}get is_active(){return this._is_active}set_up_parent(v,W){if(this.child_statuses.push(v),W+1==this.item.children.length){const le=this.child_statuses.reduce((Ae,Pe)=>1==Ae||Pe,!1);this.is_active=le}}}return N.\u0275fac=function(v){return new(v||N)(r.Y36(re.gz),r.Y36(re.F0))},N.\u0275cmp=r.Xpm({type:N,selectors:[["shrd-sidebar-item"]],inputs:{item:"item",is_child_menu:"is_child_menu"},outputs:{on_select:"on_select",on_is_active:"on_is_active"},decls:7,vars:12,consts:[[1,"d-flex","flex-column",3,"ngClass"],[1,"d-flex","justify-content-between","c-pointer",3,"click"],[1,"pb-3","tx",3,"ngClass"],[4,"ngIf"],[1,"ms-1",3,"collapse","isAnimated"],[3,"is_child_menu","item","on_is_active","on_select",4,"ngFor","ngForOf"],[1,"bi","bi-chevron-down"],[3,"is_child_menu","item","on_is_active","on_select"]],template:function(v,W){1&v&&(r.TgZ(0,"div",0)(1,"div",1),r.NdJ("click",function(){return W.on_click()}),r.TgZ(2,"span",2),r._uU(3),r.qZA(),r.YNc(4,n,2,0,"span",3),r.qZA(),r.TgZ(5,"div",4),r.YNc(6,c,1,2,"shrd-sidebar-item",5),r.qZA()()),2&v&&(r.Q6J("ngClass",r.WLB(7,P,1==W.is_child_menu,0==W.is_child_menu)),r.xp6(2),r.Q6J("ngClass",r.VKq(10,f,1==W.is_active)),r.xp6(1),r.hij(" ",W.item.menuLabel," "),r.xp6(1),r.Q6J("ngIf",W.item.children.length>0),r.xp6(1),r.Q6J("collapse",W.is_collapsed)("isAnimated",!0),r.xp6(1),r.Q6J("ngForOf",W.item.children))},directives:[g.mk,g.O5,s.Y,g.sg,N],styles:[""]}),N})();function e(N,ie){if(1&N){const v=r.EpF();r.TgZ(0,"shrd-sidebar-item",2),r.NdJ("on_select",function(le){return r.CHM(v),r.oxw().on_select.emit(le)}),r.qZA()}2&N&&r.Q6J("item",ie.$implicit)}let i=(()=>{class N{constructor(){this.items=[],this.on_select=new r.vpe,this.on_is_active=new r.vpe}ngOnInit(){}}return N.\u0275fac=function(v){return new(v||N)},N.\u0275cmp=r.Xpm({type:N,selectors:[["shrd-sidebar"]],inputs:{items:"items"},outputs:{on_select:"on_select",on_is_active:"on_is_active"},decls:2,vars:1,consts:[[1,"sidebar-bg"],[3,"item","on_select",4,"ngFor","ngForOf"],[3,"item","on_select"]],template:function(v,W){1&v&&(r.TgZ(0,"div",0),r.YNc(1,e,1,1,"shrd-sidebar-item",1),r.qZA()),2&v&&(r.xp6(1),r.Q6J("ngForOf",W.items))},directives:[g.sg,p],styles:[""]}),N})();var _=K(1135),m=K(4986),y=K(4482),T=K(5403);function k(N,ie=m.z){return(0,y.e)((v,W)=>{let le=null,Ae=null,Pe=null;const we=()=>{if(le){le.unsubscribe(),le=null;const Me=Ae;Ae=null,W.next(Me)}};function Re(){const Me=Pe+N,Oe=ie.now();if(Oe<Me)return le=this.schedule(void 0,Me-Oe),void W.add(le);we()}v.subscribe((0,T.x)(W,Me=>{Ae=Me,Pe=ie.now(),le||(le=ie.schedule(Re,N),W.add(le))},()=>{we(),W.complete()},void 0,()=>{Ae=le=null}))})}var O=K(4671);function G(N,ie){return N===ie}var X=K(9300),Q=K(8505),B=K(3900),$=K(2340),J=K(2313);const ae=["contentRef"],de=["*"];let M=(()=>{class N{constructor(v){this.display="inline-block",this._dragDisabled=!1,this._elementRef=v}get dragDisabled(){return this._dragDisabled}set dragDisabled(v){this._dragDisabled=v}}return N.\u0275fac=function(v){return new(v||N)(r.Y36(r.SBq))},N.\u0275dir=r.lG2({type:N,selectors:[["","drag-scroll-item",""]],hostVars:2,hostBindings:function(v,W){2&v&&r.Udp("display",W.display)},inputs:{dragDisabled:["drag-disabled","dragDisabled"]}}),N})(),a=(()=>{class N{constructor(v,W,le){this._elementRef=v,this._renderer=W,this._document=le,this._index=0,this._scrollbarHidden=!1,this._disabled=!1,this._xDisabled=!1,this._xWheelEnabled=!1,this._yDisabled=!1,this._dragDisabled=!1,this._snapDisabled=!1,this._snapOffset=0,this._snapDuration=500,this._isDragging=!1,this.isPressed=!1,this.isScrolling=!1,this.scrollTimer=-1,this.scrollToTimer=-1,this.downX=0,this.downY=0,this.displayType="block",this.elWidth=null,this.elHeight=null,this._pointerEvents="auto",this.scrollbarWidth=null,this.isAnimating=!1,this.prevChildrenLength=0,this.indexBound=0,this.rtl=!1,this.dsInitialized=new r.vpe,this.indexChanged=new r.vpe,this.reachesLeftBound=new r.vpe,this.reachesRightBound=new r.vpe,this.snapAnimationFinished=new r.vpe,this.dragStart=new r.vpe,this.dragEnd=new r.vpe,this.scrollbarWidth=`${this.getScrollbarWidth()}px`}get isDragging(){return this._isDragging}get currIndex(){return this._index}set currIndex(v){v!==this._index&&(this._index=v,this.indexChanged.emit(v))}get scrollbarHidden(){return this._scrollbarHidden}set scrollbarHidden(v){this._scrollbarHidden=v}get disabled(){return this._disabled}set disabled(v){this._disabled=v}get xDisabled(){return this._xDisabled}set xDisabled(v){this._xDisabled=v}get yDisabled(){return this._yDisabled}set yDisabled(v){this._yDisabled=v}get xWheelEnabled(){return this._xWheelEnabled}set xWheelEnabled(v){this._xWheelEnabled=v}get dragDisabled(){return this._dragDisabled}set dragDisabled(v){this._dragDisabled=v}get snapDisabled(){return this._snapDisabled}set snapDisabled(v){this._snapDisabled=v}get snapOffset(){return this._snapOffset}set snapOffset(v){this._snapOffset=v}get snapDuration(){return this._snapDuration}set snapDuration(v){this._snapDuration=v}ngOnChanges(){this.setScrollBar(),this.xDisabled||this.disabled||this._scrollbarHidden?this.disableScroll("x"):this.enableScroll("x"),this.yDisabled||this.disabled?this.disableScroll("y"):this.enableScroll("y")}ngAfterViewInit(){this._renderer.setAttribute(this._contentRef.nativeElement,"drag-scroll","true"),this.displayType="undefined"!=typeof window?window.getComputedStyle(this._elementRef.nativeElement).display:"block",this._renderer.setStyle(this._contentRef.nativeElement,"display",this.displayType),this._renderer.setStyle(this._contentRef.nativeElement,"whiteSpace","noWrap"),this.markElDimension(),this._renderer.setStyle(this._contentRef.nativeElement,"width",this.elWidth),this._renderer.setStyle(this._contentRef.nativeElement,"height",this.elHeight),this.wrapper&&this.checkScrollbar(),this._onMouseDownListener=this._renderer.listen(this._contentRef.nativeElement,"mousedown",this.onMouseDownHandler.bind(this)),this._onScrollListener=this._renderer.listen(this._contentRef.nativeElement,"scroll",this.onScrollHandler.bind(this)),this._onDragStartListener=this._renderer.listen(this._contentRef.nativeElement,"dragstart",v=>{v.preventDefault()}),this.checkNavStatus(),this.dsInitialized.emit(),this.adjustMarginToLastChild(),this.rtl="rtl"===getComputedStyle(this._contentRef.nativeElement).getPropertyValue("direction")}ngAfterViewChecked(){this._children.length!==this.prevChildrenLength&&(this.markElDimension(),this.checkScrollbar(),this.prevChildrenLength=this._children.length,this.checkNavStatus())}ngOnDestroy(){this._renderer.setAttribute(this._contentRef.nativeElement,"drag-scroll","false"),this._onMouseDownListener&&(this._onMouseDownListener=this._onMouseDownListener()),this._onScrollListener&&(this._onScrollListener=this._onScrollListener()),this._onDragStartListener&&(this._onDragStartListener=this._onDragStartListener())}onMouseMoveHandler(v){this.onMouseMove(v)}onMouseMove(v){if((v.clientX!==this.downX||v.clientY!==this.downY)&&this.isPressed&&!this.disabled){if(!v.buttons&&!v.which)return this.onMouseUpHandler(v);if(this._pointerEvents="none",this._setIsDragging(!0),!this.xDisabled&&!this.dragDisabled){const W=v.clientX;this._contentRef.nativeElement.scrollLeft=this._contentRef.nativeElement.scrollLeft-W+this.downX,this.downX=W}if(!this.yDisabled&&!this.dragDisabled){const W=v.clientY;this._contentRef.nativeElement.scrollTop=this._contentRef.nativeElement.scrollTop-W+this.downY,this.downY=W}}}onMouseDownHandler(v){const W=this.locateDragScrollItem(v.target);if(W&&W.dragDisabled)return;this._startGlobalListening("touchstart"===v.type),this.isPressed=!0;const Ae=v;this.downX=Ae.clientX,this.downY=Ae.clientY,clearTimeout(this.scrollToTimer)}onScrollHandler(){this.checkNavStatus(),this.isPressed||this.isAnimating||this.snapDisabled?this.locateCurrentIndex():(this.isScrolling=!0,clearTimeout(this.scrollTimer),this.scrollTimer=setTimeout(()=>{this.isScrolling=!1,this.locateCurrentIndex(!0)},500))}onMouseUpHandler(v){this.isPressed&&(this.isPressed=!1,this._pointerEvents="auto",this._setIsDragging(!1),this.snapDisabled?this.locateCurrentIndex():this.locateCurrentIndex(!0),this._stopGlobalListening())}moveLeft(){(0!==this.currIndex||this.snapDisabled)&&(this.currIndex--,clearTimeout(this.scrollToTimer),this.scrollTo(this._contentRef.nativeElement,this.toChildrenLocation(),this.snapDuration))}moveRight(){const v=this.wrapper||this.parentNode,W=v?v.clientWidth:0;!this.isScrollReachesRightEnd()&&this.currIndex<this.maximumIndex(W,this._children.toArray())&&(this.currIndex++,clearTimeout(this.scrollToTimer),this.scrollTo(this._contentRef.nativeElement,this.toChildrenLocation(),this.snapDuration))}moveTo(v){const W=this.wrapper||this.parentNode,le=W?W.clientWidth:0;v>=0&&v!==this.currIndex&&this.currIndex<=this.maximumIndex(le,this._children.toArray())&&(this.currIndex=Math.min(v,this.maximumIndex(le,this._children.toArray())),clearTimeout(this.scrollToTimer),this.scrollTo(this._contentRef.nativeElement,this.toChildrenLocation(),this.snapDuration))}checkNavStatus(){setTimeout(()=>{const v=Boolean(this._children.length<=1),W=Boolean(this._contentRef.nativeElement.scrollWidth<=this._contentRef.nativeElement.clientWidth);v||W?(this.reachesLeftBound.emit(!0),this.reachesRightBound.emit(!0)):this.isScrollReachesRightEnd()?(this.reachesLeftBound.emit(!1),this.reachesRightBound.emit(!0)):0===this._contentRef.nativeElement.scrollLeft&&this._contentRef.nativeElement.scrollWidth>this._contentRef.nativeElement.clientWidth?(this.reachesLeftBound.emit(!0),this.reachesRightBound.emit(!1)):(this.reachesLeftBound.emit(!1),this.reachesRightBound.emit(!1))},0)}onWheel(v){this._xWheelEnabled&&(v.preventDefault(),this._snapDisabled?this._contentRef.nativeElement.scrollBy(v.deltaY,0):v.deltaY<0?this.moveLeft():v.deltaY>0&&this.moveRight())}onWindowResize(){this.refreshWrapperDimensions(),this.checkNavStatus()}_setIsDragging(v){this._isDragging!==v&&(this._isDragging=v,v?this.dragStart.emit():this.dragEnd.emit())}_startGlobalListening(v){this._onMouseMoveListener||(this._onMouseMoveListener=this._renderer.listen("document",v?"touchmove":"mousemove",this.onMouseMoveHandler.bind(this))),this._onMouseUpListener||(this._onMouseUpListener=this._renderer.listen("document",v?"touchend":"mouseup",this.onMouseUpHandler.bind(this)))}_stopGlobalListening(){this._onMouseMoveListener&&(this._onMouseMoveListener=this._onMouseMoveListener()),this._onMouseUpListener&&(this._onMouseUpListener=this._onMouseUpListener())}disableScroll(v){this._renderer.setStyle(this._contentRef.nativeElement,`overflow-${v}`,"hidden")}enableScroll(v){this._renderer.setStyle(this._contentRef.nativeElement,`overflow-${v}`,"auto")}hideScrollbar(){"none"!==this._contentRef.nativeElement.style.display&&!this.wrapper&&(this.parentNode=this._contentRef.nativeElement.parentNode,this.wrapper=this._renderer.createElement("div"),this._renderer.setAttribute(this.wrapper,"class","drag-scroll-wrapper"),this._renderer.addClass(this.wrapper,"drag-scroll-container"),this.refreshWrapperDimensions(),this._renderer.setStyle(this.wrapper,"overflow","hidden"),this._renderer.setStyle(this._contentRef.nativeElement,"width",`calc(100% + ${this.scrollbarWidth})`),this._renderer.setStyle(this._contentRef.nativeElement,"height",`calc(100% + ${this.scrollbarWidth})`),this._renderer.appendChild(this._elementRef.nativeElement,this.wrapper),this._renderer.appendChild(this.wrapper,this._contentRef.nativeElement),this.adjustMarginToLastChild())}showScrollbar(){this.wrapper&&(this._renderer.setStyle(this._contentRef.nativeElement,"width","100%"),this._renderer.setStyle(this._contentRef.nativeElement,"height",this.wrapper.style.height),null!==this.parentNode&&(this.parentNode.removeChild(this.wrapper),this.parentNode.appendChild(this._contentRef.nativeElement)),this.wrapper=null,this.adjustMarginToLastChild())}checkScrollbar(){this._renderer.setStyle(this._contentRef.nativeElement,"height",this._contentRef.nativeElement.scrollWidth<=this._contentRef.nativeElement.clientWidth?"100%":`calc(100% + ${this.scrollbarWidth})`),this._renderer.setStyle(this._contentRef.nativeElement,"width",this._contentRef.nativeElement.scrollHeight<=this._contentRef.nativeElement.clientHeight?"100%":`calc(100% + ${this.scrollbarWidth})`)}setScrollBar(){this.scrollbarHidden?this.hideScrollbar():this.showScrollbar()}getScrollbarWidth(){const v=this._renderer.createElement("div");this._renderer.setStyle(v,"visibility","hidden"),this._renderer.setStyle(v,"width","100px"),this._renderer.setStyle(v,"msOverflowStyle","scrollbar"),this._renderer.appendChild(this._document.body,v);const W=v.offsetWidth;this._renderer.setStyle(v,"overflow","scroll");const le=this._renderer.createElement("div");this._renderer.setStyle(le,"width","100%"),this._renderer.appendChild(v,le);const Ae=le.offsetWidth;return this._renderer.removeChild(this._document.body,v),W-Ae||20}refreshWrapperDimensions(){this.wrapper&&(this._renderer.setStyle(this.wrapper,"width","100%"),this._renderer.setStyle(this.wrapper,"height",this._elementRef.nativeElement.style.height>0||this._elementRef.nativeElement.offsetHeight>0?this._elementRef.nativeElement.style.height||this._elementRef.nativeElement.offsetHeight+"px":"100%"))}scrollTo(v,W,le){const Ae=this;Ae.isAnimating=!0;const we=v.scrollLeft,Re=(this.rtl?-1:1)*W-we-this.snapOffset;let Oe=0;const Be=function(){var Ie,Ne,De;Oe+=20,v.scrollLeft=(Ie=Oe,Ne=we,De=Re,(Ie/=le/2)<1?De/2*Ie*Ie+Ne:-De/2*(--Ie*(Ie-2)-1)+Ne),Oe<le?Ae.scrollToTimer=setTimeout(Be,20):setTimeout(()=>{Ae.isAnimating=!1,Ae.snapAnimationFinished.emit(Ae.currIndex)},20)};Be()}locateCurrentIndex(v){const W=Math.abs(this._contentRef.nativeElement.scrollLeft);this.currentChildWidth((le,Ae,Pe,we,Re)=>{W>=Pe&&W<=Ae?(Ae-W>le/2&&!this.isScrollReachesRightEnd()?(this.isAnimating||(this.currIndex=we),v&&this.scrollTo(this._contentRef.nativeElement,Pe,this.snapDuration)):0!==W&&(this.isAnimating||(this.currIndex=we+1),v&&this.scrollTo(this._contentRef.nativeElement,Pe+le,this.snapDuration)),Re()):we+1===this._children.length-1&&(this.isAnimating||(this.currIndex=we+1),Re())})}currentChildWidth(v){let W=0,le=!1;const Ae=function(){le=!0},Pe=this._children.toArray();for(let we=0;we<Pe.length&&we!==Pe.length-1&&!le;we++){const Me=Pe[we]._elementRef.nativeElement.clientWidth;v(Me,W+Pe[we+1]._elementRef.nativeElement.clientWidth,W,we,Ae),W+=Me}}toChildrenLocation(){let v=0;const W=this._children.toArray();for(let le=0;le<this.currIndex;le++)v+=W[le]._elementRef.nativeElement.clientWidth;return v}locateDragScrollItem(v){let W=null;const le=this._children.toArray();for(let Ae=0;Ae<le.length;Ae++)v===le[Ae]._elementRef.nativeElement&&(W=le[Ae]);return W}markElDimension(){this.wrapper?(this.elWidth=this.wrapper.style.width,this.elHeight=this.wrapper.style.height):(this.elWidth=this._elementRef.nativeElement.style.width||this._elementRef.nativeElement.offsetWidth+"px",this.elHeight=this._elementRef.nativeElement.style.height||this._elementRef.nativeElement.offsetHeight+"px");const v=this.wrapper||this.parentNode;this._children.length>1&&(this.indexBound=this.maximumIndex(v?v.clientWidth:0,this._children.toArray()))}maximumIndex(v,W){let le=0,Ae=0;for(let Pe=0;Pe<=W.length;Pe++){const we=W[W.length-1-Pe];if(!we)break;{const Re=we._elementRef.nativeElement;let Me=Re.clientWidth;if(0===Me&&Re.firstElementChild&&(Me=we._elementRef.nativeElement.firstElementChild.clientWidth),Ae+=Me,!(Ae<v))break;le++}}return W.length-le}isScrollReachesRightEnd(){return Math.abs(this._contentRef.nativeElement.scrollLeft)+this._contentRef.nativeElement.offsetWidth>=this._contentRef.nativeElement.scrollWidth}adjustMarginToLastChild(){if(this._children&&this._children.length>0&&this.hideScrollbar){const v=this._children.toArray();this._renderer.setStyle(v[v.length-1]._elementRef.nativeElement,"margin-right",this.wrapper&&v.length>1?this.scrollbarWidth:0)}}}return N.\u0275fac=function(v){return new(v||N)(r.Y36(r.SBq),r.Y36(r.Qsj),r.Y36(g.K0))},N.\u0275cmp=r.Xpm({type:N,selectors:[["drag-scroll"]],contentQueries:function(v,W,le){if(1&v&&r.Suo(le,M,5),2&v){let Ae;r.iGM(Ae=r.CRH())&&(W._children=Ae)}},viewQuery:function(v,W){if(1&v&&r.Gf(ae,7),2&v){let le;r.iGM(le=r.CRH())&&(W._contentRef=le.first)}},hostVars:2,hostBindings:function(v,W){1&v&&r.NdJ("wheel",function(Ae){return W.onWheel(Ae)})("resize",function(){return W.onWindowResize()},!1,r.Jf7),2&v&&r.Udp("pointer-events",W._pointerEvents)},inputs:{scrollbarHidden:["scrollbar-hidden","scrollbarHidden"],disabled:["drag-scroll-disabled","disabled"],xDisabled:["drag-scroll-x-disabled","xDisabled"],yDisabled:["drag-scroll-y-disabled","yDisabled"],xWheelEnabled:["scroll-x-wheel-enabled","xWheelEnabled"],dragDisabled:["drag-disabled","dragDisabled"],snapDisabled:["snap-disabled","snapDisabled"],snapOffset:["snap-offset","snapOffset"],snapDuration:["snap-duration","snapDuration"]},outputs:{dsInitialized:"dsInitialized",indexChanged:"indexChanged",reachesLeftBound:"reachesLeftBound",reachesRightBound:"reachesRightBound",snapAnimationFinished:"snapAnimationFinished",dragStart:"dragStart",dragEnd:"dragEnd"},features:[r.TTD],ngContentSelectors:de,decls:3,vars:0,consts:[[1,"drag-scroll-content"],["contentRef",""]],template:function(v,W){1&v&&(r.F$t(),r.TgZ(0,"div",0,1),r.Hsn(2),r.qZA())},styles:["[_nghost-%COMP%]{overflow:hidden;display:block}.drag-scroll-content[_ngcontent-%COMP%]{height:100%;overflow:auto;white-space:nowrap}"]}),N})(),u=(()=>{class N{}return N.\u0275fac=function(v){return new(v||N)},N.\u0275mod=r.oAB({type:N}),N.\u0275inj=r.cJS({}),N})();function t(N,ie){if(1&N&&(r.TgZ(0,"drag-scroll"),r._UZ(1,"div",1),r.qZA()),2&N){const v=r.oxw();r.xp6(1),r.Q6J("innerHTML",v.ct,r.oJD)}}let l=(()=>{class N{constructor(v){this.sanitizer=v}ngOnInit(){this.ct=this.sanitizer.bypassSecurityTrustHtml(this.item.contentDetail)}}return N.\u0275fac=function(v){return new(v||N)(r.Y36(J.H7))},N.\u0275cmp=r.Xpm({type:N,selectors:[["cms-html-content-viewer"]],inputs:{item:"item"},decls:1,vars:1,consts:[[4,"ngIf"],[1,"draggable-cont",3,"innerHTML"]],template:function(v,W){1&v&&r.YNc(0,t,2,1,"drag-scroll",0),2&v&&r.Q6J("ngIf",W.item.contentDetail)},directives:[g.O5,a],styles:[""]}),N})();var h=K(4968),S=K(7579),A=K(2076),E=K(8421),j=K(5032);function U(N){return(0,y.e)((ie,v)=>{(0,E.Xf)(N).subscribe((0,T.x)(v,()=>v.complete(),j.Z)),!v.closed&&ie.subscribe(v)})}var H=K(6036),z=K.t(H,2),Y=K(2813),Z=K.t(Y,2);const ue=["pdfViewerContainer"];function ce(N,ie,v){N[ie]=v}function oe(){return"undefined"==typeof window}oe()||ce(z,"verbosity",H.VerbosityLevel.INFOS);var w=(()=>{return(N=w||(w={}))[N.DISABLED=0]="DISABLED",N[N.ENABLED=1]="ENABLED",N[N.ENHANCED=2]="ENHANCED",w;var N})();let I=(()=>{class N{constructor(v,W){if(this.element=v,this.ngZone=W,this.isVisible=!1,this._cMapsUrl=void 0!==z?`https://unpkg.com/pdfjs-dist@${H.version}/cmaps/`:null,this._imageResourcesPath=void 0!==z?`https://unpkg.com/pdfjs-dist@${H.version}/web/images/`:null,this._renderText=!0,this._renderTextMode=w.ENABLED,this._stickToPage=!1,this._originalSize=!0,this._page=1,this._zoom=1,this._zoomScale="page-width",this._rotation=0,this._showAll=!0,this._canAutoResize=!0,this._fitToPage=!1,this._externalLinkTarget="blank",this._showBorders=!1,this.resizeTimeout=null,this.pageScrollTimeout=null,this.isInitialized=!1,this.destroy$=new S.x,this.afterLoadComplete=new r.vpe,this.pageRendered=new r.vpe,this.pageInitialized=new r.vpe,this.textLayerRendered=new r.vpe,this.onError=new r.vpe,this.onProgress=new r.vpe,this.pageChange=new r.vpe(!0),oe())return;let le;le=window.hasOwnProperty("pdfWorkerSrc")&&"string"==typeof window.pdfWorkerSrc&&window.pdfWorkerSrc?window.pdfWorkerSrc:`https://cdn.jsdelivr.net/npm/pdfjs-dist@${H.version}/legacy/build/pdf.worker.min.js`,ce(H.GlobalWorkerOptions,"workerSrc",le)}set cMapsUrl(v){this._cMapsUrl=v}set page(v){const W=v=parseInt(v,10)||1;this._pdf&&(v=this.getValidPageNumber(v)),this._page=v,W!==v&&this.pageChange.emit(v)}set renderText(v){this._renderText=v}set renderTextMode(v){this._renderTextMode=v}set originalSize(v){this._originalSize=v}set showAll(v){this._showAll=v}set stickToPage(v){this._stickToPage=v}set zoom(v){v<=0||(this._zoom=v)}get zoom(){return this._zoom}set zoomScale(v){this._zoomScale=v}get zoomScale(){return this._zoomScale}set rotation(v){"number"==typeof v&&v%90==0?this._rotation=v:console.warn("Invalid pages rotation angle.")}set externalLinkTarget(v){this._externalLinkTarget=v}set autoresize(v){this._canAutoResize=Boolean(v)}set fitToPage(v){this._fitToPage=Boolean(v)}set showBorders(v){this._showBorders=Boolean(v)}static getLinkTarget(v){switch(v){case"blank":return Y.LinkTarget.BLANK;case"none":return Y.LinkTarget.NONE;case"self":return Y.LinkTarget.SELF;case"parent":return Y.LinkTarget.PARENT;case"top":return Y.LinkTarget.TOP}return null}ngAfterViewChecked(){if(this.isInitialized)return;const v=this.pdfViewerContainer.nativeElement.offsetParent;!0!==this.isVisible||null!=v?!1===this.isVisible&&null!=v&&(this.isVisible=!0,setTimeout(()=>{this.initialize(),this.ngOnChanges({src:this.src})})):this.isVisible=!1}ngOnInit(){this.initialize(),this.setupResizeListener()}ngOnDestroy(){this.clear(),this.destroy$.next(),this.loadingTask=null}ngOnChanges(v){if(!oe()&&this.isVisible)if("src"in v)this.loadPDF();else if(this._pdf){if("renderText"in v?(this.pdfViewer.textLayerMode=this._renderText?this._renderTextMode:w.DISABLED,this.resetPdfDocument()):"showAll"in v&&(this.setupViewer(),this.resetPdfDocument()),"page"in v){const{page:W}=v;if(W.currentValue===this._latestScrolledPage)return;this.pdfViewer.scrollPageIntoView({pageNumber:this._page})}this.update()}}updateSize(){(0,A.D)(this._pdf.getPage(this.pdfViewer.currentPageNumber)).pipe(U(this.destroy$)).subscribe({next:v=>{const W=this._rotation||v.rotate,le=v.getViewport({scale:this._zoom,rotation:W}).width*N.CSS_UNITS;let Ae=this._zoom,Pe=!0;if(!this._originalSize||this._fitToPage&&le>this.pdfViewerContainer.nativeElement.clientWidth){const we=v.getViewport({scale:1,rotation:W});Ae=this.getScale(we.width,we.height),Pe=!this._stickToPage}this.pdfViewer._setScale(Ae,Pe)}})}clear(){this.loadingTask&&!this.loadingTask.destroyed&&this.loadingTask.destroy(),this._pdf&&(this._pdf.destroy(),this._pdf=null,this.pdfViewer.setDocument(null),this.pdfLinkService.setDocument(null,null),this.pdfFindController.setDocument(null))}getPDFLinkServiceConfig(){const v=N.getLinkTarget(this._externalLinkTarget);return v?{externalLinkTarget:v}:{}}initEventBus(){this.eventBus=function ye(N,ie){const v=new N.EventBus;return function te(N,ie){(0,h.R)(N,"documentload").pipe(U(ie)).subscribe(()=>{const v=document.createEvent("CustomEvent");v.initCustomEvent("documentload",!0,!0,{}),window.dispatchEvent(v)}),(0,h.R)(N,"pagerendered").pipe(U(ie)).subscribe(({pageNumber:v,cssTransform:W,source:le})=>{const Ae=document.createEvent("CustomEvent");Ae.initCustomEvent("pagerendered",!0,!0,{pageNumber:v,cssTransform:W}),le.div.dispatchEvent(Ae)}),(0,h.R)(N,"textlayerrendered").pipe(U(ie)).subscribe(({pageNumber:v,source:W})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("textlayerrendered",!0,!0,{pageNumber:v}),W.textLayerDiv.dispatchEvent(le)}),(0,h.R)(N,"pagechanging").pipe(U(ie)).subscribe(({pageNumber:v,source:W})=>{const le=document.createEvent("UIEvents");le.initEvent("pagechanging",!0,!0),le.pageNumber=v,W.container.dispatchEvent(le)}),(0,h.R)(N,"pagesinit").pipe(U(ie)).subscribe(({source:v})=>{const W=document.createEvent("CustomEvent");W.initCustomEvent("pagesinit",!0,!0,null),v.container.dispatchEvent(W)}),(0,h.R)(N,"pagesloaded").pipe(U(ie)).subscribe(({pagesCount:v,source:W})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("pagesloaded",!0,!0,{pagesCount:v}),W.container.dispatchEvent(le)}),(0,h.R)(N,"scalechange").pipe(U(ie)).subscribe(({scale:v,presetValue:W,source:le})=>{const Ae=document.createEvent("UIEvents");Ae.initEvent("scalechange",!0,!0),Ae.scale=v,Ae.presetValue=W,le.container.dispatchEvent(Ae)}),(0,h.R)(N,"updateviewarea").pipe(U(ie)).subscribe(({location:v,source:W})=>{const le=document.createEvent("UIEvents");le.initEvent("updateviewarea",!0,!0),le.location=v,W.container.dispatchEvent(le)}),(0,h.R)(N,"find").pipe(U(ie)).subscribe(({source:v,type:W,query:le,phraseSearch:Ae,caseSensitive:Pe,highlightAll:we,findPrevious:Re})=>{if(v===window)return;const Me=document.createEvent("CustomEvent");Me.initCustomEvent("find"+W,!0,!0,{query:le,phraseSearch:Ae,caseSensitive:Pe,highlightAll:we,findPrevious:Re}),window.dispatchEvent(Me)}),(0,h.R)(N,"attachmentsloaded").pipe(U(ie)).subscribe(({attachmentsCount:v,source:W})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("attachmentsloaded",!0,!0,{attachmentsCount:v}),W.container.dispatchEvent(le)}),(0,h.R)(N,"sidebarviewchanged").pipe(U(ie)).subscribe(({view:v,source:W})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("sidebarviewchanged",!0,!0,{view:v}),W.outerContainer.dispatchEvent(le)}),(0,h.R)(N,"pagemode").pipe(U(ie)).subscribe(({mode:v,source:W})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("pagemode",!0,!0,{mode:v}),W.pdfViewer.container.dispatchEvent(le)}),(0,h.R)(N,"namedaction").pipe(U(ie)).subscribe(({action:v,source:W})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("namedaction",!0,!0,{action:v}),W.pdfViewer.container.dispatchEvent(le)}),(0,h.R)(N,"presentationmodechanged").pipe(U(ie)).subscribe(({active:v,switchInProgress:W})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("presentationmodechanged",!0,!0,{active:v,switchInProgress:W}),window.dispatchEvent(le)}),(0,h.R)(N,"outlineloaded").pipe(U(ie)).subscribe(({outlineCount:v,source:W})=>{const le=document.createEvent("CustomEvent");le.initCustomEvent("outlineloaded",!0,!0,{outlineCount:v}),W.container.dispatchEvent(le)})}(v,ie),v}(Z,this.destroy$),(0,h.R)(this.eventBus,"pagerendered").pipe(U(this.destroy$)).subscribe(v=>{this.pageRendered.emit(v)}),(0,h.R)(this.eventBus,"pagesinit").pipe(U(this.destroy$)).subscribe(v=>{this.pageInitialized.emit(v)}),(0,h.R)(this.eventBus,"pagechanging").pipe(U(this.destroy$)).subscribe(({pageNumber:v})=>{this.pageScrollTimeout&&clearTimeout(this.pageScrollTimeout),this.pageScrollTimeout=window.setTimeout(()=>{this._latestScrolledPage=v,this.pageChange.emit(v)},100)}),(0,h.R)(this.eventBus,"textlayerrendered").pipe(U(this.destroy$)).subscribe(v=>{this.textLayerRendered.emit(v)})}initPDFServices(){this.pdfLinkService=new Y.PDFLinkService(Object.assign({eventBus:this.eventBus},this.getPDFLinkServiceConfig())),this.pdfFindController=new Y.PDFFindController({eventBus:this.eventBus,linkService:this.pdfLinkService})}getPDFOptions(){return{eventBus:this.eventBus,container:this.element.nativeElement.querySelector("div"),removePageBorders:!this._showBorders,linkService:this.pdfLinkService,textLayerMode:this._renderText?this._renderTextMode:w.DISABLED,findController:this.pdfFindController,renderer:"canvas",l10n:void 0,imageResourcesPath:this._imageResourcesPath}}setupViewer(){ce(z,"disableTextLayer",!this._renderText),this.initPDFServices(),this.pdfViewer=this._showAll?new Y.PDFViewer(this.getPDFOptions()):new Y.PDFSinglePageViewer(this.getPDFOptions()),this.pdfLinkService.setViewer(this.pdfViewer),this.pdfViewer._currentPageNumber=this._page}getValidPageNumber(v){return v<1?1:v>this._pdf.numPages?this._pdf.numPages:v}getDocumentParams(){const v=typeof this.src;if(!this._cMapsUrl)return this.src;const W={cMapUrl:this._cMapsUrl,cMapPacked:!0,enableXfa:!0};return"string"===v?W.url=this.src:"object"===v&&(void 0!==this.src.byteLength?W.data=this.src:Object.assign(W,this.src)),W}loadPDF(){if(!this.src)return;if(this.lastLoaded===this.src)return void this.update();this.clear(),this.setupViewer(),this.loadingTask=H.getDocument(this.getDocumentParams()),this.loadingTask.onProgress=W=>{this.onProgress.emit(W)};const v=this.src;(0,A.D)(this.loadingTask.promise).pipe(U(this.destroy$)).subscribe({next:W=>{this._pdf=W,this.lastLoaded=v,this.afterLoadComplete.emit(W),this.resetPdfDocument(),this.update()},error:W=>{this.lastLoaded=null,this.onError.emit(W)}})}update(){this.page=this._page,this.render()}render(){this._page=this.getValidPageNumber(this._page),(0!==this._rotation||this.pdfViewer.pagesRotation!==this._rotation)&&setTimeout(()=>{this.pdfViewer.pagesRotation=this._rotation}),this._stickToPage&&setTimeout(()=>{this.pdfViewer.currentPageNumber=this._page}),this.updateSize()}getScale(v,W){const le=this._showBorders?2*N.BORDER_WIDTH:0,Ae=this.pdfViewerContainer.nativeElement.clientWidth-le,Pe=this.pdfViewerContainer.nativeElement.clientHeight-le;if(0===Pe||0===W||0===Ae||0===v)return 1;let we=1;switch(this._zoomScale){case"page-fit":we=Math.min(Pe/W,Ae/v);break;case"page-height":we=Pe/W;break;default:we=Ae/v}return this._zoom*we/N.CSS_UNITS}resetPdfDocument(){this.pdfLinkService.setDocument(this._pdf,null),this.pdfFindController.setDocument(this._pdf),this.pdfViewer.setDocument(this._pdf)}initialize(){oe()||!this.isVisible||(this.isInitialized=!0,this.initEventBus(),this.setupViewer())}setupResizeListener(){oe()||this.ngZone.runOutsideAngular(()=>{(0,h.R)(window,"resize").pipe(k(100),(0,X.h)(()=>this._canAutoResize&&!!this._pdf),U(this.destroy$)).subscribe(()=>{this.updateSize()})})}}return N.CSS_UNITS=96/72,N.BORDER_WIDTH=9,N.\u0275fac=function(v){return new(v||N)(r.Y36(r.SBq),r.Y36(r.R0b))},N.\u0275cmp=r.Xpm({type:N,selectors:[["pdf-viewer"]],viewQuery:function(v,W){if(1&v&&r.Gf(ue,5),2&v){let le;r.iGM(le=r.CRH())&&(W.pdfViewerContainer=le.first)}},inputs:{src:"src",cMapsUrl:["c-maps-url","cMapsUrl"],page:"page",renderText:["render-text","renderText"],renderTextMode:["render-text-mode","renderTextMode"],originalSize:["original-size","originalSize"],showAll:["show-all","showAll"],stickToPage:["stick-to-page","stickToPage"],zoom:"zoom",zoomScale:["zoom-scale","zoomScale"],rotation:"rotation",externalLinkTarget:["external-link-target","externalLinkTarget"],autoresize:"autoresize",fitToPage:["fit-to-page","fitToPage"],showBorders:["show-borders","showBorders"]},outputs:{afterLoadComplete:"after-load-complete",pageRendered:"page-rendered",pageInitialized:"pages-initialized",textLayerRendered:"text-layer-rendered",onError:"error",onProgress:"on-progress",pageChange:"pageChange"},features:[r.TTD],decls:3,vars:0,consts:[[1,"ng2-pdf-viewer-container"],["pdfViewerContainer",""],[1,"pdfViewer"]],template:function(v,W){1&v&&(r.TgZ(0,"div",0,1),r._UZ(2,"div",2),r.qZA())},styles:[".ng2-pdf-viewer-container[_ngcontent-%COMP%]{overflow-x:auto;position:absolute;height:100%;width:100%;-webkit-overflow-scrolling:touch}[_nghost-%COMP%]{display:block;position:relative}[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 0;--page-margin: 1px auto -8px;--page-border: 9px solid transparent;--spreadHorizontalWrapped-margin-LR: -3.5px;--zoom-factor: 1;--viewport-scale-factor: 1;--shadow: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAA1ElEQVQ4jbWUWw6EIAxFy2NFs/8NzR4UJhpqLsdi5mOmSSMUOfYWqv3S0gMr4XlYH/64gZa/gN3ANYA7KAXALt4ktoQ5MI9YxqaG8bWmsIysMuT6piSQCa4whZThCu8CM4zP9YJaKci9jicPq3NcBWYoPMGUlhG7ivtkB+gVyFY75wXghOvh8t5mto1Mdim6e+MBqH6XsY+YAwjpq3vGF7weTWQptLEDVCZvPTMl5JZZsdh47FHW6qFMyvLYqjcnmdFfY9Xk/KDOlzCusX2mi/ofM7MPkzBcSp4Q1/wAAAAASUVORK5CYII=);--viewer-container-height: 0;--annotation-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\");--xfa-unfocused-field-background: url(\"data:image/svg+xml;charset=UTF-8,<svg width='1px' height='1px' xmlns='http://www.w3.org/2000/svg'><rect width='100%' height='100%' style='fill:rgba(0, 54, 255, 0.13);'/></svg>\")}@media screen and (forced-colors: active){[_nghost-%COMP%]    {--pdfViewer-padding-bottom: 9px;--page-margin: 9px auto 0;--page-border: none;--spreadHorizontalWrapped-margin-LR: 4.5px}}[_nghost-%COMP%]     .textLayer{position:absolute;text-align:initial;left:0;top:0;right:0;bottom:0;overflow:hidden;opacity:.2;line-height:1;-webkit-text-size-adjust:none;text-size-adjust:none;forced-color-adjust:none}[_nghost-%COMP%]     .textLayer span, [_nghost-%COMP%]     .textLayer br{color:transparent;position:absolute;white-space:pre;cursor:text;transform-origin:0% 0%}[_nghost-%COMP%]     .textLayer span.markedContent{top:0;height:0}[_nghost-%COMP%]     .textLayer .highlight{margin:-1px;padding:1px;background-color:#b400aa;border-radius:4px}[_nghost-%COMP%]     .textLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .textLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .textLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .textLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .textLayer .highlight.selected{background-color:#006400}[_nghost-%COMP%]     .textLayer ::selection{background:blue}[_nghost-%COMP%]     .textLayer br::selection{background:transparent}[_nghost-%COMP%]     .textLayer .endOfContent{display:block;position:absolute;left:0;top:100%;right:0;bottom:0;z-index:-1;cursor:default;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .textLayer .endOfContent.active{top:0}[_nghost-%COMP%]     .annotationLayer section{position:absolute;text-align:initial}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a{position:absolute;font-size:1em;top:0;left:0;width:100%;height:100%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>canvas{position:relative;top:0;left:0;z-index:-1}[_nghost-%COMP%]     .annotationLayer .linkAnnotation>a:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.pushButton>a:hover{opacity:.2;background:yellow;box-shadow:0 2px 10px #ff0}[_nghost-%COMP%]     .annotationLayer .textAnnotation img{position:absolute;cursor:pointer}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{background-image:var(--annotation-unfocused-field-background);border:1px solid transparent;box-sizing:border-box;font-size:9px;height:100%;margin:0;padding:0 3px;vertical-align:top;width:100%}[_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select option{padding:0}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{border-radius:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea{font:message-box;font-size:9px;resize:none}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input[disabled], [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea[disabled], [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input[disabled], [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input[disabled]{background:none;border:1px solid transparent;cursor:not-allowed}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:hover, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:hover, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:hover, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:hover{border:1px solid black}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input:focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea:focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select:focus{background:none;border:1px solid transparent}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input :focus, [_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation textarea :focus, [_nghost-%COMP%]     .annotationLayer .choiceWidgetAnnotation select :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox :focus, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton :focus{background-image:none;background-color:transparent;outline:auto}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{background-color:#000;content:\"\";display:block;position:absolute}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{height:80%;left:45%;width:1px}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:before{transform:rotate(45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input:checked:after{transform:rotate(-45deg)}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input:checked:before{border-radius:50%;height:50%;left:30%;top:20%;width:50%}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb{font-family:monospace;padding-left:2px;padding-right:0}[_nghost-%COMP%]     .annotationLayer .textWidgetAnnotation input.comb:focus{width:103%}[_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.checkBox input, [_nghost-%COMP%]     .annotationLayer .buttonWidgetAnnotation.radioButton input{-webkit-appearance:none;-moz-appearance:none;appearance:none;padding:0}[_nghost-%COMP%]     .annotationLayer .popupWrapper{position:absolute;width:20em}[_nghost-%COMP%]     .annotationLayer .popup{position:absolute;z-index:200;max-width:20em;background-color:#ff9;box-shadow:0 2px 5px #888;border-radius:2px;padding:6px;margin-left:5px;cursor:pointer;font:message-box;font-size:9px;white-space:normal;word-wrap:break-word}[_nghost-%COMP%]     .annotationLayer .popup>*{font-size:9px}[_nghost-%COMP%]     .annotationLayer .popup h1{display:inline-block}[_nghost-%COMP%]     .annotationLayer .popupDate{display:inline-block;margin-left:5px}[_nghost-%COMP%]     .annotationLayer .popupContent{border-top:1px solid #333333;margin-top:2px;padding-top:2px}[_nghost-%COMP%]     .annotationLayer .richText>*{white-space:pre-wrap}[_nghost-%COMP%]     .annotationLayer .highlightAnnotation, [_nghost-%COMP%]     .annotationLayer .underlineAnnotation, [_nghost-%COMP%]     .annotationLayer .squigglyAnnotation, [_nghost-%COMP%]     .annotationLayer .strikeoutAnnotation, [_nghost-%COMP%]     .annotationLayer .freeTextAnnotation, [_nghost-%COMP%]     .annotationLayer .lineAnnotation svg line, [_nghost-%COMP%]     .annotationLayer .squareAnnotation svg rect, [_nghost-%COMP%]     .annotationLayer .circleAnnotation svg ellipse, [_nghost-%COMP%]     .annotationLayer .polylineAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .polygonAnnotation svg polygon, [_nghost-%COMP%]     .annotationLayer .caretAnnotation, [_nghost-%COMP%]     .annotationLayer .inkAnnotation svg polyline, [_nghost-%COMP%]     .annotationLayer .stampAnnotation, [_nghost-%COMP%]     .annotationLayer .fileAttachmentAnnotation{cursor:pointer}[_nghost-%COMP%]     .xfaLayer .highlight{margin:-1px;padding:1px;background-color:#efcbed;border-radius:4px}[_nghost-%COMP%]     .xfaLayer .highlight.appended{position:initial}[_nghost-%COMP%]     .xfaLayer .highlight.begin{border-radius:4px 0 0 4px}[_nghost-%COMP%]     .xfaLayer .highlight.end{border-radius:0 4px 4px 0}[_nghost-%COMP%]     .xfaLayer .highlight.middle{border-radius:0}[_nghost-%COMP%]     .xfaLayer .highlight.selected{background-color:#cbdfcb}[_nghost-%COMP%]     .xfaLayer ::selection{background:blue}[_nghost-%COMP%]     .xfaPage{overflow:hidden;position:relative}[_nghost-%COMP%]     .xfaContentarea{position:absolute}[_nghost-%COMP%]     .xfaPrintOnly{display:none}[_nghost-%COMP%]     .xfaLayer{position:absolute;text-align:initial;top:0;left:0;transform-origin:0 0;line-height:1.2}[_nghost-%COMP%]     .xfaLayer *{color:inherit;font:inherit;font-style:inherit;font-weight:inherit;font-feature-settings:inherit;font-kerning:inherit;letter-spacing:-.01px;text-align:inherit;text-decoration:inherit;box-sizing:border-box;background-color:transparent;padding:0;margin:0;pointer-events:auto;line-height:inherit}[_nghost-%COMP%]     .xfaLayer div{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg{pointer-events:none}[_nghost-%COMP%]     .xfaLayer svg *{pointer-events:none}[_nghost-%COMP%]     .xfaLayer a{color:#00f}[_nghost-%COMP%]     .xfaRich li{margin-left:3em}[_nghost-%COMP%]     .xfaFont{color:#000;font-weight:400;font-feature-settings:\"kern\" off;font-kerning:none;font-size:10px;font-style:normal;letter-spacing:0;text-decoration:none;vertical-align:0}[_nghost-%COMP%]     .xfaCaption{overflow:hidden;flex:0 0 auto}[_nghost-%COMP%]     .xfaCaptionForCheckButton{overflow:hidden;flex:1 1 auto}[_nghost-%COMP%]     .xfaLabel{height:100%;width:100%}[_nghost-%COMP%]     .xfaLeft{display:flex;flex-direction:row;align-items:center}[_nghost-%COMP%]     .xfaRight{display:flex;flex-direction:row-reverse;align-items:center}[_nghost-%COMP%]     .xfaLeft>.xfaCaption, [_nghost-%COMP%]     .xfaLeft>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaRight>.xfaCaption, [_nghost-%COMP%]     .xfaRight>.xfaCaptionForCheckButton{max-height:100%}[_nghost-%COMP%]     .xfaTop{display:flex;flex-direction:column;align-items:flex-start}[_nghost-%COMP%]     .xfaBottom{display:flex;flex-direction:column-reverse;align-items:flex-start}[_nghost-%COMP%]     .xfaTop>.xfaCaption, [_nghost-%COMP%]     .xfaTop>.xfaCaptionForCheckButton, [_nghost-%COMP%]     .xfaBottom>.xfaCaption, [_nghost-%COMP%]     .xfaBottom>.xfaCaptionForCheckButton{width:100%}[_nghost-%COMP%]     .xfaBorder{background-color:transparent;position:absolute;pointer-events:none}[_nghost-%COMP%]     .xfaWrapped{width:100%;height:100%}[_nghost-%COMP%]     .xfaTextfield:focus, [_nghost-%COMP%]     .xfaSelect:focus{background-image:none;background-color:transparent;outline:auto;outline-offset:-1px}[_nghost-%COMP%]     .xfaCheckbox:focus, [_nghost-%COMP%]     .xfaRadio:focus{outline:auto}[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{height:100%;width:100%;flex:1 1 auto;border:none;resize:none;background-image:var(--xfa-unfocused-field-background)}[_nghost-%COMP%]     .xfaTop>.xfaTextfield, [_nghost-%COMP%]     .xfaTop>.xfaSelect, [_nghost-%COMP%]     .xfaBottom>.xfaTextfield, [_nghost-%COMP%]     .xfaBottom>.xfaSelect{flex:0 1 auto}[_nghost-%COMP%]     .xfaButton{cursor:pointer;width:100%;height:100%;border:none;text-align:center}[_nghost-%COMP%]     .xfaLink{width:100%;height:100%;position:absolute;top:0;left:0}[_nghost-%COMP%]     .xfaCheckbox, [_nghost-%COMP%]     .xfaRadio{width:100%;height:100%;flex:0 0 auto;border:none}[_nghost-%COMP%]     .xfaRich{white-space:pre-wrap;width:100%;height:100%}[_nghost-%COMP%]     .xfaImage{object-position:left top;object-fit:contain;width:100%;height:100%}[_nghost-%COMP%]     .xfaLrTb, [_nghost-%COMP%]     .xfaRlTb, [_nghost-%COMP%]     .xfaTb{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaLr{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaRl{display:flex;flex-direction:row-reverse;align-items:stretch}[_nghost-%COMP%]     .xfaTb>div{justify-content:left}[_nghost-%COMP%]     .xfaPosition{position:relative}[_nghost-%COMP%]     .xfaArea{position:relative}[_nghost-%COMP%]     .xfaValignMiddle{display:flex;align-items:center}[_nghost-%COMP%]     .xfaTable{display:flex;flex-direction:column;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRow{display:flex;flex-direction:row;align-items:stretch}[_nghost-%COMP%]     .xfaTable .xfaRlRow{display:flex;flex-direction:row-reverse;align-items:stretch;flex:1}[_nghost-%COMP%]     .xfaTable .xfaRlRow>div{flex:1}[_nghost-%COMP%]     .xfaNonInteractive input, [_nghost-%COMP%]     .xfaNonInteractive textarea, [_nghost-%COMP%]     .xfaDisabled input, [_nghost-%COMP%]     .xfaDisabled textarea, [_nghost-%COMP%]     .xfaReadOnly input, [_nghost-%COMP%]     .xfaReadOnly textarea{background:initial}@media print{[_nghost-%COMP%]     .xfaTextfield, [_nghost-%COMP%]     .xfaSelect{background:transparent}[_nghost-%COMP%]     .xfaSelect{-webkit-appearance:none;-moz-appearance:none;appearance:none;text-indent:1px;text-overflow:\"\"}}[_nghost-%COMP%]     .pdfViewer{padding-bottom:var(--pdfViewer-padding-bottom)}[_nghost-%COMP%]     .pdfViewer .canvasWrapper{overflow:hidden}[_nghost-%COMP%]     .pdfViewer .page{direction:ltr;width:816px;height:1056px;margin:var(--page-margin);position:relative;overflow:visible;border:var(--page-border);background-clip:content-box;border-image:var(--shadow) 9 9 repeat;background-color:#fff}[_nghost-%COMP%]     .pdfViewer .dummyPage{position:relative;width:0;height:var(--viewer-container-height)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .page{margin:0 auto 10px;border:none}[_nghost-%COMP%]     .pdfViewer.singlePageView{display:inline-block}[_nghost-%COMP%]     .pdfViewer.singlePageView .page{margin:0;border:none}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .pdfViewer.scrollWrapped, [_nghost-%COMP%]     .spread{margin-left:3.5px;margin-right:3.5px;text-align:center}[_nghost-%COMP%]     .pdfViewer.scrollHorizontal, [_nghost-%COMP%]     .spread{white-space:nowrap}[_nghost-%COMP%]     .pdfViewer.removePageBorders, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{margin-left:0;margin-right:0}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .spread .dummyPage, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .spread, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .spread{display:inline-block;vertical-align:middle}[_nghost-%COMP%]     .spread .page, [_nghost-%COMP%]     .pdfViewer.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.scrollWrapped .page{margin-left:var(--spreadHorizontalWrapped-margin-LR);margin-right:var(--spreadHorizontalWrapped-margin-LR)}[_nghost-%COMP%]     .pdfViewer.removePageBorders .spread .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollHorizontal .page, [_nghost-%COMP%]     .pdfViewer.removePageBorders.scrollWrapped .page{margin-left:5px;margin-right:5px}[_nghost-%COMP%]     .pdfViewer .page canvas{margin:0;display:block}[_nghost-%COMP%]     .pdfViewer .page canvas[hidden]{display:none}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon{position:absolute;display:block;left:0;top:0;right:0;bottom:0;background:url(data:image/gif;base64,R0lGODlhGAAYAPQQAM7Ozvr6+uDg4LCwsOjo6I6OjsjIyJycnNjY2KioqMDAwPLy8nZ2doaGhri4uGhoaP///wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACH/C05FVFNDQVBFMi4wAwEAAAAh/ilPcHRpbWl6ZWQgd2l0aCBodHRwczovL2V6Z2lmLmNvbS9vcHRpbWl6ZQAh+QQJBwAQACwAAAAAGAAYAAAFmiAkjiTkOGVaBgjZNGSgkgKjjM8zLoI8iy+BKCdiCX8iBeMAhEEIPRXLxViYUE9CbCQoFAzFhHY3zkaT3oPvBz1zE4UBsr1eWZH4vAowOBwGAHk8AoQLfH6Agm0Ed3qOAXWOIgQKiWyFJQgDgJEpdG+WEACNEFNFmKVlVzJQk6qdkwqBoi1mebJ3ALNGeIZHtGSwNDS1RZKueCEAIfkECQcAEAAsAAAAABgAGAAABZcgJI4kpChlWgYCWRQkEKgjURgjw4zOg9CjVwuiEyEeO6CxkBC9nA+HiuUqLEyoBZI0Mx4SAFFgQCDZuguBoGv6Dtg0gvpqdhxQQDkBzuUr/4A1JwMKP39pc2mDhYCIc4GQYn6QCwCMeY91l0p6dBAEJ0OfcFRimZ91Mwt0alxxAIZyRmuAsKxDLKKvZbM1tJxmvGKRpn8hACH5BAkHABAALAAAAAAYABgAAAWhICSOJGQYZVoGAnkcJBKoI3EAY1GMCtPSosSBINKJBIwGkHdwBGGQA0OhYpEGQxNqkYzNIITBACEKKBaxxNfBeOCO4vMy0Hg8nDHFeCktkKtfNAtoS4UqAicKBj9zBAKPC4iKi4aRkISGmWWBmjUIAIyHkCUEAKCVo2WmREecVqoCgZhgP4NHrGWCj7e3szSpuxAsoVWxnp6cVV4kyZW+KSEAIfkECQcAEAAsAAAAABgAGAAABZkgJI4kBABlWgYEOQykEKgjMSDjcYxG0dKi108nEhQKQN4rCIMkCgbawjWYnSCLY2yGVSgEooBhWqsGGwxc0RtNBgoMhmJ1QgETjANYFeBKyUmBKQQIdT9JDmgPDQ6EhoKJD4sOgpWWgiwChyqEBH5hmptSoSOZgJ4kLKWkYTF7C2SaqaM/hEWygay4mYG8t6uffFuzl1iANCEAIfkECQcAEAAsAAAAABgAGAAABZ0gJI4khCBlmhKkopBCoI6LIozDMAIHO4uuBVBnOiR+I4FrCDwAZsKdQnaCLIwwmRUA8JmioprWUCjcwlwUMnAoG0qL03k2KCS8cC0UjOzDCQKBfHQFDAwFU4CCfgqFhy9+kZJWgzSKSAcPZn+BfQENDw8OljGWJAFeDoZPYTBnC1GdSXqnsoBolSulX2GyP6hgvnG0KrS3NJNhuSQhACH5BAkHABAALAAAAAAYABgAAAWaICSOJCQIZZoupGGQRKCOC0CMijIiwz2LABtQZxoMfjQhxAXszWQ7gOwECRhh0MCJJRJARTUoIHFAgbfI6uBwAJS01J/i4PClVYHvfV8lbLlIBmwFbQt+aGmChG18jXeGT4dICQxlb4g/AQUMDER9XjR6BAdiDQwINDBmkAsPDVh4cX4imw53iLKuaVqAcUsPqEiidkt6j4AzIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiREEGWaBiSCtCoZCMsIAKOg1LEo0KKbaKFQ9EYLoOkFuQlirNxzCQkUW9GZ0hQd4nyDAWr4G/esYSbyZFYZwu3jqiuvr8u8I2BwOAwASXh1e31/doeHC3klWnElfAlTd46MfQUGk2stCVEGBQWSdCciDg5VDAVYKoEiDQ0iBwxGcj9RDw8+qHIzebc2DJJQJK6qiKVyIQAh+QQJBwAQACwAAAAAGAAYAAAFmSAkjiS0LGWaBiRBtCoZCKgoCCMB1DF0sz6cCQDo5W62l28XAyZFpyECBv3lnCbhUqHMIo0Qg4Jbmn1jRCa4iV27TzfXGjEecOFWMN1OdvvfPGUuXSoKBw6EXokrAwcHRVU0UAeEBANAAAmUI1gNDyhjJgUHLW0iDg8FIqOnBQZrDA9TELE2rEYIDw4jta2LMpCrqld/YQpgIQAh+QQJBwAQACwAAAAAGAAYAAAFmyAkjiS0LGWaBiRBkKw6BgIqCsJcyyMe4yJajhcEml5H26o1PN2QQd3uFiv2AADlAgflIbDdZLgkABOJgep5LfWty4p4zeU+w+XsvJWXliEKDwdEBgMKYQ4PDw1qK3EDCCMAiQ5BCV0LCj+FSDQkgCgGBiYHAy2MIgoMghAHqw4HAGsNDEMFBTekdgwKI7aRB2MwkL2rVHoQoWchACH5BAkHABAALAAAAAAYABgAAAWWICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkfbqjU83ZBB3e4WK0qrCxyU55peid0qcUwuixyNx6PhILsAcAJazXYj4lvz2MkLiFsHDAlEcABKZwwMBX8pBgoKQxAIigpBA1sLBj+PSDQkB4uSACYDlTMyBgWDEKVnl2QFBUigN61gBQYjtLV5JZ4jtlR6omMhACH5BAkHABAALAAAAAAYABgAAAWaICSOJLQsZZoGJEGQrDoGAioKwlzLIx7jIlqOFwSaXkdbidYanm7I4AjwYDh6saJuJ3JUG1mZi9srPA7EcRimJLrfJYWZUVC8TziXnEG3u/E+cIJaPAFrPQl1aQAIbRAGBZGHJQiMUQKRBkEKbQsAPZaEXQcslSYKmjMyAAdXj34ACkNEiUgDA5t+PAQHn6Ogjkuzry2DNwhuIQAh+QQFBwAQACwAAAAAGAAYAAAFnCAkjiS0LGVaBgBJEGSguo8zCsK4CPIsMg+ECCcKEH0ix6MwhJl4KiOp8UCdmrEbo6EoHpxF8A6aBBZ6vhf5dmAkkGr0CoWs21WGQ2FvsI9xC3l7B311fy93iWGKJQQOhHCAJQB6A3IqcWwJLU90i2FkUiMKlhBELEI6MwgDXRAGhQgAYD6tTqRFAJxpA6mvrqazSKJJhUWMpjlIIQA7) center no-repeat}[_nghost-%COMP%]     .pdfViewer .page .loadingIcon.notVisible{background:none}[_nghost-%COMP%]     .pdfViewer.enablePermissions .textLayer span{-webkit-user-select:none!important;user-select:none!important;cursor:not-allowed}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer{padding-bottom:0}[_nghost-%COMP%]     .pdfPresentationMode .spread{margin:0}[_nghost-%COMP%]     .pdfPresentationMode .pdfViewer .page{margin:0 auto;border:2px solid transparent}"]}),N})(),q=(()=>{class N{}return N.\u0275fac=function(v){return new(v||N)},N.\u0275mod=r.oAB({type:N}),N.\u0275inj=r.cJS({}),N})();var ge=K(2492),fe=K(3075);function me(N,ie){if(1&N&&r._UZ(0,"cms-html-content-viewer",5),2&N){const v=r.oxw(2);r.Q6J("item",v.content)}}function ve(N,ie){if(1&N){const v=r.EpF();r.TgZ(0,"div")(1,"pagination",9),r.NdJ("ngModelChange",function(le){return r.CHM(v),r.oxw(3).pdf_page=le}),r.qZA()()}if(2&N){const v=r.oxw(3);r.xp6(1),r.Q6J("itemsPerPage",1)("totalItems",v.pdf_total_pages)("ngModel",v.pdf_page)("maxSize",5)}}function Se(N,ie){if(1&N){const v=r.EpF();r.TgZ(0,"div",6)(1,"pdf-viewer",7),r.NdJ("after-load-complete",function(le){return r.CHM(v),r.oxw(2).callBackFn(le)})("pageChange",function(le){return r.CHM(v),r.oxw(2).pdf_page=le}),r.qZA(),r.YNc(2,ve,2,4,"div",8),r.qZA()}if(2&N){const v=r.oxw(2);r.xp6(1),r.Q6J("src",v.content.contentDetail)("render-text",!1)("fit-to-page",!0)("show-all",!1)("zoom-scale","page-fit")("original-size",!1)("autoresize",!0)("page",v.pdf_page),r.xp6(1),r.Q6J("ngIf",v.pdf_total_pages>1)}}function Te(N,ie){1&N&&(r.TgZ(0,"div"),r._uU(1,"Unsupported content"),r.qZA())}function Le(N,ie){if(1&N&&(r.TgZ(0,"div",1),r.YNc(1,me,1,1,"cms-html-content-viewer",2),r.YNc(2,Se,3,9,"div",3),r.YNc(3,Te,2,0,"div",4),r.qZA()),2&N){const v=r.oxw();r.Q6J("ngSwitch",v.content.contentType),r.xp6(1),r.Q6J("ngSwitchCase",1),r.xp6(1),r.Q6J("ngSwitchCase",2)}}let ke=(()=>{class N{constructor(v,W){this.menu_service=v,this.app_loader_service=W,this._cms_content_id=new _.X(0),this._subscriptions=[],this.pdf_page=1,this.pdf_total_pages=0}set cms_content_id(v){this._cms_content_id.next(v)}get cms_content_id(){return this._cms_content_id.getValue()}ngOnDestroy(){this._subscriptions.forEach(v=>v.unsubscribe())}ngOnInit(){const v=this._cms_content_id.pipe(k(200),function V(N,ie=O.y){return N=null!=N?N:G,(0,y.e)((v,W)=>{let le,Ae=!0;v.subscribe((0,T.x)(W,Pe=>{const we=ie(Pe);(Ae||!N(le,we))&&(Ae=!1,le=we,W.next(Pe))}))})}(),(0,X.h)(W=>0!=W),(0,Q.b)(W=>this.content=void 0),(0,B.w)(W=>(this.app_loader_service.loading_start(),this.menu_service.get_menu_content(+W)))).subscribe(W=>{this.app_loader_service.loading_end(),2==W.contentType&&(this.pdf_page=1,this.pdf_total_pages=0,this.app_loader_service.loading_start(),W.contentDetail=`${$.N.api}/assets/uploads${W.contentDetail}`),this.content=W});this._subscriptions.push(v)}callBackFn(v){this.pdf_total_pages=v.numPages,this.app_loader_service.loading_end()}}return N.\u0275fac=function(v){return new(v||N)(r.Y36(d.h),r.Y36(C.P))},N.\u0275cmp=r.Xpm({type:N,selectors:[["cms-content-viewer"]],inputs:{cms_content_id:"cms_content_id"},decls:1,vars:1,consts:[[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],[3,"item",4,"ngSwitchCase"],["class","pdf-viewer",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"item"],[1,"pdf-viewer"],[3,"src","render-text","fit-to-page","show-all","zoom-scale","original-size","autoresize","page","after-load-complete","pageChange"],[4,"ngIf"],[3,"itemsPerPage","totalItems","ngModel","maxSize","ngModelChange"]],template:function(v,W){1&v&&r.YNc(0,Le,4,3,"div",0),2&v&&r.Q6J("ngIf",W.content)},directives:[g.O5,g.RF,g.n9,l,I,ge.Qt,fe.JJ,fe.On,g.ED],styles:[".html-cont[_ngcontent-%COMP%]{overflow:auto;cursor:grab}.pdf-viewer[_ngcontent-%COMP%]{height:1100px}pdf-viewer[_ngcontent-%COMP%]{height:100%;max-width:1000px}"]}),N})();const R=[{path:":grandParentTitle/:pageTitle/:pageId",component:(()=>{class N{constructor(v,W,le,Ae){this.route=v,this.router=W,this.app_loader=le,this.menu_service=Ae,this.sidebar_content=[],this.title="",this._subscriptions=[],this.content_id$=(0,ne.a)([this.route.paramMap.pipe((0,ee.U)(Pe=>Pe.get("pageId"))),this.route.queryParamMap.pipe((0,ee.U)(Pe=>Pe.get("content")))]).pipe((0,ee.U)(Pe=>{var we;return Pe[1]?+Pe[1]:+(null!==(we=Pe[0])&&void 0!==we?we:0)}))}ngOnInit(){this.set_up_page();const v=this.route.paramMap.pipe((0,ee.U)(W=>W.get("pageId"))).subscribe(W=>{this.set_up_page()});this._subscriptions.push(v)}ngOnDestroy(){this._subscriptions.forEach(v=>v.unsubscribe())}set_up_page(){var v;const W=this.route.snapshot.queryParamMap.get("content"),le=+(null!==(v=this.route.snapshot.paramMap.get("pageId"))&&void 0!==v?v:0);W||(this.sidebar_content=this.default_sidebar()),(W?this.menu_service.get_top_menu_tree(+le):(0,D.of)(this.default_sidebar())).subscribe(Pe=>{if(W){const we=d.h.get_first_grandchild(Pe[0]);this.title=we.menuLabel}else this.title="";this.sidebar_content=Pe,this.app_loader.loading_end()})}default_sidebar(){return(0,b.JG)(x).map((W,le)=>({children:[],isPublished:!0,menuId:0,menuLabel:W.title,menuOrder:le,menuParent:0}))}navigate(v){const W={content:v.menuId};this.title=v.menuLabel,this.router.navigate([],{relativeTo:this.route,queryParams:W,queryParamsHandling:"merge"})}}return N.\u0275fac=function(v){return new(v||N)(r.Y36(re.gz),r.Y36(re.F0),r.Y36(C.P),r.Y36(d.h))},N.\u0275cmp=r.Xpm({type:N,selectors:[["app-default-cms"]],decls:15,vars:6,consts:[["cms",""],[1,"bg-white","py-5"],[1,"container","layout-container"],[1,"row"],[1,"col-md-4"],[3,"items","on_select"],[1,"col-md-8"],[1,"cms-cont","ms-3"],[1,"cms-title","mb-3","p-relative",3,"hidden"],[1,"priority"],[3,"cms_content_id"]],template:function(v,W){1&v&&(r.TgZ(0,"div",null,0),r._UZ(2,"util-page-title"),r.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4)(7,"shrd-sidebar",5),r.NdJ("on_select",function(Ae){return W.navigate(Ae)}),r.qZA()(),r.TgZ(8,"div",6)(9,"div",7)(10,"h2",8),r._UZ(11,"div",9),r._uU(12),r.qZA(),r._UZ(13,"cms-content-viewer",10),r.ALo(14,"async"),r.qZA()()()()()()),2&v&&(r.xp6(7),r.Q6J("items",W.sidebar_content),r.xp6(3),r.Q6J("hidden",!W.title),r.xp6(2),r.hij(" ",W.title," "),r.xp6(1),r.Q6J("cms_content_id",r.lcZ(14,4,W.content_id$)))},directives:[o.T,i,ke],pipes:[g.Ov],styles:[""]}),N})()}];let F=(()=>{class N{}return N.\u0275fac=function(v){return new(v||N)},N.\u0275mod=r.oAB({type:N}),N.\u0275inj=r.cJS({imports:[[re.Bz.forChild(R)],re.Bz]}),N})();var he=K(2234);let pe=(()=>{class N{}return N.\u0275fac=function(v){return new(v||N)},N.\u0275mod=r.oAB({type:N}),N.\u0275inj=r.cJS({imports:[[g.ez,F,_e.A,s.f,u,q,ge.u3,fe.u5,he.m]]}),N})()},6036:function(module,__unused_webpack_exports,__webpack_require__){var _asyncToGenerator=__webpack_require__(8926).default,K;K=()=>(()=>{"use strict";var __webpack_modules__=[,(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.VerbosityLevel=L.Util=L.UnknownErrorException=L.UnexpectedResponseException=L.UNSUPPORTED_FEATURES=L.TextRenderingMode=L.StreamType=L.RenderingIntentFlag=L.PermissionFlag=L.PasswordResponses=L.PasswordException=L.PageActionEventType=L.OPS=L.MissingPDFException=L.InvalidPDFException=L.ImageKind=L.IDENTITY_MATRIX=L.FormatError=L.FontType=L.FeatureTest=L.FONT_IDENTITY_MATRIX=L.DocumentActionEventType=L.CMapCompressionType=L.BaseException=L.AnnotationType=L.AnnotationStateModelType=L.AnnotationReviewState=L.AnnotationReplyType=L.AnnotationMode=L.AnnotationMarkedState=L.AnnotationFlag=L.AnnotationFieldFlag=L.AnnotationBorderStyleType=L.AnnotationActionEventType=L.AbortException=void 0,L.arrayByteLength=U,L.arraysToBytes=function H(se){const R=se.length;if(1===R&&se[0]instanceof Uint8Array)return se[0];let F=0;for(let N=0;N<R;N++)F+=U(se[N]);let he=0;const pe=new Uint8Array(F);for(let N=0;N<R;N++){let ie=se[N];ie instanceof Uint8Array||(ie="string"==typeof ie?j(ie):new Uint8Array(ie));const v=ie.byteLength;pe.set(ie,he),he+=v}return pe},L.assert=function $(se,R){se||B(R)},L.bytesToString=function E(se){("object"!=typeof se||null===se||void 0===se.length)&&B("Invalid argument for bytesToString");const R=se.length,F=8192;if(R<F)return String.fromCharCode.apply(null,se);const he=[];for(let pe=0;pe<R;pe+=F){const N=Math.min(pe+F,R),ie=se.subarray(pe,N);he.push(String.fromCharCode.apply(null,ie))}return he.join("")},L.createPromiseCapability=function ke(){const se=Object.create(null);let R=!1;return Object.defineProperty(se,"settled",{get:()=>R}),se.promise=new Promise(function(F,he){se.resolve=function(pe){R=!0,F(pe)},se.reject=function(pe){R=!0,he(pe)}}),se},L.createValidAbsoluteUrl=function ae(se,R=null,F=null){if(!se)return null;try{if(F&&"string"==typeof se){if(F.addDefaultProtocol&&se.startsWith("www.")){const pe=se.match(/\./g);pe&&pe.length>=2&&(se=`http://${se}`)}if(F.tryConvertEncoding)try{se=me(se)}catch(pe){}}const he=R?new URL(se,R):new URL(se);if(function J(se){if(!se)return!1;switch(se.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(he))return he}catch(he){}return null},L.escapeString=function q(se){return se.replace(/([()\\\n\r])/g,R=>"\n"===R?"\\n":"\r"===R?"\\r":`\\${R}`)},L.getModificationDate=function Le(se=new Date){return[se.getUTCFullYear().toString(),(se.getUTCMonth()+1).toString().padStart(2,"0"),se.getUTCDate().toString().padStart(2,"0"),se.getUTCHours().toString().padStart(2,"0"),se.getUTCMinutes().toString().padStart(2,"0"),se.getUTCSeconds().toString().padStart(2,"0")].join("")},L.getVerbosityLevel=function G(){return O},L.info=function X(se){O>=_.INFOS&&console.log(`Info: ${se}`)},L.isArrayBuffer=function Se(se){return"object"==typeof se&&null!==se&&void 0!==se.byteLength},L.isArrayEqual=function Te(se,R){if(se.length!==R.length)return!1;for(let F=0,he=se.length;F<he;F++)if(se[F]!==R[F])return!1;return!0},L.isAscii=function ge(se){return/^[\x00-\x7F]*$/.test(se)},L.objectFromMap=function Z(se){const R=Object.create(null);for(const[F,he]of se)R[F]=he;return R},L.objectSize=function Y(se){return Object.keys(se).length},L.setVerbosityLevel=function V(se){Number.isInteger(se)&&(O=se)},L.shadow=de,L.string32=function z(se){return String.fromCharCode(se>>24&255,se>>16&255,se>>8&255,255&se)},L.stringToBytes=j,L.stringToPDFString=function I(se){if(se[0]>="\xef"){let F;if("\xfe"===se[0]&&"\xff"===se[1]?F="utf-16be":"\xff"===se[0]&&"\xfe"===se[1]?F="utf-16le":"\xef"===se[0]&&"\xbb"===se[1]&&"\xbf"===se[2]&&(F="utf-8"),F)try{const he=new TextDecoder(F,{fatal:!0}),pe=j(se);return he.decode(pe)}catch(he){Q(`stringToPDFString: "${he}".`)}}const R=[];for(let F=0,he=se.length;F<he;F++){const pe=w[se.charCodeAt(F)];R.push(pe?String.fromCharCode(pe):se.charAt(F))}return R.join("")},L.stringToUTF16BEString=function fe(se){const R=["\xfe\xff"];for(let F=0,he=se.length;F<he;F++){const pe=se.charCodeAt(F);R.push(String.fromCharCode(pe>>8&255),String.fromCharCode(255&pe))}return R.join("")},L.stringToUTF8String=me,L.unreachable=B,L.utf8StringToString=function ve(se){return unescape(encodeURIComponent(se))},L.warn=Q,K(2),L.IDENTITY_MATRIX=[1,0,0,1,0,0],L.FONT_IDENTITY_MATRIX=[.001,0,0,.001,0,0],L.RenderingIntentFlag={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256},L.AnnotationMode={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},L.PermissionFlag={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},L.TextRenderingMode={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},L.ImageKind={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},L.AnnotationType={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},L.AnnotationStateModelType={MARKED:"Marked",REVIEW:"Review"},L.AnnotationMarkedState={MARKED:"Marked",UNMARKED:"Unmarked"},L.AnnotationReviewState={ACCEPTED:"Accepted",REJECTED:"Rejected",CANCELLED:"Cancelled",COMPLETED:"Completed",NONE:"None"},L.AnnotationReplyType={GROUP:"Group",REPLY:"R"},L.AnnotationFlag={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512},L.AnnotationFieldFlag={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864},L.AnnotationBorderStyleType={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},L.AnnotationActionEventType={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"},L.DocumentActionEventType={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"},L.PageActionEventType={O:"PageOpen",C:"PageClose"},L.StreamType={UNKNOWN:"UNKNOWN",FLATE:"FLATE",LZW:"LZW",DCT:"DCT",JPX:"JPX",JBIG:"JBIG",A85:"A85",AHX:"AHX",CCF:"CCF",RLX:"RLX"},L.FontType={UNKNOWN:"UNKNOWN",TYPE1:"TYPE1",TYPE1STANDARD:"TYPE1STANDARD",TYPE1C:"TYPE1C",CIDFONTTYPE0:"CIDFONTTYPE0",CIDFONTTYPE0C:"CIDFONTTYPE0C",TRUETYPE:"TRUETYPE",CIDFONTTYPE2:"CIDFONTTYPE2",TYPE3:"TYPE3",OPENTYPE:"OPENTYPE",TYPE0:"TYPE0",MMTYPE1:"MMTYPE1"};const _={ERRORS:0,WARNINGS:1,INFOS:5};L.VerbosityLevel=_,L.CMapCompressionType={NONE:0,BINARY:1,STREAM:2},L.OPS={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotations:78,endAnnotations:79,beginAnnotation:80,endAnnotation:81,paintJpegXObject:82,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91},L.UNSUPPORTED_FEATURES={unknown:"unknown",forms:"forms",javaScript:"javaScript",signatures:"signatures",smask:"smask",shadingPattern:"shadingPattern",font:"font",errorTilingPattern:"errorTilingPattern",errorExtGState:"errorExtGState",errorXObject:"errorXObject",errorFontLoadType3:"errorFontLoadType3",errorFontState:"errorFontState",errorFontMissing:"errorFontMissing",errorFontTranslate:"errorFontTranslate",errorColorSpace:"errorColorSpace",errorOperatorList:"errorOperatorList",errorFontToUnicode:"errorFontToUnicode",errorFontLoadNative:"errorFontLoadNative",errorFontBuildPath:"errorFontBuildPath",errorFontGetPath:"errorFontGetPath",errorMarkedContent:"errorMarkedContent",errorContentSubStream:"errorContentSubStream"},L.PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let O=_.WARNINGS;function Q(se){O>=_.WARNINGS&&console.log(`Warning: ${se}`)}function B(se){throw new Error(se)}function de(se,R,F){return Object.defineProperty(se,R,{value:F,enumerable:!0,configurable:!0,writable:!1}),F}const M=function(){function R(F,he){this.constructor===R&&B("Cannot initialize BaseException."),this.message=F,this.name=he}return R.prototype=new Error,R.constructor=R,R}();function j(se){"string"!=typeof se&&B("Invalid argument for stringToBytes");const R=se.length,F=new Uint8Array(R);for(let he=0;he<R;++he)F[he]=255&se.charCodeAt(he);return F}function U(se){return void 0!==se.length?se.length:void 0!==se.byteLength?se.byteLength:void B("Invalid argument for arrayByteLength")}L.BaseException=M,L.PasswordException=class a extends M{constructor(R,F){super(R,"PasswordException"),this.code=F}},L.UnknownErrorException=class u extends M{constructor(R,F){super(R,"UnknownErrorException"),this.details=F}},L.InvalidPDFException=class t extends M{constructor(R){super(R,"InvalidPDFException")}},L.MissingPDFException=class l extends M{constructor(R){super(R,"MissingPDFException")}},L.UnexpectedResponseException=class h extends M{constructor(R,F){super(R,"UnexpectedResponseException"),this.status=F}},L.FormatError=class S extends M{constructor(R){super(R,"FormatError")}},L.AbortException=class A extends M{constructor(R){super(R,"AbortException")}},L.FeatureTest=class te{static get isLittleEndian(){return de(this,"isLittleEndian",function ue(){const se=new Uint8Array(4);return se[0]=1,1===new Uint32Array(se.buffer,0,1)[0]}())}static get isEvalSupported(){return de(this,"isEvalSupported",function ye(){try{return new Function(""),!0}catch(se){return!1}}())}static get isOffscreenCanvasSupported(){return de(this,"isOffscreenCanvasSupported","undefined"!=typeof OffscreenCanvas)}};const ce=[...Array(256).keys()].map(se=>se.toString(16).padStart(2,"0"));class oe{static makeHexColor(R,F,he){return`#${ce[R]}${ce[F]}${ce[he]}`}static scaleMinMax(R,F){let he;R[0]?(R[0]<0&&(he=F[0],F[0]=F[1],F[1]=he),F[0]*=R[0],F[1]*=R[0],R[3]<0&&(he=F[2],F[2]=F[3],F[3]=he),F[2]*=R[3],F[3]*=R[3]):(he=F[0],F[0]=F[2],F[2]=he,he=F[1],F[1]=F[3],F[3]=he,R[1]<0&&(he=F[2],F[2]=F[3],F[3]=he),F[2]*=R[1],F[3]*=R[1],R[2]<0&&(he=F[0],F[0]=F[1],F[1]=he),F[0]*=R[2],F[1]*=R[2]),F[0]+=R[4],F[1]+=R[4],F[2]+=R[5],F[3]+=R[5]}static transform(R,F){return[R[0]*F[0]+R[2]*F[1],R[1]*F[0]+R[3]*F[1],R[0]*F[2]+R[2]*F[3],R[1]*F[2]+R[3]*F[3],R[0]*F[4]+R[2]*F[5]+R[4],R[1]*F[4]+R[3]*F[5]+R[5]]}static applyTransform(R,F){return[R[0]*F[0]+R[1]*F[2]+F[4],R[0]*F[1]+R[1]*F[3]+F[5]]}static applyInverseTransform(R,F){const he=F[0]*F[3]-F[1]*F[2];return[(R[0]*F[3]-R[1]*F[2]+F[2]*F[5]-F[4]*F[3])/he,(-R[0]*F[1]+R[1]*F[0]+F[4]*F[1]-F[5]*F[0])/he]}static getAxialAlignedBoundingBox(R,F){const he=oe.applyTransform(R,F),pe=oe.applyTransform(R.slice(2,4),F),N=oe.applyTransform([R[0],R[3]],F),ie=oe.applyTransform([R[2],R[1]],F);return[Math.min(he[0],pe[0],N[0],ie[0]),Math.min(he[1],pe[1],N[1],ie[1]),Math.max(he[0],pe[0],N[0],ie[0]),Math.max(he[1],pe[1],N[1],ie[1])]}static inverseTransform(R){const F=R[0]*R[3]-R[1]*R[2];return[R[3]/F,-R[1]/F,-R[2]/F,R[0]/F,(R[2]*R[5]-R[4]*R[3])/F,(R[4]*R[1]-R[5]*R[0])/F]}static apply3dTransform(R,F){return[R[0]*F[0]+R[1]*F[1]+R[2]*F[2],R[3]*F[0]+R[4]*F[1]+R[5]*F[2],R[6]*F[0]+R[7]*F[1]+R[8]*F[2]]}static singularValueDecompose2dScale(R){const F=[R[0],R[2],R[1],R[3]],he=R[0]*F[0]+R[1]*F[2],ie=R[2]*F[1]+R[3]*F[3],v=(he+ie)/2,W=Math.sqrt((he+ie)**2-4*(he*ie-(R[2]*F[0]+R[3]*F[2])*(R[0]*F[1]+R[1]*F[3])))/2,Ae=v-W||1;return[Math.sqrt(v+W||1),Math.sqrt(Ae)]}static normalizeRect(R){const F=R.slice(0);return R[0]>R[2]&&(F[0]=R[2],F[2]=R[0]),R[1]>R[3]&&(F[1]=R[3],F[3]=R[1]),F}static intersect(R,F){const he=Math.max(Math.min(R[0],R[2]),Math.min(F[0],F[2])),pe=Math.min(Math.max(R[0],R[2]),Math.max(F[0],F[2]));if(he>pe)return null;const N=Math.max(Math.min(R[1],R[3]),Math.min(F[1],F[3])),ie=Math.min(Math.max(R[1],R[3]),Math.max(F[1],F[3]));return N>ie?null:[he,N,pe,ie]}static bezierBoundingBox(R,F,he,pe,N,ie,v,W){const le=[],Ae=[[],[]];let Pe,we,Re,Me,Oe,Ve,Be,Ie;for(let Xe=0;Xe<2;++Xe)if(0===Xe?(we=6*R-12*he+6*N,Pe=-3*R+9*he-9*N+3*v,Re=3*he-3*R):(we=6*F-12*pe+6*ie,Pe=-3*F+9*pe-9*ie+3*W,Re=3*pe-3*F),Math.abs(Pe)<1e-12){if(Math.abs(we)<1e-12)continue;Me=-Re/we,0<Me&&Me<1&&le.push(Me)}else Be=we*we-4*Re*Pe,Ie=Math.sqrt(Be),!(Be<0)&&(Oe=(-we+Ie)/(2*Pe),0<Oe&&Oe<1&&le.push(Oe),Ve=(-we-Ie)/(2*Pe),0<Ve&&Ve<1&&le.push(Ve));let De,Ne=le.length;const Ue=Ne;for(;Ne--;)Me=le[Ne],De=1-Me,Ae[0][Ne]=De*De*De*R+3*De*De*Me*he+3*De*Me*Me*N+Me*Me*Me*v,Ae[1][Ne]=De*De*De*F+3*De*De*Me*pe+3*De*Me*Me*ie+Me*Me*Me*W;return Ae[0][Ue]=R,Ae[1][Ue]=F,Ae[0][Ue+1]=v,Ae[1][Ue+1]=W,Ae[0].length=Ae[1].length=Ue+2,[Math.min(...Ae[0]),Math.min(...Ae[1]),Math.max(...Ae[0]),Math.max(...Ae[1])]}}L.Util=oe;const w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function me(se){return decodeURIComponent(escape(se))}},(be,L,K)=>{K(3)},(be,L)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.isNodeJS=void 0;const K=!("object"!=typeof process||process+""!="[object process]"||process.versions.nw||process.versions.electron&&process.type&&"browser"!==process.type);L.isNodeJS=K},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var be,K,g,_e,re,ne,ee,D,d,nt,b;Object.defineProperty(exports,"__esModule",{value:!0}),exports.build=exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,exports.getDocument=getDocument,exports.setPDFNetworkStreamFactory=setPDFNetworkStreamFactory,exports.version=void 0;var _util=__w_pdfjs_require__(1),_display_utils=__w_pdfjs_require__(5),_font_loader=__w_pdfjs_require__(7),_annotation_storage=__w_pdfjs_require__(8),_canvas=__w_pdfjs_require__(10),_worker_options=__w_pdfjs_require__(13),_is_node=__w_pdfjs_require__(3),_message_handler=__w_pdfjs_require__(14),_metadata=__w_pdfjs_require__(15),_optional_content_config=__w_pdfjs_require__(16),_transport_stream=__w_pdfjs_require__(17),_xfa_text=__w_pdfjs_require__(18);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100;let DefaultCanvasFactory=_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;let DefaultCMapReaderFactory=_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;let DefaultStandardFontDataFactory=_display_utils.DOMStandardFontDataFactory,createPDFNetworkStream;if(exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory,_is_node.isNodeJS){const{NodeCanvasFactory:C,NodeCMapReaderFactory:o,NodeStandardFontDataFactory:s}=__w_pdfjs_require__(19);exports.DefaultCanvasFactory=DefaultCanvasFactory=C,exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory=o,exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory=s}function setPDFNetworkStreamFactory(C){createPDFNetworkStream=C}function getDocument(C){const o=new PDFDocumentLoadingTask;let s;if("string"==typeof C||C instanceof URL)s={url:C};else if((0,_util.isArrayBuffer)(C))s={data:C};else if(C instanceof PDFDataRangeTransport)s={range:C};else{if("object"!=typeof C)throw new Error("Invalid parameter in getDocument, need either string, URL, Uint8Array, or parameter object.");if(!C.url&&!C.data&&!C.range)throw new Error("Invalid parameter object: need either .data, .range or .url");s=C}const n=Object.create(null);let c=null,P=null;for(const p in s){const e=s[p];switch(p){case"url":if("undefined"!=typeof window)try{n[p]=new URL(e,window.location).href;continue}catch(i){(0,_util.warn)(`Cannot create valid URL: "${i}".`)}else if("string"==typeof e||e instanceof URL){n[p]=e.toString();continue}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.");case"range":c=e;continue;case"worker":P=e;continue;case"data":if(_is_node.isNodeJS&&"undefined"!=typeof Buffer&&e instanceof Buffer)n[p]=new Uint8Array(e);else{if(e instanceof Uint8Array)break;if("string"==typeof e)n[p]=(0,_util.stringToBytes)(e);else if("object"!=typeof e||null===e||isNaN(e.length)){if(!(0,_util.isArrayBuffer)(e))throw new Error("Invalid PDF binary data: either typed array, string, or array-like object is expected in the data property.");n[p]=new Uint8Array(e)}else n[p]=new Uint8Array(e)}continue}n[p]=e}if(n.CMapReaderFactory=n.CMapReaderFactory||DefaultCMapReaderFactory,n.StandardFontDataFactory=n.StandardFontDataFactory||DefaultStandardFontDataFactory,n.ignoreErrors=!0!==n.stopAtErrors,n.fontExtraProperties=!0===n.fontExtraProperties,n.pdfBug=!0===n.pdfBug,n.enableXfa=!0===n.enableXfa,(!Number.isInteger(n.rangeChunkSize)||n.rangeChunkSize<1)&&(n.rangeChunkSize=DEFAULT_RANGE_CHUNK_SIZE),("string"!=typeof n.docBaseUrl||(0,_display_utils.isDataScheme)(n.docBaseUrl))&&(n.docBaseUrl=null),(!Number.isInteger(n.maxImageSize)||n.maxImageSize<-1)&&(n.maxImageSize=-1),"string"!=typeof n.cMapUrl&&(n.cMapUrl=null),"string"!=typeof n.standardFontDataUrl&&(n.standardFontDataUrl=null),"boolean"!=typeof n.useWorkerFetch&&(n.useWorkerFetch=n.CMapReaderFactory===_display_utils.DOMCMapReaderFactory&&n.StandardFontDataFactory===_display_utils.DOMStandardFontDataFactory),"boolean"!=typeof n.isEvalSupported&&(n.isEvalSupported=!0),"boolean"!=typeof n.disableFontFace&&(n.disableFontFace=_is_node.isNodeJS),"boolean"!=typeof n.useSystemFonts&&(n.useSystemFonts=!_is_node.isNodeJS&&!n.disableFontFace),("object"!=typeof n.ownerDocument||null===n.ownerDocument)&&(n.ownerDocument=globalThis.document),"boolean"!=typeof n.disableRange&&(n.disableRange=!1),"boolean"!=typeof n.disableStream&&(n.disableStream=!1),"boolean"!=typeof n.disableAutoFetch&&(n.disableAutoFetch=!1),(0,_util.setVerbosityLevel)(n.verbosity),!P){const p={verbosity:n.verbosity,port:_worker_options.GlobalWorkerOptions.workerPort};P=p.port?PDFWorker.fromPort(p):new PDFWorker(p),o._worker=P}const f=o.docId;return P.promise.then(function(){if(o.destroyed)throw new Error("Loading aborted");const p=_fetchDocument(P,n,c,f),e=new Promise(function(i){let _;c?_=new _transport_stream.PDFDataTransportStream({length:n.length,initialData:n.initialData,progressiveDone:n.progressiveDone,contentDispositionFilename:n.contentDispositionFilename,disableRange:n.disableRange,disableStream:n.disableStream},c):n.data||(_=createPDFNetworkStream({url:n.url,length:n.length,httpHeaders:n.httpHeaders,withCredentials:n.withCredentials,rangeChunkSize:n.rangeChunkSize,disableRange:n.disableRange,disableStream:n.disableStream})),i(_)});return Promise.all([p,e]).then(function([i,_]){if(o.destroyed)throw new Error("Loading aborted");const m=new _message_handler.MessageHandler(f,i,P.port),y=new WorkerTransport(m,o,_,n);o._transport=y,m.send("Ready",null)})}).catch(o._capability.reject),o}function _fetchDocument(C,o,s,n){return _fetchDocument2.apply(this,arguments)}function _fetchDocument2(){return(_fetchDocument2=_asyncToGenerator(function*(C,o,s,n){if(C.destroyed)throw new Error("Worker was destroyed");s&&(o.length=s.length,o.initialData=s.initialData,o.progressiveDone=s.progressiveDone,o.contentDispositionFilename=s.contentDispositionFilename);const c=yield C.messageHandler.sendWithPromise("GetDocRequest",{docId:n,apiVersion:"2.14.305",source:{data:o.data,url:o.url,password:o.password,disableAutoFetch:o.disableAutoFetch,rangeChunkSize:o.rangeChunkSize,length:o.length},maxImageSize:o.maxImageSize,disableFontFace:o.disableFontFace,docBaseUrl:o.docBaseUrl,ignoreErrors:o.ignoreErrors,isEvalSupported:o.isEvalSupported,fontExtraProperties:o.fontExtraProperties,enableXfa:o.enableXfa,useSystemFonts:o.useSystemFonts,cMapUrl:o.useWorkerFetch?o.cMapUrl:null,standardFontDataUrl:o.useWorkerFetch?o.standardFontDataUrl:null});if(C.destroyed)throw new Error("Worker was destroyed");return c})).apply(this,arguments)}const L=class{constructor(){this._capability=(0,_util.createPromiseCapability)(),this._transport=null,this._worker=null,this.docId="d"+tt(L,be)._++,this.destroyed=!1,this.onPassword=null,this.onProgress=null,this.onUnsupportedFeature=null}get promise(){return this._capability.promise}destroy(){var o=this;return _asyncToGenerator(function*(){var s;o.destroyed=!0,yield null==(s=o._transport)?void 0:s.destroy(),o._transport=null,o._worker&&(o._worker.destroy(),o._worker=null)})()}};let PDFDocumentLoadingTask=L;be=new WeakMap,Ee(PDFDocumentLoadingTask,be,0),exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(o,s,n=!1,c=null){this.length=o,this.initialData=s,this.progressiveDone=n,this.contentDispositionFilename=c,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=(0,_util.createPromiseCapability)()}addRangeListener(o){this._rangeListeners.push(o)}addProgressListener(o){this._progressListeners.push(o)}addProgressiveReadListener(o){this._progressiveReadListeners.push(o)}addProgressiveDoneListener(o){this._progressiveDoneListeners.push(o)}onDataRange(o,s){for(const n of this._rangeListeners)n(o,s)}onDataProgress(o,s){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(o,s)})}onDataProgressiveRead(o){this._readyCapability.promise.then(()=>{for(const s of this._progressiveReadListeners)s(o)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const o of this._progressiveDoneListeners)o()})}transportReady(){this._readyCapability.resolve()}requestDataRange(o,s){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(o,s){var c,n=this;this._pdfInfo=o,this._transport=s,Object.defineProperty(this,"fingerprint",{get(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.fingerprint`, please use `PDFDocumentProxy.fingerprints` instead."),this.fingerprints[0]}}),Object.defineProperty(this,"getStats",{value:(c=_asyncToGenerator(function*(){return(0,_display_utils.deprecated)("`PDFDocumentProxy.getStats`, please use the `PDFDocumentProxy.stats`-getter instead."),n.stats||{streamTypes:{},fontTypes:{}}}),function(){return c.apply(this,arguments)})})}get annotationStorage(){return this._transport.annotationStorage}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get stats(){return this._transport.stats}get isPureXfa(){return!!this._transport._htmlForXfa}get allXfaHtml(){return this._transport._htmlForXfa}getPage(o){return this._transport.getPage(o)}getPageIndex(o){return this._transport.getPageIndex(o)}getDestinations(){return this._transport.getDestinations()}getDestination(o){return this._transport.getDestination(o)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJavaScript(){return this._transport.getJavaScript()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(o=!1){return this._transport.startCleanup(o||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}saveDocument(){return this._transport.annotationStorage.size<=0&&(0,_display_utils.deprecated)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead."),this._transport.saveDocument()}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(o,s,n,c,P=!1){this._pageIndex=o,this._pageInfo=s,this._ownerDocument=c,this._transport=n,this._stats=P?new _display_utils.StatTimer:null,this._pdfBug=P,this.commonObjs=n.commonObjs,this.objs=new PDFObjects,this._bitmaps=new Set,this.cleanupAfterRender=!1,this.pendingCleanup=!1,this._intentStates=new Map,this._annotationPromises=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:o,rotation:s=this.rotate,offsetX:n=0,offsetY:c=0,dontFlip:P=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:o,rotation:s,offsetX:n,offsetY:c,dontFlip:P})}getAnnotations({intent:o="display"}={}){const s=this._transport.getRenderingIntent(o);let n=this._annotationPromises.get(s.cacheKey);return n||(n=this._transport.getAnnotations(this._pageIndex,s.renderingIntent),this._annotationPromises.set(s.cacheKey,n),n=n.then(c=>{for(const P of c)void 0!==P.titleObj&&Object.defineProperty(P,"title",{get:()=>((0,_display_utils.deprecated)("`title`-property on annotation, please use `titleObj` instead."),P.titleObj.str)}),void 0!==P.contentsObj&&Object.defineProperty(P,"contents",{get:()=>((0,_display_utils.deprecated)("`contents`-property on annotation, please use `contentsObj` instead."),P.contentsObj.str)});return c})),n}getJSActions(){return this._jsActionsPromise||(this._jsActionsPromise=this._transport.getPageJSActions(this._pageIndex))}getXfa(){var o=this;return _asyncToGenerator(function*(){var s;return(null==(s=o._transport._htmlForXfa)?void 0:s.children[o._pageIndex])||null})()}render({canvasContext:o,viewport:s,intent:n="display",annotationMode:c=_util.AnnotationMode.ENABLE,transform:P=null,imageLayer:f=null,canvasFactory:p=null,background:e=null,optionalContentConfigPromise:i=null,annotationCanvasMap:_=null,pageColors:m=null}){var Q,B;void 0!==(null==(Q=arguments[0])?void 0:Q.renderInteractiveForms)&&((0,_display_utils.deprecated)("render no longer accepts the `renderInteractiveForms`-option, please use the `annotationMode`-option instead."),!0===arguments[0].renderInteractiveForms&&c===_util.AnnotationMode.ENABLE&&(c=_util.AnnotationMode.ENABLE_FORMS)),void 0!==(null==(B=arguments[0])?void 0:B.includeAnnotationStorage)&&((0,_display_utils.deprecated)("render no longer accepts the `includeAnnotationStorage`-option, please use the `annotationMode`-option instead."),!0===arguments[0].includeAnnotationStorage&&c===_util.AnnotationMode.ENABLE&&(c=_util.AnnotationMode.ENABLE_STORAGE)),this._stats&&this._stats.time("Overall");const y=this._transport.getRenderingIntent(n,c);this.pendingCleanup=!1,i||(i=this._transport.getOptionalContentConfig());let T=this._intentStates.get(y.cacheKey);T||(T=Object.create(null),this._intentStates.set(y.cacheKey,T)),T.streamReaderCancelTimeout&&(clearTimeout(T.streamReaderCancelTimeout),T.streamReaderCancelTimeout=null);const k=p||new DefaultCanvasFactory({ownerDocument:this._ownerDocument}),O=!!(y.renderingIntent&_util.RenderingIntentFlag.PRINT);T.displayReadyCapability||(T.displayReadyCapability=(0,_util.createPromiseCapability)(),T.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(y));const V=$=>{T.renderTasks.delete(G),(this.cleanupAfterRender||O)&&(this.pendingCleanup=!0),this._tryCleanup(),$?(G.capability.reject($),this._abortOperatorList({intentState:T,reason:$ instanceof Error?$:new Error($)})):G.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"))},G=new InternalRenderTask({callback:V,params:{canvasContext:o,viewport:s,transform:P,imageLayer:f,background:e},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:_,operatorList:T.operatorList,pageIndex:this._pageIndex,canvasFactory:k,useRequestAnimationFrame:!O,pdfBug:this._pdfBug,pageColors:m});(T.renderTasks||(T.renderTasks=new Set)).add(G);const X=G.task;return Promise.all([T.displayReadyCapability.promise,i]).then(([$,J])=>{this.pendingCleanup?V():(this._stats&&this._stats.time("Rendering"),G.initializeGraphics({transparency:$,optionalContentConfig:J}),G.operatorListChanged())}).catch(V),X}getOperatorList({intent:o="display",annotationMode:s=_util.AnnotationMode.ENABLE}={}){const c=this._transport.getRenderingIntent(o,s,!0);let f,P=this._intentStates.get(c.cacheKey);return P||(P=Object.create(null),this._intentStates.set(c.cacheKey,P)),P.opListReadCapability||(f=Object.create(null),f.operatorListChanged=function n(){P.operatorList.lastChunk&&(P.opListReadCapability.resolve(P.operatorList),P.renderTasks.delete(f))},P.opListReadCapability=(0,_util.createPromiseCapability)(),(P.renderTasks||(P.renderTasks=new Set)).add(f),P.operatorList={fnArray:[],argsArray:[],lastChunk:!1},this._stats&&this._stats.time("Page Request"),this._pumpOperatorList(c)),P.opListReadCapability.promise}streamTextContent({disableCombineTextItems:o=!1,includeMarkedContent:s=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,combineTextItems:!0!==o,includeMarkedContent:!0===s},{highWaterMark:100,size:c=>c.items.length})}getTextContent(o={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>_xfa_text.XfaText.textContent(n));const s=this.streamTextContent(o);return new Promise(function(n,c){const f=s.getReader(),p={items:[],styles:Object.create(null)};!function P(){f.read().then(function({value:e,done:i}){i?n(p):(Object.assign(p.styles,e.styles),p.items.push(...e.items),P())},c)}()})}getStructTree(){return this._structTreePromise||(this._structTreePromise=this._transport.getStructTree(this._pageIndex))}_destroy(){this.destroyed=!0;const o=[];for(const s of this._intentStates.values())if(this._abortOperatorList({intentState:s,reason:new Error("Page was destroyed."),force:!0}),!s.opListReadCapability)for(const n of s.renderTasks)o.push(n.completed),n.cancel();this.objs.clear();for(const s of this._bitmaps)s.close();return this._bitmaps.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,this.pendingCleanup=!1,Promise.all(o)}cleanup(o=!1){return this.pendingCleanup=!0,this._tryCleanup(o)}_tryCleanup(o=!1){if(!this.pendingCleanup)return!1;for(const{renderTasks:s,operatorList:n}of this._intentStates.values())if(s.size>0||!n.lastChunk)return!1;this._intentStates.clear(),this.objs.clear(),this._annotationPromises.clear(),this._jsActionsPromise=null,this._structTreePromise=null,o&&this._stats&&(this._stats=new _display_utils.StatTimer);for(const s of this._bitmaps)s.close();return this._bitmaps.clear(),this.pendingCleanup=!1,!0}_startRenderPage(o,s){const n=this._intentStates.get(s);!n||(this._stats&&this._stats.timeEnd("Page Request"),n.displayReadyCapability&&n.displayReadyCapability.resolve(o))}_renderPageChunk(o,s){for(let n=0,c=o.length;n<c;n++)s.operatorList.fnArray.push(o.fnArray[n]),s.operatorList.argsArray.push(o.argsArray[n]);s.operatorList.lastChunk=o.lastChunk;for(const n of s.renderTasks)n.operatorListChanged();o.lastChunk&&this._tryCleanup()}_pumpOperatorList({renderingIntent:o,cacheKey:s}){const c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:o,cacheKey:s,annotationStorage:o&_util.RenderingIntentFlag.ANNOTATIONS_STORAGE?this._transport.annotationStorage.serializable:null}).getReader(),P=this._intentStates.get(s);P.streamReader=c;const f=()=>{c.read().then(({value:p,done:e})=>{e?P.streamReader=null:this._transport.destroyed||(this._renderPageChunk(p,P),f())},p=>{if(P.streamReader=null,!this._transport.destroyed){if(P.operatorList){P.operatorList.lastChunk=!0;for(const e of P.renderTasks)e.operatorListChanged();this._tryCleanup()}if(P.displayReadyCapability)P.displayReadyCapability.reject(p);else{if(!P.opListReadCapability)throw p;P.opListReadCapability.reject(p)}}})};f()}_abortOperatorList({intentState:o,reason:s,force:n=!1}){if(o.streamReader){if(!n){if(o.renderTasks.size>0)return;if(s instanceof _display_utils.RenderingCancelledException)return void(o.streamReaderCancelTimeout=setTimeout(()=>{this._abortOperatorList({intentState:o,reason:s,force:!0}),o.streamReaderCancelTimeout=null},RENDERING_CANCELLED_TIMEOUT))}if(o.streamReader.cancel(new _util.AbortException(s.message)).catch(()=>{}),o.streamReader=null,!this._transport.destroyed){for(const[c,P]of this._intentStates)if(P===o){this._intentStates.delete(c);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){this._listeners=[],this._deferred=Promise.resolve()}postMessage(o,s){const n={data:structuredClone(o,s)};this._deferred.then(()=>{for(const c of this._listeners)c.call(this,n)})}addEventListener(o,s){this._listeners.push(s)}removeEventListener(o,s){const n=this._listeners.indexOf(s);this._listeners.splice(n,1)}terminate(){this._listeners.length=0}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};if(exports.PDFWorkerUtil=PDFWorkerUtil,_is_node.isNodeJS)PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if("object"==typeof document){const C=null==(K=null==document?void 0:document.currentScript)?void 0:K.src;C&&(PDFWorkerUtil.fallbackWorkerSrc=C.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(C,o){let s;try{if(s=new URL(C),!s.origin||"null"===s.origin)return!1}catch(c){return!1}const n=new URL(o,s);return s.origin===n.origin},PDFWorkerUtil.createCDNWrapper=function(C){return URL.createObjectURL(new Blob([`importScripts("${C}");`]))};const _PDFWorker=class{constructor({name:C=null,port:o=null,verbosity:s=(0,_util.getVerbosityLevel)()}={}){if(o&&Ce(_PDFWorker,g).has(o))throw new Error("Cannot use more than one PDFWorker per port.");if(this.name=C,this.destroyed=!1,this.verbosity=s,this._readyCapability=(0,_util.createPromiseCapability)(),this._port=null,this._webWorker=null,this._messageHandler=null,o)return Ce(_PDFWorker,g).set(o,this),void this._initializeFromPort(o);this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(C){this._port=C,this._messageHandler=new _message_handler.MessageHandler("main","worker",C),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve()}_initialize(){if("undefined"!=typeof Worker&&!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let C=_PDFWorker.workerSrc;try{PDFWorkerUtil.isSameOrigin(window.location.href,C)||(C=PDFWorkerUtil.createCDNWrapper(new URL(C,window.location).href));const o=new Worker(C),s=new _message_handler.MessageHandler("main","worker",o),n=()=>{o.removeEventListener("error",c),s.destroy(),o.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},c=()=>{this._webWorker||n()};o.addEventListener("error",c),s.on("test",f=>{o.removeEventListener("error",c),this.destroyed?n():f?(this._messageHandler=s,this._port=o,this._webWorker=o,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),s.destroy(),o.terminate())}),s.on("ready",f=>{if(o.removeEventListener("error",c),this.destroyed)n();else try{P()}catch(p){this._setupFakeWorker()}});const P=()=>{const f=new Uint8Array;s.send("test",f,[f.buffer])};return void P()}catch(o){(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(C=>{if(this.destroyed)return void this._readyCapability.reject(new Error("Worker was destroyed"));const o=new LoopbackPort;this._port=o;const s="fake"+PDFWorkerUtil.fakeWorkerId++,n=new _message_handler.MessageHandler(s+"_worker",s,o);C.setup(n,o);const c=new _message_handler.MessageHandler(s,s+"_worker",o);this._messageHandler=c,this._readyCapability.resolve(),c.send("configure",{verbosity:this.verbosity})}).catch(C=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${C.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),Ce(_PDFWorker,g).delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(C){if(!(null==C?void 0:C.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Ce(this,g).has(C.port)?Ce(this,g).get(C.port):new _PDFWorker(C)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(null!==PDFWorkerUtil.fallbackWorkerSrc)return _is_node.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var C;try{return(null==(C=globalThis.pdfjsWorker)?void 0:C.WorkerMessageHandler)||null}catch(o){return null}}static get _setupFakeWorkerGlobal(){var _this4=this;const loader=function(){var _ref2=_asyncToGenerator(function*(){const mainWorkerMessageHandler=_this4._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_is_node.isNodeJS){const worker=eval("require")(_this4.workerSrc);return worker.WorkerMessageHandler}return yield(0,_display_utils.loadScript)(_this4.workerSrc),window.pdfjsWorker.WorkerMessageHandler});return function C(){return _ref2.apply(this,arguments)}}();return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};let PDFWorker=_PDFWorker;g=new WeakMap,Ee(PDFWorker,g,new WeakMap),exports.PDFWorker=PDFWorker,PDFWorker.getWorkerSrc=function(){return(0,_display_utils.deprecated)("`PDFWorker.getWorkerSrc()`, please use `PDFWorker.workerSrc` instead."),this.workerSrc};class WorkerTransport{constructor(o,s,n,c){Ee(this,_e,null),Ee(this,re,new Map),Ee(this,ne,new Map),Ee(this,ee,null),this.messageHandler=o,this.loadingTask=s,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({docId:s.docId,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),ownerDocument:c.ownerDocument,styleElement:c.styleElement}),this._params=c,c.useWorkerFetch||(this.CMapReaderFactory=new c.CMapReaderFactory({baseUrl:c.cMapUrl,isCompressed:c.cMapPacked}),this.StandardFontDataFactory=new c.StandardFontDataFactory({baseUrl:c.standardFontDataUrl})),this.destroyed=!1,this.destroyCapability=null,this._passwordCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=(0,_util.createPromiseCapability)(),this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}get stats(){return Ce(this,_e)}getRenderingIntent(o,s=_util.AnnotationMode.ENABLE,n=!1){let c=_util.RenderingIntentFlag.DISPLAY,P="";switch(o){case"any":c=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":c=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${o}`)}switch(s){case _util.AnnotationMode.DISABLE:c+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:c+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:c+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,P=this.annotationStorage.hash;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${s}`)}return n&&(c+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:c,cacheKey:`${c}_${P}`}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=(0,_util.createPromiseCapability)(),this._passwordCapability&&this._passwordCapability.reject(new Error("Worker was destroyed during onPassword callback"));const o=[];for(const n of Ce(this,re).values())o.push(n._destroy());Ce(this,re).clear(),Ce(this,ne).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const s=this.messageHandler.sendWithPromise("Terminate",null);return o.push(s),Promise.all(o).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),Fe(this,ee,null),this._getFieldObjectsPromise=null,this._hasJSActionsPromise=null,this._networkStream&&this._networkStream.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:o,loadingTask:s}=this;o.on("GetReader",(n,c)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=P=>{this._lastProgress={loaded:P.loaded,total:P.total}},c.onPull=()=>{this._fullReader.read().then(function({value:P,done:f}){f?c.close():((0,_util.assert)((0,_util.isArrayBuffer)(P),"GetReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(P),1,[P]))}).catch(P=>{c.error(P)})},c.onCancel=P=>{this._fullReader.cancel(P),c.ready.catch(f=>{if(!this.destroyed)throw f})}}),o.on("ReaderHeadersReady",n=>{const c=(0,_util.createPromiseCapability)(),P=this._fullReader;return P.headersReady.then(()=>{var f;(!P.isStreamingSupported||!P.isRangeSupported)&&(this._lastProgress&&(null==(f=s.onProgress)||f.call(s,this._lastProgress)),P.onProgress=p=>{var e;null==(e=s.onProgress)||e.call(s,{loaded:p.loaded,total:p.total})}),c.resolve({isStreamingSupported:P.isStreamingSupported,isRangeSupported:P.isRangeSupported,contentLength:P.contentLength})},c.reject),c.promise}),o.on("GetRangeReader",(n,c)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const P=this._networkStream.getRangeReader(n.begin,n.end);P?(c.onPull=()=>{P.read().then(function({value:f,done:p}){p?c.close():((0,_util.assert)((0,_util.isArrayBuffer)(f),"GetRangeReader - expected an ArrayBuffer."),c.enqueue(new Uint8Array(f),1,[f]))}).catch(f=>{c.error(f)})},c.onCancel=f=>{P.cancel(f),c.ready.catch(p=>{if(!this.destroyed)throw p})}):c.close()}),o.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,s._capability.resolve(new PDFDocumentProxy(n,this))}),o.on("DocException",function(n){let c;switch(n.name){case"PasswordException":c=new _util.PasswordException(n.message,n.code);break;case"InvalidPDFException":c=new _util.InvalidPDFException(n.message);break;case"MissingPDFException":c=new _util.MissingPDFException(n.message);break;case"UnexpectedResponseException":c=new _util.UnexpectedResponseException(n.message,n.status);break;case"UnknownErrorException":c=new _util.UnknownErrorException(n.message,n.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}s._capability.reject(c)}),o.on("PasswordRequest",n=>{if(this._passwordCapability=(0,_util.createPromiseCapability)(),s.onPassword){const c=P=>{P instanceof Error?this._passwordCapability.reject(P):this._passwordCapability.resolve({password:P})};try{s.onPassword(c,n.code)}catch(P){this._passwordCapability.reject(P)}}else this._passwordCapability.reject(new _util.PasswordException(n.message,n.code));return this._passwordCapability.promise}),o.on("DataLoaded",n=>{var c;null==(c=s.onProgress)||c.call(s,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),o.on("StartRenderPage",n=>{this.destroyed||Ce(this,re).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),o.on("commonobj",([n,c,P])=>{var f;if(!this.destroyed&&!this.commonObjs.has(n))switch(c){case"Font":const p=this._params;if("error"in P){const _=P.error;(0,_util.warn)(`Error during font loading: ${_}`),this.commonObjs.resolve(n,_);break}let e=null;p.pdfBug&&(null==(f=globalThis.FontInspector)?void 0:f.enabled)&&(e={registerFont(_,m){globalThis.FontInspector.fontAdded(_,m)}});const i=new _font_loader.FontFaceObject(P,{isEvalSupported:p.isEvalSupported,disableFontFace:p.disableFontFace,ignoreErrors:p.ignoreErrors,onUnsupportedFeature:this._onUnsupportedFeature.bind(this),fontRegistry:e});this.fontLoader.bind(i).catch(_=>o.sendWithPromise("FontFallback",{id:n})).finally(()=>{!p.fontExtraProperties&&i.data&&(i.data=null),this.commonObjs.resolve(n,i)});break;case"FontPath":case"Image":this.commonObjs.resolve(n,P);break;default:throw new Error(`Got unknown common object type ${c}`)}}),o.on("obj",([n,c,P,f])=>{var e;if(this.destroyed)return;const p=Ce(this,re).get(c);if(!p.objs.has(n))switch(P){case"Image":p.objs.resolve(n,f);const i=8e6;if(f){let _;if(f.bitmap){const{bitmap:m,width:y,height:T}=f;_=y*T*4,p._bitmaps.add(m)}else _=(null==(e=f.data)?void 0:e.length)||0;_>i&&(p.cleanupAfterRender=!0)}break;case"Pattern":p.objs.resolve(n,f);break;default:throw new Error(`Got unknown object type ${P}`)}}),o.on("DocProgress",n=>{var c;this.destroyed||null==(c=s.onProgress)||c.call(s,{loaded:n.loaded,total:n.total})}),o.on("DocStats",n=>{this.destroyed||Fe(this,_e,Object.freeze({streamTypes:Object.freeze(n.streamTypes),fontTypes:Object.freeze(n.fontTypes)}))}),o.on("UnsupportedFeature",this._onUnsupportedFeature.bind(this)),o.on("FetchBuiltInCMap",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.CMapReaderFactory?this.CMapReaderFactory.fetch(n):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),o.on("FetchStandardFontData",n=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.StandardFontDataFactory?this.StandardFontDataFactory.fetch(n):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}_onUnsupportedFeature({featureId:o}){var s,n;this.destroyed||null==(n=(s=this.loadingTask).onUnsupportedFeature)||n.call(s,o)}getData(){return this.messageHandler.sendWithPromise("GetData",null)}getPage(o){if(!Number.isInteger(o)||o<=0||o>this._numPages)return Promise.reject(new Error("Invalid page request."));const s=o-1,n=Ce(this,ne).get(s);if(n)return n;const c=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(P=>{if(this.destroyed)throw new Error("Transport destroyed");const f=new PDFPageProxy(s,P,this,this._params.ownerDocument,this._params.pdfBug);return Ce(this,re).set(s,f),f});return Ce(this,ne).set(s,c),c}getPageIndex(o){return"object"!=typeof o||null===o||!Number.isInteger(o.num)||o.num<0||!Number.isInteger(o.gen)||o.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:o.num,gen:o.gen})}getAnnotations(o,s){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:o,intent:s})}saveDocument(){var o,s;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:this.annotationStorage.serializable,filename:null!=(s=null==(o=this._fullReader)?void 0:o.filename)?s:null}).finally(()=>{this.annotationStorage.resetModified()})}getFieldObjects(){return this._getFieldObjectsPromise||(this._getFieldObjectsPromise=this.messageHandler.sendWithPromise("GetFieldObjects",null))}hasJSActions(){return this._hasJSActionsPromise||(this._hasJSActionsPromise=this.messageHandler.sendWithPromise("HasJSActions",null))}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(o){return"string"!=typeof o?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:o})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getJavaScript(){return this.messageHandler.sendWithPromise("GetJavaScript",null)}getDocJSActions(){return this.messageHandler.sendWithPromise("GetDocJSActions",null)}getPageJSActions(o){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:o})}getStructTree(o){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:o})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(o=>new _optional_content_config.OptionalContentConfig(o))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){return Ce(this,ee)||Fe(this,ee,this.messageHandler.sendWithPromise("GetMetadata",null).then(o=>{var s,n,c,P;return{info:o[0],metadata:o[1]?new _metadata.Metadata(o[1]):null,contentDispositionFilename:null!=(n=null==(s=this._fullReader)?void 0:s.filename)?n:null,contentLength:null!=(P=null==(c=this._fullReader)?void 0:c.contentLength)?P:null}}))}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}startCleanup(o=!1){var s=this;return _asyncToGenerator(function*(){if(yield s.messageHandler.sendWithPromise("Cleanup",null),!s.destroyed){for(const n of Ce(s,re).values())if(!n.cleanup())throw new Error(`startCleanup: Page ${n.pageNumber} is currently rendering.`);s.commonObjs.clear(),o||s.fontLoader.clear(),Fe(s,ee,null),s._getFieldObjectsPromise=null,s._hasJSActionsPromise=null}})()}get loadingParams(){const o=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:o.disableAutoFetch,enableXfa:o.enableXfa})}}_e=new WeakMap,re=new WeakMap,ne=new WeakMap,ee=new WeakMap;class PDFObjects{constructor(){Ee(this,d),Ee(this,D,Object.create(null))}get(o,s=null){if(s){const c=xe(this,d,nt).call(this,o);return c.capability.promise.then(()=>s(c.data)),null}const n=Ce(this,D)[o];if(!(null==n?void 0:n.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${o}.`);return n.data}has(o){const s=Ce(this,D)[o];return(null==s?void 0:s.capability.settled)||!1}resolve(o,s=null){const n=xe(this,d,nt).call(this,o);n.data=s,n.capability.resolve()}clear(){Fe(this,D,Object.create(null))}}D=new WeakMap,d=new WeakSet,nt=function(o){return Ce(this,D)[o]||(Ce(this,D)[o]={capability:(0,_util.createPromiseCapability)(),data:null})};class RenderTask{constructor(o){this._internalRenderTask=o,this.onContinue=null}get promise(){return this._internalRenderTask.capability.promise}cancel(){this._internalRenderTask.cancel()}}exports.RenderTask=RenderTask;const r=class{constructor({callback:o,params:s,objs:n,commonObjs:c,annotationCanvasMap:P,operatorList:f,pageIndex:p,canvasFactory:e,useRequestAnimationFrame:i=!1,pdfBug:_=!1,pageColors:m=null}){this.callback=o,this.params=s,this.objs=n,this.commonObjs=c,this.annotationCanvasMap=P,this.operatorListIdx=null,this.operatorList=f,this._pageIndex=p,this.canvasFactory=e,this._pdfBug=_,this.pageColors=m,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===i&&"undefined"!=typeof window,this.cancelled=!1,this.capability=(0,_util.createPromiseCapability)(),this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=s.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:o=!1,optionalContentConfig:s}){var e;if(this.cancelled)return;if(this._canvas){if(Ce(r,b).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ce(r,b).add(this._canvas)}this._pdfBug&&(null==(e=globalThis.StepperManager)?void 0:e.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:c,transform:P,imageLayer:f,background:p}=this.params;this.gfx=new _canvas.CanvasGraphics(n,this.commonObjs,this.objs,this.canvasFactory,f,s,this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:P,viewport:c,transparency:o,background:p}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback&&this.graphicsReadyCallback()}cancel(o=null){this.running=!1,this.cancelled=!0,this.gfx&&this.gfx.endDrawing(),this._canvas&&Ce(r,b).delete(this._canvas),this.callback(o||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,"canvas"))}operatorListChanged(){this.graphicsReady?(this.stepper&&this.stepper.updateOperatorList(this.operatorList),!this.running&&this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}_next(){var o=this;return _asyncToGenerator(function*(){o.cancelled||(o.operatorListIdx=o.gfx.executeOperatorList(o.operatorList,o.operatorListIdx,o._continueBound,o.stepper),o.operatorListIdx===o.operatorList.argsArray.length&&(o.running=!1,o.operatorList.lastChunk&&(o.gfx.endDrawing(),o._canvas&&Ce(r,b).delete(o._canvas),o.callback())))})()}};let InternalRenderTask=r;b=new WeakMap,Ee(InternalRenderTask,b,new WeakSet);const version="2.14.305";exports.version=version;const build="eaaa8b4ad";exports.build=build},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.StatTimer=L.RenderingCancelledException=L.PixelsPerInch=L.PageViewport=L.PDFDateString=L.DOMStandardFontDataFactory=L.DOMSVGFactory=L.DOMCanvasFactory=L.DOMCMapReaderFactory=void 0,L.deprecated=function i(k){console.log("Deprecated API usage: "+k)},L.getFilenameFromUrl=function c(k){const O=k.indexOf("#"),V=k.indexOf("?"),G=Math.min(O>0?O:k.length,V>0?V:k.length);return k.substring(k.lastIndexOf("/",G)+1,G)},L.getPdfFilenameFromUrl=function P(k,O="document.pdf"){if("string"!=typeof k)return O;if(s(k))return(0,_e.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),O;const G=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,X=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/.exec(k);let Q=G.exec(X[1])||G.exec(X[2])||G.exec(X[3]);if(Q&&(Q=Q[0],Q.includes("%")))try{Q=G.exec(decodeURIComponent(Q))[0]}catch(B){}return Q||O},L.getXfaPageViewport=function y(k,{scale:O=1,rotation:V=0}){const{width:G,height:X}=k.attributes.style,Q=[0,0,parseInt(G),parseInt(X)];return new C({viewBox:Q,scale:O,rotation:V})},L.isDataScheme=s,L.isPdfFile=function n(k){return"string"==typeof k&&/\.pdf$/i.test(k)},L.isValidFetchUrl=p,L.loadScript=function e(k,O=!1){return new Promise((V,G)=>{const X=document.createElement("script");X.src=k,X.onload=function(Q){O&&X.remove(),V(Q)},X.onerror=function(){G(new Error(`Cannot load script at: ${X.src}`))},(document.head||document.documentElement).appendChild(X)})};var g=K(6),_e=K(1);const T=class{};let _,ne=T;function D(k){return d.apply(this,arguments)}function d(){return(d=_asyncToGenerator(function*(k,O=!1){if(p(k,document.baseURI)){const V=yield fetch(k);if(!V.ok)throw new Error(V.statusText);return O?new Uint8Array(yield V.arrayBuffer()):(0,_e.stringToBytes)(yield V.text())}return new Promise((V,G)=>{const X=new XMLHttpRequest;X.open("GET",k,!0),O&&(X.responseType="arraybuffer"),X.onreadystatechange=()=>{if(X.readyState===XMLHttpRequest.DONE){if(200===X.status||0===X.status){let Q;if(O&&X.response?Q=new Uint8Array(X.response):!O&&X.responseText&&(Q=(0,_e.stringToBytes)(X.responseText)),Q)return void V(Q)}G(new Error(X.statusText))}},X.send(null)})})).apply(this,arguments)}We(ne,"CSS",96),We(ne,"PDF",72),We(ne,"PDF_TO_CSS_UNITS",T.CSS/T.PDF),L.PixelsPerInch=ne,L.DOMCanvasFactory=class ee extends g.BaseCanvasFactory{constructor({ownerDocument:O=globalThis.document}={}){super(),this._document=O}_createCanvas(O,V){const G=this._document.createElement("canvas");return G.width=O,G.height=V,G}},L.DOMCMapReaderFactory=class x extends g.BaseCMapReaderFactory{_fetchData(O,V){return D(O,this.isCompressed).then(G=>({cMapData:G,compressionType:V}))}},L.DOMStandardFontDataFactory=class b extends g.BaseStandardFontDataFactory{_fetchData(O){return D(O,!0)}},L.DOMSVGFactory=class r extends g.BaseSVGFactory{_createSVG(O){return document.createElementNS("http://www.w3.org/2000/svg",O)}};class C{constructor({viewBox:O,scale:V,rotation:G,offsetX:X=0,offsetY:Q=0,dontFlip:B=!1}){this.viewBox=O,this.scale=V,this.rotation=G,this.offsetX=X,this.offsetY=Q;const $=(O[2]+O[0])/2,J=(O[3]+O[1])/2;let ae,de,M,a,u,t,l,h;switch((G%=360)<0&&(G+=360),G){case 180:ae=-1,de=0,M=0,a=1;break;case 90:ae=0,de=1,M=1,a=0;break;case 270:ae=0,de=-1,M=-1,a=0;break;case 0:ae=1,de=0,M=0,a=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}B&&(M=-M,a=-a),0===ae?(u=Math.abs(J-O[1])*V+X,t=Math.abs($-O[0])*V+Q,l=Math.abs(O[3]-O[1])*V,h=Math.abs(O[2]-O[0])*V):(u=Math.abs($-O[0])*V+X,t=Math.abs(J-O[1])*V+Q,l=Math.abs(O[2]-O[0])*V,h=Math.abs(O[3]-O[1])*V),this.transform=[ae*V,de*V,M*V,a*V,u-ae*V*$-M*V*J,t-de*V*$-a*V*J],this.width=l,this.height=h}clone({scale:O=this.scale,rotation:V=this.rotation,offsetX:G=this.offsetX,offsetY:X=this.offsetY,dontFlip:Q=!1}={}){return new C({viewBox:this.viewBox.slice(),scale:O,rotation:V,offsetX:G,offsetY:X,dontFlip:Q})}convertToViewportPoint(O,V){return _e.Util.applyTransform([O,V],this.transform)}convertToViewportRectangle(O){const V=_e.Util.applyTransform([O[0],O[1]],this.transform),G=_e.Util.applyTransform([O[2],O[3]],this.transform);return[V[0],V[1],G[0],G[1]]}convertToPdfPoint(O,V){return _e.Util.applyInverseTransform([O,V],this.transform)}}function s(k){const O=k.length;let V=0;for(;V<O&&""===k[V].trim();)V++;return"data:"===k.substring(V,V+5).toLowerCase()}function p(k,O){try{const{protocol:V}=O?new URL(k,O):new URL(k);return"http:"===V||"https:"===V}catch(V){return!1}}L.PageViewport=C,L.RenderingCancelledException=class o extends _e.BaseException{constructor(O,V){super(O,"RenderingCancelledException"),this.type=V}},L.StatTimer=class f{constructor(){this.started=Object.create(null),this.times=[]}time(O){O in this.started&&(0,_e.warn)(`Timer is already running for ${O}`),this.started[O]=Date.now()}timeEnd(O){O in this.started||(0,_e.warn)(`Timer has not been started for ${O}`),this.times.push({name:O,start:this.started[O],end:Date.now()}),delete this.started[O]}toString(){const O=[];let V=0;for(const G of this.times){const X=G.name;X.length>V&&(V=X.length)}for(const G of this.times){const X=G.end-G.start;O.push(`${G.name.padEnd(V)} ${X}ms\n`)}return O.join("")}},L.PDFDateString=class m{static toDateObject(O){if(!O||"string"!=typeof O)return null;_||(_=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const V=_.exec(O);if(!V)return null;const G=parseInt(V[1],10);let X=parseInt(V[2],10);X=X>=1&&X<=12?X-1:0;let Q=parseInt(V[3],10);Q=Q>=1&&Q<=31?Q:1;let B=parseInt(V[4],10);B=B>=0&&B<=23?B:0;let $=parseInt(V[5],10);$=$>=0&&$<=59?$:0;let J=parseInt(V[6],10);J=J>=0&&J<=59?J:0;const ae=V[7]||"Z";let de=parseInt(V[8],10);de=de>=0&&de<=23?de:0;let M=parseInt(V[9],10)||0;return M=M>=0&&M<=59?M:0,"-"===ae?(B+=de,$+=M):"+"===ae&&(B-=de,$-=M),new Date(Date.UTC(G,X,Q,B,$,J))}}},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.BaseStandardFontDataFactory=L.BaseSVGFactory=L.BaseCanvasFactory=L.BaseCMapReaderFactory=void 0;var g=K(1);class _e{constructor(){this.constructor===_e&&(0,g.unreachable)("Cannot initialize BaseCanvasFactory.")}create(d,x){if(d<=0||x<=0)throw new Error("Invalid canvas size");const b=this._createCanvas(d,x);return{canvas:b,context:b.getContext("2d")}}reset(d,x,b){if(!d.canvas)throw new Error("Canvas is not specified");if(x<=0||b<=0)throw new Error("Invalid canvas size");d.canvas.width=x,d.canvas.height=b}destroy(d){if(!d.canvas)throw new Error("Canvas is not specified");d.canvas.width=0,d.canvas.height=0,d.canvas=null,d.context=null}_createCanvas(d,x){(0,g.unreachable)("Abstract method `_createCanvas` called.")}}L.BaseCanvasFactory=_e;class re{constructor({baseUrl:d=null,isCompressed:x=!1}){this.constructor===re&&(0,g.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=x}fetch({name:d}){var x=this;return _asyncToGenerator(function*(){if(!x.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");const b=x.baseUrl+d+(x.isCompressed?".bcmap":"");return x._fetchData(b,x.isCompressed?g.CMapCompressionType.BINARY:g.CMapCompressionType.NONE).catch(C=>{throw new Error(`Unable to load ${x.isCompressed?"binary ":""}CMap at: ${b}`)})})()}_fetchData(d,x){(0,g.unreachable)("Abstract method `_fetchData` called.")}}L.BaseCMapReaderFactory=re;class ne{constructor({baseUrl:d=null}){this.constructor===ne&&(0,g.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}fetch({filename:d}){var x=this;return _asyncToGenerator(function*(){if(!x.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");const b=`${x.baseUrl}${d}`;return x._fetchData(b).catch(r=>{throw new Error(`Unable to load font data at: ${b}`)})})()}_fetchData(d){(0,g.unreachable)("Abstract method `_fetchData` called.")}}L.BaseStandardFontDataFactory=ne;class ee{constructor(){this.constructor===ee&&(0,g.unreachable)("Cannot initialize BaseSVGFactory.")}create(d,x){if(d<=0||x<=0)throw new Error("Invalid SVG dimensions");const b=this._createSVG("svg:svg");return b.setAttribute("version","1.1"),b.setAttribute("width",`${d}px`),b.setAttribute("height",`${x}px`),b.setAttribute("preserveAspectRatio","none"),b.setAttribute("viewBox",`0 0 ${d} ${x}`),b}createElement(d){if("string"!=typeof d)throw new Error("Invalid SVG element type");return this._createSVG(d)}_createSVG(d){(0,g.unreachable)("Abstract method `_createSVG` called.")}}L.BaseSVGFactory=ee},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.FontLoader=L.FontFaceObject=void 0;var g=K(1);class _e{constructor({docId:D,onUnsupportedFeature:d,ownerDocument:x=globalThis.document,styleElement:b=null}){this.constructor===_e&&(0,g.unreachable)("Cannot initialize BaseFontLoader."),this.docId=D,this._onUnsupportedFeature=d,this._document=x,this.nativeFontFaces=[],this.styleElement=null}addNativeFontFace(D){this.nativeFontFaces.push(D),this._document.fonts.add(D)}insertRule(D){let d=this.styleElement;d||(d=this.styleElement=this._document.createElement("style"),d.id=`PDFJS_FONT_STYLE_TAG_${this.docId}`,this._document.documentElement.getElementsByTagName("head")[0].appendChild(d));const x=d.sheet;x.insertRule(D,x.cssRules.length)}clear(){for(const D of this.nativeFontFaces)this._document.fonts.delete(D);this.nativeFontFaces.length=0,this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}bind(D){var d=this;return _asyncToGenerator(function*(){if(D.attached||D.missingFile)return;if(D.attached=!0,d.isFontLoadingAPISupported){const b=D.createNativeFontFace();if(b){d.addNativeFontFace(b);try{yield b.loaded}catch(r){throw d._onUnsupportedFeature({featureId:g.UNSUPPORTED_FEATURES.errorFontLoadNative}),(0,g.warn)(`Failed to load font '${b.family}': '${r}'.`),D.disableFontFace=!0,r}}return}const x=D.createFontFaceRule();if(x){if(d.insertRule(x),d.isSyncFontLoadingSupported)return;yield new Promise(b=>{const r=d._queueLoadingCallback(b);d._prepareFontLoadEvent([x],[D],r)})}})()}_queueLoadingCallback(D){(0,g.unreachable)("Abstract method `_queueLoadingCallback`.")}get isFontLoadingAPISupported(){var d;const D=!!(null==(d=this._document)?void 0:d.fonts);return(0,g.shadow)(this,"isFontLoadingAPISupported",D)}get isSyncFontLoadingSupported(){(0,g.unreachable)("Abstract method `isSyncFontLoadingSupported`.")}get _loadTestFont(){(0,g.unreachable)("Abstract method `_loadTestFont`.")}_prepareFontLoadEvent(D,d,x){(0,g.unreachable)("Abstract method `_prepareFontLoadEvent`.")}}let re;L.FontLoader=re,L.FontLoader=re=class extends _e{constructor(D){super(D),this.loadingContext={requests:[],nextRequestId:0},this.loadTestFontId=0}get isSyncFontLoadingSupported(){let D=!1;if("undefined"==typeof navigator)D=!0;else{const d=/Mozilla\/5.0.*?rv:(\d+).*? Gecko/.exec(navigator.userAgent);(null==d?void 0:d[1])>=14&&(D=!0)}return(0,g.shadow)(this,"isSyncFontLoadingSupported",D)}_queueLoadingCallback(D){const x=this.loadingContext,b={id:"pdfjs-font-loading-"+x.nextRequestId++,done:!1,complete:function d(){for((0,g.assert)(!b.done,"completeRequest() cannot be called twice."),b.done=!0;x.requests.length>0&&x.requests[0].done;){const r=x.requests.shift();setTimeout(r.callback,0)}},callback:D};return x.requests.push(b),b}get _loadTestFont(){return(0,g.shadow)(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(D,d,x){function b(V,G){return V.charCodeAt(G)<<24|V.charCodeAt(G+1)<<16|V.charCodeAt(G+2)<<8|255&V.charCodeAt(G+3)}function r(V,G,X,Q){return V.substring(0,G)+Q+V.substring(G+X)}let C,o;const s=this._document.createElement("canvas");s.width=1,s.height=1;const n=s.getContext("2d");let c=0;const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=r(p,976,f.length,f);const _=1482184792;let m=b(p,16);for(C=0,o=f.length-3;C<o;C+=4)m=m-_+b(f,C)|0;C<f.length&&(m=m-_+b(f+"XXX",C)|0),p=r(p,16,4,(0,g.string32)(m));const y=`url(data:font/opentype;base64,${btoa(p)});`;this.insertRule(`@font-face {font-family:"${f}";src:${y}}`);const k=[];for(const V of d)k.push(V.loadedName);k.push(f);const O=this._document.createElement("div");O.style.visibility="hidden",O.style.width=O.style.height="10px",O.style.position="absolute",O.style.top=O.style.left="0px";for(const V of k){const G=this._document.createElement("span");G.textContent="Hi",G.style.fontFamily=V,O.appendChild(G)}this._document.body.appendChild(O),function P(V,G){if(c++,c>30)return(0,g.warn)("Load test font never loaded."),void G();n.font="30px "+V,n.fillText(".",0,20),n.getImageData(0,0,1,1).data[3]>0?G():setTimeout(P.bind(null,V,G))}(f,()=>{O.remove(),x.complete()})}},L.FontFaceObject=class ne{constructor(D,{isEvalSupported:d=!0,disableFontFace:x=!1,ignoreErrors:b=!1,onUnsupportedFeature:r,fontRegistry:C=null}){this.compiledGlyphs=Object.create(null);for(const o in D)this[o]=D[o];this.isEvalSupported=!1!==d,this.disableFontFace=!0===x,this.ignoreErrors=!0===b,this._onUnsupportedFeature=r,this.fontRegistry=C}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let D;if(this.cssFontInfo){const d={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(d.style=`oblique ${this.cssFontInfo.italicAngle}deg`),D=new FontFace(this.cssFontInfo.fontFamily,this.data,d)}else D=new FontFace(this.loadedName,this.data,{});return this.fontRegistry&&this.fontRegistry.registerFont(this),D}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const D=(0,g.bytesToString)(this.data),d=`url(data:${this.mimetype};base64,${btoa(D)});`;let x;if(this.cssFontInfo){let b=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(b+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),x=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${b}src:${d}}`}else x=`@font-face {font-family:"${this.loadedName}";src:${d}}`;return this.fontRegistry&&this.fontRegistry.registerFont(this,d),x}getPathGenerator(D,d){if(void 0!==this.compiledGlyphs[d])return this.compiledGlyphs[d];let x;try{x=D.get(this.loadedName+"_path_"+d)}catch(b){if(!this.ignoreErrors)throw b;return this._onUnsupportedFeature({featureId:g.UNSUPPORTED_FEATURES.errorFontGetPath}),(0,g.warn)(`getPathGenerator - ignoring character: "${b}".`),this.compiledGlyphs[d]=function(r,C){}}if(this.isEvalSupported&&g.FeatureTest.isEvalSupported){const b=[];for(const r of x){const C=void 0!==r.args?r.args.join(","):"";b.push("c.",r.cmd,"(",C,");\n")}return this.compiledGlyphs[d]=new Function("c","size",b.join(""))}return this.compiledGlyphs[d]=function(b,r){for(const C of x)"scale"===C.cmd&&(C.args=[r,-r]),b[C.cmd].apply(b,C.args)}}}},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.AnnotationStorage=void 0;var g=K(9),_e=K(1);L.AnnotationStorage=class re{constructor(){this._storage=new Map,this._modified=!1,this.onSetModified=null,this.onResetModified=null}getValue(ee,D){const d=this._storage.get(ee);return void 0===d?D:Object.assign(D,d)}getRawValue(ee){return this._storage.get(ee)}setValue(ee,D){const d=this._storage.get(ee);let x=!1;if(void 0!==d)for(const[b,r]of Object.entries(D))d[b]!==r&&(x=!0,d[b]=r);else x=!0,this._storage.set(ee,D);x&&this._setModified()}getAll(){return this._storage.size>0?(0,_e.objectFromMap)(this._storage):null}get size(){return this._storage.size}_setModified(){this._modified||(this._modified=!0,"function"==typeof this.onSetModified&&this.onSetModified())}resetModified(){this._modified&&(this._modified=!1,"function"==typeof this.onResetModified&&this.onResetModified())}get serializable(){return this._storage.size>0?this._storage:null}get hash(){const ee=new g.MurmurHash3_64;for(const[D,d]of this._storage)ee.update(`${D}:${JSON.stringify(d)}`);return ee.hexdigest()}}},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.MurmurHash3_64=void 0;var g=K(1);const _e=3285377520,re=4294901760,ne=65535;L.MurmurHash3_64=class ee{constructor(d){this.h1=d?4294967295&d:_e,this.h2=d?4294967295&d:_e}update(d){let x,b;if("string"==typeof d){x=new Uint8Array(2*d.length),b=0;for(let _=0,m=d.length;_<m;_++){const y=d.charCodeAt(_);y<=255?x[b++]=y:(x[b++]=y>>>8,x[b++]=255&y)}}else{if(!(0,g.isArrayBuffer)(d))throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");x=d.slice(),b=x.byteLength}const r=b>>2,C=b-4*r,o=new Uint32Array(x.buffer,0,r);let s=0,n=0,c=this.h1,P=this.h2;const f=3432918353,p=461845907,e=f&ne,i=p&ne;for(let _=0;_<r;_++)1&_?(s=o[_],s=s*f&re|s*e&ne,s=s<<15|s>>>17,s=s*p&re|s*i&ne,c^=s,c=c<<13|c>>>19,c=5*c+3864292196):(n=o[_],n=n*f&re|n*e&ne,n=n<<15|n>>>17,n=n*p&re|n*i&ne,P^=n,P=P<<13|P>>>19,P=5*P+3864292196);switch(s=0,C){case 3:s^=x[4*r+2]<<16;case 2:s^=x[4*r+1]<<8;case 1:s^=x[4*r],s=s*f&re|s*e&ne,s=s<<15|s>>>17,s=s*p&re|s*i&ne,1&r?c^=s:P^=s}this.h1=c,this.h2=P}hexdigest(){let d=this.h1,x=this.h2;d^=x>>>1,d=3981806797*d&re|36045*d&ne,x=4283543511*x&re|(2950163797*(x<<16|d>>>16)&re)>>>16,d^=x>>>1,d=444984403*d&re|60499*d&ne,x=3301882366*x&re|(3120437893*(x<<16|d>>>16)&re)>>>16,d^=x>>>1;const b=(d>>>0).toString(16),r=(x>>>0).toString(16);return b.padStart(8,"0")+r.padStart(8,"0")}}},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.CanvasGraphics=void 0;var g=K(1),_e=K(11),re=K(12),ne=K(3),ee=K(5);const x=4096,s=16;function P(M){if(M._transformStack&&(M._transformStack=[]),!M.mozCurrentTransform){M._originalSave=M.save,M._originalRestore=M.restore,M._originalRotate=M.rotate,M._originalScale=M.scale,M._originalTranslate=M.translate,M._originalTransform=M.transform,M._originalSetTransform=M.setTransform,M._originalResetTransform=M.resetTransform,M._transformMatrix=M._transformMatrix||[1,0,0,1,0,0],M._transformStack=[];try{const a=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(M),"lineWidth");M._setLineWidth=a.set,M._getLineWidth=a.get,Object.defineProperty(M,"lineWidth",{set:function(t){this._setLineWidth(1.000001*t)},get:function(){return this._getLineWidth()}})}catch(a){}Object.defineProperty(M,"mozCurrentTransform",{get:function(){return this._transformMatrix}}),Object.defineProperty(M,"mozCurrentTransformInverse",{get:function(){const[u,t,l,h,S,A]=this._transformMatrix,E=u*h-t*l,j=t*l-u*h;return[h/E,t/j,l/j,u/E,(h*S-l*A)/j,(t*S-u*A)/E]}}),M.save=function(){const u=this._transformMatrix;this._transformStack.push(u),this._transformMatrix=u.slice(0,6),this._originalSave()},M.restore=function(){0===this._transformStack.length&&(0,g.warn)("Tried to restore a ctx when the stack was already empty.");const u=this._transformStack.pop();u&&(this._transformMatrix=u,this._originalRestore())},M.translate=function(u,t){const l=this._transformMatrix;l[4]=l[0]*u+l[2]*t+l[4],l[5]=l[1]*u+l[3]*t+l[5],this._originalTranslate(u,t)},M.scale=function(u,t){const l=this._transformMatrix;l[0]*=u,l[1]*=u,l[2]*=t,l[3]*=t,this._originalScale(u,t)},M.transform=function(u,t,l,h,S,A){const E=this._transformMatrix;this._transformMatrix=[E[0]*u+E[2]*t,E[1]*u+E[3]*t,E[0]*l+E[2]*h,E[1]*l+E[3]*h,E[0]*S+E[2]*A+E[4],E[1]*S+E[3]*A+E[5]],M._originalTransform(u,t,l,h,S,A)},M.setTransform=function(u,t,l,h,S,A){this._transformMatrix=[u,t,l,h,S,A],M._originalSetTransform(u,t,l,h,S,A)},M.resetTransform=function(){this._transformMatrix=[1,0,0,1,0,0],M._originalResetTransform()},M.rotate=function(u){const t=Math.cos(u),l=Math.sin(u),h=this._transformMatrix;this._transformMatrix=[h[0]*t+h[2]*l,h[1]*t+h[3]*l,h[0]*-l+h[2]*t,h[1]*-l+h[3]*t,h[4],h[5]],this._originalRotate(u)}}}class f{constructor(a){this.canvasFactory=a,this.cache=Object.create(null)}getCanvas(a,u,t,l){let h;return void 0!==this.cache[a]?(h=this.cache[a],this.canvasFactory.reset(h,u,t),h.context.setTransform(1,0,0,1,0,0)):(h=this.canvasFactory.create(u,t),this.cache[a]=h),l&&P(h.context),h}delete(a){delete this.cache[a]}clear(){for(const a in this.cache)this.canvasFactory.destroy(this.cache[a]),delete this.cache[a]}}function p(M,a,u,t,l,h,S,A,E,j){const[U,H,z,Y,Z,ue]=M.mozCurrentTransform;if(0===H&&0===z){const oe=Math.round(S*U+Z),I=Math.round(A*Y+ue),ge=Math.abs(Math.round((S+E)*U+Z)-oe)||1,me=Math.abs(Math.round((A+j)*Y+ue)-I)||1;return M.setTransform(Math.sign(U),0,0,Math.sign(Y),oe,I),M.drawImage(a,u,t,l,h,0,0,ge,me),M.setTransform(U,H,z,Y,Z,ue),[ge,me]}if(0===U&&0===Y){const oe=Math.round(A*z+Z),I=Math.round(S*H+ue),ge=Math.abs(Math.round((A+j)*z+Z)-oe)||1,me=Math.abs(Math.round((S+E)*H+ue)-I)||1;return M.setTransform(0,Math.sign(H),Math.sign(z),0,oe,I),M.drawImage(a,u,t,l,h,0,0,me,ge),M.setTransform(U,H,z,Y,Z,ue),[me,ge]}return M.drawImage(a,u,t,l,h,S,A,E,j),[Math.hypot(U,H)*E,Math.hypot(z,Y)*j]}class i{constructor(a,u){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=g.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=g.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=g.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps=null,this.startNewPathAndClipBox([0,0,a,u])}clone(){const a=Object.create(this);return a.clipBox=this.clipBox.slice(),a}setCurrentPoint(a,u){this.x=a,this.y=u}updatePathMinMax(a,u,t){[u,t]=g.Util.applyTransform([u,t],a),this.minX=Math.min(this.minX,u),this.minY=Math.min(this.minY,t),this.maxX=Math.max(this.maxX,u),this.maxY=Math.max(this.maxY,t)}updateRectMinMax(a,u){const t=g.Util.applyTransform(u,a),l=g.Util.applyTransform(u.slice(2),a);this.minX=Math.min(this.minX,t[0],l[0]),this.minY=Math.min(this.minY,t[1],l[1]),this.maxX=Math.max(this.maxX,t[0],l[0]),this.maxY=Math.max(this.maxY,t[1],l[1])}updateScalingPathMinMax(a,u){g.Util.scaleMinMax(a,u),this.minX=Math.min(this.minX,u[0]),this.maxX=Math.max(this.maxX,u[1]),this.minY=Math.min(this.minY,u[2]),this.maxY=Math.max(this.maxY,u[3])}updateCurvePathMinMax(a,u,t,l,h,S,A,E,j,U){const H=g.Util.bezierBoundingBox(u,t,l,h,S,A,E,j);if(U)return U[0]=Math.min(U[0],H[0],H[2]),U[1]=Math.max(U[1],H[0],H[2]),U[2]=Math.min(U[2],H[1],H[3]),void(U[3]=Math.max(U[3],H[1],H[3]));this.updateRectMinMax(a,H)}getPathBoundingBox(a=_e.PathType.FILL,u=null){const t=[this.minX,this.minY,this.maxX,this.maxY];if(a===_e.PathType.STROKE){u||(0,g.unreachable)("Stroke bounding box must include transform.");const l=g.Util.singularValueDecompose2dScale(u),h=l[0]*this.lineWidth/2,S=l[1]*this.lineWidth/2;t[0]-=h,t[1]-=S,t[2]+=h,t[3]+=S}return t}updateClipFromPath(){const a=g.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(a||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(a){this.clipBox=a,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(a=_e.PathType.FILL,u=null){return g.Util.intersect(this.clipBox,this.getPathBoundingBox(a,u))}}function _(M,a,u=null){if("undefined"!=typeof ImageData&&a instanceof ImageData)return void M.putImageData(a,0,0);const t=a.height,l=a.width,h=t%s,S=(t-h)/s,A=0===h?S:S+1,E=M.createImageData(l,s);let U,j=0;const H=a.data,z=E.data;let Y,Z,ue,ye,te,ce,oe,w;if(u)switch(u.length){case 1:te=u[0],ce=u[0],oe=u[0],w=u[0];break;case 4:te=u[0],ce=u[1],oe=u[2],w=u[3]}if(a.kind===g.ImageKind.GRAYSCALE_1BPP){const I=H.byteLength,q=new Uint32Array(z.buffer,0,z.byteLength>>2),ge=q.length,fe=l+7>>3;let me=4294967295,ve=g.FeatureTest.isLittleEndian?4278190080:255;for(w&&255===w[0]&&0===w[255]&&([me,ve]=[ve,me]),Y=0;Y<A;Y++){for(ue=Y<S?s:h,U=0,Z=0;Z<ue;Z++){const Se=I-j;let Te=0;const Le=Se>fe?l:8*Se-7,ke=-8&Le;let se=0,R=0;for(;Te<ke;Te+=8)R=H[j++],q[U++]=128&R?me:ve,q[U++]=64&R?me:ve,q[U++]=32&R?me:ve,q[U++]=16&R?me:ve,q[U++]=8&R?me:ve,q[U++]=4&R?me:ve,q[U++]=2&R?me:ve,q[U++]=1&R?me:ve;for(;Te<Le;Te++)0===se&&(R=H[j++],se=128),q[U++]=R&se?me:ve,se>>=1}for(;U<ge;)q[U++]=0;M.putImageData(E,0,Y*s)}}else if(a.kind===g.ImageKind.RGBA_32BPP){const I=!!(te||ce||oe);for(Z=0,ye=l*s*4,Y=0;Y<S;Y++){if(z.set(H.subarray(j,j+ye)),j+=ye,I)for(let q=0;q<ye;q+=4)te&&(z[q+0]=te[z[q+0]]),ce&&(z[q+1]=ce[z[q+1]]),oe&&(z[q+2]=oe[z[q+2]]);M.putImageData(E,0,Z),Z+=s}if(Y<A){if(ye=l*h*4,z.set(H.subarray(j,j+ye)),I)for(let q=0;q<ye;q+=4)te&&(z[q+0]=te[z[q+0]]),ce&&(z[q+1]=ce[z[q+1]]),oe&&(z[q+2]=oe[z[q+2]]);M.putImageData(E,0,Z)}}else{if(a.kind!==g.ImageKind.RGB_24BPP)throw new Error(`bad image kind: ${a.kind}`);{const I=!!(te||ce||oe);for(ue=s,ye=l*ue,Y=0;Y<A;Y++){for(Y>=S&&(ue=h,ye=l*ue),U=0,Z=ye;Z--;)z[U++]=H[j++],z[U++]=H[j++],z[U++]=H[j++],z[U++]=255;if(I)for(let q=0;q<U;q+=4)te&&(z[q+0]=te[z[q+0]]),ce&&(z[q+1]=ce[z[q+1]]),oe&&(z[q+2]=oe[z[q+2]]);M.putImageData(E,0,Y*s)}}}}function m(M,a){if(a.bitmap)return void M.drawImage(a.bitmap,0,0);const u=a.height,t=a.width,l=u%s,h=(u-l)/s,S=0===l?h:h+1,A=M.createImageData(t,s);let E=0;const j=a.data,U=A.data;for(let H=0;H<S;H++){const z=H<h?s:l;({srcPos:E}=(0,re.applyMaskImageData)({src:j,srcPos:E,dest:U,width:t,height:z})),M.putImageData(A,0,H*s)}}function y(M,a){const u=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font"];for(let t=0,l=u.length;t<l;t++){const h=u[t];void 0!==M[h]&&(a[h]=M[h])}void 0!==M.setLineDash&&(a.setLineDash(M.getLineDash()),a.lineDashOffset=M.lineDashOffset)}function T(M,a){M.strokeStyle=M.fillStyle=a||"#000000",M.fillRule="nonzero",M.globalAlpha=1,M.lineWidth=1,M.lineCap="butt",M.lineJoin="miter",M.miterLimit=10,M.globalCompositeOperation="source-over",M.font="10px sans-serif",void 0!==M.setLineDash&&(M.setLineDash([]),M.lineDashOffset=0)}function k(M,a,u,t){const l=M.length;for(let h=3;h<l;h+=4){const S=M[h];if(0===S)M[h-3]=a,M[h-2]=u,M[h-1]=t;else if(S<255){const A=255-S;M[h-3]=M[h-3]*S+a*A>>8,M[h-2]=M[h-2]*S+u*A>>8,M[h-1]=M[h-1]*S+t*A>>8}}}function O(M,a,u){const t=M.length;for(let h=3;h<t;h+=4)a[h]=a[h]*(u?u[M[h]]:M[h])*.00392156862745098|0}function V(M,a,u){const t=M.length;for(let l=3;l<t;l+=4){const h=77*M[l-3]+152*M[l-2]+28*M[l-1];a[l]=u?a[l]*u[h>>8]>>8:a[l]*h>>16}}function Q(M,a){const u=g.Util.singularValueDecompose2dScale(M);u[0]=Math.fround(u[0]),u[1]=Math.fround(u[1]);const t=Math.fround((globalThis.devicePixelRatio||1)*ee.PixelsPerInch.PDF_TO_CSS_UNITS);return void 0!==a?a:u[0]<=t||u[1]<=t}const B=["butt","round","square"],$=["miter","round","bevel"],J={},ae={};class de{constructor(a,u,t,l,h,S,A,E){this.ctx=a,this.current=new i(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=u,this.objs=t,this.canvasFactory=l,this.imageLayer=h,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=[],this.optionalContentConfig=S,this.cachedCanvases=new f(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=A,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.backgroundColor=(null==E?void 0:E.background)||null,this.foregroundColor=(null==E?void 0:E.foreground)||null,a&&P(a),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(a,u=null){return"string"==typeof a?a.startsWith("g_")?this.commonObjs.get(a):this.objs.get(a):u}beginDrawing({transform:a,viewport:u,transparency:t=!1,background:l=null}){const h=this.ctx.canvas.width,S=this.ctx.canvas.height,A=l||"#ffffff";if(this.ctx.save(),this.foregroundColor&&this.backgroundColor){this.ctx.fillStyle=this.foregroundColor;const E=this.foregroundColor=this.ctx.fillStyle;this.ctx.fillStyle=this.backgroundColor;const j=this.backgroundColor=this.ctx.fillStyle;let U=!0,H=A;if(this.ctx.fillStyle=A,H=this.ctx.fillStyle,U="string"==typeof H&&/^#[0-9A-Fa-f]{6}$/.test(H),"#000000"===E&&"#ffffff"===j||E===j||!U)this.foregroundColor=this.backgroundColor=null;else{const z=parseInt(H.slice(1),16),Z=(z&&65280)>>8,ue=z&&255,ye=ce=>(ce/=255)<=.03928?ce/12.92:((ce+.055)/1.055)**2.4,te=Math.round(.2126*ye((z&&16711680)>>16)+.7152*ye(Z)+.0722*ye(ue));this.selectColor=(ce,oe,w)=>{const I=.2126*ye(ce)+.7152*ye(oe)+.0722*ye(w);return Math.round(I)===te?j:E}}}if(this.ctx.fillStyle=this.backgroundColor||A,this.ctx.fillRect(0,0,h,S),this.ctx.restore(),t){const E=this.cachedCanvases.getCanvas("transparent",h,S,!0);this.compositeCtx=this.ctx,this.transparentCanvas=E.canvas,this.ctx=E.context,this.ctx.save(),this.ctx.transform.apply(this.ctx,this.compositeCtx.mozCurrentTransform)}this.ctx.save(),T(this.ctx,this.foregroundColor),a&&(this.ctx.transform.apply(this.ctx,a),this.outputScaleX=a[0],this.outputScaleY=a[0]),this.ctx.transform.apply(this.ctx,u.transform),this.viewportScale=u.scale,this.baseTransform=this.ctx.mozCurrentTransform.slice(),this.imageLayer&&this.imageLayer.beginLayout()}executeOperatorList(a,u,t,l){const h=a.argsArray,S=a.fnArray;let A=u||0;const E=h.length;if(E===A)return A;const j=E-A>10&&"function"==typeof t,U=j?Date.now()+15:0;let H=0;const z=this.commonObjs,Y=this.objs;let Z;for(;;){if(void 0!==l&&A===l.nextBreakPoint)return l.breakIt(A,t),A;if(Z=S[A],Z!==g.OPS.dependency)this[Z].apply(this,h[A]);else for(const ue of h[A]){const ye=ue.startsWith("g_")?z:Y;if(!ye.has(ue))return ye.get(ue,t),A}if(A++,A===E)return A;if(j&&++H>10){if(Date.now()>U)return t(),A;H=0}}}endDrawing(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const a of this._cachedBitmapsMap.values()){for(const u of a.values())"undefined"!=typeof HTMLCanvasElement&&u instanceof HTMLCanvasElement&&(u.width=u.height=0);a.clear()}this._cachedBitmapsMap.clear(),this.imageLayer&&this.imageLayer.endLayout()}_scaleImage(a,u){const t=a.width,l=a.height;let U,H,h=Math.max(Math.hypot(u[0],u[1]),1),S=Math.max(Math.hypot(u[2],u[3]),1),A=t,E=l,j="prescale1";for(;h>2&&A>1||S>2&&E>1;){let z=A,Y=E;h>2&&A>1&&(z=Math.ceil(A/2),h/=A/z),S>2&&E>1&&(Y=Math.ceil(E/2),S/=E/Y),U=this.cachedCanvases.getCanvas(j,z,Y,!1),H=U.context,H.clearRect(0,0,z,Y),H.drawImage(a,0,0,A,E,0,0,z,Y),a=U.canvas,A=z,E=Y,j="prescale1"===j?"prescale2":"prescale1"}return{img:a,paintWidth:A,paintHeight:E}}_createMaskCanvas(a){const u=this.ctx,{width:t,height:l}=a,h=this.current.fillColor,S=this.current.patternFill,A=u.mozCurrentTransform;let E,j,U,H;if((a.bitmap||a.data)&&a.count>1){const ge=a.bitmap||a.data.buffer,fe=A.slice(0,4);j=JSON.stringify(S?fe:[fe,h]),E=this._cachedBitmapsMap.get(ge),E||(E=new Map,this._cachedBitmapsMap.set(ge,E));const me=E.get(j);if(me&&!S)return{canvas:me,offsetX:Math.round(Math.min(A[0],A[2])+A[4]),offsetY:Math.round(Math.min(A[1],A[3])+A[5])};U=me}U||(H=this.cachedCanvases.getCanvas("maskCanvas",t,l,!1),m(H.context,a));let z=g.Util.transform(A,[1/t,0,0,-1/l,0,0]);z=g.Util.transform(z,[1,0,0,1,0,-l]);const Y=g.Util.applyTransform([0,0],z),Z=g.Util.applyTransform([t,l],z),ue=g.Util.normalizeRect([Y[0],Y[1],Z[0],Z[1]]),ye=Math.round(ue[2]-ue[0])||1,te=Math.round(ue[3]-ue[1])||1,ce=this.cachedCanvases.getCanvas("fillCanvas",ye,te,!0),oe=ce.context,w=Math.min(Y[0],Z[0]),I=Math.min(Y[1],Z[1]);oe.translate(-w,-I),oe.transform.apply(oe,z),U||(U=this._scaleImage(H.canvas,oe.mozCurrentTransformInverse),U=U.img,E&&S&&E.set(j,U)),oe.imageSmoothingEnabled=Q(oe.mozCurrentTransform,a.interpolate),p(oe,U,0,0,U.width,U.height,0,0,t,l),oe.globalCompositeOperation="source-in";const q=g.Util.transform(oe.mozCurrentTransformInverse,[1,0,0,1,-w,-I]);return oe.fillStyle=S?h.getPattern(u,this,q,_e.PathType.FILL):h,oe.fillRect(0,0,t,l),E&&!S&&(this.cachedCanvases.delete("fillCanvas"),E.set(j,ce.canvas)),{canvas:ce.canvas,offsetX:Math.round(w),offsetY:Math.round(I)}}setLineWidth(a){a!==this.current.lineWidth&&(this._cachedScaleForStroking=null),this.current.lineWidth=a,this.ctx.lineWidth=a}setLineCap(a){this.ctx.lineCap=B[a]}setLineJoin(a){this.ctx.lineJoin=$[a]}setMiterLimit(a){this.ctx.miterLimit=a}setDash(a,u){const t=this.ctx;void 0!==t.setLineDash&&(t.setLineDash(a),t.lineDashOffset=u)}setRenderingIntent(a){}setFlatness(a){}setGState(a){for(let u=0,t=a.length;u<t;u++){const l=a[u],S=l[1];switch(l[0]){case"LW":this.setLineWidth(S);break;case"LC":this.setLineCap(S);break;case"LJ":this.setLineJoin(S);break;case"ML":this.setMiterLimit(S);break;case"D":this.setDash(S[0],S[1]);break;case"RI":this.setRenderingIntent(S);break;case"FL":this.setFlatness(S);break;case"Font":this.setFont(S[0],S[1]);break;case"CA":this.current.strokeAlpha=l[1];break;case"ca":this.current.fillAlpha=l[1],this.ctx.globalAlpha=l[1];break;case"BM":this.ctx.globalCompositeOperation=S;break;case"SMask":this.current.activeSMask=S?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.current.transferMaps=S}}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const a=this.inSMaskMode;this.current.activeSMask&&!a?this.beginSMaskMode():!this.current.activeSMask&&a&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const l=this.cachedCanvases.getCanvas("smaskGroupAt"+this.groupLevel,this.ctx.canvas.width,this.ctx.canvas.height,!0);this.suspendedCtx=this.ctx,this.ctx=l.context;const h=this.ctx;h.setTransform.apply(h,this.suspendedCtx.mozCurrentTransform),y(this.suspendedCtx,h),function c(M,a){if(M._removeMirroring)throw new Error("Context is already forwarding operations.");M.__originalSave=M.save,M.__originalRestore=M.restore,M.__originalRotate=M.rotate,M.__originalScale=M.scale,M.__originalTranslate=M.translate,M.__originalTransform=M.transform,M.__originalSetTransform=M.setTransform,M.__originalResetTransform=M.resetTransform,M.__originalClip=M.clip,M.__originalMoveTo=M.moveTo,M.__originalLineTo=M.lineTo,M.__originalBezierCurveTo=M.bezierCurveTo,M.__originalRect=M.rect,M.__originalClosePath=M.closePath,M.__originalBeginPath=M.beginPath,M._removeMirroring=()=>{M.save=M.__originalSave,M.restore=M.__originalRestore,M.rotate=M.__originalRotate,M.scale=M.__originalScale,M.translate=M.__originalTranslate,M.transform=M.__originalTransform,M.setTransform=M.__originalSetTransform,M.resetTransform=M.__originalResetTransform,M.clip=M.__originalClip,M.moveTo=M.__originalMoveTo,M.lineTo=M.__originalLineTo,M.bezierCurveTo=M.__originalBezierCurveTo,M.rect=M.__originalRect,M.closePath=M.__originalClosePath,M.beginPath=M.__originalBeginPath,delete M._removeMirroring},M.save=function(){a.save(),this.__originalSave()},M.restore=function(){a.restore(),this.__originalRestore()},M.translate=function(t,l){a.translate(t,l),this.__originalTranslate(t,l)},M.scale=function(t,l){a.scale(t,l),this.__originalScale(t,l)},M.transform=function(t,l,h,S,A,E){a.transform(t,l,h,S,A,E),this.__originalTransform(t,l,h,S,A,E)},M.setTransform=function(t,l,h,S,A,E){a.setTransform(t,l,h,S,A,E),this.__originalSetTransform(t,l,h,S,A,E)},M.resetTransform=function(){a.resetTransform(),this.__originalResetTransform()},M.rotate=function(t){a.rotate(t),this.__originalRotate(t)},M.clip=function(t){a.clip(t),this.__originalClip(t)},M.moveTo=function(u,t){a.moveTo(u,t),this.__originalMoveTo(u,t)},M.lineTo=function(u,t){a.lineTo(u,t),this.__originalLineTo(u,t)},M.bezierCurveTo=function(u,t,l,h,S,A){a.bezierCurveTo(u,t,l,h,S,A),this.__originalBezierCurveTo(u,t,l,h,S,A)},M.rect=function(u,t,l,h){a.rect(u,t,l,h),this.__originalRect(u,t,l,h)},M.closePath=function(){a.closePath(),this.__originalClosePath()},M.beginPath=function(){a.beginPath(),this.__originalBeginPath()}}(h,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),y(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(a){this.current.activeSMask&&(a?(a[0]=Math.floor(a[0]),a[1]=Math.floor(a[1]),a[2]=Math.ceil(a[2]),a[3]=Math.ceil(a[3])):a=[0,0,this.ctx.canvas.width,this.ctx.canvas.height],function X(M,a,u,t){const l=t[0],h=t[1],S=t[2]-l,A=t[3]-h;0===S||0===A||(function G(M,a,u,t,l,h,S,A,E,j,U){const H=!!h,z=H?h[0]:0,Y=H?h[1]:0,Z=H?h[2]:0;let ue;ue="Luminosity"===l?V:O;const te=Math.min(t,Math.ceil(1048576/u));for(let ce=0;ce<t;ce+=te){const oe=Math.min(te,t-ce),w=M.getImageData(A-j,ce+(E-U),u,oe),I=a.getImageData(A,ce+E,u,oe);H&&k(w.data,z,Y,Z),ue(w.data,I.data,S),a.putImageData(I,A,ce+E)}}(a.context,u,S,A,a.subtype,a.backdrop,a.transferMap,l,h,a.offsetX,a.offsetY),M.save(),M.globalAlpha=1,M.globalCompositeOperation="source-over",M.setTransform(1,0,0,1,0,0),M.drawImage(u.canvas,0,0),M.restore())}(this.suspendedCtx,this.current.activeSMask,this.ctx,a),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore())}save(){this.inSMaskMode?(y(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const a=this.current;this.stateStack.push(a),this.current=a.clone()}restore(){0===this.stateStack.length&&this.inSMaskMode&&this.endSMaskMode(),0!==this.stateStack.length&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),y(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null)}transform(a,u,t,l,h,S){this.ctx.transform(a,u,t,l,h,S),this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null}constructPath(a,u,t){const l=this.ctx,h=this.current;let E,j,S=h.x,A=h.y;const U=l.mozCurrentTransform,H=0===U[0]&&0===U[3]||0===U[1]&&0===U[2],z=H?t.slice(0):null;for(let Y=0,Z=0,ue=a.length;Y<ue;Y++)switch(0|a[Y]){case g.OPS.rectangle:S=u[Z++],A=u[Z++];const ye=u[Z++],te=u[Z++],ce=S+ye,oe=A+te;l.moveTo(S,A),0===ye||0===te?l.lineTo(ce,oe):(l.lineTo(ce,A),l.lineTo(ce,oe),l.lineTo(S,oe)),H||h.updateRectMinMax(U,[S,A,ce,oe]),l.closePath();break;case g.OPS.moveTo:S=u[Z++],A=u[Z++],l.moveTo(S,A),H||h.updatePathMinMax(U,S,A);break;case g.OPS.lineTo:S=u[Z++],A=u[Z++],l.lineTo(S,A),H||h.updatePathMinMax(U,S,A);break;case g.OPS.curveTo:E=S,j=A,S=u[Z+4],A=u[Z+5],l.bezierCurveTo(u[Z],u[Z+1],u[Z+2],u[Z+3],S,A),h.updateCurvePathMinMax(U,E,j,u[Z],u[Z+1],u[Z+2],u[Z+3],S,A,z),Z+=6;break;case g.OPS.curveTo2:E=S,j=A,l.bezierCurveTo(S,A,u[Z],u[Z+1],u[Z+2],u[Z+3]),h.updateCurvePathMinMax(U,E,j,S,A,u[Z],u[Z+1],u[Z+2],u[Z+3],z),S=u[Z+2],A=u[Z+3],Z+=4;break;case g.OPS.curveTo3:E=S,j=A,S=u[Z+2],A=u[Z+3],l.bezierCurveTo(u[Z],u[Z+1],S,A,S,A),h.updateCurvePathMinMax(U,E,j,u[Z],u[Z+1],S,A,S,A,z),Z+=4;break;case g.OPS.closePath:l.closePath()}H&&h.updateScalingPathMinMax(U,z),h.setCurrentPoint(S,A)}closePath(){this.ctx.closePath()}stroke(a){a=void 0===a||a;const u=this.ctx,t=this.current.strokeColor;u.globalAlpha=this.current.strokeAlpha,this.contentVisible&&("object"==typeof t&&(null==t?void 0:t.getPattern)?(u.save(),u.strokeStyle=t.getPattern(u,this,u.mozCurrentTransformInverse,_e.PathType.STROKE),this.rescaleAndStroke(!1),u.restore()):this.rescaleAndStroke(!0)),a&&this.consumePath(this.current.getClippedPathBoundingBox()),u.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(a){a=void 0===a||a;const u=this.ctx,t=this.current.fillColor;let h=!1;this.current.patternFill&&(u.save(),u.fillStyle=t.getPattern(u,this,u.mozCurrentTransformInverse,_e.PathType.FILL),h=!0);const S=this.current.getClippedPathBoundingBox();this.contentVisible&&null!==S&&(this.pendingEOFill?(u.fill("evenodd"),this.pendingEOFill=!1):u.fill()),h&&u.restore(),a&&this.consumePath(S)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=J}eoClip(){this.pendingClip=ae}beginText(){this.current.textMatrix=g.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const a=this.pendingTextPaths,u=this.ctx;if(void 0!==a){u.save(),u.beginPath();for(let t=0;t<a.length;t++){const l=a[t];u.setTransform.apply(u,l.transform),u.translate(l.x,l.y),l.addToPath(u,l.fontSize)}u.restore(),u.clip(),u.beginPath(),delete this.pendingTextPaths}else u.beginPath()}setCharSpacing(a){this.current.charSpacing=a}setWordSpacing(a){this.current.wordSpacing=a}setHScale(a){this.current.textHScale=a/100}setLeading(a){this.current.leading=-a}setFont(a,u){const t=this.commonObjs.get(a),l=this.current;if(!t)throw new Error(`Can't find font for ${a}`);if(l.fontMatrix=t.fontMatrix||g.FONT_IDENTITY_MATRIX,(0===l.fontMatrix[0]||0===l.fontMatrix[3])&&(0,g.warn)("Invalid font matrix for font "+a),u<0?(u=-u,l.fontDirection=-1):l.fontDirection=1,this.current.font=t,this.current.fontSize=u,t.isType3Font)return;let S="normal";t.black?S="900":t.bold&&(S="bold");const A=t.italic?"italic":"normal",E=`"${t.loadedName||"sans-serif"}", ${t.fallbackName}`;let j=u;u<16?j=16:u>100&&(j=100),this.current.fontSizeScale=u/j,this.ctx.font=`${A} ${S} ${j}px ${E}`}setTextRenderingMode(a){this.current.textRenderingMode=a}setTextRise(a){this.current.textRise=a}moveText(a,u){this.current.x=this.current.lineX+=a,this.current.y=this.current.lineY+=u}setLeadingMoveText(a,u){this.setLeading(-u),this.moveText(a,u)}setTextMatrix(a,u,t,l,h,S){this.current.textMatrix=[a,u,t,l,h,S],this.current.textMatrixScale=Math.hypot(a,u),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(a,u,t,l){const h=this.ctx,S=this.current,A=S.font,E=S.textRenderingMode,j=S.fontSize/S.fontSizeScale,U=E&g.TextRenderingMode.FILL_STROKE_MASK,H=!!(E&g.TextRenderingMode.ADD_TO_PATH_FLAG),z=S.patternFill&&!A.missingFile;let Y;(A.disableFontFace||H||z)&&(Y=A.getPathGenerator(this.commonObjs,a)),A.disableFontFace||z?(h.save(),h.translate(u,t),h.beginPath(),Y(h,j),l&&h.setTransform.apply(h,l),(U===g.TextRenderingMode.FILL||U===g.TextRenderingMode.FILL_STROKE)&&h.fill(),(U===g.TextRenderingMode.STROKE||U===g.TextRenderingMode.FILL_STROKE)&&h.stroke(),h.restore()):((U===g.TextRenderingMode.FILL||U===g.TextRenderingMode.FILL_STROKE)&&h.fillText(a,u,t),(U===g.TextRenderingMode.STROKE||U===g.TextRenderingMode.FILL_STROKE)&&h.strokeText(a,u,t)),H&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:h.mozCurrentTransform,x:u,y:t,fontSize:j,addToPath:Y})}get isFontSubpixelAAEnabled(){const{context:a}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10,!1);a.scale(1.5,1),a.fillText("I",0,10);const u=a.getImageData(0,0,10,10).data;let t=!1;for(let l=3;l<u.length;l+=4)if(u[l]>0&&u[l]<255){t=!0;break}return(0,g.shadow)(this,"isFontSubpixelAAEnabled",t)}showText(a){const u=this.current,t=u.font;if(t.isType3Font)return this.showType3Text(a);const l=u.fontSize;if(0===l)return;const h=this.ctx,S=u.fontSizeScale,A=u.charSpacing,E=u.wordSpacing,j=u.fontDirection,U=u.textHScale*j,H=a.length,z=t.vertical,Y=z?1:-1,Z=t.defaultVMetrics,ue=l*u.fontMatrix[0],ye=u.textRenderingMode===g.TextRenderingMode.FILL&&!t.disableFontFace&&!u.patternFill;let te;if(h.save(),h.transform.apply(h,u.textMatrix),h.translate(u.x,u.y+u.textRise),h.scale(U,j>0?-1:1),u.patternFill){h.save();const q=u.fillColor.getPattern(h,this,h.mozCurrentTransformInverse,_e.PathType.FILL);te=h.mozCurrentTransform,h.restore(),h.fillStyle=q}let ce=u.lineWidth;const oe=u.textMatrixScale;if(0===oe||0===ce){const q=u.textRenderingMode&g.TextRenderingMode.FILL_STROKE_MASK;(q===g.TextRenderingMode.STROKE||q===g.TextRenderingMode.FILL_STROKE)&&(ce=this.getSinglePixelWidth())}else ce/=oe;1!==S&&(h.scale(S,S),ce/=S),h.lineWidth=ce;let I,w=0;for(I=0;I<H;++I){const q=a[I];if("number"==typeof q){w+=Y*q*l/1e3;continue}let ge=!1;const fe=(q.isSpace?E:0)+A,me=q.fontChar,ve=q.accent;let Se,Te,ke,Le=q.width;if(z){const se=q.vmetric||Z,R=-(q.vmetric?se[1]:.5*Le)*ue;Le=se?-se[0]:Le,Se=R/S,Te=(w+se[2]*ue)/S}else Se=w/S,Te=0;if(t.remeasure&&Le>0){const se=1e3*h.measureText(me).width/l*S;if(Le<se&&this.isFontSubpixelAAEnabled){const R=Le/se;ge=!0,h.save(),h.scale(R,1),Se/=R}else Le!==se&&(Se+=(Le-se)/2e3*l/S)}this.contentVisible&&(q.isInFont||t.missingFile)&&(ye&&!ve?h.fillText(me,Se,Te):(this.paintChar(me,Se,Te,te),ve&&this.paintChar(ve.fontChar,Se+l*ve.offset.x/S,Te-l*ve.offset.y/S,te))),ke=z?Le*ue-fe*j:Le*ue+fe*j,w+=ke,ge&&h.restore()}z?u.y-=w:u.x+=w*U,h.restore(),this.compose()}showType3Text(a){const u=this.ctx,t=this.current,l=t.font,h=t.fontSize,S=t.fontDirection,A=l.vertical?1:-1,E=t.charSpacing,j=t.wordSpacing,U=t.textHScale*S,H=t.fontMatrix||g.FONT_IDENTITY_MATRIX,z=a.length;let Z,ue,ye,te;if(t.textRenderingMode!==g.TextRenderingMode.INVISIBLE&&0!==h){for(this._cachedScaleForStroking=null,this._cachedGetSinglePixelWidth=null,u.save(),u.transform.apply(u,t.textMatrix),u.translate(t.x,t.y),u.scale(U,S),Z=0;Z<z;++Z){if(ue=a[Z],"number"==typeof ue){te=A*ue*h/1e3,this.ctx.translate(te,0),t.x+=te*U;continue}const ce=(ue.isSpace?j:0)+E,oe=l.charProcOperatorList[ue.operatorListId];oe?(this.contentVisible&&(this.processingType3=ue,this.save(),u.scale(h,h),u.transform.apply(u,H),this.executeOperatorList(oe),this.restore()),ye=g.Util.applyTransform([ue.width,0],H)[0]*h+ce,u.translate(ye,0),t.x+=ye*U):(0,g.warn)(`Type3 character "${ue.operatorListId}" is not available.`)}u.restore(),this.processingType3=null}}setCharWidth(a,u){}setCharWidthAndBounds(a,u,t,l,h,S){this.ctx.rect(t,l,h-t,S-l),this.ctx.clip(),this.endPath()}getColorN_Pattern(a){let u;if("TilingPattern"===a[0]){const t=a[1],l=this.baseTransform||this.ctx.mozCurrentTransform.slice();u=new _e.TilingPattern(a,t,this.ctx,{createCanvasGraphics:S=>new de(S,this.commonObjs,this.objs,this.canvasFactory)},l)}else u=this._getPattern(a[1],a[2]);return u}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(a,u,t){var h;const l=(null==(h=this.selectColor)?void 0:h.call(this,a,u,t))||g.Util.makeHexColor(a,u,t);this.ctx.strokeStyle=l,this.current.strokeColor=l}setFillRGBColor(a,u,t){var h;const l=(null==(h=this.selectColor)?void 0:h.call(this,a,u,t))||g.Util.makeHexColor(a,u,t);this.ctx.fillStyle=l,this.current.fillColor=l,this.current.patternFill=!1}_getPattern(a,u=null){let t;return this.cachedPatterns.has(a)?t=this.cachedPatterns.get(a):(t=(0,_e.getShadingPattern)(this.objs.get(a)),this.cachedPatterns.set(a,t)),u&&(t.matrix=u),t}shadingFill(a){if(!this.contentVisible)return;const u=this.ctx;this.save();const t=this._getPattern(a);u.fillStyle=t.getPattern(u,this,u.mozCurrentTransformInverse,_e.PathType.SHADING);const l=u.mozCurrentTransformInverse;if(l){const h=u.canvas,S=h.width,A=h.height,E=g.Util.applyTransform([0,0],l),j=g.Util.applyTransform([0,A],l),U=g.Util.applyTransform([S,0],l),H=g.Util.applyTransform([S,A],l),z=Math.min(E[0],j[0],U[0],H[0]),Y=Math.min(E[1],j[1],U[1],H[1]),Z=Math.max(E[0],j[0],U[0],H[0]),ue=Math.max(E[1],j[1],U[1],H[1]);this.ctx.fillRect(z,Y,Z-z,ue-Y)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,g.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,g.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(a,u){this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(a)&&6===a.length&&this.transform.apply(this,a),this.baseTransform=this.ctx.mozCurrentTransform,u)&&(this.ctx.rect(u[0],u[1],u[2]-u[0],u[3]-u[1]),this.current.updateRectMinMax(this.ctx.mozCurrentTransform,u),this.clip(),this.endPath())}paintFormXObjectEnd(){!this.contentVisible||(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(a){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const u=this.ctx;a.isolated||(0,g.info)("TODO: Support non-isolated groups."),a.knockout&&(0,g.warn)("Knockout groups not supported.");const t=u.mozCurrentTransform;if(a.matrix&&u.transform.apply(u,a.matrix),!a.bbox)throw new Error("Bounding box is required.");let l=g.Util.getAxialAlignedBoundingBox(a.bbox,u.mozCurrentTransform);l=g.Util.intersect(l,[0,0,u.canvas.width,u.canvas.height])||[0,0,0,0];const S=Math.floor(l[0]),A=Math.floor(l[1]);let E=Math.max(Math.ceil(l[2])-S,1),j=Math.max(Math.ceil(l[3])-A,1),U=1,H=1;E>x&&(U=E/x,E=x),j>x&&(H=j/x,j=x),this.current.startNewPathAndClipBox([0,0,E,j]);let z="groupAt"+this.groupLevel;a.smask&&(z+="_smask_"+this.smaskCounter++%2);const Y=this.cachedCanvases.getCanvas(z,E,j,!0),Z=Y.context;Z.scale(1/U,1/H),Z.translate(-S,-A),Z.transform.apply(Z,t),a.smask?this.smaskStack.push({canvas:Y.canvas,context:Z,offsetX:S,offsetY:A,scaleX:U,scaleY:H,subtype:a.smask.subtype,backdrop:a.smask.backdrop,transferMap:a.smask.transferMap||null,startTransformInverse:null}):(u.setTransform(1,0,0,1,0,0),u.translate(S,A),u.scale(U,H),u.save()),y(u,Z),this.ctx=Z,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(u),this.groupLevel++}endGroup(a){if(!this.contentVisible)return;this.groupLevel--;const u=this.ctx,t=this.groupStack.pop();if(this.ctx=t,this.ctx.imageSmoothingEnabled=!1,a.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const l=this.ctx.mozCurrentTransform;this.restore(),this.ctx.save(),this.ctx.setTransform.apply(this.ctx,l);const h=g.Util.getAxialAlignedBoundingBox([0,0,u.canvas.width,u.canvas.height],l);this.ctx.drawImage(u.canvas,0,0),this.ctx.restore(),this.compose(h)}}beginAnnotations(){this.save(),this.baseTransform&&this.ctx.setTransform.apply(this.ctx,this.baseTransform)}endAnnotations(){this.restore()}beginAnnotation(a,u,t,l,h){if(this.save(),Array.isArray(u)&&4===u.length){const S=u[2]-u[0],A=u[3]-u[1];if(h&&this.annotationCanvasMap){(t=t.slice())[4]-=u[0],t[5]-=u[1],(u=u.slice())[0]=u[1]=0,u[2]=S,u[3]=A;const[E,j]=g.Util.singularValueDecompose2dScale(this.ctx.mozCurrentTransform),{viewportScale:U}=this,H=Math.ceil(S*this.outputScaleX*U),z=Math.ceil(A*this.outputScaleY*U);this.annotationCanvas=this.canvasFactory.create(H,z);const{canvas:Y,context:Z}=this.annotationCanvas,ue=`var(--zoom-factor) * ${ee.PixelsPerInch.PDF_TO_CSS_UNITS}`;Y.style.width=`calc(${S}px * ${ue})`,Y.style.height=`calc(${A}px * ${ue})`,this.annotationCanvasMap.set(a,Y),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Z,this.ctx.setTransform(E,0,0,-j,0,A*j),P(this.ctx),T(this.ctx,this.foregroundColor)}else T(this.ctx,this.foregroundColor),this.ctx.rect(u[0],u[1],S,A),this.ctx.clip(),this.endPath()}this.current=new i(this.ctx.canvas.width,this.ctx.canvas.height),this.transform.apply(this,t),this.transform.apply(this,l)}endAnnotation(){this.annotationCanvas&&(this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas),this.restore()}paintImageMaskXObject(a){if(!this.contentVisible)return;const u=a.count;(a=this.getObject(a.data,a)).count=u;const t=this.ctx,l=this.processingType3;if(l&&(void 0===l.compiled&&(l.compiled=function e(M){const{width:a,height:u}=M;if(a>1e3||u>1e3)return null;const l=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),h=a+1;let A,E,j,S=new Uint8Array(h*(u+1));const U=a+7&-8;let H=new Uint8Array(U*u),z=0;for(const oe of M.data){let w=128;for(;w>0;)H[z++]=oe&w?0:255,w>>=1}let Y=0;for(z=0,0!==H[z]&&(S[0]=1,++Y),E=1;E<a;E++)H[z]!==H[z+1]&&(S[E]=H[z]?2:1,++Y),z++;for(0!==H[z]&&(S[E]=2,++Y),A=1;A<u;A++){z=A*U,j=A*h,H[z-U]!==H[z]&&(S[j]=H[z]?1:8,++Y);let oe=(H[z]?4:0)+(H[z-U]?8:0);for(E=1;E<a;E++)oe=(oe>>2)+(H[z+1]?4:0)+(H[z-U+1]?8:0),l[oe]&&(S[j+E]=l[oe],++Y),z++;if(H[z-U]!==H[z]&&(S[j+E]=H[z]?2:4,++Y),Y>1e3)return null}for(z=U*(u-1),j=A*h,0!==H[z]&&(S[j]=8,++Y),E=1;E<a;E++)H[z]!==H[z+1]&&(S[j+E]=H[z]?4:8,++Y),z++;if(0!==H[z]&&(S[j+E]=4,++Y),Y>1e3)return null;const Z=new Int32Array([0,h,-1,0,-h,0,0,0,1]);let ue,ye,te;for(ne.isNodeJS?ye=[]:ue=new Path2D,A=0;Y&&A<=u;A++){let oe=A*h;const w=oe+a;for(;oe<w&&!S[oe];)oe++;if(oe===w)continue;ue?ue.moveTo(oe%h,A):te=[oe%h,A];const I=oe;let q=S[oe];do{const ge=Z[q];do{oe+=ge}while(!S[oe]);const fe=S[oe];5!==fe&&10!==fe?(q=fe,S[oe]=0):(q=fe&51*q>>4,S[oe]&=q>>2|q<<2),ue?ue.lineTo(oe%h,oe/h|0):te.push(oe%h,oe/h|0),S[oe]||--Y}while(I!==oe);ue||ye.push(te),--A}return H=null,S=null,function(oe){if(oe.save(),oe.scale(1/a,-1/u),oe.translate(0,-u),ue)oe.fill(ue);else{oe.beginPath();for(const w of ye){oe.moveTo(w[0],w[1]);for(let I=2,q=w.length;I<q;I+=2)oe.lineTo(w[I],w[I+1])}oe.fill()}oe.beginPath(),oe.restore()}}(a)),l.compiled))return void l.compiled(t);const h=this._createMaskCanvas(a),S=h.canvas;t.save(),t.setTransform(1,0,0,1,0,0),t.drawImage(S,h.offsetX,h.offsetY),t.restore(),this.compose()}paintImageMaskXObjectRepeat(a,u,t=0,l=0,h,S){if(!this.contentVisible)return;a=this.getObject(a.data,a);const A=this.ctx;A.save();const E=A.mozCurrentTransform;A.transform(u,t,l,h,0,0);const j=this._createMaskCanvas(a);A.setTransform(1,0,0,1,0,0);for(let U=0,H=S.length;U<H;U+=2){const z=g.Util.transform(E,[u,t,l,h,S[U],S[U+1]]),[Y,Z]=g.Util.applyTransform([0,0],z);A.drawImage(j.canvas,Y,Z)}A.restore(),this.compose()}paintImageMaskXObjectGroup(a){if(!this.contentVisible)return;const u=this.ctx,t=this.current.fillColor,l=this.current.patternFill;for(let h=0,S=a.length;h<S;h++){const A=a[h],E=A.width,j=A.height,U=this.cachedCanvases.getCanvas("maskCanvas",E,j,!1),H=U.context;H.save(),m(H,A),H.globalCompositeOperation="source-in",H.fillStyle=l?t.getPattern(H,this,u.mozCurrentTransformInverse,_e.PathType.FILL):t,H.fillRect(0,0,E,j),H.restore(),u.save(),u.transform.apply(u,A.transform),u.scale(1,-1),p(u,U.canvas,0,0,E,j,0,-1,1,1),u.restore()}this.compose()}paintImageXObject(a){if(!this.contentVisible)return;const u=this.getObject(a);u?this.paintInlineImageXObject(u):(0,g.warn)("Dependent image isn't ready yet")}paintImageXObjectRepeat(a,u,t,l){if(!this.contentVisible)return;const h=this.getObject(a);if(!h)return void(0,g.warn)("Dependent image isn't ready yet");const S=h.width,A=h.height,E=[];for(let j=0,U=l.length;j<U;j+=2)E.push({transform:[u,0,0,t,l[j],l[j+1]],x:0,y:0,w:S,h:A});this.paintInlineImageXObjectGroup(h,E)}paintInlineImageXObject(a){if(!this.contentVisible)return;const u=a.width,t=a.height,l=this.ctx;let h;if(this.save(),l.scale(1/u,-1/t),"function"==typeof HTMLElement&&a instanceof HTMLElement||!a.data)h=a;else{const j=this.cachedCanvases.getCanvas("inlineImage",u,t,!1);_(j.context,a,this.current.transferMaps),h=j.canvas}const S=this._scaleImage(h,l.mozCurrentTransformInverse);l.imageSmoothingEnabled=Q(l.mozCurrentTransform,a.interpolate);const[A,E]=p(l,S.img,0,0,S.paintWidth,S.paintHeight,0,-t,u,t);if(this.imageLayer){const j=this.getCanvasPosition(0,-t);this.imageLayer.appendImage({imgData:a,left:j[0],top:j[1],width:A,height:E})}this.compose(),this.restore()}paintInlineImageXObjectGroup(a,u){if(!this.contentVisible)return;const t=this.ctx,l=a.width,h=a.height,S=this.cachedCanvases.getCanvas("inlineImage",l,h,!1);_(S.context,a,this.current.transferMaps);for(let E=0,j=u.length;E<j;E++){const U=u[E];if(t.save(),t.transform.apply(t,U.transform),t.scale(1,-1),p(t,S.canvas,U.x,U.y,U.w,U.h,0,-1,1,1),this.imageLayer){const H=this.getCanvasPosition(U.x,U.y);this.imageLayer.appendImage({imgData:a,left:H[0],top:H[1],width:l,height:h})}t.restore()}this.compose()}paintSolidColorImageMask(){!this.contentVisible||(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(a){}markPointProps(a,u){}beginMarkedContent(a){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(a,u){this.markedContentStack.push("OC"===a?{visible:this.optionalContentConfig.isVisible(u)}:{visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(a){const u=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(a);const t=this.ctx;this.pendingClip&&(u||(this.pendingClip===ae?t.clip("evenodd"):t.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),t.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const a=this.ctx.mozCurrentTransform;if(0===a[1]&&0===a[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(a[0]),Math.abs(a[3]));else{const u=Math.abs(a[0]*a[3]-a[2]*a[1]),t=Math.hypot(a[0],a[2]),l=Math.hypot(a[1],a[3]);this._cachedGetSinglePixelWidth=Math.max(t,l)/u}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(!this._cachedScaleForStroking){const{lineWidth:a}=this.current,u=this.ctx.mozCurrentTransform;let t,l;if(0===u[1]&&0===u[2]){const h=Math.abs(u[0]),S=Math.abs(u[3]);if(0===a)t=1/h,l=1/S;else{const A=h*a,E=S*a;t=A<1?1/A:1,l=E<1?1/E:1}}else{const h=Math.abs(u[0]*u[3]-u[2]*u[1]),S=Math.hypot(u[0],u[1]),A=Math.hypot(u[2],u[3]);if(0===a)t=A/h,l=S/h;else{const E=a*h;t=A>E?A/E:1,l=S>E?S/E:1}}this._cachedScaleForStroking=[t,l]}return this._cachedScaleForStroking}rescaleAndStroke(a){const{ctx:u}=this,{lineWidth:t}=this.current,[l,h]=this.getScaleForStroking();if(u.lineWidth=t||1,1===l&&1===h)return void u.stroke();let S,A,E;a&&(S=u.mozCurrentTransform.slice(),A=u.getLineDash().slice(),E=u.lineDashOffset),u.scale(l,h);const j=Math.max(l,h);u.setLineDash(u.getLineDash().map(U=>U/j)),u.lineDashOffset/=j,u.stroke(),a&&(u.setTransform(...S),u.setLineDash(A),u.lineDashOffset=E)}getCanvasPosition(a,u){const t=this.ctx.mozCurrentTransform;return[t[0]*a+t[2]*u+t[4],t[1]*a+t[3]*u+t[5]]}isContentVisible(){for(let a=this.markedContentStack.length-1;a>=0;a--)if(!this.markedContentStack[a].visible)return!1;return!0}}L.CanvasGraphics=de;for(const M in g.OPS)void 0!==de.prototype[M]&&(de.prototype[g.OPS[M]]=de.prototype[M])},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.TilingPattern=L.PathType=void 0,L.getShadingPattern=function C(n){switch(n[0]){case"RadialAxial":return new D(n);case"Mesh":return new b(n);case"Dummy":return new r}throw new Error(`Unknown IR type: ${n[0]}`)};var g=K(1),_e=K(3);const re={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ne(n,c){if(!c||_e.isNodeJS)return;const P=c[2]-c[0],f=c[3]-c[1],p=new Path2D;p.rect(c[0],c[1],P,f),n.clip(p)}L.PathType=re;class ee{constructor(){this.constructor===ee&&(0,g.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,g.unreachable)("Abstract method `getPattern` called.")}}class D extends ee{constructor(c){super(),this._type=c[1],this._bbox=c[2],this._colorStops=c[3],this._p0=c[4],this._p1=c[5],this._r0=c[6],this._r1=c[7],this.matrix=null}_createGradient(c){let P;"axial"===this._type?P=c.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(P=c.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const f of this._colorStops)P.addColorStop(f[0],f[1]);return P}getPattern(c,P,f,p){let e;if(p===re.STROKE||p===re.FILL){const i=P.current.getClippedPathBoundingBox(p,c.mozCurrentTransform)||[0,0,0,0],_=Math.ceil(i[2]-i[0])||1,m=Math.ceil(i[3]-i[1])||1,y=P.cachedCanvases.getCanvas("pattern",_,m,!0),T=y.context;T.clearRect(0,0,T.canvas.width,T.canvas.height),T.beginPath(),T.rect(0,0,T.canvas.width,T.canvas.height),T.translate(-i[0],-i[1]),f=g.Util.transform(f,[1,0,0,1,i[0],i[1]]),T.transform.apply(T,P.baseTransform),this.matrix&&T.transform.apply(T,this.matrix),ne(T,this._bbox),T.fillStyle=this._createGradient(T),T.fill(),e=c.createPattern(y.canvas,"no-repeat");const k=new DOMMatrix(f);try{e.setTransform(k)}catch(O){(0,g.warn)(`RadialAxialShadingPattern.getPattern: "${null==O?void 0:O.message}".`)}}else ne(c,this._bbox),e=this._createGradient(c);return e}}function d(n,c,P,f,p,e,i,_){const m=c.coords,y=c.colors,T=n.data,k=4*n.width;let O;m[P+1]>m[f+1]&&(O=P,P=f,f=O,O=e,e=i,i=O),m[f+1]>m[p+1]&&(O=f,f=p,p=O,O=i,i=_,_=O),m[P+1]>m[f+1]&&(O=P,P=f,f=O,O=e,e=i,i=O);const V=(m[P]+c.offsetX)*c.scaleX,G=(m[P+1]+c.offsetY)*c.scaleY,X=(m[f]+c.offsetX)*c.scaleX,Q=(m[f+1]+c.offsetY)*c.scaleY,B=(m[p]+c.offsetX)*c.scaleX,$=(m[p+1]+c.offsetY)*c.scaleY;if(G>=$)return;const J=y[e],ae=y[e+1],de=y[e+2],M=y[i],a=y[i+1],u=y[i+2],t=y[_],l=y[_+1],h=y[_+2],S=Math.round(G),A=Math.round($);let E,j,U,H,z,Y,Z,ue;for(let ye=S;ye<=A;ye++){if(ye<Q){let I;I=ye<G?0:(G-ye)/(G-Q),E=V-(V-X)*I,j=J-(J-M)*I,U=ae-(ae-a)*I,H=de-(de-u)*I}else{let I;I=ye>$?1:Q===$?0:(Q-ye)/(Q-$),E=X-(X-B)*I,j=M-(M-t)*I,U=a-(a-l)*I,H=u-(u-h)*I}let te;te=ye<G?0:ye>$?1:(G-ye)/(G-$),z=V-(V-B)*te,Y=J-(J-t)*te,Z=ae-(ae-l)*te,ue=de-(de-h)*te;const ce=Math.round(Math.min(E,z)),oe=Math.round(Math.max(E,z));let w=k*ye+4*ce;for(let I=ce;I<=oe;I++)te=(E-I)/(E-z),te<0?te=0:te>1&&(te=1),T[w++]=j-(j-Y)*te|0,T[w++]=U-(U-Z)*te|0,T[w++]=H-(H-ue)*te|0,T[w++]=255}}function x(n,c,P){const f=c.coords,p=c.colors;let e,i;switch(c.type){case"lattice":const _=c.verticesPerRow,m=Math.floor(f.length/_)-1,y=_-1;for(e=0;e<m;e++){let T=e*_;for(let k=0;k<y;k++,T++)d(n,P,f[T],f[T+1],f[T+_],p[T],p[T+1],p[T+_]),d(n,P,f[T+_+1],f[T+1],f[T+_],p[T+_+1],p[T+1],p[T+_])}break;case"triangles":for(e=0,i=f.length;e<i;e+=3)d(n,P,f[e],f[e+1],f[e+2],p[e],p[e+1],p[e+2]);break;default:throw new Error("illegal figure")}}class b extends ee{constructor(c){super(),this._coords=c[2],this._colors=c[3],this._figures=c[4],this._bounds=c[5],this._bbox=c[7],this._background=c[8],this.matrix=null}_createMeshCanvas(c,P,f){const _=Math.floor(this._bounds[0]),m=Math.floor(this._bounds[1]),y=Math.ceil(this._bounds[2])-_,T=Math.ceil(this._bounds[3])-m,k=Math.min(Math.ceil(Math.abs(y*c[0]*1.1)),3e3),O=Math.min(Math.ceil(Math.abs(T*c[1]*1.1)),3e3),V=y/k,G=T/O,X={coords:this._coords,colors:this._colors,offsetX:-_,offsetY:-m,scaleX:1/V,scaleY:1/G},$=f.getCanvas("mesh",k+4,O+4,!1),J=$.context,ae=J.createImageData(k,O);if(P){const M=ae.data;for(let a=0,u=M.length;a<u;a+=4)M[a]=P[0],M[a+1]=P[1],M[a+2]=P[2],M[a+3]=255}for(const M of this._figures)x(ae,M,X);return J.putImageData(ae,2,2),{canvas:$.canvas,offsetX:_-2*V,offsetY:m-2*G,scaleX:V,scaleY:G}}getPattern(c,P,f,p){let e;if(ne(c,this._bbox),p===re.SHADING)e=g.Util.singularValueDecompose2dScale(c.mozCurrentTransform);else if(e=g.Util.singularValueDecompose2dScale(P.baseTransform),this.matrix){const _=g.Util.singularValueDecompose2dScale(this.matrix);e=[e[0]*_[0],e[1]*_[1]]}const i=this._createMeshCanvas(e,p===re.SHADING?null:this._background,P.cachedCanvases);return p!==re.SHADING&&(c.setTransform.apply(c,P.baseTransform),this.matrix&&c.transform.apply(c,this.matrix)),c.translate(i.offsetX,i.offsetY),c.scale(i.scaleX,i.scaleY),c.createPattern(i.canvas,"no-repeat")}}class r extends ee{getPattern(){return"hotpink"}}class s{static get MAX_PATTERN_SIZE(){return(0,g.shadow)(this,"MAX_PATTERN_SIZE",3e3)}constructor(c,P,f,p,e){this.operatorList=c[2],this.matrix=c[3]||[1,0,0,1,0,0],this.bbox=c[4],this.xstep=c[5],this.ystep=c[6],this.paintType=c[7],this.tilingType=c[8],this.color=P,this.ctx=f,this.canvasGraphicsFactory=p,this.baseTransform=e}createPatternCanvas(c){const P=this.operatorList,f=this.bbox,p=this.xstep,e=this.ystep,i=this.paintType,m=this.color,y=this.canvasGraphicsFactory;(0,g.info)("TilingType: "+this.tilingType);const T=f[0],k=f[1],O=f[2],V=f[3],G=g.Util.singularValueDecompose2dScale(this.matrix),X=g.Util.singularValueDecompose2dScale(this.baseTransform),Q=[G[0]*X[0],G[1]*X[1]],B=this.getSizeAndScale(p,this.ctx.canvas.width,Q[0]),$=this.getSizeAndScale(e,this.ctx.canvas.height,Q[1]),J=c.cachedCanvases.getCanvas("pattern",B.size,$.size,!0),ae=J.context,de=y.createCanvasGraphics(ae);de.groupLevel=c.groupLevel,this.setFillAndStrokeStyleToContext(de,i,m);let M=T,a=k,u=O,t=V;return T<0&&(M=0,u+=Math.abs(T)),k<0&&(a=0,t+=Math.abs(k)),ae.translate(-B.scale*M,-$.scale*a),de.transform(B.scale,0,0,$.scale,0,0),ae.save(),this.clipBbox(de,M,a,u,t),de.baseTransform=de.ctx.mozCurrentTransform.slice(),de.executeOperatorList(P),de.endDrawing(),{canvas:J.canvas,scaleX:B.scale,scaleY:$.scale,offsetX:M,offsetY:a}}getSizeAndScale(c,P,f){c=Math.abs(c);const p=Math.max(s.MAX_PATTERN_SIZE,P);let e=Math.ceil(c*f);return e>=p?e=p:f=e/c,{scale:f,size:e}}clipBbox(c,P,f,p,e){c.ctx.rect(P,f,p-P,e-f),c.current.updateRectMinMax(c.ctx.mozCurrentTransform,[P,f,p,e]),c.clip(),c.endPath()}setFillAndStrokeStyleToContext(c,P,f){const p=c.ctx,e=c.current;switch(P){case 1:const i=this.ctx;p.fillStyle=i.fillStyle,p.strokeStyle=i.strokeStyle,e.fillColor=i.fillStyle,e.strokeColor=i.strokeStyle;break;case 2:const _=g.Util.makeHexColor(f[0],f[1],f[2]);p.fillStyle=_,p.strokeStyle=_,e.fillColor=_,e.strokeColor=_;break;default:throw new g.FormatError(`Unsupported paint type: ${P}`)}}getPattern(c,P,f,p){let e=f;p!==re.SHADING&&(e=g.Util.transform(e,P.baseTransform),this.matrix&&(e=g.Util.transform(e,this.matrix)));const i=this.createPatternCanvas(P);let _=new DOMMatrix(e);_=_.translate(i.offsetX,i.offsetY),_=_.scale(1/i.scaleX,1/i.scaleY);const m=c.createPattern(i.canvas,"repeat");try{m.setTransform(_)}catch(y){(0,g.warn)(`TilingPattern.getPattern: "${null==y?void 0:y.message}".`)}return m}}L.TilingPattern=s},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.applyMaskImageData=function _e({src:re,srcPos:ne=0,dest:ee,destPos:D=0,width:d,height:x,inverseDecode:b=!1}){const r=g.FeatureTest.isLittleEndian?4278190080:255,[C,o]=b?[0,r]:[r,0],s=d>>3,n=7&d,c=re.length;ee=new Uint32Array(ee.buffer);for(let P=0;P<x;P++){for(const p=ne+s;ne<p;ne++){const e=ne<c?re[ne]:255;ee[D++]=128&e?o:C,ee[D++]=64&e?o:C,ee[D++]=32&e?o:C,ee[D++]=16&e?o:C,ee[D++]=8&e?o:C,ee[D++]=4&e?o:C,ee[D++]=2&e?o:C,ee[D++]=1&e?o:C}if(0===n)continue;const f=ne<c?re[ne++]:255;for(let p=0;p<n;p++)ee[D++]=f&1<<7-p?o:C}return{srcPos:ne,destPos:D}};var g=K(1)},(be,L)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.GlobalWorkerOptions=void 0;const K=Object.create(null);L.GlobalWorkerOptions=K,K.workerPort=void 0===K.workerPort?null:K.workerPort,K.workerSrc=void 0===K.workerSrc?"":K.workerSrc},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.MessageHandler=void 0;var g=K(1);function ne(D){switch(D instanceof Error||"object"==typeof D&&null!==D||(0,g.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),D.name){case"AbortException":return new g.AbortException(D.message);case"MissingPDFException":return new g.MissingPDFException(D.message);case"PasswordException":return new g.PasswordException(D.message,D.code);case"UnexpectedResponseException":return new g.UnexpectedResponseException(D.message,D.status);case"UnknownErrorException":return new g.UnknownErrorException(D.message,D.details);default:return new g.UnknownErrorException(D.message,D.toString())}}L.MessageHandler=class ee{constructor(d,x,b){this.sourceName=d,this.targetName=x,this.comObj=b,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=r=>{const C=r.data;if(C.targetName!==this.sourceName)return;if(C.stream)return void this._processStreamMessage(C);if(C.callback){const s=C.callbackId,n=this.callbackCapabilities[s];if(!n)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],1===C.callback)n.resolve(C.data);else{if(2!==C.callback)throw new Error("Unexpected callback case");n.reject(ne(C.reason))}return}const o=this.actionHandler[C.action];if(!o)throw new Error(`Unknown action from worker: ${C.action}`);if(C.callbackId){const s=this.sourceName,n=C.sourceName;new Promise(function(c){c(o(C.data))}).then(function(c){b.postMessage({sourceName:s,targetName:n,callback:1,callbackId:C.callbackId,data:c})},function(c){b.postMessage({sourceName:s,targetName:n,callback:2,callbackId:C.callbackId,reason:ne(c)})})}else C.streamId?this._createStreamSink(C):o(C.data)},b.addEventListener("message",this._onComObjOnMessage)}on(d,x){const b=this.actionHandler;if(b[d])throw new Error(`There is already an actionName called "${d}"`);b[d]=x}send(d,x,b){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,data:x},b)}sendWithPromise(d,x,b){const r=this.callbackId++,C=(0,g.createPromiseCapability)();this.callbackCapabilities[r]=C;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:d,callbackId:r,data:x},b)}catch(o){C.reject(o)}return C.promise}sendWithStream(d,x,b,r){const C=this.streamId++,o=this.sourceName,s=this.targetName,n=this.comObj;return new ReadableStream({start:c=>{const P=(0,g.createPromiseCapability)();return this.streamControllers[C]={controller:c,startCall:P,pullCall:null,cancelCall:null,isClosed:!1},n.postMessage({sourceName:o,targetName:s,action:d,streamId:C,data:x,desiredSize:c.desiredSize},r),P.promise},pull:c=>{const P=(0,g.createPromiseCapability)();return this.streamControllers[C].pullCall=P,n.postMessage({sourceName:o,targetName:s,stream:6,streamId:C,desiredSize:c.desiredSize}),P.promise},cancel:c=>{(0,g.assert)(c instanceof Error,"cancel must have a valid reason");const P=(0,g.createPromiseCapability)();return this.streamControllers[C].cancelCall=P,this.streamControllers[C].isClosed=!0,n.postMessage({sourceName:o,targetName:s,stream:1,streamId:C,reason:ne(c)}),P.promise}},b)}_createStreamSink(d){const x=d.streamId,b=this.sourceName,r=d.sourceName,C=this.comObj,o=this,s=this.actionHandler[d.action],n={enqueue(c,P=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=P,p>0&&this.desiredSize<=0&&(this.sinkCapability=(0,g.createPromiseCapability)(),this.ready=this.sinkCapability.promise),C.postMessage({sourceName:b,targetName:r,stream:4,streamId:x,chunk:c},f)},close(){this.isCancelled||(this.isCancelled=!0,C.postMessage({sourceName:b,targetName:r,stream:3,streamId:x}),delete o.streamSinks[x])},error(c){(0,g.assert)(c instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,C.postMessage({sourceName:b,targetName:r,stream:5,streamId:x,reason:ne(c)}))},sinkCapability:(0,g.createPromiseCapability)(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:d.desiredSize,ready:null};n.sinkCapability.resolve(),n.ready=n.sinkCapability.promise,this.streamSinks[x]=n,new Promise(function(c){c(s(d.data,n))}).then(function(){C.postMessage({sourceName:b,targetName:r,stream:8,streamId:x,success:!0})},function(c){C.postMessage({sourceName:b,targetName:r,stream:8,streamId:x,reason:ne(c)})})}_processStreamMessage(d){const x=d.streamId,b=this.sourceName,r=d.sourceName,C=this.comObj,o=this.streamControllers[x],s=this.streamSinks[x];switch(d.stream){case 8:d.success?o.startCall.resolve():o.startCall.reject(ne(d.reason));break;case 7:d.success?o.pullCall.resolve():o.pullCall.reject(ne(d.reason));break;case 6:if(!s){C.postMessage({sourceName:b,targetName:r,stream:7,streamId:x,success:!0});break}s.desiredSize<=0&&d.desiredSize>0&&s.sinkCapability.resolve(),s.desiredSize=d.desiredSize,new Promise(function(n){n(s.onPull&&s.onPull())}).then(function(){C.postMessage({sourceName:b,targetName:r,stream:7,streamId:x,success:!0})},function(n){C.postMessage({sourceName:b,targetName:r,stream:7,streamId:x,reason:ne(n)})});break;case 4:if((0,g.assert)(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(d.chunk);break;case 3:if((0,g.assert)(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),this._deleteStreamController(o,x);break;case 5:(0,g.assert)(o,"error should have stream controller"),o.controller.error(ne(d.reason)),this._deleteStreamController(o,x);break;case 2:d.success?o.cancelCall.resolve():o.cancelCall.reject(ne(d.reason)),this._deleteStreamController(o,x);break;case 1:if(!s)break;new Promise(function(n){n(s.onCancel&&s.onCancel(ne(d.reason)))}).then(function(){C.postMessage({sourceName:b,targetName:r,stream:2,streamId:x,success:!0})},function(n){C.postMessage({sourceName:b,targetName:r,stream:2,streamId:x,reason:ne(n)})}),s.sinkCapability.reject(ne(d.reason)),s.isCancelled=!0,delete this.streamSinks[x];break;default:throw new Error("Unexpected stream case")}}_deleteStreamController(d,x){var b=this;return _asyncToGenerator(function*(){yield Promise.allSettled([d.startCall&&d.startCall.promise,d.pullCall&&d.pullCall.promise,d.cancelCall&&d.cancelCall.promise]),delete b.streamControllers[x]})()}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}},(be,L,K)=>{var re,ne;Object.defineProperty(L,"__esModule",{value:!0}),L.Metadata=void 0;var g=K(1);re=new WeakMap,ne=new WeakMap,L.Metadata=class _e{constructor({parsedData:D,rawData:d}){Ee(this,re,void 0),Ee(this,ne,void 0),Fe(this,re,D),Fe(this,ne,d)}getRaw(){return Ce(this,ne)}get(D){var d;return null!=(d=Ce(this,re).get(D))?d:null}getAll(){return(0,g.objectFromMap)(Ce(this,re))}has(D){return Ce(this,re).has(D)}}},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.OptionalContentConfig=void 0;var g=K(1);class _e{constructor(ee,D){this.visible=!0,this.name=ee,this.intent=D}}L.OptionalContentConfig=class re{constructor(ee){if(this.name=null,this.creator=null,this._order=null,this._groups=new Map,null!==ee){this.name=ee.name,this.creator=ee.creator,this._order=ee.order;for(const D of ee.groups)this._groups.set(D.id,new _e(D.name,D.intent));if("OFF"===ee.baseState)for(const D of this._groups)D.visible=!1;for(const D of ee.on)this._groups.get(D).visible=!0;for(const D of ee.off)this._groups.get(D).visible=!1}}_evaluateVisibilityExpression(ee){const D=ee.length;if(D<2)return!0;const d=ee[0];for(let x=1;x<D;x++){const b=ee[x];let r;if(Array.isArray(b))r=this._evaluateVisibilityExpression(b);else{if(!this._groups.has(b))return(0,g.warn)(`Optional content group not found: ${b}`),!0;r=this._groups.get(b).visible}switch(d){case"And":if(!r)return!1;break;case"Or":if(r)return!0;break;case"Not":return!r;default:return!0}}return"And"===d}isVisible(ee){if(0===this._groups.size)return!0;if(!ee)return(0,g.warn)("Optional content group not defined."),!0;if("OCG"===ee.type)return this._groups.has(ee.id)?this._groups.get(ee.id).visible:((0,g.warn)(`Optional content group not found: ${ee.id}`),!0);if("OCMD"===ee.type){if(ee.expression)return this._evaluateVisibilityExpression(ee.expression);if(!ee.policy||"AnyOn"===ee.policy){for(const D of ee.ids){if(!this._groups.has(D))return(0,g.warn)(`Optional content group not found: ${D}`),!0;if(this._groups.get(D).visible)return!0}return!1}if("AllOn"===ee.policy){for(const D of ee.ids){if(!this._groups.has(D))return(0,g.warn)(`Optional content group not found: ${D}`),!0;if(!this._groups.get(D).visible)return!1}return!0}if("AnyOff"===ee.policy){for(const D of ee.ids){if(!this._groups.has(D))return(0,g.warn)(`Optional content group not found: ${D}`),!0;if(!this._groups.get(D).visible)return!0}return!1}if("AllOff"===ee.policy){for(const D of ee.ids){if(!this._groups.has(D))return(0,g.warn)(`Optional content group not found: ${D}`),!0;if(this._groups.get(D).visible)return!1}return!0}return(0,g.warn)(`Unknown optional content policy ${ee.policy}.`),!0}return(0,g.warn)(`Unknown group type ${ee.type}.`),!0}setVisibility(ee,D=!0){this._groups.has(ee)?this._groups.get(ee).visible=!!D:(0,g.warn)(`Optional content group not found: ${ee}`)}getOrder(){return this._groups.size?this._order?this._order.slice():Array.from(this._groups.keys()):null}getGroups(){return this._groups.size>0?(0,g.objectFromMap)(this._groups):null}getGroup(ee){return this._groups.get(ee)||null}}},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.PDFDataTransportStream=void 0;var g=K(1),_e=K(5);L.PDFDataTransportStream=class re{constructor(d,x){(0,g.assert)(x,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=d.progressiveDone||!1,this._contentDispositionFilename=d.contentDispositionFilename||null;const b=d.initialData;if((null==b?void 0:b.length)>0){const r=new Uint8Array(b).buffer;this._queuedChunks.push(r)}this._pdfDataRangeTransport=x,this._isStreamingSupported=!d.disableStream,this._isRangeSupported=!d.disableRange,this._contentLength=d.length,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((r,C)=>{this._onReceiveData({begin:r,chunk:C})}),this._pdfDataRangeTransport.addProgressListener((r,C)=>{this._onProgress({loaded:r,total:C})}),this._pdfDataRangeTransport.addProgressiveReadListener(r=>{this._onReceiveData({chunk:r})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData(d){const x=new Uint8Array(d.chunk).buffer;if(void 0===d.begin)this._fullRequestReader?this._fullRequestReader._enqueue(x):this._queuedChunks.push(x);else{const b=this._rangeReaders.some(function(r){return r._begin===d.begin&&(r._enqueue(x),!0)});(0,g.assert)(b,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var d,x;return null!=(x=null==(d=this._fullRequestReader)?void 0:d._loaded)?x:0}_onProgress(d){if(void 0===d.total){const x=this._rangeReaders[0];(null==x?void 0:x.onProgress)&&x.onProgress({loaded:d.loaded})}else{const x=this._fullRequestReader;(null==x?void 0:x.onProgress)&&x.onProgress({loaded:d.loaded,total:d.total})}}_onProgressiveDone(){this._fullRequestReader&&this._fullRequestReader.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(d){const x=this._rangeReaders.indexOf(d);x>=0&&this._rangeReaders.splice(x,1)}getFullReader(){(0,g.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const d=this._queuedChunks;return this._queuedChunks=null,new ne(this,d,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(d,x){if(x<=this._progressiveDataLength)return null;const b=new ee(this,d,x);return this._pdfDataRangeTransport.requestDataRange(d,x),this._rangeReaders.push(b),b}cancelAllRequests(d){this._fullRequestReader&&this._fullRequestReader.cancel(d);for(const x of this._rangeReaders.slice(0))x.cancel(d);this._pdfDataRangeTransport.abort()}};class ne{constructor(d,x,b=!1,r=null){this._stream=d,this._done=b||!1,this._filename=(0,_e.isPdfFile)(r)?r:null,this._queuedChunks=x||[],this._loaded=0;for(const C of this._queuedChunks)this._loaded+=C.byteLength;this._requests=[],this._headersReady=Promise.resolve(),d._fullRequestReader=this,this.onProgress=null}_enqueue(d){this._done||(this._requests.length>0?this._requests.shift().resolve({value:d,done:!1}):this._queuedChunks.push(d),this._loaded+=d.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}read(){var d=this;return _asyncToGenerator(function*(){if(d._queuedChunks.length>0)return{value:d._queuedChunks.shift(),done:!1};if(d._done)return{value:void 0,done:!0};const x=(0,g.createPromiseCapability)();return d._requests.push(x),x.promise})()}cancel(d){this._done=!0;for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ee{constructor(d,x,b){this._stream=d,this._begin=x,this._end=b,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(d){if(!this._done){if(0===this._requests.length)this._queuedChunk=d;else{this._requests.shift().resolve({value:d,done:!1});for(const b of this._requests)b.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}read(){var d=this;return _asyncToGenerator(function*(){if(d._queuedChunk){const b=d._queuedChunk;return d._queuedChunk=null,{value:b,done:!1}}if(d._done)return{value:void 0,done:!0};const x=(0,g.createPromiseCapability)();return d._requests.push(x),x.promise})()}cancel(d){this._done=!0;for(const x of this._requests)x.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(be,L)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.XfaText=void 0;class K{static textContent(_e){const re=[],ne={items:re,styles:Object.create(null)};return function ee(D){var b;if(!D)return;let d=null;const x=D.name;if("#text"===x)d=D.value;else{if(!K.shouldBuildText(x))return;(null==(b=null==D?void 0:D.attributes)?void 0:b.textContent)?d=D.attributes.textContent:D.value&&(d=D.value)}if(null!==d&&re.push({str:d}),D.children)for(const r of D.children)ee(r)}(_e),ne}static shouldBuildText(_e){return!("textarea"===_e||"input"===_e||"option"===_e||"select"===_e)}}L.XfaText=K},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.NodeStandardFontDataFactory=L.NodeCanvasFactory=L.NodeCMapReaderFactory=void 0;var g=K(6);const _e=function(D){return new Promise((d,x)=>{__webpack_require__(172).readFile(D,(r,C)=>{!r&&C?d(new Uint8Array(C)):x(new Error(r))})})};L.NodeCanvasFactory=class re extends g.BaseCanvasFactory{_createCanvas(d,x){return __webpack_require__(3414).createCanvas(d,x)}},L.NodeCMapReaderFactory=class ne extends g.BaseCMapReaderFactory{_fetchData(d,x){return _e(d).then(b=>({cMapData:b,compressionType:x}))}},L.NodeStandardFontDataFactory=class ee extends g.BaseStandardFontDataFactory{_fetchData(d){return _e(d)}}},(be,L,K)=>{var M,it;Object.defineProperty(L,"__esModule",{value:!0}),L.AnnotationLayer=void 0;var g=K(1),_e=K(5),re=K(8),ne=K(21),ee=K(22);const D=1e3,d=new WeakSet;function x(u){return{width:u[2]-u[0],height:u[3]-u[1]}}class b{static create(t){switch(t.data.annotationType){case g.AnnotationType.LINK:return new C(t);case g.AnnotationType.TEXT:return new o(t);case g.AnnotationType.WIDGET:switch(t.data.fieldType){case"Tx":return new n(t);case"Btn":return t.data.radioButton?new P(t):t.data.checkBox?new c(t):new f(t);case"Ch":return new p(t)}return new s(t);case g.AnnotationType.POPUP:return new e(t);case g.AnnotationType.FREETEXT:return new _(t);case g.AnnotationType.LINE:return new m(t);case g.AnnotationType.SQUARE:return new y(t);case g.AnnotationType.CIRCLE:return new T(t);case g.AnnotationType.POLYLINE:return new k(t);case g.AnnotationType.CARET:return new V(t);case g.AnnotationType.INK:return new G(t);case g.AnnotationType.POLYGON:return new O(t);case g.AnnotationType.HIGHLIGHT:return new X(t);case g.AnnotationType.UNDERLINE:return new Q(t);case g.AnnotationType.SQUIGGLY:return new B(t);case g.AnnotationType.STRIKEOUT:return new $(t);case g.AnnotationType.STAMP:return new J(t);case g.AnnotationType.FILEATTACHMENT:return new ae(t);default:return new r(t)}}}class r{constructor(t,{isRenderable:l=!1,ignoreBorder:h=!1,createQuadrilaterals:S=!1}={}){this.isRenderable=l,this.data=t.data,this.layer=t.layer,this.page=t.page,this.viewport=t.viewport,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this._mouseState=t.mouseState,l&&(this.container=this._createContainer(h)),S&&(this.quadrilaterals=this._createQuadrilaterals(h))}_createContainer(t=!1){const l=this.data,h=this.page,S=this.viewport,A=document.createElement("section");let{width:E,height:j}=x(l.rect);A.setAttribute("data-annotation-id",l.id);const U=g.Util.normalizeRect([l.rect[0],h.view[3]-l.rect[1]+h.view[1],l.rect[2],h.view[3]-l.rect[3]+h.view[1]]);if(l.hasOwnCanvas){const H=S.transform.slice(),[z,Y]=g.Util.singularValueDecompose2dScale(H);E=Math.ceil(E*z),j=Math.ceil(j*Y),U[0]*=z,U[1]*=Y;for(let Z=0;Z<4;Z++)H[Z]=Math.sign(H[Z]);A.style.transform=`matrix(${H.join(",")})`}else A.style.transform=`matrix(${S.transform.join(",")})`;if(A.style.transformOrigin=`${-U[0]}px ${-U[1]}px`,!t&&l.borderStyle.width>0){A.style.borderWidth=`${l.borderStyle.width}px`,l.borderStyle.style!==g.AnnotationBorderStyleType.UNDERLINE&&(E-=2*l.borderStyle.width,j-=2*l.borderStyle.width);const H=l.borderStyle.horizontalCornerRadius,z=l.borderStyle.verticalCornerRadius;switch((H>0||z>0)&&(A.style.borderRadius=`${H}px / ${z}px`),l.borderStyle.style){case g.AnnotationBorderStyleType.SOLID:A.style.borderStyle="solid";break;case g.AnnotationBorderStyleType.DASHED:A.style.borderStyle="dashed";break;case g.AnnotationBorderStyleType.BEVELED:(0,g.warn)("Unimplemented border style: beveled");break;case g.AnnotationBorderStyleType.INSET:(0,g.warn)("Unimplemented border style: inset");break;case g.AnnotationBorderStyleType.UNDERLINE:A.style.borderBottomStyle="solid"}l.borderColor||l.color?A.style.borderColor=g.Util.makeHexColor(0|l.color[0],0|l.color[1],0|l.color[2]):A.style.borderWidth=0}return A.style.left=`${U[0]}px`,A.style.top=`${U[1]}px`,l.hasOwnCanvas?A.style.width=A.style.height="auto":(A.style.width=`${E}px`,A.style.height=`${j}px`),A}get _commonActions(){const t=(l,h,S)=>{const A=S.detail[l];S.target.style[h]=ne.ColorConverters[`${A[0]}_HTML`](A.slice(1))};return(0,g.shadow)(this,"_commonActions",{display:l=>{const h=l.detail.display%2==1;l.target.style.visibility=h?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:h,print:0===l.detail.display||3===l.detail.display})},print:l=>{this.annotationStorage.setValue(this.data.id,{print:l.detail.print})},hidden:l=>{l.target.style.visibility=l.detail.hidden?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{hidden:l.detail.hidden})},focus:l=>{setTimeout(()=>l.target.focus({preventScroll:!1}),0)},userName:l=>{l.target.title=l.detail.userName},readonly:l=>{l.detail.readonly?l.target.setAttribute("readonly",""):l.target.removeAttribute("readonly")},required:l=>{l.detail.required?l.target.setAttribute("required",""):l.target.removeAttribute("required")},bgColor:l=>{t("bgColor","backgroundColor",l)},fillColor:l=>{t("fillColor","backgroundColor",l)},fgColor:l=>{t("fgColor","color",l)},textColor:l=>{t("textColor","color",l)},borderColor:l=>{t("borderColor","borderColor",l)},strokeColor:l=>{t("strokeColor","borderColor",l)}})}_dispatchEventFromSandbox(t,l){const h=this._commonActions;for(const S of Object.keys(l.detail)){const A=t[S]||h[S];A&&A(l)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const l=this.annotationStorage.getRawValue(this.data.id);if(!l)return;const h=this._commonActions;for(const[S,A]of Object.entries(l)){const E=h[S];E&&(E({detail:A,target:t}),delete l[S])}}_createQuadrilaterals(t=!1){if(!this.data.quadPoints)return null;const l=[],h=this.data.rect;for(const S of this.data.quadPoints)this.data.rect=[S[2].x,S[2].y,S[1].x,S[1].y],l.push(this._createContainer(t));return this.data.rect=h,l}_createPopup(t,l){let h=this.container;this.quadrilaterals&&(t=t||this.quadrilaterals,h=this.quadrilaterals[0]),t||((t=document.createElement("div")).style.height=h.style.height,t.style.width=h.style.width,h.appendChild(t));const A=new i({container:h,trigger:t,color:l.color,titleObj:l.titleObj,modificationDate:l.modificationDate,contentsObj:l.contentsObj,richText:l.richText,hideWrapper:!0}).render();A.style.left=h.style.width,h.appendChild(A)}_renderQuadrilaterals(t){for(const l of this.quadrilaterals)l.className=t;return this.quadrilaterals}render(){(0,g.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,l=null){const h=[];if(this._fieldObjects){const S=this._fieldObjects[t];if(S)for(const{page:A,id:E,exportValues:j}of S){if(-1===A||E===l)continue;const U="string"==typeof j?j:null,H=document.getElementById(E);!H||d.has(H)?h.push({id:E,exportValue:U,domElement:H}):(0,g.warn)(`_getElementsByName - element not allowed: ${E}`)}return h}for(const S of document.getElementsByName(t)){const{id:A,exportValue:E}=S;A!==l&&(!d.has(S)||h.push({id:A,exportValue:E,domElement:S}))}return h}static get platform(){const t="undefined"!=typeof navigator?navigator.platform:"";return(0,g.shadow)(this,"platform",{isWin:t.includes("Win"),isMac:t.includes("Mac")})}}class C extends r{constructor(t,l=null){super(t,{isRenderable:!!(t.data.url||t.data.dest||t.data.action||t.data.isTooltipOnly||t.data.resetForm||t.data.actions&&(t.data.actions.Action||t.data.actions["Mouse Up"]||t.data.actions["Mouse Down"])),ignoreBorder:!!(null==l?void 0:l.ignoreBorder),createQuadrilaterals:!0})}render(){const{data:t,linkService:l}=this,h=document.createElement("a");if(t.url)l.addLinkAttributes(h,t.url,t.newWindow);else if(t.action)this._bindNamedAction(h,t.action);else if(t.dest)this._bindLink(h,t.dest);else{let S=!1;t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(S=!0,this._bindJSAction(h,t)),t.resetForm?this._bindResetFormAction(h,t.resetForm):S||this._bindLink(h,"")}return this.quadrilaterals?this._renderQuadrilaterals("linkAnnotation").map((S,A)=>{const E=0===A?h:h.cloneNode();return S.appendChild(E),S}):(this.container.className="linkAnnotation",this.container.appendChild(h),this.container)}_bindLink(t,l){t.href=this.linkService.getDestinationHash(l),t.onclick=()=>(l&&this.linkService.goToDestination(l),!1),(l||""===l)&&(t.className="internalLink")}_bindNamedAction(t,l){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(l),!1),t.className="internalLink"}_bindJSAction(t,l){t.href=this.linkService.getAnchorUrl("");const h=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const S of Object.keys(l.actions)){const A=h.get(S);!A||(t[A]=()=>{var E;return null==(E=this.linkService.eventBus)||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l.id,name:S}}),!1})}t.onclick||(t.onclick=()=>!1),t.className="internalLink"}_bindResetFormAction(t,l){const h=t.onclick;if(h||(t.href=this.linkService.getAnchorUrl("")),t.className="internalLink",!this._fieldObjects)return(0,g.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(h||(t.onclick=()=>!1));t.onclick=()=>{var z;h&&h();const{fields:S,refs:A,include:E}=l,j=[];if(0!==S.length||0!==A.length){const Y=new Set(A);for(const Z of S){const ue=this._fieldObjects[Z]||[];for(const{id:ye}of ue)Y.add(ye)}for(const Z of Object.values(this._fieldObjects))for(const ue of Z)Y.has(ue.id)===E&&j.push(ue)}else for(const Y of Object.values(this._fieldObjects))j.push(...Y);const U=this.annotationStorage,H=[];for(const Y of j){const{id:Z}=Y;switch(H.push(Z),Y.type){case"text":case"combobox":case"listbox":U.setValue(Z,{value:Y.defaultValue||""});break;case"checkbox":case"radiobutton":U.setValue(Z,{value:Y.defaultValue===Y.exportValues});break;default:continue}const ue=document.getElementById(Z);!ue||!d.has(ue)||ue.dispatchEvent(new Event("resetform"))}return this.enableScripting&&(null==(z=this.linkService.eventBus)||z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:H,name:"ResetForm"}})),!1}}}class o extends r{constructor(t){var h,S,A;super(t,{isRenderable:!!(t.data.hasPopup||(null==(h=t.data.titleObj)?void 0:h.str)||(null==(S=t.data.contentsObj)?void 0:S.str)||(null==(A=t.data.richText)?void 0:A.str))})}render(){this.container.className="textAnnotation";const t=document.createElement("img");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.alt="[{{type}} Annotation]",t.dataset.l10nId="text_annotation_type",t.dataset.l10nArgs=JSON.stringify({type:this.data.name}),this.data.hasPopup||this._createPopup(t,this.data),this.container.appendChild(t),this.container}}class s extends r{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}_getKeyModifier(t){const{isWin:l,isMac:h}=r.platform;return l&&t.ctrlKey||h&&t.metaKey}_setEventListener(t,l,h,S){l.includes("mouse")?t.addEventListener(l,A=>{var E;null==(E=this.linkService.eventBus)||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:h,value:S(A),shift:A.shiftKey,modifier:this._getKeyModifier(A)}})}):t.addEventListener(l,A=>{var E;null==(E=this.linkService.eventBus)||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:h,value:S(A)}})})}_setEventListeners(t,l,h){var S;for(const[A,E]of l)("Action"===E||(null==(S=this.data.actions)?void 0:S[E]))&&this._setEventListener(t,A,E,h)}_setBackgroundColor(t){const l=this.data.backgroundColor||null;t.style.backgroundColor=null===l?"transparent":g.Util.makeHexColor(l[0],l[1],l[2])}}class n extends s{constructor(t){super(t,{isRenderable:t.renderForms||!t.data.hasAppearance&&!!t.data.fieldValue})}setPropertyOnSiblings(t,l,h,S){const A=this.annotationStorage;for(const E of this._getElementsByName(t.name,t.id))E.domElement&&(E.domElement[l]=h),A.setValue(E.id,{[S]:h})}render(){var S;const t=this.annotationStorage,l=this.data.id;this.container.className="textWidgetAnnotation";let h=null;if(this.renderForms){const A=t.getValue(l,{value:this.data.fieldValue}),E=A.formattedValue||A.value||"",j={userValue:null,formattedValue:null,valueOnFocus:""};this.data.multiLine?(h=document.createElement("textarea"),h.textContent=E):(h=document.createElement("input"),h.type="text",h.setAttribute("value",E)),d.add(h),h.disabled=this.data.readOnly,h.name=this.data.fieldName,h.tabIndex=D,j.userValue=E,h.setAttribute("id",l),h.addEventListener("input",H=>{t.setValue(l,{value:H.target.value}),this.setPropertyOnSiblings(h,"value",H.target.value,"value")}),h.addEventListener("resetform",H=>{var Y;const z=null!=(Y=this.data.defaultFieldValue)?Y:"";h.value=j.userValue=z,j.formattedValue=null});let U=H=>{const{formattedValue:z}=j;null!=z&&(H.target.value=z),H.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){h.addEventListener("focus",z=>{j.userValue&&(z.target.value=j.userValue),j.valueOnFocus=z.target.value}),h.addEventListener("updatefromsandbox",z=>{this._dispatchEventFromSandbox({value(Z){var ue;j.userValue=null!=(ue=Z.detail.value)?ue:"",t.setValue(l,{value:j.userValue.toString()}),Z.target.value=j.userValue},formattedValue(Z){const{formattedValue:ue}=Z.detail;j.formattedValue=ue,null!=ue&&Z.target!==document.activeElement&&(Z.target.value=ue),t.setValue(l,{formattedValue:ue})},selRange(Z){Z.target.setSelectionRange(...Z.detail.selRange)}},z)}),h.addEventListener("keydown",z=>{var ue;let Y=-1;if("Escape"===z.key?Y=0:"Enter"===z.key?Y=2:"Tab"===z.key&&(Y=3),-1===Y)return;const{value:Z}=z.target;j.valueOnFocus!==Z&&(j.userValue=Z,null==(ue=this.linkService.eventBus)||ue.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:Z,willCommit:!0,commitKey:Y,selStart:z.target.selectionStart,selEnd:z.target.selectionEnd}}))});const H=U;U=null,h.addEventListener("blur",z=>{var Z;const{value:Y}=z.target;j.userValue=Y,this._mouseState.isDown&&j.valueOnFocus!==Y&&(null==(Z=this.linkService.eventBus)||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:Y,willCommit:!0,commitKey:1,selStart:z.target.selectionStart,selEnd:z.target.selectionEnd}})),H(z)}),(null==(S=this.data.actions)?void 0:S.Keystroke)&&h.addEventListener("beforeinput",z=>{var w;const{data:Y,target:Z}=z,{value:ue,selectionStart:ye,selectionEnd:te}=Z;let ce=ye,oe=te;switch(z.inputType){case"deleteWordBackward":{const I=ue.substring(0,ye).match(/\w*[^\w]*$/);I&&(ce-=I[0].length);break}case"deleteWordForward":{const I=ue.substring(ye).match(/^[^\w]*\w*/);I&&(oe+=I[0].length);break}case"deleteContentBackward":ye===te&&(ce-=1);break;case"deleteContentForward":ye===te&&(oe+=1)}z.preventDefault(),null==(w=this.linkService.eventBus)||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:ue,change:Y||"",willCommit:!1,selStart:ce,selEnd:oe}})}),this._setEventListeners(h,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],z=>z.target.value)}if(U&&h.addEventListener("blur",U),null!==this.data.maxLen&&(h.maxLength=this.data.maxLen),this.data.comb){const z=(this.data.rect[2]-this.data.rect[0])/this.data.maxLen;h.classList.add("comb"),h.style.letterSpacing=`calc(${z}px - 1ch)`}}else h=document.createElement("div"),h.textContent=this.data.fieldValue,h.style.verticalAlign="middle",h.style.display="table-cell";return this._setTextStyle(h),this._setBackgroundColor(h),this._setDefaultPropertiesFromJS(h),this.container.appendChild(h),this.container}_setTextStyle(t){const{fontSize:h,fontColor:S}=this.data.defaultAppearanceData,A=t.style;h&&(A.fontSize=`${h}px`),A.color=g.Util.makeHexColor(S[0],S[1],S[2]),null!==this.data.textAlignment&&(A.textAlign=["left","center","right"][this.data.textAlignment])}}class c extends s{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,l=this.data,h=l.id;let S=t.getValue(h,{value:l.exportValue===l.fieldValue}).value;"string"==typeof S&&(S="Off"!==S,t.setValue(h,{value:S})),this.container.className="buttonWidgetAnnotation checkBox";const A=document.createElement("input");return d.add(A),A.disabled=l.readOnly,A.type="checkbox",A.name=l.fieldName,S&&A.setAttribute("checked",!0),A.setAttribute("id",h),A.setAttribute("exportValue",l.exportValue),A.tabIndex=D,A.addEventListener("change",E=>{const{name:j,checked:U}=E.target;for(const H of this._getElementsByName(j,h)){const z=U&&H.exportValue===l.exportValue;H.domElement&&(H.domElement.checked=z),t.setValue(H.id,{value:z})}t.setValue(h,{value:U})}),A.addEventListener("resetform",E=>{E.target.checked=(l.defaultFieldValue||"Off")===l.exportValue}),this.enableScripting&&this.hasJSActions&&(A.addEventListener("updatefromsandbox",E=>{this._dispatchEventFromSandbox({value(U){U.target.checked="Off"!==U.detail.value,t.setValue(h,{value:U.target.checked})}},E)}),this._setEventListeners(A,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],E=>E.target.checked)),this._setBackgroundColor(A),this._setDefaultPropertiesFromJS(A),this.container.appendChild(A),this.container}}class P extends s{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="buttonWidgetAnnotation radioButton";const t=this.annotationStorage,l=this.data,h=l.id;let S=t.getValue(h,{value:l.fieldValue===l.buttonValue}).value;"string"==typeof S&&(S=S!==l.buttonValue,t.setValue(h,{value:S}));const A=document.createElement("input");if(d.add(A),A.disabled=l.readOnly,A.type="radio",A.name=l.fieldName,S&&A.setAttribute("checked",!0),A.setAttribute("id",h),A.tabIndex=D,A.addEventListener("change",E=>{const{name:j,checked:U}=E.target;for(const H of this._getElementsByName(j,h))t.setValue(H.id,{value:!1});t.setValue(h,{value:U})}),A.addEventListener("resetform",E=>{const j=l.defaultFieldValue;E.target.checked=null!=j&&j===l.buttonValue}),this.enableScripting&&this.hasJSActions){const E=l.buttonValue;A.addEventListener("updatefromsandbox",j=>{this._dispatchEventFromSandbox({value:H=>{const z=E===H.detail.value;for(const Y of this._getElementsByName(H.target.name)){const Z=z&&Y.id===h;Y.domElement&&(Y.domElement.checked=Z),t.setValue(Y.id,{value:Z})}}},j)}),this._setEventListeners(A,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],j=>j.target.checked)}return this._setBackgroundColor(A),this._setDefaultPropertiesFromJS(A),this.container.appendChild(A),this.container}}class f extends C{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();return t.className="buttonWidgetAnnotation pushButton",this.data.alternativeText&&(t.title=this.data.alternativeText),this._setDefaultPropertiesFromJS(t),t}}class p extends s{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.className="choiceWidgetAnnotation";const t=this.annotationStorage,l=this.data.id,h=t.getValue(l,{value:this.data.fieldValue});let{fontSize:S}=this.data.defaultAppearanceData;S||(S=9);const A=`calc(${S}px * var(--zoom-factor))`,E=document.createElement("select");d.add(E),E.disabled=this.data.readOnly,E.name=this.data.fieldName,E.setAttribute("id",l),E.tabIndex=D,E.style.fontSize=`${S}px`,this.data.combo||(E.size=this.data.options.length,this.data.multiSelect&&(E.multiple=!0)),E.addEventListener("resetform",H=>{const z=this.data.defaultFieldValue;for(const Y of E.options)Y.selected=Y.value===z});for(const H of this.data.options){const z=document.createElement("option");z.textContent=H.displayValue,z.value=H.exportValue,this.data.combo&&(z.style.fontSize=A),h.value.includes(H.exportValue)&&z.setAttribute("selected",!0),E.appendChild(z)}const j=(H,z)=>{const Y=z?"value":"textContent",Z=H.target.options;return H.target.multiple?Array.prototype.filter.call(Z,ue=>ue.selected).map(ue=>ue[Y]):-1===Z.selectedIndex?null:Z[Z.selectedIndex][Y]},U=H=>Array.prototype.map.call(H.target.options,Y=>({displayValue:Y.textContent,exportValue:Y.value}));return this.enableScripting&&this.hasJSActions?(E.addEventListener("updatefromsandbox",H=>{this._dispatchEventFromSandbox({value(Y){const Z=Y.detail.value,ue=new Set(Array.isArray(Z)?Z:[Z]);for(const ye of E.options)ye.selected=ue.has(ye.value);t.setValue(l,{value:j(Y,!0)})},multipleSelection(Y){E.multiple=!0},remove(Y){const Z=E.options,ue=Y.detail.remove;Z[ue].selected=!1,E.remove(ue),Z.length>0&&-1===Array.prototype.findIndex.call(Z,te=>te.selected)&&(Z[0].selected=!0),t.setValue(l,{value:j(Y,!0),items:U(Y)})},clear(Y){for(;0!==E.length;)E.remove(0);t.setValue(l,{value:null,items:[]})},insert(Y){const{index:Z,displayValue:ue,exportValue:ye}=Y.detail.insert,te=document.createElement("option");te.textContent=ue,te.value=ye,E.insertBefore(te,E.children[Z]),t.setValue(l,{value:j(Y,!0),items:U(Y)})},items(Y){const{items:Z}=Y.detail;for(;0!==E.length;)E.remove(0);for(const ue of Z){const{displayValue:ye,exportValue:te}=ue,ce=document.createElement("option");ce.textContent=ye,ce.value=te,E.appendChild(ce)}E.options.length>0&&(E.options[0].selected=!0),t.setValue(l,{value:j(Y,!0),items:U(Y)})},indices(Y){const Z=new Set(Y.detail.indices);for(const ue of Y.target.options)ue.selected=Z.has(ue.index);t.setValue(l,{value:j(Y,!0)})},editable(Y){Y.target.disabled=!Y.detail.editable}},H)}),E.addEventListener("input",H=>{var Z;const z=j(H,!0),Y=j(H,!1);t.setValue(l,{value:z}),null==(Z=this.linkService.eventBus)||Z.dispatch("dispatcheventinsandbox",{source:this,detail:{id:l,name:"Keystroke",value:Y,changeEx:z,willCommit:!0,commitKey:1,keyDown:!1}})}),this._setEventListeners(E,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"]],H=>H.target.checked)):E.addEventListener("input",function(H){t.setValue(l,{value:j(H,!0)})}),this._setBackgroundColor(E),this._setDefaultPropertiesFromJS(E),this.container.appendChild(E),this.container}}class e extends r{constructor(t){var h,S,A;super(t,{isRenderable:!!((null==(h=t.data.titleObj)?void 0:h.str)||(null==(S=t.data.contentsObj)?void 0:S.str)||(null==(A=t.data.richText)?void 0:A.str))})}render(){if(this.container.className="popupAnnotation",["Line","Square","Circle","PolyLine","Polygon","Ink"].includes(this.data.parentType))return this.container;const h=this.layer.querySelectorAll(`[data-annotation-id="${this.data.parentId}"]`);if(0===h.length)return this.container;const S=new i({container:this.container,trigger:Array.from(h),color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText}),A=this.page,E=g.Util.normalizeRect([this.data.parentRect[0],A.view[3]-this.data.parentRect[1]+A.view[1],this.data.parentRect[2],A.view[3]-this.data.parentRect[3]+A.view[1]]),j=E[0]+this.data.parentRect[2]-this.data.parentRect[0],U=E[1];return this.container.style.transformOrigin=`${-j}px ${-U}px`,this.container.style.left=`${j}px`,this.container.style.top=`${U}px`,this.container.appendChild(S.render()),this.container}}class i{constructor(t){this.container=t.container,this.trigger=t.trigger,this.color=t.color,this.titleObj=t.titleObj,this.modificationDate=t.modificationDate,this.contentsObj=t.contentsObj,this.richText=t.richText,this.hideWrapper=t.hideWrapper||!1,this.pinned=!1}render(){var j,U;const l=document.createElement("div");l.className="popupWrapper",this.hideElement=this.hideWrapper?l:this.container,this.hideElement.hidden=!0;const h=document.createElement("div");h.className="popup";const S=this.color;S&&(h.style.backgroundColor=g.Util.makeHexColor(0|.7*(255-S[0])+S[0],0|.7*(255-S[1])+S[1],0|.7*(255-S[2])+S[2]));const A=document.createElement("h1");A.dir=this.titleObj.dir,A.textContent=this.titleObj.str,h.appendChild(A);const E=_e.PDFDateString.toDateObject(this.modificationDate);if(E){const H=document.createElement("span");H.className="popupDate",H.textContent="{{date}}, {{time}}",H.dataset.l10nId="annotation_date_string",H.dataset.l10nArgs=JSON.stringify({date:E.toLocaleDateString(),time:E.toLocaleTimeString()}),h.appendChild(H)}if(!(null==(j=this.richText)?void 0:j.str)||(null==(U=this.contentsObj)?void 0:U.str)&&this.contentsObj.str!==this.richText.str){const H=this._formatContents(this.contentsObj);h.appendChild(H)}else ee.XfaLayer.render({xfaHtml:this.richText.html,intent:"richText",div:h}),h.lastChild.className="richText popupContent";Array.isArray(this.trigger)||(this.trigger=[this.trigger]);for(const H of this.trigger)H.addEventListener("click",this._toggle.bind(this)),H.addEventListener("mouseover",this._show.bind(this,!1)),H.addEventListener("mouseout",this._hide.bind(this,!1));return h.addEventListener("click",this._hide.bind(this,!0)),l.appendChild(h),l}_formatContents({str:t,dir:l}){const h=document.createElement("p");h.className="popupContent",h.dir=l;const S=t.split(/(?:\r\n?|\n)/);for(let A=0,E=S.length;A<E;++A)h.appendChild(document.createTextNode(S[A])),A<E-1&&h.appendChild(document.createElement("br"));return h}_toggle(){this.pinned?this._hide(!0):this._show(!0)}_show(t=!1){t&&(this.pinned=!0),this.hideElement.hidden&&(this.hideElement.hidden=!1,this.container.style.zIndex+=1)}_hide(t=!0){t&&(this.pinned=!1),!this.hideElement.hidden&&!this.pinned&&(this.hideElement.hidden=!0,this.container.style.zIndex-=1)}}class _ extends r{constructor(t){var h,S,A;super(t,{isRenderable:!!(t.data.hasPopup||(null==(h=t.data.titleObj)?void 0:h.str)||(null==(S=t.data.contentsObj)?void 0:S.str)||(null==(A=t.data.richText)?void 0:A.str)),ignoreBorder:!0})}render(){return this.container.className="freeTextAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class m extends r{constructor(t){var h,S,A;super(t,{isRenderable:!!(t.data.hasPopup||(null==(h=t.data.titleObj)?void 0:h.str)||(null==(S=t.data.contentsObj)?void 0:S.str)||(null==(A=t.data.richText)?void 0:A.str)),ignoreBorder:!0})}render(){this.container.className="lineAnnotation";const t=this.data,{width:l,height:h}=x(t.rect),S=this.svgFactory.create(l,h),A=this.svgFactory.createElement("svg:line");return A.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),A.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),A.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),A.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),A.setAttribute("stroke-width",t.borderStyle.width||1),A.setAttribute("stroke","transparent"),A.setAttribute("fill","transparent"),S.appendChild(A),this.container.append(S),this._createPopup(A,t),this.container}}class y extends r{constructor(t){var h,S,A;super(t,{isRenderable:!!(t.data.hasPopup||(null==(h=t.data.titleObj)?void 0:h.str)||(null==(S=t.data.contentsObj)?void 0:S.str)||(null==(A=t.data.richText)?void 0:A.str)),ignoreBorder:!0})}render(){this.container.className="squareAnnotation";const t=this.data,{width:l,height:h}=x(t.rect),S=this.svgFactory.create(l,h),A=t.borderStyle.width,E=this.svgFactory.createElement("svg:rect");return E.setAttribute("x",A/2),E.setAttribute("y",A/2),E.setAttribute("width",l-A),E.setAttribute("height",h-A),E.setAttribute("stroke-width",A||1),E.setAttribute("stroke","transparent"),E.setAttribute("fill","transparent"),S.appendChild(E),this.container.append(S),this._createPopup(E,t),this.container}}class T extends r{constructor(t){var h,S,A;super(t,{isRenderable:!!(t.data.hasPopup||(null==(h=t.data.titleObj)?void 0:h.str)||(null==(S=t.data.contentsObj)?void 0:S.str)||(null==(A=t.data.richText)?void 0:A.str)),ignoreBorder:!0})}render(){this.container.className="circleAnnotation";const t=this.data,{width:l,height:h}=x(t.rect),S=this.svgFactory.create(l,h),A=t.borderStyle.width,E=this.svgFactory.createElement("svg:ellipse");return E.setAttribute("cx",l/2),E.setAttribute("cy",h/2),E.setAttribute("rx",l/2-A/2),E.setAttribute("ry",h/2-A/2),E.setAttribute("stroke-width",A||1),E.setAttribute("stroke","transparent"),E.setAttribute("fill","transparent"),S.appendChild(E),this.container.append(S),this._createPopup(E,t),this.container}}class k extends r{constructor(t){var h,S,A;super(t,{isRenderable:!!(t.data.hasPopup||(null==(h=t.data.titleObj)?void 0:h.str)||(null==(S=t.data.contentsObj)?void 0:S.str)||(null==(A=t.data.richText)?void 0:A.str)),ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:l,height:h}=x(t.rect),S=this.svgFactory.create(l,h);let A=[];for(const j of t.vertices)A.push(j.x-t.rect[0]+","+(t.rect[3]-j.y));A=A.join(" ");const E=this.svgFactory.createElement(this.svgElementName);return E.setAttribute("points",A),E.setAttribute("stroke-width",t.borderStyle.width||1),E.setAttribute("stroke","transparent"),E.setAttribute("fill","transparent"),S.appendChild(E),this.container.append(S),this._createPopup(E,t),this.container}}class O extends k{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class V extends r{constructor(t){var h,S,A;super(t,{isRenderable:!!(t.data.hasPopup||(null==(h=t.data.titleObj)?void 0:h.str)||(null==(S=t.data.contentsObj)?void 0:S.str)||(null==(A=t.data.richText)?void 0:A.str)),ignoreBorder:!0})}render(){return this.container.className="caretAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class G extends r{constructor(t){var h,S,A;super(t,{isRenderable:!!(t.data.hasPopup||(null==(h=t.data.titleObj)?void 0:h.str)||(null==(S=t.data.contentsObj)?void 0:S.str)||(null==(A=t.data.richText)?void 0:A.str)),ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline"}render(){this.container.className=this.containerClassName;const t=this.data,{width:l,height:h}=x(t.rect),S=this.svgFactory.create(l,h);for(const A of t.inkLists){let E=[];for(const U of A)E.push(`${U.x-t.rect[0]},${t.rect[3]-U.y}`);E=E.join(" ");const j=this.svgFactory.createElement(this.svgElementName);j.setAttribute("points",E),j.setAttribute("stroke-width",t.borderStyle.width||1),j.setAttribute("stroke","transparent"),j.setAttribute("fill","transparent"),this._createPopup(j,t),S.appendChild(j)}return this.container.append(S),this.container}}class X extends r{constructor(t){var h,S,A;super(t,{isRenderable:!!(t.data.hasPopup||(null==(h=t.data.titleObj)?void 0:h.str)||(null==(S=t.data.contentsObj)?void 0:S.str)||(null==(A=t.data.richText)?void 0:A.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("highlightAnnotation"):(this.container.className="highlightAnnotation",this.container)}}class Q extends r{constructor(t){var h,S,A;super(t,{isRenderable:!!(t.data.hasPopup||(null==(h=t.data.titleObj)?void 0:h.str)||(null==(S=t.data.contentsObj)?void 0:S.str)||(null==(A=t.data.richText)?void 0:A.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("underlineAnnotation"):(this.container.className="underlineAnnotation",this.container)}}class B extends r{constructor(t){var h,S,A;super(t,{isRenderable:!!(t.data.hasPopup||(null==(h=t.data.titleObj)?void 0:h.str)||(null==(S=t.data.contentsObj)?void 0:S.str)||(null==(A=t.data.richText)?void 0:A.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("squigglyAnnotation"):(this.container.className="squigglyAnnotation",this.container)}}class $ extends r{constructor(t){var h,S,A;super(t,{isRenderable:!!(t.data.hasPopup||(null==(h=t.data.titleObj)?void 0:h.str)||(null==(S=t.data.contentsObj)?void 0:S.str)||(null==(A=t.data.richText)?void 0:A.str)),ignoreBorder:!0,createQuadrilaterals:!0})}render(){return this.data.hasPopup||this._createPopup(null,this.data),this.quadrilaterals?this._renderQuadrilaterals("strikeoutAnnotation"):(this.container.className="strikeoutAnnotation",this.container)}}class J extends r{constructor(t){var h,S,A;super(t,{isRenderable:!!(t.data.hasPopup||(null==(h=t.data.titleObj)?void 0:h.str)||(null==(S=t.data.contentsObj)?void 0:S.str)||(null==(A=t.data.richText)?void 0:A.str)),ignoreBorder:!0})}render(){return this.container.className="stampAnnotation",this.data.hasPopup||this._createPopup(null,this.data),this.container}}class ae extends r{constructor(t){var S;super(t,{isRenderable:!0});const{filename:l,content:h}=this.data.file;this.filename=(0,_e.getFilenameFromUrl)(l),this.content=h,null==(S=this.linkService.eventBus)||S.dispatch("fileattachmentannotation",{source:this,filename:l,content:h})}render(){var l,h;this.container.className="fileAttachmentAnnotation";const t=document.createElement("div");return t.style.height=this.container.style.height,t.style.width=this.container.style.width,t.addEventListener("dblclick",this._download.bind(this)),!this.data.hasPopup&&((null==(l=this.data.titleObj)?void 0:l.str)||(null==(h=this.data.contentsObj)?void 0:h.str)||this.data.richText)&&this._createPopup(t,this.data),this.container.appendChild(t),this.container}_download(){var t;null==(t=this.downloadManager)||t.openOrDownloadData(this.container,this.content,this.filename)}}class de{static render(t){const l=[],h=[];for(const A of t.annotations){if(!A)continue;const{width:E,height:j}=x(A.rect);if(!(E<=0||j<=0)){if(A.annotationType===g.AnnotationType.POPUP){h.push(A);continue}l.push(A)}}h.length&&l.push(...h);const S=t.div;for(const A of l){const E=b.create({data:A,layer:S,page:t.page,viewport:t.viewport,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:!1!==t.renderForms,svgFactory:new _e.DOMSVGFactory,annotationStorage:t.annotationStorage||new re.AnnotationStorage,enableScripting:t.enableScripting,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,mouseState:t.mouseState||{isDown:!1}});if(E.isRenderable){const j=E.render();if(A.hidden&&(j.style.visibility="hidden"),Array.isArray(j))for(const U of j)S.appendChild(U);else E instanceof e?S.prepend(j):S.appendChild(j)}}xe(this,M,it).call(this,S,t.annotationCanvasMap)}static update(t){const{page:l,viewport:h,annotations:S,annotationCanvasMap:A,div:E}=t,j=h.transform,U=`matrix(${j.join(",")})`;let H,z;for(const Y of S){const Z=E.querySelectorAll(`[data-annotation-id="${Y.id}"]`);if(Z)for(const ue of Z)if(Y.hasOwnCanvas){const ye=g.Util.normalizeRect([Y.rect[0],l.view[3]-Y.rect[1]+l.view[1],Y.rect[2],l.view[3]-Y.rect[3]+l.view[1]]);if(!z){H=Math.abs(j[0]||j[1]);const oe=j.slice();for(let w=0;w<4;w++)oe[w]=Math.sign(oe[w]);z=`matrix(${oe.join(",")})`}const te=ye[0]*H,ce=ye[1]*H;ue.style.left=`${te}px`,ue.style.top=`${ce}px`,ue.style.transformOrigin=`${-te}px ${-ce}px`,ue.style.transform=z}else ue.style.transform=U}xe(this,M,it).call(this,E,A),E.hidden=!1}}M=new WeakSet,it=function(t,l){if(l){for(const[h,S]of l){const A=t.querySelector(`[data-annotation-id="${h}"]`);if(!A)continue;const{firstChild:E}=A;"CANVAS"===E.nodeName?A.replaceChild(S,E):A.insertBefore(S,E)}l.clear()}},Ee(de,M),L.AnnotationLayer=de},(be,L)=>{function K(_e){return Math.floor(255*Math.max(0,Math.min(1,_e))).toString(16).padStart(2,"0")}Object.defineProperty(L,"__esModule",{value:!0}),L.ColorConverters=void 0,L.ColorConverters=class g{static CMYK_G([re,ne,ee,D]){return["G",1-Math.min(1,.3*re+.59*ee+.11*ne+D)]}static G_CMYK([re]){return["CMYK",0,0,0,1-re]}static G_RGB([re]){return["RGB",re,re,re]}static G_HTML([re]){const ne=K(re);return`#${ne}${ne}${ne}`}static RGB_G([re,ne,ee]){return["G",.3*re+.59*ne+.11*ee]}static RGB_HTML([re,ne,ee]){return`#${K(re)}${K(ne)}${K(ee)}`}static T_HTML(){return"#00000000"}static CMYK_RGB([re,ne,ee,D]){return["RGB",1-Math.min(1,re+D),1-Math.min(1,ee+D),1-Math.min(1,ne+D)]}static CMYK_HTML(re){return this.RGB_HTML(this.CMYK_RGB(re))}static RGB_CMYK([re,ne,ee]){const D=1-re,d=1-ne,x=1-ee;return["CMYK",D,d,x,Math.min(D,d,x)]}}},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.XfaLayer=void 0;var g=K(18);L.XfaLayer=class _e{static setupStorage(ne,ee,D,d,x){const b=d.getValue(ee,{value:null});switch(D.name){case"textarea":if(null!==b.value&&(ne.textContent=b.value),"print"===x)break;ne.addEventListener("input",r=>{d.setValue(ee,{value:r.target.value})});break;case"input":if("radio"===D.attributes.type||"checkbox"===D.attributes.type){if(b.value===D.attributes.xfaOn?ne.setAttribute("checked",!0):b.value===D.attributes.xfaOff&&ne.removeAttribute("checked"),"print"===x)break;ne.addEventListener("change",r=>{d.setValue(ee,{value:r.target.getAttribute(r.target.checked?"xfaOn":"xfaOff")})})}else{if(null!==b.value&&ne.setAttribute("value",b.value),"print"===x)break;ne.addEventListener("input",r=>{d.setValue(ee,{value:r.target.value})})}break;case"select":if(null!==b.value)for(const r of D.children)r.attributes.value===b.value&&(r.attributes.selected=!0);ne.addEventListener("input",r=>{const C=r.target.options;d.setValue(ee,{value:-1===C.selectedIndex?"":C[C.selectedIndex].value})})}}static setAttributes({html:ne,element:ee,storage:D=null,intent:d,linkService:x}){const{attributes:b}=ee,r=ne instanceof HTMLAnchorElement;"radio"===b.type&&(b.name=`${b.name}-${d}`);for(const[C,o]of Object.entries(b))if(null!=o&&"dataId"!==C)if("style"!==C)if("textContent"===C)ne.textContent=o;else if("class"===C)o.length&&ne.setAttribute(C,o.join(" "));else{if(r&&("href"===C||"newWindow"===C))continue;ne.setAttribute(C,o)}else Object.assign(ne.style,o);r&&x.addLinkAttributes(ne,b.href,b.newWindow),D&&b.dataId&&this.setupStorage(ne,b.dataId,ee,D)}static render(ne){var s;const ee=ne.annotationStorage,D=ne.linkService,d=ne.xfaHtml,x=ne.intent||"display",b=document.createElement(d.name);d.attributes&&this.setAttributes({html:b,element:d,intent:x,linkService:D});const r=[[d,-1,b]],C=ne.div;if(C.appendChild(b),ne.viewport){const n=`matrix(${ne.viewport.transform.join(",")})`;C.style.transform=n}"richText"!==x&&C.setAttribute("class","xfaLayer xfaFont");const o=[];for(;r.length>0;){const[n,c,P]=r[r.length-1];if(c+1===n.children.length){r.pop();continue}const f=n.children[++r[r.length-1][1]];if(null===f)continue;const{name:p}=f;if("#text"===p){const i=document.createTextNode(f.value);o.push(i),P.appendChild(i);continue}let e;if(e=(null==(s=null==f?void 0:f.attributes)?void 0:s.xmlns)?document.createElementNS(f.attributes.xmlns,p):document.createElement(p),P.appendChild(e),f.attributes&&this.setAttributes({html:e,element:f,storage:ee,intent:x,linkService:D}),f.children&&f.children.length>0)r.push([f,-1,e]);else if(f.value){const i=document.createTextNode(f.value);g.XfaText.shouldBuildText(p)&&o.push(i),e.appendChild(i)}}for(const n of C.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))n.setAttribute("readOnly",!0);return{textDivs:o}}static update(ne){const ee=`matrix(${ne.viewport.transform.join(",")})`;ne.div.style.transform=ee,ne.div.hidden=!1}}},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.renderTextLayer=function c(P){const f=new n({textContent:P.textContent,textContentStream:P.textContentStream,container:P.container,viewport:P.viewport,textDivs:P.textDivs,textContentItemsStr:P.textContentItemsStr,enhanceTextSelection:P.enhanceTextSelection});return f._render(P.timeout),f};var g=K(1);const ee=new Map,D=/^\s+$/g;function x(P,f,p,e){const i=document.createElement("span"),_=P._enhanceTextSelection?{angle:0,canvasWidth:0,hasText:""!==f.str,hasEOL:f.hasEOL,originalTransform:null,paddingBottom:0,paddingLeft:0,paddingRight:0,paddingTop:0,scale:1}:{angle:0,canvasWidth:0,hasText:""!==f.str,hasEOL:f.hasEOL};P._textDivs.push(i);const m=g.Util.transform(P._viewport.transform,f.transform);let y=Math.atan2(m[1],m[0]);const T=p[f.fontName];T.vertical&&(y+=Math.PI/2);const k=Math.hypot(m[2],m[3]),O=k*function d(P,f){const p=ee.get(P);if(p)return p;f.save(),f.font=`30px ${P}`;const e=f.measureText("");let i=e.fontBoundingBoxAscent,_=Math.abs(e.fontBoundingBoxDescent);if(i){f.restore();const y=i/(i+_);return ee.set(P,y),y}f.strokeStyle="red",f.clearRect(0,0,30,30),f.strokeText("g",0,0);let m=f.getImageData(0,0,30,30).data;_=0;for(let y=m.length-1-3;y>=0;y-=4)if(m[y]>0){_=Math.ceil(y/4/30);break}f.clearRect(0,0,30,30),f.strokeText("A",0,30),m=f.getImageData(0,0,30,30).data,i=0;for(let y=0,T=m.length;y<T;y+=4)if(m[y]>0){i=30-Math.floor(y/4/30);break}if(f.restore(),i){const y=i/(i+_);return ee.set(P,y),y}return ee.set(P,.8),.8}(T.fontFamily,e);let V,G;0===y?(V=m[4],G=m[5]-O):(V=m[4]+O*Math.sin(y),G=m[5]-O*Math.cos(y)),i.style.left=`${V}px`,i.style.top=`${G}px`,i.style.fontSize=`${k}px`,i.style.fontFamily=T.fontFamily,i.setAttribute("role","presentation"),i.textContent=f.str,i.dir=f.dir,P._fontInspectorEnabled&&(i.dataset.fontName=f.fontName),0!==y&&(_.angle=y*(180/Math.PI));let X=!1;if(f.str.length>1||P._enhanceTextSelection&&D.test(f.str))X=!0;else if(" "!==f.str&&f.transform[0]!==f.transform[3]){const Q=Math.abs(f.transform[0]),B=Math.abs(f.transform[3]);Q!==B&&Math.max(Q,B)/Math.min(Q,B)>1.5&&(X=!0)}if(X&&(_.canvasWidth=T.vertical?f.height*P._viewport.scale:f.width*P._viewport.scale),P._textDivProperties.set(i,_),P._textContentStream&&P._layoutText(i),P._enhanceTextSelection&&_.hasText){let Q=1,B=0;0!==y&&(Q=Math.cos(y),B=Math.sin(y));const $=(T.vertical?f.height:f.width)*P._viewport.scale,J=k;let ae,de;0!==y?(ae=[Q,B,-B,Q,V,G],de=g.Util.getAxialAlignedBoundingBox([0,0,$,J],ae)):de=[V,G,V+$,G+J],P._bounds.push({left:de[0],top:de[1],right:de[2],bottom:de[3],div:i,size:[$,J],m:ae})}}function b(P){if(P._canceled)return;const f=P._textDivs,p=P._capability,e=f.length;if(e>1e5)return P._renderingDone=!0,void p.resolve();if(!P._textContentStream)for(let i=0;i<e;i++)P._layoutText(f[i]);P._renderingDone=!0,p.resolve()}function r(P,f,p){let e=0;for(let i=0;i<p;i++){const _=P[f++];_>0&&(e=e?Math.min(_,e):_)}return e}function s(P,f){f.sort(function(i,_){return i.x1-_.x1||i.index-_.index});const e=[{start:-1/0,end:1/0,boundary:{x1:-1/0,y1:-1/0,x2:0,y2:1/0,index:-1,x1New:0,x2New:0}}];for(const i of f){let _=0;for(;_<e.length&&e[_].end<=i.y1;)_++;let m=e.length-1;for(;m>=0&&e[m].start>=i.y2;)m--;let y,T,k,O,V=-1/0;for(k=_;k<=m;k++){let Q;y=e[k],T=y.boundary,Q=T.x2>i.x1?T.index>i.index?T.x1New:i.x1:void 0===T.x2New?(T.x2+i.x1)/2:T.x2New,Q>V&&(V=Q)}for(i.x1New=V,k=_;k<=m;k++)y=e[k],T=y.boundary,void 0===T.x2New?T.x2>i.x1?T.index>i.index&&(T.x2New=T.x2):T.x2New=V:T.x2New>V&&(T.x2New=Math.max(V,T.x2));const G=[];let X=null;for(k=_;k<=m;k++){y=e[k],T=y.boundary;const Q=T.x2>i.x2?T:i;X===Q?G[G.length-1].end=y.end:(G.push({start:y.start,end:y.end,boundary:Q}),X=Q)}for(e[_].start<i.y1&&(G[0].start=i.y1,G.unshift({start:e[_].start,end:i.y1,boundary:e[_].boundary})),i.y2<e[m].end&&(G[G.length-1].end=i.y2,G.push({start:i.y2,end:e[m].end,boundary:e[m].boundary})),k=_;k<=m;k++){if(y=e[k],T=y.boundary,void 0!==T.x2New)continue;let Q=!1;for(O=_-1;!Q&&O>=0&&e[O].start>=T.y1;O--)Q=e[O].boundary===T;for(O=m+1;!Q&&O<e.length&&e[O].end<=T.y2;O++)Q=e[O].boundary===T;for(O=0;!Q&&O<G.length;O++)Q=G[O].boundary===T;Q||(T.x2New=V)}Array.prototype.splice.apply(e,[_,m-_+1].concat(G))}for(const i of e){const _=i.boundary;void 0===_.x2New&&(_.x2New=Math.max(P,_.x2))}}class n{constructor({textContent:f,textContentStream:p,container:e,viewport:i,textDivs:_,textContentItemsStr:m,enhanceTextSelection:y}){var T;this._textContent=f,this._textContentStream=p,this._container=e,this._document=e.ownerDocument,this._viewport=i,this._textDivs=_||[],this._textContentItemsStr=m||[],this._enhanceTextSelection=!!y,this._fontInspectorEnabled=!!(null==(T=globalThis.FontInspector)?void 0:T.enabled),this._reader=null,this._layoutTextLastFontSize=null,this._layoutTextLastFontFamily=null,this._layoutTextCtx=null,this._textDivProperties=new WeakMap,this._renderingDone=!1,this._canceled=!1,this._capability=(0,g.createPromiseCapability)(),this._renderTimer=null,this._bounds=[],this._capability.promise.finally(()=>{this._enhanceTextSelection||(this._textDivProperties=null),this._layoutTextCtx&&(this._layoutTextCtx.canvas.width=0,this._layoutTextCtx.canvas.height=0,this._layoutTextCtx=null)}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new g.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),null!==this._renderTimer&&(clearTimeout(this._renderTimer),this._renderTimer=null),this._capability.reject(new Error("TextLayer task cancelled."))}_processItems(f,p){for(let e=0,i=f.length;e<i;e++)if(void 0!==f[e].str)this._textContentItemsStr.push(f[e].str),x(this,f[e],p,this._layoutTextCtx);else if("beginMarkedContentProps"===f[e].type||"beginMarkedContent"===f[e].type){const _=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),null!==f[e].id&&this._container.setAttribute("id",`${f[e].id}`),_.appendChild(this._container)}else"endMarkedContent"===f[e].type&&(this._container=this._container.parentNode)}_layoutText(f){const p=this._textDivProperties.get(f);let e="";if(0!==p.canvasWidth&&p.hasText){const{fontSize:i,fontFamily:_}=f.style;(i!==this._layoutTextLastFontSize||_!==this._layoutTextLastFontFamily)&&(this._layoutTextCtx.font=`${i} ${_}`,this._layoutTextLastFontSize=i,this._layoutTextLastFontFamily=_);const{width:m}=this._layoutTextCtx.measureText(f.textContent);if(m>0){const y=p.canvasWidth/m;this._enhanceTextSelection&&(p.scale=y),e=`scaleX(${y})`}}if(0!==p.angle&&(e=`rotate(${p.angle}deg) ${e}`),e.length>0&&(this._enhanceTextSelection&&(p.originalTransform=e),f.style.transform=e),p.hasText&&this._container.appendChild(f),p.hasEOL){const i=document.createElement("br");i.setAttribute("role","presentation"),this._container.appendChild(i)}}_render(f=0){const p=(0,g.createPromiseCapability)();let e=Object.create(null);const i=this._document.createElement("canvas");if(i.height=i.width=30,this._layoutTextCtx=i.getContext("2d",{alpha:!1}),this._textContent)this._processItems(this._textContent.items,this._textContent.styles),p.resolve();else{if(!this._textContentStream)throw new Error('Neither "textContent" nor "textContentStream" parameters specified.');{const _=()=>{this._reader.read().then(({value:m,done:y})=>{y?p.resolve():(Object.assign(e,m.styles),this._processItems(m.items,e),_())},p.reject)};this._reader=this._textContentStream.getReader(),_()}}p.promise.then(()=>{e=null,f?this._renderTimer=setTimeout(()=>{b(this),this._renderTimer=null},f):b(this)},this._capability.reject)}expandTextDivs(f=!1){if(!this._enhanceTextSelection||!this._renderingDone)return;null!==this._bounds&&(function C(P){const f=P._bounds,p=P._viewport,e=function o(P,f,p){const e=p.map(function(_,m){return{x1:_.left,y1:_.top,x2:_.right,y2:_.bottom,index:m,x1New:void 0,x2New:void 0}});s(P,e);const i=new Array(p.length);for(const _ of e)i[_.index]={left:_.x1New,top:0,right:_.x2New,bottom:0};p.map(function(_,m){const y=i[m],T=e[m];T.x1=_.top,T.y1=P-y.right,T.x2=_.bottom,T.y2=P-y.left,T.index=m,T.x1New=void 0,T.x2New=void 0}),s(f,e);for(const _ of e){const m=_.index;i[m].top=_.x1New,i[m].bottom=_.x2New}return i}(p.width,p.height,f);for(let i=0;i<e.length;i++){const _=f[i].div,m=P._textDivProperties.get(_);if(0===m.angle){m.paddingLeft=f[i].left-e[i].left,m.paddingTop=f[i].top-e[i].top,m.paddingRight=e[i].right-f[i].right,m.paddingBottom=e[i].bottom-f[i].bottom,P._textDivProperties.set(_,m);continue}const y=e[i],T=f[i],k=T.m,O=k[0],V=k[1],G=[[0,0],[0,T.size[1]],[T.size[0],0],T.size],X=new Float64Array(64);for(let B=0,$=G.length;B<$;B++){const J=g.Util.applyTransform(G[B],k);X[B+0]=O&&(y.left-J[0])/O,X[B+4]=V&&(y.top-J[1])/V,X[B+8]=O&&(y.right-J[0])/O,X[B+12]=V&&(y.bottom-J[1])/V,X[B+16]=V&&(y.left-J[0])/-V,X[B+20]=O&&(y.top-J[1])/O,X[B+24]=V&&(y.right-J[0])/-V,X[B+28]=O&&(y.bottom-J[1])/O,X[B+32]=O&&(y.left-J[0])/-O,X[B+36]=V&&(y.top-J[1])/-V,X[B+40]=O&&(y.right-J[0])/-O,X[B+44]=V&&(y.bottom-J[1])/-V,X[B+48]=V&&(y.left-J[0])/V,X[B+52]=O&&(y.top-J[1])/-O,X[B+56]=V&&(y.right-J[0])/V,X[B+60]=O&&(y.bottom-J[1])/-O}const Q=1+Math.min(Math.abs(O),Math.abs(V));m.paddingLeft=r(X,32,16)/Q,m.paddingTop=r(X,48,16)/Q,m.paddingRight=r(X,0,16)/Q,m.paddingBottom=r(X,16,16)/Q,P._textDivProperties.set(_,m)}}(this),this._bounds=null);const p=[],e=[];for(let i=0,_=this._textDivs.length;i<_;i++){const m=this._textDivs[i],y=this._textDivProperties.get(m);!y.hasText||(f?(p.length=0,e.length=0,y.originalTransform&&p.push(y.originalTransform),y.paddingTop>0?(e.push(`${y.paddingTop}px`),p.push(`translateY(${-y.paddingTop}px)`)):e.push(0),e.push(y.paddingRight>0?y.paddingRight/y.scale+"px":0),e.push(y.paddingBottom>0?`${y.paddingBottom}px`:0),y.paddingLeft>0?(e.push(y.paddingLeft/y.scale+"px"),p.push(`translateX(${-y.paddingLeft/y.scale}px)`)):e.push(0),m.style.padding=e.join(" "),p.length&&(m.style.transform=p.join(" "))):(m.style.padding=null,m.style.transform=y.originalTransform))}}}},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.SVGGraphics=void 0;var g=K(1),_e=K(5),re=K(3);let ne=class{constructor(){(0,g.unreachable)("Not implemented: SVGGraphics")}};L.SVGGraphics=ne;{let s=function(e){let i=[];const _=[];for(const m of e)"save"!==m.fn?"restore"===m.fn?i=_.pop():i.push(m):(i.push({fnId:92,fn:"group",items:[]}),_.push(i),i=i[i.length-1].items);return i},n=function(e){if(Number.isInteger(e))return e.toString();const i=e.toFixed(10);let _=i.length-1;if("0"!==i[_])return i;do{_--}while("0"===i[_]);return i.substring(0,"."===i[_]?_:_+1)},c=function(e){if(0===e[4]&&0===e[5]){if(0===e[1]&&0===e[2])return 1===e[0]&&1===e[3]?"":`scale(${n(e[0])} ${n(e[3])})`;if(e[0]===e[3]&&e[1]===-e[2]){const i=180*Math.acos(e[0])/Math.PI;return`rotate(${n(i)})`}}else if(1===e[0]&&0===e[1]&&0===e[2]&&1===e[3])return`translate(${n(e[4])} ${n(e[5])})`;return`matrix(${n(e[0])} ${n(e[1])} ${n(e[2])} ${n(e[3])} ${n(e[4])} ${n(e[5])})`};const ee={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},D="http://www.w3.org/XML/1998/namespace",d="http://www.w3.org/1999/xlink",x=["butt","round","square"],b=["miter","round","bevel"],r=function(e,i="",_=!1){if(URL.createObjectURL&&"undefined"!=typeof Blob&&!_)return URL.createObjectURL(new Blob([e],{type:i}));const m="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let y=`data:${i};base64,`;for(let T=0,k=e.length;T<k;T+=3){const O=255&e[T],V=255&e[T+1],G=255&e[T+2];y+=m[O>>2]+m[(3&O)<<4|V>>4]+m[T+1<k?(15&V)<<2|G>>6:64]+m[T+2<k?63&G:64]}return y},C=function(){const e=new Uint8Array([137,80,78,71,13,10,26,10]),_=new Int32Array(256);for(let G=0;G<256;G++){let X=G;for(let Q=0;Q<8;Q++)X=1&X?3988292384^X>>1&2147483647:X>>1&2147483647;_[G]=X}function y(G,X,Q,B){let $=B;const J=X.length;Q[$]=J>>24&255,Q[$+1]=J>>16&255,Q[$+2]=J>>8&255,Q[$+3]=255&J,$+=4,Q[$]=255&G.charCodeAt(0),Q[$+1]=255&G.charCodeAt(1),Q[$+2]=255&G.charCodeAt(2),Q[$+3]=255&G.charCodeAt(3),$+=4,Q.set(X,$),$+=X.length;const ae=function m(G,X,Q){let B=-1;for(let $=X;$<Q;$++)B=B>>>8^_[255&(B^G[$])];return-1^B}(Q,B+4,$);Q[$]=ae>>24&255,Q[$+1]=ae>>16&255,Q[$+2]=ae>>8&255,Q[$+3]=255&ae}function O(G){let X=G.length;const Q=65535,B=Math.ceil(X/Q),$=new Uint8Array(2+X+5*B+4);let J=0;$[J++]=120,$[J++]=156;let ae=0;for(;X>Q;)$[J++]=0,$[J++]=255,$[J++]=255,$[J++]=0,$[J++]=0,$.set(G.subarray(ae,ae+Q),J),J+=Q,ae+=Q,X-=Q;$[J++]=1,$[J++]=255&X,$[J++]=X>>8&255,$[J++]=255&~X,$[J++]=(65535&~X)>>8&255,$.set(G.subarray(ae),J),J+=G.length-ae;const de=function T(G,X,Q){let B=1,$=0;for(let J=X;J<Q;++J)B=(B+(255&G[J]))%65521,$=($+B)%65521;return $<<16|B}(G,0,G.length);return $[J++]=de>>24&255,$[J++]=de>>16&255,$[J++]=de>>8&255,$[J++]=255&de,$}return function(X,Q,B){return function V(G,X,Q,B){const $=G.width,J=G.height;let ae,de,M;const a=G.data;switch(X){case g.ImageKind.GRAYSCALE_1BPP:de=0,ae=1,M=$+7>>3;break;case g.ImageKind.RGB_24BPP:de=2,ae=8,M=3*$;break;case g.ImageKind.RGBA_32BPP:de=6,ae=8,M=4*$;break;default:throw new Error("invalid format")}const u=new Uint8Array((1+M)*J);let t=0,l=0;for(let U=0;U<J;++U)u[t++]=0,u.set(a.subarray(l,l+M),t),l+=M,t+=M;if(X===g.ImageKind.GRAYSCALE_1BPP&&B){t=0;for(let U=0;U<J;U++){t++;for(let H=0;H<M;H++)u[t++]^=255}}const h=new Uint8Array([$>>24&255,$>>16&255,$>>8&255,255&$,J>>24&255,J>>16&255,J>>8&255,255&J,ae,de,0,0,0]),S=function k(G){if(!re.isNodeJS)return O(G);try{let X;X=parseInt(process.versions.node)>=8?G:Buffer.from(G);const Q=__webpack_require__(2258).deflateSync(X,{level:9});return Q instanceof Uint8Array?Q:new Uint8Array(Q)}catch(X){(0,g.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+X)}return O(G)}(u),E=new Uint8Array(e.length+36+h.length+S.length);let j=0;return E.set(e,j),j+=e.length,y("IHDR",h,E,j),j+=12+h.length,y("IDATA",S,E,j),j+=12+S.length,y("IEND",new Uint8Array(0),E,j),r(E,"image/png",Q)}(X,void 0===X.kind?g.ImageKind.GRAYSCALE_1BPP:X.kind,Q,B)}}();class o{constructor(){this.fontSizeScale=1,this.fontWeight=ee.fontWeight,this.fontSize=0,this.textMatrix=g.IDENTITY_MATRIX,this.fontMatrix=g.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=g.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=ee.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(i,_){this.x=i,this.y=_}}let P=0,f=0,p=0;L.SVGGraphics=ne=class{constructor(e,i,_=!1){this.svgFactory=new _e.DOMSVGFactory,this.current=new o,this.transformMatrix=g.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=e,this.objs=i,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!_,this._operatorIdMapping=[];for(const m in g.OPS)this._operatorIdMapping[g.OPS[m]]=m}save(){this.transformStack.push(this.transformMatrix);const e=this.current;this.extraStack.push(e),this.current=e.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(e){this.save(),this.executeOpTree(e),this.restore()}loadDependencies(e){const i=e.fnArray,_=e.argsArray;for(let m=0,y=i.length;m<y;m++)if(i[m]===g.OPS.dependency)for(const T of _[m]){const k=T.startsWith("g_")?this.commonObjs:this.objs,O=new Promise(V=>{k.get(T,V)});this.current.dependencies.push(O)}return Promise.all(this.current.dependencies)}transform(e,i,_,m,y,T){this.transformMatrix=g.Util.transform(this.transformMatrix,[e,i,_,m,y,T]),this.tgrp=null}getSVG(e,i){this.viewport=i;const _=this._initialize(i);return this.loadDependencies(e).then(()=>(this.transformMatrix=g.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(e)),_))}convertOpList(e){const i=this._operatorIdMapping,_=e.argsArray,m=e.fnArray,y=[];for(let T=0,k=m.length;T<k;T++){const O=m[T];y.push({fnId:O,fn:i[O],args:_[T]})}return s(y)}executeOpTree(e){for(const i of e){const _=i.fn,y=i.args;switch(0|i.fnId){case g.OPS.beginText:this.beginText();break;case g.OPS.dependency:break;case g.OPS.setLeading:this.setLeading(y);break;case g.OPS.setLeadingMoveText:this.setLeadingMoveText(y[0],y[1]);break;case g.OPS.setFont:this.setFont(y);break;case g.OPS.showText:case g.OPS.showSpacedText:this.showText(y[0]);break;case g.OPS.endText:this.endText();break;case g.OPS.moveText:this.moveText(y[0],y[1]);break;case g.OPS.setCharSpacing:this.setCharSpacing(y[0]);break;case g.OPS.setWordSpacing:this.setWordSpacing(y[0]);break;case g.OPS.setHScale:this.setHScale(y[0]);break;case g.OPS.setTextMatrix:this.setTextMatrix(y[0],y[1],y[2],y[3],y[4],y[5]);break;case g.OPS.setTextRise:this.setTextRise(y[0]);break;case g.OPS.setTextRenderingMode:this.setTextRenderingMode(y[0]);break;case g.OPS.setLineWidth:this.setLineWidth(y[0]);break;case g.OPS.setLineJoin:this.setLineJoin(y[0]);break;case g.OPS.setLineCap:this.setLineCap(y[0]);break;case g.OPS.setMiterLimit:this.setMiterLimit(y[0]);break;case g.OPS.setFillRGBColor:this.setFillRGBColor(y[0],y[1],y[2]);break;case g.OPS.setStrokeRGBColor:this.setStrokeRGBColor(y[0],y[1],y[2]);break;case g.OPS.setStrokeColorN:this.setStrokeColorN(y);break;case g.OPS.setFillColorN:this.setFillColorN(y);break;case g.OPS.shadingFill:this.shadingFill(y[0]);break;case g.OPS.setDash:this.setDash(y[0],y[1]);break;case g.OPS.setRenderingIntent:this.setRenderingIntent(y[0]);break;case g.OPS.setFlatness:this.setFlatness(y[0]);break;case g.OPS.setGState:this.setGState(y[0]);break;case g.OPS.fill:this.fill();break;case g.OPS.eoFill:this.eoFill();break;case g.OPS.stroke:this.stroke();break;case g.OPS.fillStroke:this.fillStroke();break;case g.OPS.eoFillStroke:this.eoFillStroke();break;case g.OPS.clip:this.clip("nonzero");break;case g.OPS.eoClip:this.clip("evenodd");break;case g.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case g.OPS.paintImageXObject:this.paintImageXObject(y[0]);break;case g.OPS.paintInlineImageXObject:this.paintInlineImageXObject(y[0]);break;case g.OPS.paintImageMaskXObject:this.paintImageMaskXObject(y[0]);break;case g.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(y[0],y[1]);break;case g.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case g.OPS.closePath:this.closePath();break;case g.OPS.closeStroke:this.closeStroke();break;case g.OPS.closeFillStroke:this.closeFillStroke();break;case g.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case g.OPS.nextLine:this.nextLine();break;case g.OPS.transform:this.transform(y[0],y[1],y[2],y[3],y[4],y[5]);break;case g.OPS.constructPath:this.constructPath(y[0],y[1]);break;case g.OPS.endPath:this.endPath();break;case 92:this.group(i.items);break;default:(0,g.warn)(`Unimplemented operator ${_}`)}}}setWordSpacing(e){this.current.wordSpacing=e}setCharSpacing(e){this.current.charSpacing=e}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(e,i,_,m,y,T){const k=this.current;k.textMatrix=k.lineMatrix=[e,i,_,m,y,T],k.textMatrixScale=Math.hypot(e,i),k.x=k.lineX=0,k.y=k.lineY=0,k.xcoords=[],k.ycoords=[],k.tspan=this.svgFactory.createElement("svg:tspan"),k.tspan.setAttributeNS(null,"font-family",k.fontFamily),k.tspan.setAttributeNS(null,"font-size",`${n(k.fontSize)}px`),k.tspan.setAttributeNS(null,"y",n(-k.y)),k.txtElement=this.svgFactory.createElement("svg:text"),k.txtElement.appendChild(k.tspan)}beginText(){const e=this.current;e.x=e.lineX=0,e.y=e.lineY=0,e.textMatrix=g.IDENTITY_MATRIX,e.lineMatrix=g.IDENTITY_MATRIX,e.textMatrixScale=1,e.tspan=this.svgFactory.createElement("svg:tspan"),e.txtElement=this.svgFactory.createElement("svg:text"),e.txtgrp=this.svgFactory.createElement("svg:g"),e.xcoords=[],e.ycoords=[]}moveText(e,i){const _=this.current;_.x=_.lineX+=e,_.y=_.lineY+=i,_.xcoords=[],_.ycoords=[],_.tspan=this.svgFactory.createElement("svg:tspan"),_.tspan.setAttributeNS(null,"font-family",_.fontFamily),_.tspan.setAttributeNS(null,"font-size",`${n(_.fontSize)}px`),_.tspan.setAttributeNS(null,"y",n(-_.y))}showText(e){const i=this.current,_=i.font,m=i.fontSize;if(0===m)return;const y=i.fontSizeScale,T=i.charSpacing,k=i.wordSpacing,O=i.fontDirection,V=i.textHScale*O,G=_.vertical,X=G?1:-1,Q=_.defaultVMetrics,B=m*i.fontMatrix[0];let $=0;for(const de of e){if(null===de){$+=O*k;continue}if("number"==typeof de){$+=X*de*m/1e3;continue}const M=(de.isSpace?k:0)+T,a=de.fontChar;let u,t,h,l=de.width;if(G){let S;const A=de.vmetric||Q;S=de.vmetric?A[1]:.5*l,S=-S*B,l=A?-A[0]:l,u=S/y,t=($+A[2]*B)/y}else u=$/y,t=0;(de.isInFont||_.missingFile)&&(i.xcoords.push(i.x+u),G&&i.ycoords.push(-i.y+t),i.tspan.textContent+=a),h=G?l*B-M*O:l*B+M*O,$+=h}i.tspan.setAttributeNS(null,"x",i.xcoords.map(n).join(" ")),i.tspan.setAttributeNS(null,"y",G?i.ycoords.map(n).join(" "):n(-i.y)),G?i.y-=$:i.x+=$*V,i.tspan.setAttributeNS(null,"font-family",i.fontFamily),i.tspan.setAttributeNS(null,"font-size",`${n(i.fontSize)}px`),i.fontStyle!==ee.fontStyle&&i.tspan.setAttributeNS(null,"font-style",i.fontStyle),i.fontWeight!==ee.fontWeight&&i.tspan.setAttributeNS(null,"font-weight",i.fontWeight);const J=i.textRenderingMode&g.TextRenderingMode.FILL_STROKE_MASK;J===g.TextRenderingMode.FILL||J===g.TextRenderingMode.FILL_STROKE?(i.fillColor!==ee.fillColor&&i.tspan.setAttributeNS(null,"fill",i.fillColor),i.fillAlpha<1&&i.tspan.setAttributeNS(null,"fill-opacity",i.fillAlpha)):i.tspan.setAttributeNS(null,"fill",i.textRenderingMode===g.TextRenderingMode.ADD_TO_PATH?"transparent":"none"),(J===g.TextRenderingMode.STROKE||J===g.TextRenderingMode.FILL_STROKE)&&this._setStrokeAttributes(i.tspan,1/(i.textMatrixScale||1));let ae=i.textMatrix;0!==i.textRise&&(ae=ae.slice(),ae[5]+=i.textRise),i.txtElement.setAttributeNS(null,"transform",`${c(ae)} scale(${n(V)}, -1)`),i.txtElement.setAttributeNS(D,"xml:space","preserve"),i.txtElement.appendChild(i.tspan),i.txtgrp.appendChild(i.txtElement),this._ensureTransformGroup().appendChild(i.txtElement)}setLeadingMoveText(e,i){this.setLeading(-i),this.moveText(e,i)}addFontStyle(e){if(!e.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.appendChild(this.cssStyle));const i=r(e.data,e.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${e.loadedName}"; src: url(${i}); }\n`}setFont(e){const i=this.current,_=this.commonObjs.get(e[0]);let m=e[1];i.font=_,this.embedFonts&&!_.missingFile&&!this.embeddedFonts[_.loadedName]&&(this.addFontStyle(_),this.embeddedFonts[_.loadedName]=_),i.fontMatrix=_.fontMatrix||g.FONT_IDENTITY_MATRIX;let y="normal";_.black?y="900":_.bold&&(y="bold");const T=_.italic?"italic":"normal";m<0?(m=-m,i.fontDirection=-1):i.fontDirection=1,i.fontSize=m,i.fontFamily=_.loadedName,i.fontWeight=y,i.fontStyle=T,i.tspan=this.svgFactory.createElement("svg:tspan"),i.tspan.setAttributeNS(null,"y",n(-i.y)),i.xcoords=[],i.ycoords=[]}endText(){var i;const e=this.current;e.textRenderingMode&g.TextRenderingMode.ADD_TO_PATH_FLAG&&(null==(i=e.txtElement)?void 0:i.hasChildNodes())&&(e.element=e.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(e){e>0&&(this.current.lineWidth=e)}setLineCap(e){this.current.lineCap=x[e]}setLineJoin(e){this.current.lineJoin=b[e]}setMiterLimit(e){this.current.miterLimit=e}setStrokeAlpha(e){this.current.strokeAlpha=e}setStrokeRGBColor(e,i,_){this.current.strokeColor=g.Util.makeHexColor(e,i,_)}setFillAlpha(e){this.current.fillAlpha=e}setFillRGBColor(e,i,_){this.current.fillColor=g.Util.makeHexColor(e,i,_),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(e){this.current.strokeColor=this._makeColorN_Pattern(e)}setFillColorN(e){this.current.fillColor=this._makeColorN_Pattern(e)}shadingFill(e){const i=this.viewport.width,_=this.viewport.height,m=g.Util.inverseTransform(this.transformMatrix),y=g.Util.applyTransform([0,0],m),T=g.Util.applyTransform([0,_],m),k=g.Util.applyTransform([i,0],m),O=g.Util.applyTransform([i,_],m),V=Math.min(y[0],T[0],k[0],O[0]),G=Math.min(y[1],T[1],k[1],O[1]),X=Math.max(y[0],T[0],k[0],O[0]),Q=Math.max(y[1],T[1],k[1],O[1]),B=this.svgFactory.createElement("svg:rect");B.setAttributeNS(null,"x",V),B.setAttributeNS(null,"y",G),B.setAttributeNS(null,"width",X-V),B.setAttributeNS(null,"height",Q-G),B.setAttributeNS(null,"fill",this._makeShadingPattern(e)),this.current.fillAlpha<1&&B.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().appendChild(B)}_makeColorN_Pattern(e){return"TilingPattern"===e[0]?this._makeTilingPattern(e):this._makeShadingPattern(e)}_makeTilingPattern(e){const i=e[1],_=e[2],m=e[3]||g.IDENTITY_MATRIX,[y,T,k,O]=e[4],V=e[5],G=e[6],X=e[7],Q="shading"+p++,[B,$,J,ae]=g.Util.normalizeRect([...g.Util.applyTransform([y,T],m),...g.Util.applyTransform([k,O],m)]),[de,M]=g.Util.singularValueDecompose2dScale(m),a=V*de,u=G*M,t=this.svgFactory.createElement("svg:pattern");t.setAttributeNS(null,"id",Q),t.setAttributeNS(null,"patternUnits","userSpaceOnUse"),t.setAttributeNS(null,"width",a),t.setAttributeNS(null,"height",u),t.setAttributeNS(null,"x",`${B}`),t.setAttributeNS(null,"y",`${$}`);const l=this.svg,h=this.transformMatrix,S=this.current.fillColor,A=this.current.strokeColor,E=this.svgFactory.create(J-B,ae-$);if(this.svg=E,this.transformMatrix=m,2===X){const j=g.Util.makeHexColor(...i);this.current.fillColor=j,this.current.strokeColor=j}return this.executeOpTree(this.convertOpList(_)),this.svg=l,this.transformMatrix=h,this.current.fillColor=S,this.current.strokeColor=A,t.appendChild(E.childNodes[0]),this.defs.appendChild(t),`url(#${Q})`}_makeShadingPattern(e){switch("string"==typeof e&&(e=this.objs.get(e)),e[0]){case"RadialAxial":const i="shading"+p++,_=e[3];let m;switch(e[1]){case"axial":const y=e[4],T=e[5];m=this.svgFactory.createElement("svg:linearGradient"),m.setAttributeNS(null,"id",i),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"x1",y[0]),m.setAttributeNS(null,"y1",y[1]),m.setAttributeNS(null,"x2",T[0]),m.setAttributeNS(null,"y2",T[1]);break;case"radial":const k=e[4],O=e[5],V=e[6],G=e[7];m=this.svgFactory.createElement("svg:radialGradient"),m.setAttributeNS(null,"id",i),m.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),m.setAttributeNS(null,"cx",O[0]),m.setAttributeNS(null,"cy",O[1]),m.setAttributeNS(null,"r",G),m.setAttributeNS(null,"fx",k[0]),m.setAttributeNS(null,"fy",k[1]),m.setAttributeNS(null,"fr",V);break;default:throw new Error(`Unknown RadialAxial type: ${e[1]}`)}for(const y of _){const T=this.svgFactory.createElement("svg:stop");T.setAttributeNS(null,"offset",y[0]),T.setAttributeNS(null,"stop-color",y[1]),m.appendChild(T)}return this.defs.appendChild(m),`url(#${i})`;case"Mesh":return(0,g.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${e[0]}`)}}setDash(e,i){this.current.dashArray=e,this.current.dashPhase=i}constructPath(e,i){const _=this.current;let m=_.x,y=_.y,T=[],k=0;for(const O of e)switch(0|O){case g.OPS.rectangle:m=i[k++],y=i[k++];const X=m+i[k++],Q=y+i[k++];T.push("M",n(m),n(y),"L",n(X),n(y),"L",n(X),n(Q),"L",n(m),n(Q),"Z");break;case g.OPS.moveTo:m=i[k++],y=i[k++],T.push("M",n(m),n(y));break;case g.OPS.lineTo:m=i[k++],y=i[k++],T.push("L",n(m),n(y));break;case g.OPS.curveTo:m=i[k+4],y=i[k+5],T.push("C",n(i[k]),n(i[k+1]),n(i[k+2]),n(i[k+3]),n(m),n(y)),k+=6;break;case g.OPS.curveTo2:T.push("C",n(m),n(y),n(i[k]),n(i[k+1]),n(i[k+2]),n(i[k+3])),m=i[k+2],y=i[k+3],k+=4;break;case g.OPS.curveTo3:m=i[k+2],y=i[k+3],T.push("C",n(i[k]),n(i[k+1]),n(m),n(y),n(m),n(y)),k+=4;break;case g.OPS.closePath:T.push("Z")}T=T.join(" "),_.path&&e.length>0&&e[0]!==g.OPS.rectangle&&e[0]!==g.OPS.moveTo?T=_.path.getAttributeNS(null,"d")+T:(_.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().appendChild(_.path)),_.path.setAttributeNS(null,"d",T),_.path.setAttributeNS(null,"fill","none"),_.element=_.path,_.setCurrentPoint(m,y)}endPath(){const e=this.current;if(e.path=null,!this.pendingClip)return;if(!e.element)return void(this.pendingClip=null);const i="clippath"+P++,_=this.svgFactory.createElement("svg:clipPath");_.setAttributeNS(null,"id",i),_.setAttributeNS(null,"transform",c(this.transformMatrix));const m=e.element.cloneNode(!0);if(m.setAttributeNS(null,"clip-rule","evenodd"===this.pendingClip?"evenodd":"nonzero"),this.pendingClip=null,_.appendChild(m),this.defs.appendChild(_),e.activeClipUrl){e.clipGroup=null;for(const y of this.extraStack)y.clipGroup=null;_.setAttributeNS(null,"clip-path",e.activeClipUrl)}e.activeClipUrl=`url(#${i})`,this.tgrp=null}clip(e){this.pendingClip=e}closePath(){const e=this.current;if(e.path){const i=`${e.path.getAttributeNS(null,"d")}Z`;e.path.setAttributeNS(null,"d",i)}}setLeading(e){this.current.leading=-e}setTextRise(e){this.current.textRise=e}setTextRenderingMode(e){this.current.textRenderingMode=e}setHScale(e){this.current.textHScale=e/100}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[i,_]of e)switch(i){case"LW":this.setLineWidth(_);break;case"LC":this.setLineCap(_);break;case"LJ":this.setLineJoin(_);break;case"ML":this.setMiterLimit(_);break;case"D":this.setDash(_[0],_[1]);break;case"RI":this.setRenderingIntent(_);break;case"FL":this.setFlatness(_);break;case"Font":this.setFont(_);break;case"CA":this.setStrokeAlpha(_);break;case"ca":this.setFillAlpha(_);break;default:(0,g.warn)(`Unimplemented graphic state operator ${i}`)}}fill(){const e=this.current;e.element&&(e.element.setAttributeNS(null,"fill",e.fillColor),e.element.setAttributeNS(null,"fill-opacity",e.fillAlpha),this.endPath())}stroke(){const e=this.current;e.element&&(this._setStrokeAttributes(e.element),e.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(e,i=1){const _=this.current;let m=_.dashArray;1!==i&&m.length>0&&(m=m.map(function(y){return i*y})),e.setAttributeNS(null,"stroke",_.strokeColor),e.setAttributeNS(null,"stroke-opacity",_.strokeAlpha),e.setAttributeNS(null,"stroke-miterlimit",n(_.miterLimit)),e.setAttributeNS(null,"stroke-linecap",_.lineCap),e.setAttributeNS(null,"stroke-linejoin",_.lineJoin),e.setAttributeNS(null,"stroke-width",n(i*_.lineWidth)+"px"),e.setAttributeNS(null,"stroke-dasharray",m.map(n).join(" ")),e.setAttributeNS(null,"stroke-dashoffset",n(i*_.dashPhase)+"px")}eoFill(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element&&this.current.element.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const e=this.svgFactory.createElement("svg:rect");e.setAttributeNS(null,"x","0"),e.setAttributeNS(null,"y","0"),e.setAttributeNS(null,"width","1px"),e.setAttributeNS(null,"height","1px"),e.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().appendChild(e)}paintImageXObject(e){const i=e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e);i?this.paintInlineImageXObject(i):(0,g.warn)(`Dependent image with object ID ${e} is not ready yet`)}paintInlineImageXObject(e,i){const _=e.width,m=e.height,y=C(e,this.forceDataSchema,!!i),T=this.svgFactory.createElement("svg:rect");T.setAttributeNS(null,"x","0"),T.setAttributeNS(null,"y","0"),T.setAttributeNS(null,"width",n(_)),T.setAttributeNS(null,"height",n(m)),this.current.element=T,this.clip("nonzero");const k=this.svgFactory.createElement("svg:image");k.setAttributeNS(d,"xlink:href",y),k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y",n(-m)),k.setAttributeNS(null,"width",n(_)+"px"),k.setAttributeNS(null,"height",n(m)+"px"),k.setAttributeNS(null,"transform",`scale(${n(1/_)} ${n(-1/m)})`),i?i.appendChild(k):this._ensureTransformGroup().appendChild(k)}paintImageMaskXObject(e){const i=this.current,_=e.width,m=e.height,y=i.fillColor;i.maskId="mask"+f++;const T=this.svgFactory.createElement("svg:mask");T.setAttributeNS(null,"id",i.maskId);const k=this.svgFactory.createElement("svg:rect");k.setAttributeNS(null,"x","0"),k.setAttributeNS(null,"y","0"),k.setAttributeNS(null,"width",n(_)),k.setAttributeNS(null,"height",n(m)),k.setAttributeNS(null,"fill",y),k.setAttributeNS(null,"mask",`url(#${i.maskId})`),this.defs.appendChild(T),this._ensureTransformGroup().appendChild(k),this.paintInlineImageXObject(e,T)}paintFormXObjectBegin(e,i){if(Array.isArray(e)&&6===e.length&&this.transform(e[0],e[1],e[2],e[3],e[4],e[5]),i){const _=i[2]-i[0],m=i[3]-i[1],y=this.svgFactory.createElement("svg:rect");y.setAttributeNS(null,"x",i[0]),y.setAttributeNS(null,"y",i[1]),y.setAttributeNS(null,"width",n(_)),y.setAttributeNS(null,"height",n(m)),this.current.element=y,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(e){const i=this.svgFactory.create(e.width,e.height),_=this.svgFactory.createElement("svg:defs");i.appendChild(_),this.defs=_;const m=this.svgFactory.createElement("svg:g");return m.setAttributeNS(null,"transform",c(e.transform)),i.appendChild(m),this.svg=m,i}_ensureClipGroup(){if(!this.current.clipGroup){const e=this.svgFactory.createElement("svg:g");e.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.appendChild(e),this.current.clipGroup=e}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",c(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().appendChild(this.tgrp):this.svg.appendChild(this.tgrp)),this.tgrp}}}},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.PDFNodeStream=void 0;var g=K(1),_e=K(26);const re=__webpack_require__(172),ne=__webpack_require__(2001),ee=__webpack_require__(3779),D=__webpack_require__(6558),d=/^file:\/\/\/[a-zA-Z]:\//;L.PDFNodeStream=class b{constructor(p){this.source=p,this.url=function x(f){const p=D.parse(f);return"file:"===p.protocol||p.host?p:/^[a-z]:[/\\]/i.test(f)?D.parse(`file:///${f}`):(p.host||(p.protocol="file:"),p)}(p.url),this.isHttp="http:"===this.url.protocol||"https:"===this.url.protocol,this.isFsUrl="file:"===this.url.protocol,this.httpHeaders=this.isHttp&&p.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var p,e;return null!=(e=null==(p=this._fullRequestReader)?void 0:p._loaded)?e:0}getFullReader(){return(0,g.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new c(this):new s(this),this._fullRequestReader}getRangeReader(p,e){if(e<=this._progressiveDataLength)return null;const i=this.isFsUrl?new P(this,p,e):new n(this,p,e);return this._rangeRequestReaders.push(i),i}cancelAllRequests(p){this._fullRequestReader&&this._fullRequestReader.cancel(p);for(const e of this._rangeRequestReaders.slice(0))e.cancel(p)}};class r{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=p.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=(0,g.createPromiseCapability)(),this._headersCapability=(0,g.createPromiseCapability)()}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var p=this;return _asyncToGenerator(function*(){if(yield p._readCapability.promise,p._done)return{value:void 0,done:!0};if(p._storedError)throw p._storedError;const e=p._readableStream.read();return null===e?(p._readCapability=(0,g.createPromiseCapability)(),p.read()):(p._loaded+=e.length,p.onProgress&&p.onProgress({loaded:p._loaded,total:p._contentLength}),{value:new Uint8Array(e).buffer,done:!1})})()}cancel(p){this._readableStream?this._readableStream.destroy(p):this._error(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new g.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class C{constructor(p){this._url=p.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=(0,g.createPromiseCapability)(),this._isStreamingSupported=!p.source.disableStream}get isStreamingSupported(){return this._isStreamingSupported}read(){var p=this;return _asyncToGenerator(function*(){if(yield p._readCapability.promise,p._done)return{value:void 0,done:!0};if(p._storedError)throw p._storedError;const e=p._readableStream.read();return null===e?(p._readCapability=(0,g.createPromiseCapability)(),p.read()):(p._loaded+=e.length,p.onProgress&&p.onProgress({loaded:p._loaded}),{value:new Uint8Array(e).buffer,done:!1})})()}cancel(p){this._readableStream?this._readableStream.destroy(p):this._error(p)}_error(p){this._storedError=p,this._readCapability.resolve()}_setReadableStream(p){this._readableStream=p,p.on("readable",()=>{this._readCapability.resolve()}),p.on("end",()=>{p.destroy(),this._done=!0,this._readCapability.resolve()}),p.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function o(f,p){return{protocol:f.protocol,auth:f.auth,host:f.hostname,port:f.port,path:f.path,method:"GET",headers:p}}class s extends r{constructor(p){super(p);const e=i=>{if(404===i.statusCode){const T=new g.MissingPDFException(`Missing PDF "${this._url}".`);return this._storedError=T,void this._headersCapability.reject(T)}this._headersCapability.resolve(),this._setReadableStream(i);const _=T=>this._readableStream.headers[T.toLowerCase()],{allowRangeRequests:m,suggestedLength:y}=(0,_e.validateRangeRequestCapabilities)({getResponseHeader:_,isHttp:p.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=m,this._contentLength=y||this._contentLength,this._filename=(0,_e.extractFilenameFromHeader)(_)};this._request=null,this._request="http:"===this._url.protocol?ne.request(o(this._url,p.httpHeaders),e):ee.request(o(this._url,p.httpHeaders),e),this._request.on("error",i=>{this._storedError=i,this._headersCapability.reject(i)}),this._request.end()}}class n extends C{constructor(p,e,i){super(p),this._httpHeaders={};for(const m in p.httpHeaders){const y=p.httpHeaders[m];void 0!==y&&(this._httpHeaders[m]=y)}this._httpHeaders.Range=`bytes=${e}-${i-1}`;const _=m=>{if(404!==m.statusCode)this._setReadableStream(m);else{const y=new g.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=y}};this._request=null,this._request="http:"===this._url.protocol?ne.request(o(this._url,this._httpHeaders),_):ee.request(o(this._url,this._httpHeaders),_),this._request.on("error",m=>{this._storedError=m}),this._request.end()}}class c extends r{constructor(p){super(p);let e=decodeURIComponent(this._url.path);d.test(this._url.href)&&(e=e.replace(/^\//,"")),re.lstat(e,(i,_)=>{if(i)return"ENOENT"===i.code&&(i=new g.MissingPDFException(`Missing PDF "${e}".`)),this._storedError=i,void this._headersCapability.reject(i);this._contentLength=_.size,this._setReadableStream(re.createReadStream(e)),this._headersCapability.resolve()})}}class P extends C{constructor(p,e,i){super(p);let _=decodeURIComponent(this._url.path);d.test(this._url.href)&&(_=_.replace(/^\//,"")),this._setReadableStream(re.createReadStream(_,{start:e,end:i-1}))}}},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.createResponseStatusError=function D(x,b){return 404===x||0===x&&b.startsWith("file:")?new g.MissingPDFException('Missing PDF "'+b+'".'):new g.UnexpectedResponseException(`Unexpected server response (${x}) while retrieving PDF "${b}".`,x)},L.extractFilenameFromHeader=function ee(x){const b=x("Content-Disposition");if(b){let r=(0,_e.getFilenameFromContentDispositionHeader)(b);if(r.includes("%"))try{r=decodeURIComponent(r)}catch(C){}if((0,re.isPdfFile)(r))return r}return null},L.validateRangeRequestCapabilities=function ne({getResponseHeader:x,isHttp:b,rangeChunkSize:r,disableRange:C}){const o={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(x("Content-Length"),10);return!Number.isInteger(s)||(o.suggestedLength=s,s<=2*r)||C||!b||"bytes"!==x("Accept-Ranges")||"identity"!==(x("Content-Encoding")||"identity")||(o.allowRangeRequests=!0),o},L.validateResponseStatus=function d(x){return 200===x||206===x};var g=K(1),_e=K(27),re=K(5)},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.getFilenameFromContentDispositionHeader=function _e(re){let ne=!0,ee=D("filename\\*","i").exec(re);if(ee){ee=ee[1];let s=r(ee);return s=unescape(s),s=C(s),s=o(s),x(s)}if(ee=function b(s){const n=[];let c;const P=D("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(c=P.exec(s));){let[,p,e,i]=c;if(p=parseInt(p,10),p in n){if(0===p)break}else n[p]=[e,i]}const f=[];for(let p=0;p<n.length&&p in n;++p){let[e,i]=n[p];i=r(i),e&&(i=unescape(i),0===p&&(i=C(i))),f.push(i)}return f.join("")}(re),ee)return x(o(ee));if(ee=D("filename","i").exec(re),ee){ee=ee[1];let s=r(ee);return s=o(s),x(s)}function D(s,n){return new RegExp("(?:^|;)\\s*"+s+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',n)}function d(s,n){if(s){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const c=new TextDecoder(s,{fatal:!0}),P=(0,g.stringToBytes)(n);n=c.decode(P),ne=!1}catch(c){}}return n}function x(s){return ne&&/[\x80-\xff]/.test(s)&&(s=d("utf-8",s),ne&&(s=d("iso-8859-1",s))),s}function r(s){if(s.startsWith('"')){const n=s.slice(1).split('\\"');for(let c=0;c<n.length;++c){const P=n[c].indexOf('"');-1!==P&&(n[c]=n[c].slice(0,P),n.length=c+1),n[c]=n[c].replace(/\\(.)/g,"$1")}s=n.join('"')}return s}function C(s){const n=s.indexOf("'");return-1===n?s:d(s.slice(0,n),s.slice(n+1).replace(/^[^']*'/,""))}function o(s){return!s.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(s)?s:s.replace(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(n,c,P,f){if("q"===P||"Q"===P)return d(c,f=(f=f.replace(/_/g," ")).replace(/=([0-9a-fA-F]{2})/g,function(p,e){return String.fromCharCode(parseInt(e,16))}));try{f=atob(f)}catch(p){}return d(c,f)})}return""};var g=K(1)},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.PDFNetworkStream=void 0;var g=K(1),_e=K(26);class D{constructor(C,o={}){this.url=C,this.isHttp=/^https?:/i.test(C),this.httpHeaders=this.isHttp&&o.httpHeaders||Object.create(null),this.withCredentials=o.withCredentials||!1,this.getXhr=o.getXhr||function(){return new XMLHttpRequest},this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(C,o,s){const n={begin:C,end:o};for(const c in s)n[c]=s[c];return this.request(n)}requestFull(C){return this.request(C)}request(C){const o=this.getXhr(),s=this.currXhrId++,n=this.pendingRequests[s]={xhr:o};o.open("GET",this.url),o.withCredentials=this.withCredentials;for(const c in this.httpHeaders){const P=this.httpHeaders[c];void 0!==P&&o.setRequestHeader(c,P)}return this.isHttp&&"begin"in C&&"end"in C?(o.setRequestHeader("Range",`bytes=${C.begin}-${C.end-1}`),n.expectedStatus=206):n.expectedStatus=200,o.responseType="arraybuffer",C.onError&&(o.onerror=function(c){C.onError(o.status)}),o.onreadystatechange=this.onStateChange.bind(this,s),o.onprogress=this.onProgress.bind(this,s),n.onHeadersReceived=C.onHeadersReceived,n.onDone=C.onDone,n.onError=C.onError,n.onProgress=C.onProgress,o.send(null),s}onProgress(C,o){var n;const s=this.pendingRequests[C];!s||null==(n=s.onProgress)||n.call(s,o)}onStateChange(C,o){var p,e,i;const s=this.pendingRequests[C];if(!s)return;const n=s.xhr;if(n.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),4!==n.readyState||!(C in this.pendingRequests))return;if(delete this.pendingRequests[C],0===n.status&&this.isHttp)return void(null==(p=s.onError)||p.call(s,n.status));const c=n.status||200;if((200!==c||206!==s.expectedStatus)&&c!==s.expectedStatus)return void(null==(e=s.onError)||e.call(s,n.status));const f=function ee(r){const C=r.response;return"string"!=typeof C?C:(0,g.stringToBytes)(C).buffer}(n);if(206===c){const _=n.getResponseHeader("Content-Range"),m=/bytes (\d+)-(\d+)\/(\d+)/.exec(_);s.onDone({begin:parseInt(m[1],10),chunk:f})}else f?s.onDone({begin:0,chunk:f}):null==(i=s.onError)||i.call(s,n.status)}getRequestXhr(C){return this.pendingRequests[C].xhr}isPendingRequest(C){return C in this.pendingRequests}abortRequest(C){const o=this.pendingRequests[C].xhr;delete this.pendingRequests[C],o.abort()}}L.PDFNetworkStream=class d{constructor(C){this._source=C,this._manager=new D(C.url,{httpHeaders:C.httpHeaders,withCredentials:C.withCredentials}),this._rangeChunkSize=C.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(C){const o=this._rangeRequestReaders.indexOf(C);o>=0&&this._rangeRequestReaders.splice(o,1)}getFullReader(){return(0,g.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new x(this._manager,this._source),this._fullRequestReader}getRangeReader(C,o){const s=new b(this._manager,C,o);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(C){var o;null==(o=this._fullRequestReader)||o.cancel(C);for(const s of this._rangeRequestReaders.slice(0))s.cancel(C)}};class x{constructor(C,o){this._manager=C;const s={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=o.url,this._fullRequestId=C.requestFull(s),this._headersReceivedCapability=(0,g.createPromiseCapability)(),this._disableRange=o.disableRange||!1,this._contentLength=o.length,this._rangeChunkSize=o.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const C=this._fullRequestId,o=this._manager.getRequestXhr(C),s=P=>o.getResponseHeader(P),{allowRangeRequests:n,suggestedLength:c}=(0,_e.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});n&&(this._isRangeSupported=!0),this._contentLength=c||this._contentLength,this._filename=(0,_e.extractFilenameFromHeader)(s),this._isRangeSupported&&this._manager.abortRequest(C),this._headersReceivedCapability.resolve()}_onDone(C){if(C&&(this._requests.length>0?this._requests.shift().resolve({value:C.chunk,done:!1}):this._cachedChunks.push(C.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(C){this._storedError=(0,_e.createResponseStatusError)(C,this._url),this._headersReceivedCapability.reject(this._storedError);for(const o of this._requests)o.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(C){var o;null==(o=this.onProgress)||o.call(this,{loaded:C.loaded,total:C.lengthComputable?C.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}read(){var C=this;return _asyncToGenerator(function*(){if(C._storedError)throw C._storedError;if(C._cachedChunks.length>0)return{value:C._cachedChunks.shift(),done:!1};if(C._done)return{value:void 0,done:!0};const o=(0,g.createPromiseCapability)();return C._requests.push(o),o.promise})()}cancel(C){this._done=!0,this._headersReceivedCapability.reject(C);for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class b{constructor(C,o,s){this._manager=C;const n={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=C.url,this._requestId=C.requestRange(o,s,n),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var C;null==(C=this.onClosed)||C.call(this,this)}_onDone(C){const o=C.chunk;this._requests.length>0?this._requests.shift().resolve({value:o,done:!1}):this._queuedChunk=o,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(C){this._storedError=(0,_e.createResponseStatusError)(C,this._url);for(const o of this._requests)o.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(C){var o;this.isStreamingSupported||null==(o=this.onProgress)||o.call(this,{loaded:C.loaded})}get isStreamingSupported(){return!1}read(){var C=this;return _asyncToGenerator(function*(){if(C._storedError)throw C._storedError;if(null!==C._queuedChunk){const s=C._queuedChunk;return C._queuedChunk=null,{value:s,done:!1}}if(C._done)return{value:void 0,done:!0};const o=(0,g.createPromiseCapability)();return C._requests.push(o),o.promise})()}cancel(C){this._done=!0;for(const o of this._requests)o.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(be,L,K)=>{Object.defineProperty(L,"__esModule",{value:!0}),L.PDFFetchStream=void 0;var g=K(1),_e=K(26);function re(x,b,r){return{method:"GET",headers:x,signal:null==r?void 0:r.signal,mode:"cors",credentials:b?"include":"same-origin",redirect:"follow"}}function ne(x){const b=new Headers;for(const r in x){const C=x[r];void 0!==C&&b.append(r,C)}return b}L.PDFFetchStream=class ee{constructor(b){this.source=b,this.isHttp=/^https?:/i.test(b.url),this.httpHeaders=this.isHttp&&b.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var b,r;return null!=(r=null==(b=this._fullRequestReader)?void 0:b._loaded)?r:0}getFullReader(){return(0,g.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new D(this),this._fullRequestReader}getRangeReader(b,r){if(r<=this._progressiveDataLength)return null;const C=new d(this,b,r);return this._rangeRequestReaders.push(C),C}cancelAllRequests(b){this._fullRequestReader&&this._fullRequestReader.cancel(b);for(const r of this._rangeRequestReaders.slice(0))r.cancel(b)}};class D{constructor(b){this._stream=b,this._reader=null,this._loaded=0,this._filename=null;const r=b.source;this._withCredentials=r.withCredentials||!1,this._contentLength=r.length,this._headersCapability=(0,g.createPromiseCapability)(),this._disableRange=r.disableRange||!1,this._rangeChunkSize=r.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._isStreamingSupported=!r.disableStream,this._isRangeSupported=!r.disableRange,this._headers=ne(this._stream.httpHeaders);const C=r.url;fetch(C,re(this._headers,this._withCredentials,this._abortController)).then(o=>{if(!(0,_e.validateResponseStatus)(o.status))throw(0,_e.createResponseStatusError)(o.status,C);this._reader=o.body.getReader(),this._headersCapability.resolve();const s=P=>o.headers.get(P),{allowRangeRequests:n,suggestedLength:c}=(0,_e.validateRangeRequestCapabilities)({getResponseHeader:s,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=n,this._contentLength=c||this._contentLength,this._filename=(0,_e.extractFilenameFromHeader)(s),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new g.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}read(){var b=this;return _asyncToGenerator(function*(){yield b._headersCapability.promise;const{value:r,done:C}=yield b._reader.read();return C?{value:r,done:C}:(b._loaded+=r.byteLength,b.onProgress&&b.onProgress({loaded:b._loaded,total:b._contentLength}),{value:new Uint8Array(r).buffer,done:!1})})()}cancel(b){this._reader&&this._reader.cancel(b),this._abortController&&this._abortController.abort()}}class d{constructor(b,r,C){this._stream=b,this._reader=null,this._loaded=0;const o=b.source;this._withCredentials=o.withCredentials||!1,this._readCapability=(0,g.createPromiseCapability)(),this._isStreamingSupported=!o.disableStream,"undefined"!=typeof AbortController&&(this._abortController=new AbortController),this._headers=ne(this._stream.httpHeaders),this._headers.append("Range",`bytes=${r}-${C-1}`);const s=o.url;fetch(s,re(this._headers,this._withCredentials,this._abortController)).then(n=>{if(!(0,_e.validateResponseStatus)(n.status))throw(0,_e.createResponseStatusError)(n.status,s);this._readCapability.resolve(),this._reader=n.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}read(){var b=this;return _asyncToGenerator(function*(){yield b._readCapability.promise;const{value:r,done:C}=yield b._reader.read();return C?{value:r,done:C}:(b._loaded+=r.byteLength,b.onProgress&&b.onProgress({loaded:b._loaded}),{value:new Uint8Array(r).buffer,done:!1})})()}cancel(b){this._reader&&this._reader.cancel(b),this._abortController&&this._abortController.abort()}}}],__webpack_module_cache__={};function __w_pdfjs_require__(be){var L=__webpack_module_cache__[be];if(void 0!==L)return L.exports;var K=__webpack_module_cache__[be]={exports:{}};return __webpack_modules__[be](K,K.exports,__w_pdfjs_require__),K.exports}var __webpack_exports__={};return(()=>{var be=__webpack_exports__;Object.defineProperty(be,"__esModule",{value:!0}),Object.defineProperty(be,"AnnotationLayer",{enumerable:!0,get:function(){return _e.AnnotationLayer}}),Object.defineProperty(be,"AnnotationMode",{enumerable:!0,get:function(){return L.AnnotationMode}}),Object.defineProperty(be,"CMapCompressionType",{enumerable:!0,get:function(){return L.CMapCompressionType}}),Object.defineProperty(be,"GlobalWorkerOptions",{enumerable:!0,get:function(){return re.GlobalWorkerOptions}}),Object.defineProperty(be,"InvalidPDFException",{enumerable:!0,get:function(){return L.InvalidPDFException}}),Object.defineProperty(be,"LoopbackPort",{enumerable:!0,get:function(){return K.LoopbackPort}}),Object.defineProperty(be,"MissingPDFException",{enumerable:!0,get:function(){return L.MissingPDFException}}),Object.defineProperty(be,"OPS",{enumerable:!0,get:function(){return L.OPS}}),Object.defineProperty(be,"PDFDataRangeTransport",{enumerable:!0,get:function(){return K.PDFDataRangeTransport}}),Object.defineProperty(be,"PDFDateString",{enumerable:!0,get:function(){return g.PDFDateString}}),Object.defineProperty(be,"PDFWorker",{enumerable:!0,get:function(){return K.PDFWorker}}),Object.defineProperty(be,"PasswordResponses",{enumerable:!0,get:function(){return L.PasswordResponses}}),Object.defineProperty(be,"PermissionFlag",{enumerable:!0,get:function(){return L.PermissionFlag}}),Object.defineProperty(be,"PixelsPerInch",{enumerable:!0,get:function(){return g.PixelsPerInch}}),Object.defineProperty(be,"RenderingCancelledException",{enumerable:!0,get:function(){return g.RenderingCancelledException}}),Object.defineProperty(be,"SVGGraphics",{enumerable:!0,get:function(){return D.SVGGraphics}}),Object.defineProperty(be,"UNSUPPORTED_FEATURES",{enumerable:!0,get:function(){return L.UNSUPPORTED_FEATURES}}),Object.defineProperty(be,"UnexpectedResponseException",{enumerable:!0,get:function(){return L.UnexpectedResponseException}}),Object.defineProperty(be,"Util",{enumerable:!0,get:function(){return L.Util}}),Object.defineProperty(be,"VerbosityLevel",{enumerable:!0,get:function(){return L.VerbosityLevel}}),Object.defineProperty(be,"XfaLayer",{enumerable:!0,get:function(){return d.XfaLayer}}),Object.defineProperty(be,"build",{enumerable:!0,get:function(){return K.build}}),Object.defineProperty(be,"createPromiseCapability",{enumerable:!0,get:function(){return L.createPromiseCapability}}),Object.defineProperty(be,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return L.createValidAbsoluteUrl}}),Object.defineProperty(be,"getDocument",{enumerable:!0,get:function(){return K.getDocument}}),Object.defineProperty(be,"getFilenameFromUrl",{enumerable:!0,get:function(){return g.getFilenameFromUrl}}),Object.defineProperty(be,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return g.getPdfFilenameFromUrl}}),Object.defineProperty(be,"getXfaPageViewport",{enumerable:!0,get:function(){return g.getXfaPageViewport}}),Object.defineProperty(be,"isPdfFile",{enumerable:!0,get:function(){return g.isPdfFile}}),Object.defineProperty(be,"loadScript",{enumerable:!0,get:function(){return g.loadScript}}),Object.defineProperty(be,"renderTextLayer",{enumerable:!0,get:function(){return ee.renderTextLayer}}),Object.defineProperty(be,"shadow",{enumerable:!0,get:function(){return L.shadow}}),Object.defineProperty(be,"version",{enumerable:!0,get:function(){return K.version}});var L=__w_pdfjs_require__(1),K=__w_pdfjs_require__(4),g=__w_pdfjs_require__(5),_e=__w_pdfjs_require__(20),re=__w_pdfjs_require__(13),ne=__w_pdfjs_require__(3),ee=__w_pdfjs_require__(23),D=__w_pdfjs_require__(24),d=__w_pdfjs_require__(22);if(ne.isNodeJS){const{PDFNodeStream:r}=__w_pdfjs_require__(25);(0,K.setPDFNetworkStreamFactory)(C=>new r(C))}else{const{PDFNetworkStream:r}=__w_pdfjs_require__(28),{PDFFetchStream:C}=__w_pdfjs_require__(29);(0,K.setPDFNetworkStreamFactory)(o=>(0,g.isValidFetchUrl)(o.url)?new C(o):new r(o))}})(),__webpack_exports__})(),module.exports=K()},2813:function(be,L,K){var ne,g=K(8926).default;ne=()=>(()=>{"use strict";var _e=[,(D,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.DefaultXfaLayerFactory=d.DefaultTextLayerFactory=d.DefaultStructTreeLayerFactory=d.DefaultAnnotationLayerFactory=void 0;var b=x(2),r=x(4),C=x(5),o=x(7),s=x(8),n=x(9);d.DefaultAnnotationLayerFactory=class c{createAnnotationLayerBuilder(i,_,m=null,y="",T=!0,k=r.NullL10n,O=!1,V=null,G=null,X=null,Q=null){return new b.AnnotationLayerBuilder({pageDiv:i,pdfPage:_,imageResourcesPath:y,renderForms:T,linkService:new C.SimpleLinkService,l10n:k,annotationStorage:m,enableScripting:O,hasJSActionsPromise:V,fieldObjectsPromise:X,mouseState:G,annotationCanvasMap:Q})}},d.DefaultStructTreeLayerFactory=class P{createStructTreeLayerBuilder(i){return new o.StructTreeLayerBuilder({pdfPage:i})}},d.DefaultTextLayerFactory=class f{createTextLayerBuilder(i,_,m,y=!1,T,k){return new s.TextLayerBuilder({textLayerDiv:i,pageIndex:_,viewport:m,enhanceTextSelection:y,eventBus:T,highlighter:k})}},d.DefaultXfaLayerFactory=class p{createXfaLayerBuilder(i,_,m=null,y=null){return new n.XfaLayerBuilder({pageDiv:i,pdfPage:_,annotationStorage:m,linkService:new C.SimpleLinkService,xfaHtml:y})}}},(D,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.AnnotationLayerBuilder=void 0;var b=x(3),r=x(4);d.AnnotationLayerBuilder=class C{constructor({pageDiv:s,pdfPage:n,linkService:c,downloadManager:P,annotationStorage:f=null,imageResourcesPath:p="",renderForms:e=!0,l10n:i=r.NullL10n,enableScripting:_=!1,hasJSActionsPromise:m=null,fieldObjectsPromise:y=null,mouseState:T=null,annotationCanvasMap:k=null}){this.pageDiv=s,this.pdfPage=n,this.linkService=c,this.downloadManager=P,this.imageResourcesPath=p,this.renderForms=e,this.l10n=i,this.annotationStorage=f,this.enableScripting=_,this._hasJSActionsPromise=m,this._fieldObjectsPromise=y,this._mouseState=T,this._annotationCanvasMap=k,this.div=null,this._cancelled=!1}render(s,n="display"){var c=this;return g(function*(){const[P,f=!1,p=null]=yield Promise.all([c.pdfPage.getAnnotations({intent:n}),c._hasJSActionsPromise,c._fieldObjectsPromise]);if(c._cancelled||0===P.length)return;const e={viewport:s.clone({dontFlip:!0}),div:c.div,annotations:P,page:c.pdfPage,imageResourcesPath:c.imageResourcesPath,renderForms:c.renderForms,linkService:c.linkService,downloadManager:c.downloadManager,annotationStorage:c.annotationStorage,enableScripting:c.enableScripting,hasJSActions:f,fieldObjects:p,mouseState:c._mouseState,annotationCanvasMap:c._annotationCanvasMap};c.div?b.AnnotationLayer.update(e):(c.div=document.createElement("div"),c.div.className="annotationLayer",c.pageDiv.appendChild(c.div),e.div=c.div,b.AnnotationLayer.render(e),c.l10n.translate(c.div))})()}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}},D=>{let d;d="undefined"!=typeof window&&window["pdfjs-dist/build/pdf"]?window["pdfjs-dist/build/pdf"]:K(6036),D.exports=d},(D,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.NullL10n=void 0,d.fixupLangCode=function C(n){return r[null==n?void 0:n.toLowerCase()]||n},d.getL10nFallback=b;const x={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} \xd7 {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} \xd7 {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",print_progress_percent:"{{progress}}%","toggle_sidebar.title":"Toggle Sidebar","toggle_sidebar_notification2.title":"Toggle Sidebar (document contains outline/attachments/layers)",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",error_version_info:"PDF.js v{{version}} (build: {{build}})",error_message:"Message: {{message}}",error_stack:"Stack: {{stack}}",error_file:"File: {{file}}",error_line:"Line: {{line}}",rendering_error:"An error occurred while rendering the page.",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading:"Loading\u2026",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts."};function b(n,c){switch(n){case"find_match_count":n=`find_match_count[${1===c.total?"one":"other"}]`;break;case"find_match_count_limit":n=`find_match_count_limit[${1===c.limit?"one":"other"}]`}return x[n]||""}const r={en:"en-US",es:"es-ES",fy:"fy-NL",ga:"ga-IE",gu:"gu-IN",hi:"hi-IN",hy:"hy-AM",nb:"nb-NO",ne:"ne-NP",nn:"nn-NO",pa:"pa-IN",pt:"pt-PT",sv:"sv-SE",zh:"zh-CN"};d.NullL10n={getLanguage:()=>g(function*(){return"en-us"})(),getDirection:()=>g(function*(){return"ltr"})(),get:(n,c=null,P=b(n,c))=>g(function*(){return function o(n,c){return c?n.replace(/\{\{\s*(\w+)\s*\}\}/g,(P,f)=>f in c?c[f]:"{{"+f+"}}"):n}(P,c)})(),translate:n=>g(function*(){})()}},(D,d,x)=>{var c,P,st,p,bt;Object.defineProperty(d,"__esModule",{value:!0}),d.SimpleLinkService=d.PDFLinkService=d.LinkTarget=void 0;var b=x(6);const C={NONE:0,SELF:1,BLANK:2,PARENT:3,TOP:4};function o(_,{url:m,target:y,rel:T,enabled:k=!0}={}){if(!m||"string"!=typeof m)throw new Error('A valid "url" parameter must provided.');const O=(0,b.removeNullCharacters)(m);k?_.href=_.title=O:(_.href="",_.title=`Disabled: ${O}`,_.onclick=()=>!1);let V="";switch(y){case C.NONE:break;case C.SELF:V="_self";break;case C.BLANK:V="_blank";break;case C.PARENT:V="_parent";break;case C.TOP:V="_top"}_.target=V,_.rel="string"==typeof T?T:"noopener noreferrer nofollow"}d.LinkTarget=C;const i=class{constructor({eventBus:m,externalLinkTarget:y=null,externalLinkRel:T=null,ignoreDestinationZoom:k=!1}={}){Ee(this,P),Ee(this,c,new Map),this.eventBus=m,this.externalLinkTarget=y,this.externalLinkRel=T,this.externalLinkEnabled=!0,this._ignoreDestinationZoom=k,this.baseUrl=null,this.pdfDocument=null,this.pdfViewer=null,this.pdfHistory=null}setDocument(m,y=null){this.baseUrl=y,this.pdfDocument=m,Ce(this,c).clear()}setViewer(m){this.pdfViewer=m}setHistory(m){this.pdfHistory=m}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return this.pdfViewer.currentPageNumber}set page(m){this.pdfViewer.currentPageNumber=m}get rotation(){return this.pdfViewer.pagesRotation}set rotation(m){this.pdfViewer.pagesRotation=m}goToDestination(m){var y=this;return g(function*(){var O;if(!y.pdfDocument)return;let T,k;"string"==typeof m?(T=m,k=yield y.pdfDocument.getDestination(m)):(T=null,k=yield m),Array.isArray(k)?xe(O=y,P,st).call(O,m,T,k):console.error(`PDFLinkService.goToDestination: "${k}" is not a valid destination array, for dest="${m}".`)})()}goToPage(m){if(!this.pdfDocument)return;const y="string"==typeof m&&this.pdfViewer.pageLabelToPageNumber(m)||0|m;Number.isInteger(y)&&y>0&&y<=this.pagesCount?(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.pushPage(y)),this.pdfViewer.scrollPageIntoView({pageNumber:y})):console.error(`PDFLinkService.goToPage: "${m}" is not a valid page.`)}addLinkAttributes(m,y,T=!1){o(m,{url:y,target:T?C.BLANK:this.externalLinkTarget,rel:this.externalLinkRel,enabled:this.externalLinkEnabled})}getDestinationHash(m){if("string"==typeof m){if(m.length>0)return this.getAnchorUrl("#"+escape(m))}else if(Array.isArray(m)){const y=JSON.stringify(m);if(y.length>0)return this.getAnchorUrl("#"+escape(y))}return this.getAnchorUrl("")}getAnchorUrl(m){return(this.baseUrl||"")+m}setHash(m){var k;if(!this.pdfDocument)return;let y,T;if(m.includes("=")){const O=(0,b.parseQueryString)(m);if(O.has("search")&&this.eventBus.dispatch("findfromurlhash",{source:this,query:O.get("search").replace(/"/g,""),phraseSearch:"true"===O.get("phrase")}),O.has("page")&&(y=0|O.get("page")||1),O.has("zoom")){const V=O.get("zoom").split(","),G=V[0],X=parseFloat(G);G.includes("Fit")?"Fit"===G||"FitB"===G?T=[null,{name:G}]:"FitH"===G||"FitBH"===G||"FitV"===G||"FitBV"===G?T=[null,{name:G},V.length>1?0|V[1]:null]:"FitR"===G?5!==V.length?console.error('PDFLinkService.setHash: Not enough parameters for "FitR".'):T=[null,{name:G},0|V[1],0|V[2],0|V[3],0|V[4]]:console.error(`PDFLinkService.setHash: "${G}" is not a valid zoom value.`):T=[null,{name:"XYZ"},V.length>1?0|V[1]:null,V.length>2?0|V[2]:null,X?X/100:G]}T?this.pdfViewer.scrollPageIntoView({pageNumber:y||this.page,destArray:T,allowNegativeOffset:!0}):y&&(this.page=y),O.has("pagemode")&&this.eventBus.dispatch("pagemode",{source:this,mode:O.get("pagemode")}),O.has("nameddest")&&this.goToDestination(O.get("nameddest"))}else{T=unescape(m);try{T=JSON.parse(T),Array.isArray(T)||(T=T.toString())}catch(O){}if("string"==typeof T||xe(k=i,p,bt).call(k,T))return void this.goToDestination(T);console.error(`PDFLinkService.setHash: "${unescape(m)}" is not a valid destination.`)}}executeNamedAction(m){var y,T;switch(m){case"GoBack":null==(y=this.pdfHistory)||y.back();break;case"GoForward":null==(T=this.pdfHistory)||T.forward();break;case"NextPage":this.pdfViewer.nextPage();break;case"PrevPage":this.pdfViewer.previousPage();break;case"LastPage":this.page=this.pagesCount;break;case"FirstPage":this.page=1}this.eventBus.dispatch("namedaction",{source:this,action:m})}cachePageRef(m,y){if(!y)return;const T=0===y.gen?`${y.num}R`:`${y.num}R${y.gen}`;Ce(this,c).set(T,m)}_cachedPageNumber(m){if(!m)return null;const y=0===m.gen?`${m.num}R`:`${m.num}R${m.gen}`;return Ce(this,c).get(y)||null}isPageVisible(m){return this.pdfViewer.isPageVisible(m)}isPageCached(m){return this.pdfViewer.isPageCached(m)}};let s=i;c=new WeakMap,P=new WeakSet,st=function(m,y=null,T){const k=T[0];let O;if("object"==typeof k&&null!==k){if(O=this._cachedPageNumber(k),!O)return void this.pdfDocument.getPageIndex(k).then(V=>{this.cachePageRef(V+1,k),xe(this,P,st).call(this,m,y,T)}).catch(()=>{console.error(`PDFLinkService.#goToDestinationHelper: "${k}" is not a valid page reference, for dest="${m}".`)})}else{if(!Number.isInteger(k))return void console.error(`PDFLinkService.#goToDestinationHelper: "${k}" is not a valid destination reference, for dest="${m}".`);O=k+1}!O||O<1||O>this.pagesCount?console.error(`PDFLinkService.#goToDestinationHelper: "${O}" is not a valid page number, for dest="${m}".`):(this.pdfHistory&&(this.pdfHistory.pushCurrentPosition(),this.pdfHistory.push({namedDest:y,explicitDest:T,pageNumber:O})),this.pdfViewer.scrollPageIntoView({pageNumber:O,destArray:T,ignoreDestinationZoom:this._ignoreDestinationZoom}))},p=new WeakSet,bt=function(m){if(!Array.isArray(m))return!1;const y=m.length;if(y<2)return!1;const T=m[0];if(!("object"==typeof T&&Number.isInteger(T.num)&&Number.isInteger(T.gen)||Number.isInteger(T)&&T>=0))return!1;const k=m[1];if("object"!=typeof k||"string"!=typeof k.name)return!1;let O=!0;switch(k.name){case"XYZ":if(5!==y)return!1;break;case"Fit":case"FitB":return 2===y;case"FitH":case"FitBH":case"FitV":case"FitBV":if(3!==y)return!1;break;case"FitR":if(6!==y)return!1;O=!1;break;default:return!1}for(let V=2;V<y;V++){const G=m[V];if(!("number"==typeof G||O&&null===G))return!1}return!0},Ee(s,p),d.PDFLinkService=s,d.SimpleLinkService=class n{constructor(){this.externalLinkEnabled=!0}get pagesCount(){return 0}get page(){return 0}set page(m){}get rotation(){return 0}set rotation(m){}goToDestination(m){return g(function*(){})()}goToPage(m){}addLinkAttributes(m,y,T=!1){o(m,{url:y,enabled:this.externalLinkEnabled})}getDestinationHash(m){return"#"}getAnchorUrl(m){return"#"}setHash(m){}executeNamedAction(m){}cachePageRef(m,y){}isPageVisible(m){return!0}isPageCached(m){return!0}}},(D,d)=>{var ue,At;Object.defineProperty(d,"__esModule",{value:!0}),d.animationStarted=d.VERTICAL_PADDING=d.UNKNOWN_SCALE=d.TextLayerMode=d.SpreadMode=d.SidebarView=d.ScrollMode=d.SCROLLBAR_PADDING=d.RenderingStates=d.RendererType=d.ProgressBar=d.PresentationModeState=d.OutputScale=d.MIN_SCALE=d.MAX_SCALE=d.MAX_AUTO_SCALE=d.DEFAULT_SCALE_VALUE=d.DEFAULT_SCALE_DELTA=d.DEFAULT_SCALE=d.AutoPrintRegExp=void 0,d.apiPageLayoutToViewerModes=function Y(te){let ce=m.VERTICAL,oe=y.NONE;switch(te){case"SinglePage":ce=m.PAGE;break;case"OneColumn":break;case"TwoPageLeft":ce=m.PAGE;case"TwoColumnLeft":oe=y.ODD;break;case"TwoPageRight":ce=m.PAGE;case"TwoColumnRight":oe=y.EVEN}return{scrollMode:ce,spreadMode:oe}},d.apiPageModeToSidebarView=function Z(te){switch(te){case"UseNone":return e.NONE;case"UseThumbs":return e.THUMBS;case"UseOutlines":return e.OUTLINE;case"UseAttachments":return e.ATTACHMENTS;case"UseOC":return e.LAYERS}return e.NONE},d.approximateFraction=function J(te){if(Math.floor(te)===te)return[te,1];const ce=1/te;if(ce>8)return[1,8];if(Math.floor(ce)===ce)return[1,ce];const w=te>1?ce:te;let me,I=0,q=1,ge=1,fe=1;for(;;){const ve=I+ge,Se=q+fe;if(Se>8)break;w<=ve/Se?(ge=ve,fe=Se):(I=ve,q=Se)}return me=w-I/q<ge/fe-w?w===te?[I,q]:[q,I]:w===te?[ge,fe]:[fe,ge],me},d.backtrackBeforeAllVisibleElements=M,d.binarySearchFirstItem=$,d.getActiveOrFocusedElement=function z(){let te=document,ce=te.activeElement||te.querySelector(":focus");for(;null==ce?void 0:ce.shadowRoot;)te=ce.shadowRoot,ce=te.activeElement||te.querySelector(":focus");return ce},d.getPageSizeInches=function de({view:te,userUnit:ce,rotate:oe}){const[w,I,q,ge]=te,fe=oe%180!=0,me=(q-w)/72*ce,ve=(ge-I)/72*ce;return{width:fe?ve:me,height:fe?me:ve}},d.getVisibleElements=function a({scrollEl:te,views:ce,sortByVisibility:oe=!1,horizontal:w=!1,rtl:I=!1}){const q=te.scrollTop,ge=q+te.clientHeight,fe=te.scrollLeft,me=fe+te.clientWidth,Te=[],Le=new Set,ke=ce.length;let se=$(ce,w?function Se(pe){const N=pe.div,ie=N.offsetLeft+N.clientLeft;return I?ie<me:ie+N.clientWidth>fe}:function ve(pe){const N=pe.div;return N.offsetTop+N.clientTop+N.clientHeight>q});se>0&&se<ke&&!w&&(se=M(se,ce,q));let R=w?me:-1;for(let pe=se;pe<ke;pe++){const N=ce[pe],ie=N.div,v=ie.offsetLeft+ie.clientLeft,W=ie.offsetTop+ie.clientTop,le=ie.clientWidth,Ae=ie.clientHeight,Pe=v+le,we=W+Ae;if(-1===R)we>=ge&&(R=we);else if((w?v:W)>R)break;if(we<=q||W>=ge||Pe<=fe||v>=me)continue;const Re=Math.max(0,q-W)+Math.max(0,we-ge),Ve=(le-(Math.max(0,fe-v)+Math.max(0,Pe-me)))/le;Te.push({id:N.id,x:v,y:W,view:N,percent:(Ae-Re)/Ae*Ve*100|0,widthPercent:100*Ve|0}),Le.add(N.id)}const F=Te[0],he=Te[Te.length-1];return oe&&Te.sort(function(pe,N){const ie=pe.percent-N.percent;return Math.abs(ie)>.001?-ie:pe.id-N.id}),{first:F,last:he,views:Te,ids:Le}},d.isPortraitOrientation=function E(te){return te.width<=te.height},d.isValidRotation=function h(te){return Number.isInteger(te)&&te%90==0},d.isValidScrollMode=function S(te){return Number.isInteger(te)&&Object.values(m).includes(te)&&te!==m.UNKNOWN},d.isValidSpreadMode=function A(te){return Number.isInteger(te)&&Object.values(y).includes(te)&&te!==y.UNKNOWN},d.noContextMenuHandler=function u(te){te.preventDefault()},d.normalizeWheelEventDelta=function l(te){let ce=t(te);return 0===te.deltaMode?ce/=900:1===te.deltaMode&&(ce/=30),ce},d.normalizeWheelEventDirection=t,d.parseQueryString=function G(te){const ce=new Map;for(const[oe,w]of new URLSearchParams(te))ce.set(oe.toLowerCase(),w);return ce},d.removeNullCharacters=function B(te,ce=!1){return"string"!=typeof te?(console.error("The argument must be a string."),te):(ce&&(te=te.replace(Q," ")),te.replace(X,""))},d.roundToDivide=function ae(te,ce){const oe=te%ce;return 0===oe?te:Math.round(te-oe+ce)},d.scrollIntoView=function O(te,ce,oe=!1){let w=te.offsetParent;if(!w)return void console.error("offsetParent is not set -- cannot scroll");let I=te.offsetTop+te.clientTop,q=te.offsetLeft+te.clientLeft;for(;w.clientHeight===w.scrollHeight&&w.clientWidth===w.scrollWidth||oe&&(w.classList.contains("markedContent")||"hidden"===getComputedStyle(w).overflow);)if(I+=w.offsetTop,q+=w.offsetLeft,w=w.offsetParent,!w)return;ce&&(void 0!==ce.top&&(I+=ce.top),void 0!==ce.left&&(q+=ce.left,w.scrollLeft=q)),w.scrollTop=I},d.watchScroll=function V(te,ce){const oe=function(q){I||(I=window.requestAnimationFrame(function(){I=null;const fe=te.scrollLeft,me=w.lastX;fe!==me&&(w.right=fe>me),w.lastX=fe;const ve=te.scrollTop,Se=w.lastY;ve!==Se&&(w.down=ve>Se),w.lastY=ve,ce(w)}))},w={right:!0,down:!0,lastX:te.scrollLeft,lastY:te.scrollTop,_eventHandler:oe};let I=null;return te.addEventListener("scroll",oe,!0),w},d.DEFAULT_SCALE_VALUE="auto",d.DEFAULT_SCALE=1,d.DEFAULT_SCALE_DELTA=1.1,d.MIN_SCALE=.1,d.MAX_SCALE=10,d.UNKNOWN_SCALE=0,d.MAX_AUTO_SCALE=1.25,d.SCROLLBAR_PADDING=40,d.VERTICAL_PADDING=5,d.RenderingStates={INITIAL:0,RUNNING:1,PAUSED:2,FINISHED:3},d.PresentationModeState={UNKNOWN:0,NORMAL:1,CHANGING:2,FULLSCREEN:3};const e={UNKNOWN:-1,NONE:0,THUMBS:1,OUTLINE:2,ATTACHMENTS:3,LAYERS:4};d.SidebarView=e,d.RendererType={CANVAS:"canvas",SVG:"svg"},d.TextLayerMode={DISABLE:0,ENABLE:1,ENABLE_ENHANCE:2};const m={UNKNOWN:-1,VERTICAL:0,HORIZONTAL:1,WRAPPED:2,PAGE:3};d.ScrollMode=m;const y={UNKNOWN:-1,NONE:0,ODD:1,EVEN:2};d.SpreadMode=y,d.AutoPrintRegExp=/\bprint\s*\(/,d.OutputScale=class k{constructor(){const ce=window.devicePixelRatio||1;this.sx=ce,this.sy=ce}get scaled(){return 1!==this.sx||1!==this.sy}};const X=/\x00/g,Q=/[\x01-\x1F]/g;function $(te,ce,oe=0){let w=oe,I=te.length-1;if(I<0||!ce(te[I]))return te.length;if(ce(te[w]))return w;for(;w<I;){const q=w+I>>1;ce(te[q])?I=q:w=q+1}return w}function M(te,ce,oe){if(te<2)return te;let w=ce[te].div,I=w.offsetTop+w.clientTop;I>=oe&&(w=ce[te-1].div,I=w.offsetTop+w.clientTop);for(let q=te-2;q>=0&&(w=ce[q].div,!(w.offsetTop+w.clientTop+w.clientHeight<=I));--q)te=q;return te}function t(te){let ce=Math.hypot(te.deltaX,te.deltaY);const oe=Math.atan2(te.deltaY,te.deltaX);return-.25*Math.PI<oe&&oe<.75*Math.PI&&(ce=-ce),ce}const j=new Promise(function(te){window.requestAnimationFrame(te)});d.animationStarted=j,ue=new WeakSet,At=function(){this._indeterminate?this.div.classList.add("indeterminate"):(this.div.classList.remove("indeterminate"),document.documentElement.style.setProperty("--progressBar-percent",`${this._percent}%`))},d.ProgressBar=class H{constructor(ce){if(Ee(this,ue),arguments.length>1)throw new Error("ProgressBar no longer accepts any additional options, please use CSS rules to modify its appearance instead.");this.visible=!0,this.div=document.querySelector(ce+" .progress"),this.bar=this.div.parentNode,this.percent=0}get percent(){return this._percent}set percent(ce){this._indeterminate=isNaN(ce),this._percent=function U(te,ce,oe){return Math.min(Math.max(te,ce),oe)}(ce,0,100),xe(this,ue,At).call(this)}setWidth(ce){if(!ce)return;const w=ce.parentNode.offsetWidth-ce.offsetWidth;w>0&&document.documentElement.style.setProperty("--progressBar-end-offset",`${w}px`)}hide(){!this.visible||(this.visible=!1,this.bar.classList.add("hidden"))}show(){this.visible||(this.visible=!0,this.bar.classList.remove("hidden"))}}},(D,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.StructTreeLayerBuilder=void 0;const x={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},b=/^H(\d+)$/;d.StructTreeLayerBuilder=class r{constructor({pdfPage:o}){this.pdfPage=o}render(o){return this._walk(o)}_setAttributes(o,s){void 0!==o.alt&&s.setAttribute("aria-label",o.alt),void 0!==o.id&&s.setAttribute("aria-owns",o.id),void 0!==o.lang&&s.setAttribute("lang",o.lang)}_walk(o){if(!o)return null;const s=document.createElement("span");if("role"in o){const{role:n}=o,c=n.match(b);c?(s.setAttribute("role","heading"),s.setAttribute("aria-level",c[1])):x[n]&&s.setAttribute("role",x[n])}if(this._setAttributes(o,s),o.children)if(1===o.children.length&&"id"in o.children[0])this._setAttributes(o.children[0],s);else for(const n of o.children)s.appendChild(this._walk(n));return s}}},(D,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TextLayerBuilder=void 0;var b=x(3);d.TextLayerBuilder=class C{constructor({textLayerDiv:s,eventBus:n,pageIndex:c,viewport:P,highlighter:f=null,enhanceTextSelection:p=!1}){this.textLayerDiv=s,this.eventBus=n,this.textContent=null,this.textContentItemsStr=[],this.textContentStream=null,this.renderingDone=!1,this.pageNumber=c+1,this.viewport=P,this.textDivs=[],this.textLayerRenderTask=null,this.highlighter=f,this.enhanceTextSelection=p,this._bindMouse()}_finishRendering(){if(this.renderingDone=!0,!this.enhanceTextSelection){const s=document.createElement("div");s.className="endOfContent",this.textLayerDiv.appendChild(s)}this.eventBus.dispatch("textlayerrendered",{source:this,pageNumber:this.pageNumber,numTextDivs:this.textDivs.length})}render(s=0){var c;if(!this.textContent&&!this.textContentStream||this.renderingDone)return;this.cancel(),this.textDivs.length=0,null==(c=this.highlighter)||c.setTextMapping(this.textDivs,this.textContentItemsStr);const n=document.createDocumentFragment();this.textLayerRenderTask=(0,b.renderTextLayer)({textContent:this.textContent,textContentStream:this.textContentStream,container:n,viewport:this.viewport,textDivs:this.textDivs,textContentItemsStr:this.textContentItemsStr,timeout:s,enhanceTextSelection:this.enhanceTextSelection}),this.textLayerRenderTask.promise.then(()=>{var P;this.textLayerDiv.appendChild(n),this._finishRendering(),null==(P=this.highlighter)||P.enable()},function(P){})}cancel(){var s;this.textLayerRenderTask&&(this.textLayerRenderTask.cancel(),this.textLayerRenderTask=null),null==(s=this.highlighter)||s.disable()}setTextContentStream(s){this.cancel(),this.textContentStream=s}setTextContent(s){this.cancel(),this.textContent=s}_bindMouse(){const s=this.textLayerDiv;let n=null;s.addEventListener("mousedown",c=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return this.textLayerRenderTask.expandTextDivs(!0),void(n&&(clearTimeout(n),n=null));const P=s.querySelector(".endOfContent");if(!P)return;let f=c.target!==s;if(f=f&&"none"!==window.getComputedStyle(P).getPropertyValue("-moz-user-select"),f){const p=s.getBoundingClientRect(),e=Math.max(0,(c.pageY-p.top)/p.height);P.style.top=(100*e).toFixed(2)+"%"}P.classList.add("active")}),s.addEventListener("mouseup",()=>{if(this.enhanceTextSelection&&this.textLayerRenderTask)return void(n=setTimeout(()=>{this.textLayerRenderTask&&this.textLayerRenderTask.expandTextDivs(!1),n=null},300));const c=s.querySelector(".endOfContent");!c||(c.style.top="",c.classList.remove("active"))})}}},(D,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.XfaLayerBuilder=void 0;var b=x(3);d.XfaLayerBuilder=class r{constructor({pageDiv:o,pdfPage:s,annotationStorage:n=null,linkService:c,xfaHtml:P=null}){this.pageDiv=o,this.pdfPage=s,this.annotationStorage=n,this.linkService=c,this.xfaHtml=P,this.div=null,this._cancelled=!1}render(o,s="display"){if("print"===s){const n={viewport:o.clone({dontFlip:!0}),div:this.div,xfaHtml:this.xfaHtml,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:s},c=document.createElement("div");this.pageDiv.appendChild(c),n.div=c;const P=b.XfaLayer.render(n);return Promise.resolve(P)}return this.pdfPage.getXfa().then(n=>{if(this._cancelled||!n)return{textDivs:[]};const c={viewport:o.clone({dontFlip:!0}),div:this.div,xfaHtml:n,annotationStorage:this.annotationStorage,linkService:this.linkService,intent:s};return this.div?b.XfaLayer.update(c):(this.div=document.createElement("div"),this.pageDiv.appendChild(this.div),c.div=this.div,b.XfaLayer.render(c))}).catch(n=>{console.error(n)})}cancel(){this._cancelled=!0}hide(){!this.div||(this.div.hidden=!0)}}},(D,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFViewer=d.PDFSinglePageViewer=void 0;var b=x(6),r=x(11);d.PDFViewer=class C extends r.BaseViewer{},d.PDFSinglePageViewer=class o extends r.BaseViewer{_resetView(){super._resetView(),this._scrollMode=b.ScrollMode.PAGE,this._spreadMode=b.SpreadMode.NONE}set scrollMode(n){}_updateScrollMode(){}set spreadMode(n){}_updateSpreadMode(){}}},(D,d,x)=>{var k,O,V,rt,X,Q,B,$,J,ae,de,M,yt,u,vt,l,He,S,Ke,E,St,U,at,z,Ct,Z,Pt,ye,wt;Object.defineProperty(d,"__esModule",{value:!0}),d.PagesCountLimit=d.PDFPageViewBuffer=d.BaseViewer=void 0;var b=x(3),r=x(6),C=x(2),o=x(4),s=x(12),n=x(14),c=x(5),P=x(7),f=x(15),p=x(8),e=x(9);const _="enablePermissions",m={FORCE_SCROLL_MODE_PAGE:15e3,FORCE_LAZY_PAGE_INIT:7500,PAUSE_EAGER_PAGE_INIT:250};d.PagesCountLimit=m;class y{constructor(w){Ee(this,V),Ee(this,k,new Set),Ee(this,O,0),Fe(this,O,w)}push(w){const I=Ce(this,k);I.has(w)&&I.delete(w),I.add(w),I.size>Ce(this,O)&&xe(this,V,rt).call(this)}resize(w,I=null){Fe(this,O,w);const q=Ce(this,k);if(I){const ge=q.size;let fe=1;for(const me of q)if(I.has(me.id)&&(q.delete(me),q.add(me)),++fe>ge)break}for(;q.size>Ce(this,O);)xe(this,V,rt).call(this)}has(w){return Ce(this,k).has(w)}[Symbol.iterator](){return Ce(this,k).keys()}}k=new WeakMap,O=new WeakMap,V=new WeakSet,rt=function(){const w=Ce(this,k).keys().next().value;null==w||w.destroy(),Ce(this,k).delete(w)},d.PDFPageViewBuffer=y;const ce=class{constructor(w){var q,ge,fe,me;if(Ee(this,M),Ee(this,u),Ee(this,l),Ee(this,S),Ee(this,E),Ee(this,U),Ee(this,z),Ee(this,Z),Ee(this,ye),Ee(this,X,null),Ee(this,Q,b.AnnotationMode.ENABLE_FORMS),Ee(this,B,null),Ee(this,$,!1),Ee(this,J,0),Ee(this,ae,null),Ee(this,de,null),this.constructor===ce)throw new Error("Cannot initialize BaseViewer.");const I="2.14.305";if(b.version!==I)throw new Error(`The API version "${b.version}" does not match the Viewer version "${I}".`);if(this.container=w.container,this.viewer=w.viewer||w.container.firstElementChild,"DIV"!==(null==(q=this.container)?void 0:q.tagName.toUpperCase())||"DIV"!==(null==(ge=this.viewer)?void 0:ge.tagName.toUpperCase()))throw new Error("Invalid `container` and/or `viewer` option.");if(this.container.offsetParent&&"absolute"!==getComputedStyle(this.container).position)throw new Error("The `container` must be absolutely positioned.");this.eventBus=w.eventBus,this.linkService=w.linkService||new c.SimpleLinkService,this.downloadManager=w.downloadManager||null,this.findController=w.findController||null,this._scriptingManager=w.scriptingManager||null,this.removePageBorders=w.removePageBorders||!1,this.textLayerMode=null!=(fe=w.textLayerMode)?fe:r.TextLayerMode.ENABLE,Fe(this,Q,null!=(me=w.annotationMode)?me:b.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=w.imageResourcesPath||"",this.enablePrintAutoRotate=w.enablePrintAutoRotate||!1,this.renderer=w.renderer||r.RendererType.CANVAS,this.useOnlyCssZoom=w.useOnlyCssZoom||!1,this.maxCanvasPixels=w.maxCanvasPixels,this.l10n=w.l10n||o.NullL10n,Fe(this,$,w.enablePermissions||!1),this.pageColors=w.pageColors||null,w.pageColors&&(!CSS.supports("color",w.pageColors.background)||!CSS.supports("color",w.pageColors.foreground))&&((w.pageColors.background||w.pageColors.foreground)&&console.warn("Ignoring `pageColors`-option, since the browser doesn't support the values used."),this.pageColors=null),this.defaultRenderingQueue=!w.renderingQueue,this.defaultRenderingQueue?(this.renderingQueue=new n.PDFRenderingQueue,this.renderingQueue.setViewer(this)):this.renderingQueue=w.renderingQueue,this._doc=document.documentElement,this.scroll=(0,r.watchScroll)(this.container,this._scrollUpdate.bind(this)),this.presentationModeState=r.PresentationModeState.UNKNOWN,this._onBeforeDraw=this._onAfterDraw=null,this._resetView(),this.removePageBorders&&this.viewer.classList.add("removePageBorders"),this.updateContainerHeightCss(),Promise.resolve().then(()=>{this.eventBus.dispatch("baseviewerinit",{source:this})})}get pagesCount(){return this._pages.length}getPageView(w){return this._pages[w]}get pageViewsReady(){return!!this._pagesCapability.settled&&this._pages.every(function(w){return null==w?void 0:w.pdfPage})}get renderForms(){return Ce(this,Q)===b.AnnotationMode.ENABLE_FORMS}get enableScripting(){return!!this._scriptingManager}get currentPageNumber(){return this._currentPageNumber}set currentPageNumber(w){if(!Number.isInteger(w))throw new Error("Invalid page number.");!this.pdfDocument||this._setCurrentPageNumber(w,!0)||console.error(`currentPageNumber: "${w}" is not a valid page.`)}_setCurrentPageNumber(w,I=!1){var ge,fe;if(this._currentPageNumber===w)return I&&xe(this,U,at).call(this),!0;if(!(0<w&&w<=this.pagesCount))return!1;const q=this._currentPageNumber;return this._currentPageNumber=w,this.eventBus.dispatch("pagechanging",{source:this,pageNumber:w,pageLabel:null!=(fe=null==(ge=this._pageLabels)?void 0:ge[w-1])?fe:null,previous:q}),I&&xe(this,U,at).call(this),!0}get currentPageLabel(){var w,I;return null!=(I=null==(w=this._pageLabels)?void 0:w[this._currentPageNumber-1])?I:null}set currentPageLabel(w){if(!this.pdfDocument)return;let I=0|w;if(this._pageLabels){const q=this._pageLabels.indexOf(w);q>=0&&(I=q+1)}this._setCurrentPageNumber(I,!0)||console.error(`currentPageLabel: "${w}" is not a valid page.`)}get currentScale(){return this._currentScale!==r.UNKNOWN_SCALE?this._currentScale:r.DEFAULT_SCALE}set currentScale(w){if(isNaN(w))throw new Error("Invalid numeric scale.");!this.pdfDocument||this._setScale(w,!1)}get currentScaleValue(){return this._currentScaleValue}set currentScaleValue(w){!this.pdfDocument||this._setScale(w,!1)}get pagesRotation(){return this._pagesRotation}set pagesRotation(w){if(!(0,r.isValidRotation)(w))throw new Error("Invalid pages rotation angle.");if(!this.pdfDocument||((w%=360)<0&&(w+=360),this._pagesRotation===w))return;this._pagesRotation=w;const I=this._currentPageNumber,q={rotation:w};for(const ge of this._pages)ge.update(q);this._currentScaleValue&&this._setScale(this._currentScaleValue,!0),this.eventBus.dispatch("rotationchanging",{source:this,pagesRotation:w,pageNumber:I}),this.defaultRenderingQueue&&this.update()}get firstPagePromise(){return this.pdfDocument?this._firstPageCapability.promise:null}get onePageRendered(){return this.pdfDocument?this._onePageRenderedCapability.promise:null}get pagesPromise(){return this.pdfDocument?this._pagesCapability.promise:null}setDocument(w){var I=this;if(this.pdfDocument&&(this.eventBus.dispatch("pagesdestroy",{source:this}),this._cancelRendering(),this._resetView(),this.findController&&this.findController.setDocument(null),this._scriptingManager&&this._scriptingManager.setDocument(null)),this.pdfDocument=w,!w)return;const q=w.isPureXfa,ge=w.numPages,fe=w.getPage(1),me=w.getOptionalContentConfig(),ve=Ce(this,$)?w.getPermissions():Promise.resolve();if(ge>m.FORCE_SCROLL_MODE_PAGE){console.warn("Forcing PAGE-scrolling for performance reasons, given the length of the document.");const Se=this._scrollMode=r.ScrollMode.PAGE;this.eventBus.dispatch("scrollmodechanged",{source:this,mode:Se})}this._pagesCapability.promise.then(()=>{this.eventBus.dispatch("pagesloaded",{source:this,pagesCount:ge})},()=>{}),this._onBeforeDraw=Se=>{const Te=this._pages[Se.pageNumber-1];!Te||Ce(this,X).push(Te)},this.eventBus._on("pagerender",this._onBeforeDraw),this._onAfterDraw=Se=>{Se.cssTransform||this._onePageRenderedCapability.settled||(this._onePageRenderedCapability.resolve({timestamp:Se.timestamp}),this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null,Ce(this,de)&&(document.removeEventListener("visibilitychange",Ce(this,de)),Fe(this,de,null)))},this.eventBus._on("pagerendered",this._onAfterDraw),Promise.all([fe,ve]).then(([Se,Te])=>{if(w!==this.pdfDocument)return;this._firstPageCapability.resolve(Se),this._optionalContentConfigPromise=me,xe(this,M,yt).call(this,Te);const Le=this._scrollMode===r.ScrollMode.PAGE?null:this.viewer,ke=this.currentScale,se=Se.getViewport({scale:ke*b.PixelsPerInch.PDF_TO_CSS_UNITS}),R=this.textLayerMode===r.TextLayerMode.DISABLE||q?null:this,F=Ce(this,Q)!==b.AnnotationMode.DISABLE?this:null,he=q?this:null;for(let N=1;N<=ge;++N){const ie=new s.PDFPageView({container:Le,eventBus:this.eventBus,id:N,scale:ke,defaultViewport:se.clone(),optionalContentConfigPromise:me,renderingQueue:this.renderingQueue,textLayerFactory:R,textLayerMode:this.textLayerMode,annotationLayerFactory:F,annotationMode:Ce(this,Q),xfaLayerFactory:he,textHighlighterFactory:this,structTreeLayerFactory:this,imageResourcesPath:this.imageResourcesPath,renderer:this.renderer,useOnlyCssZoom:this.useOnlyCssZoom,maxCanvasPixels:this.maxCanvasPixels,pageColors:this.pageColors,l10n:this.l10n});this._pages.push(ie)}const pe=this._pages[0];pe&&(pe.setPdfPage(Se),this.linkService.cachePageRef(1,Se.ref)),this._scrollMode===r.ScrollMode.PAGE?xe(this,l,He).call(this):this._spreadMode!==r.SpreadMode.NONE&&this._updateSpreadMode(),xe(this,u,vt).call(this).then(g(function*(){if(I.findController&&I.findController.setDocument(w),I._scriptingManager&&I._scriptingManager.setDocument(w),w.loadingParams.disableAutoFetch||ge>m.FORCE_LAZY_PAGE_INIT)return void I._pagesCapability.resolve();let N=ge-1;if(N<=0)I._pagesCapability.resolve();else for(let ie=2;ie<=ge;++ie){const v=w.getPage(ie).then(W=>{const le=I._pages[ie-1];le.pdfPage||le.setPdfPage(W),I.linkService.cachePageRef(ie,W.ref),0==--N&&I._pagesCapability.resolve()},W=>{console.error(`Unable to get page ${ie} to initialize viewer`,W),0==--N&&I._pagesCapability.resolve()});ie%m.PAUSE_EAGER_PAGE_INIT==0&&(yield v)}})),this.eventBus.dispatch("pagesinit",{source:this}),w.getMetadata().then(({info:N})=>{w===this.pdfDocument&&N.Language&&(this.viewer.lang=N.Language)}),this.defaultRenderingQueue&&this.update()}).catch(Se=>{console.error("Unable to initialize viewer",Se),this._pagesCapability.reject(Se)})}setPageLabels(w){var I,q;if(this.pdfDocument){w?Array.isArray(w)&&this.pdfDocument.numPages===w.length?this._pageLabels=w:(this._pageLabels=null,console.error("setPageLabels: Invalid page labels.")):this._pageLabels=null;for(let ge=0,fe=this._pages.length;ge<fe;ge++)this._pages[ge].setPageLabel(null!=(q=null==(I=this._pageLabels)?void 0:I[ge])?q:null)}}_resetView(){this._pages=[],this._currentPageNumber=1,this._currentScale=r.UNKNOWN_SCALE,this._currentScaleValue=null,this._pageLabels=null,Fe(this,X,new y(10)),this._location=null,this._pagesRotation=0,this._optionalContentConfigPromise=null,this._firstPageCapability=(0,b.createPromiseCapability)(),this._onePageRenderedCapability=(0,b.createPromiseCapability)(),this._pagesCapability=(0,b.createPromiseCapability)(),this._scrollMode=r.ScrollMode.VERTICAL,this._previousScrollMode=r.ScrollMode.UNKNOWN,this._spreadMode=r.SpreadMode.NONE,Fe(this,ae,{previousPageNumber:1,scrollDown:!0,pages:[]}),this._onBeforeDraw&&(this.eventBus._off("pagerender",this._onBeforeDraw),this._onBeforeDraw=null),this._onAfterDraw&&(this.eventBus._off("pagerendered",this._onAfterDraw),this._onAfterDraw=null),Ce(this,de)&&(document.removeEventListener("visibilitychange",Ce(this,de)),Fe(this,de,null)),this.viewer.textContent="",this._updateScrollMode(),this.viewer.removeAttribute("lang"),this.viewer.classList.remove(_),null!==Ce(this,B)&&(Fe(this,Q,Ce(this,B)),Fe(this,B,null))}_scrollUpdate(){0!==this.pagesCount&&this.update()}_setScaleUpdatePages(w,I,q=!1,ge=!1){if(this._currentScaleValue=I.toString(),xe(this,E,St).call(this,w))return void(ge&&this.eventBus.dispatch("scalechanging",{source:this,scale:w,presetValue:I}));this._doc.style.setProperty("--zoom-factor",w);const fe={scale:w};for(const me of this._pages)me.update(fe);if(this._currentScale=w,!q){let ve,me=this._currentPageNumber;this._location&&!(this.isInPresentationMode||this.isChangingPresentationMode)&&(me=this._location.pageNumber,ve=[null,{name:"XYZ"},this._location.left,this._location.top,null]),this.scrollPageIntoView({pageNumber:me,destArray:ve,allowNegativeOffset:!0})}this.eventBus.dispatch("scalechanging",{source:this,scale:w,presetValue:ge?I:void 0}),this.defaultRenderingQueue&&this.update(),this.updateContainerHeightCss()}get _pageWidthScaleFactor(){return this._spreadMode!==r.SpreadMode.NONE&&this._scrollMode!==r.ScrollMode.HORIZONTAL?2:1}_setScale(w,I=!1){let q=parseFloat(w);if(q>0)this._setScaleUpdatePages(q,w,I,!1);else{const ge=this._pages[this._currentPageNumber-1];if(!ge)return;let fe=r.SCROLLBAR_PADDING,me=r.VERTICAL_PADDING;this.isInPresentationMode?fe=me=4:this.removePageBorders?fe=me=0:this._scrollMode===r.ScrollMode.HORIZONTAL&&([fe,me]=[me,fe]);const ve=(this.container.clientWidth-fe)/ge.width*ge.scale/this._pageWidthScaleFactor,Se=(this.container.clientHeight-me)/ge.height*ge.scale;switch(w){case"page-actual":q=1;break;case"page-width":q=ve;break;case"page-height":q=Se;break;case"page-fit":q=Math.min(ve,Se);break;case"auto":const Te=(0,r.isPortraitOrientation)(ge)?ve:Math.min(Se,ve);q=Math.min(r.MAX_AUTO_SCALE,Te);break;default:return void console.error(`_setScale: "${w}" is an unknown zoom value.`)}this._setScaleUpdatePages(q,w,I,!0)}}pageLabelToPageNumber(w){if(!this._pageLabels)return null;const I=this._pageLabels.indexOf(w);return I<0?null:I+1}scrollPageIntoView({pageNumber:w,destArray:I=null,allowNegativeOffset:q=!1,ignoreDestinationZoom:ge=!1}){if(!this.pdfDocument)return;const fe=Number.isInteger(w)&&this._pages[w-1];if(!fe)return void console.error(`scrollPageIntoView: "${w}" is not a valid pageNumber parameter.`);if(this.isInPresentationMode||!I)return void this._setCurrentPageNumber(w,!0);let Le,ke,me=0,ve=0,Se=0,Te=0;const se=fe.rotation%180!=0,R=(se?fe.height:fe.width)/fe.scale/b.PixelsPerInch.PDF_TO_CSS_UNITS,F=(se?fe.width:fe.height)/fe.scale/b.PixelsPerInch.PDF_TO_CSS_UNITS;let he=0;switch(I[1].name){case"XYZ":me=I[2],ve=I[3],he=I[4],me=null!==me?me:0,ve=null!==ve?ve:F;break;case"Fit":case"FitB":he="page-fit";break;case"FitH":case"FitBH":ve=I[2],he="page-width",null===ve&&this._location?(me=this._location.left,ve=this._location.top):("number"!=typeof ve||ve<0)&&(ve=F);break;case"FitV":case"FitBV":me=I[2],Se=R,Te=F,he="page-height";break;case"FitR":me=I[2],ve=I[3],Se=I[4]-me,Te=I[5]-ve,Le=(this.container.clientWidth-(this.removePageBorders?0:r.SCROLLBAR_PADDING))/Se/b.PixelsPerInch.PDF_TO_CSS_UNITS,ke=(this.container.clientHeight-(this.removePageBorders?0:r.VERTICAL_PADDING))/Te/b.PixelsPerInch.PDF_TO_CSS_UNITS,he=Math.min(Math.abs(Le),Math.abs(ke));break;default:return void console.error(`scrollPageIntoView: "${I[1].name}" is not a valid destination type.`)}if(ge||(he&&he!==this._currentScale?this.currentScaleValue=he:this._currentScale===r.UNKNOWN_SCALE&&(this.currentScaleValue=r.DEFAULT_SCALE_VALUE)),"page-fit"===he&&!I[4])return void xe(this,S,Ke).call(this,fe);const pe=[fe.viewport.convertToViewportPoint(me,ve),fe.viewport.convertToViewportPoint(me+Se,ve+Te)];let N=Math.min(pe[0][0],pe[1][0]),ie=Math.min(pe[0][1],pe[1][1]);q||(N=Math.max(N,0),ie=Math.max(ie,0)),xe(this,S,Ke).call(this,fe,{left:N,top:ie})}_updateLocation(w){const I=this._currentScale,q=this._currentScaleValue,ge=parseFloat(q)===I?Math.round(1e4*I)/100:q,fe=w.id,ve=this.container,Se=this._pages[fe-1].getPagePoint(ve.scrollLeft-w.x,ve.scrollTop-w.y),Te=Math.round(Se[0]),Le=Math.round(Se[1]);let ke=`#page=${fe}`;this.isInPresentationMode||(ke+=`&zoom=${ge},${Te},${Le}`),this._location={pageNumber:fe,scale:ge,top:Le,left:Te,rotation:this._pagesRotation,pdfOpenParams:ke}}update(){const w=this._getVisiblePages(),I=w.views,q=I.length;if(0===q)return;const ge=Math.max(10,2*q+1);Ce(this,X).resize(ge,w.ids),this.renderingQueue.renderHighestPriority(w);const fe=this._spreadMode===r.SpreadMode.NONE&&(this._scrollMode===r.ScrollMode.PAGE||this._scrollMode===r.ScrollMode.VERTICAL),me=this._currentPageNumber;let ve=!1;for(const Se of I){if(Se.percent<100)break;if(Se.id===me&&fe){ve=!0;break}}this._setCurrentPageNumber(ve?me:I[0].id),this._updateLocation(w.first),this.eventBus.dispatch("updateviewarea",{source:this,location:this._location})}containsElement(w){return this.container.contains(w)}focus(){this.container.focus()}get _isContainerRtl(){return"rtl"===getComputedStyle(this.container).direction}get isInPresentationMode(){return this.presentationModeState===r.PresentationModeState.FULLSCREEN}get isChangingPresentationMode(){return this.presentationModeState===r.PresentationModeState.CHANGING}get isHorizontalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollWidth>this.container.clientWidth}get isVerticalScrollbarEnabled(){return!this.isInPresentationMode&&this.container.scrollHeight>this.container.clientHeight}_getVisiblePages(){const w=this._scrollMode===r.ScrollMode.PAGE?Ce(this,ae).pages:this._pages,I=this._scrollMode===r.ScrollMode.HORIZONTAL;return(0,r.getVisibleElements)({scrollEl:this.container,views:w,sortByVisibility:!0,horizontal:I,rtl:I&&this._isContainerRtl})}isPageVisible(w){return!!this.pdfDocument&&(Number.isInteger(w)&&w>0&&w<=this.pagesCount?this._getVisiblePages().ids.has(w):(console.error(`isPageVisible: "${w}" is not a valid page.`),!1))}isPageCached(w){if(!this.pdfDocument)return!1;if(!(Number.isInteger(w)&&w>0&&w<=this.pagesCount))return console.error(`isPageCached: "${w}" is not a valid page.`),!1;const I=this._pages[w-1];return Ce(this,X).has(I)}cleanup(){for(const w of this._pages)w.renderingState!==r.RenderingStates.FINISHED&&w.reset()}_cancelRendering(){for(const w of this._pages)w.cancelRendering()}forceRendering(w){const I=w||this._getVisiblePages(),q=xe(this,Z,Pt).call(this,I),fe=this.renderingQueue.getHighestPriority(I,this._pages,q,this._spreadMode!==r.SpreadMode.NONE&&this._scrollMode!==r.ScrollMode.HORIZONTAL);return xe(this,ye,wt).call(this,I.ids),!!fe&&(xe(this,z,Ct).call(this,fe).then(()=>{this.renderingQueue.renderView(fe)}),!0)}createTextLayerBuilder(w,I,q,ge=!1,fe,me){return new p.TextLayerBuilder({textLayerDiv:w,eventBus:fe,pageIndex:I,viewport:q,enhanceTextSelection:!this.isInPresentationMode&&ge,highlighter:me})}createTextHighlighter(w,I){return new f.TextHighlighter({eventBus:I,pageIndex:w,findController:this.isInPresentationMode?null:this.findController})}createAnnotationLayerBuilder(w,I,q=null,ge="",fe=!0,me=o.NullL10n,ve=null,Se=null,Te=null,Le=null,ke=null){var se,R,F,he;return new C.AnnotationLayerBuilder({pageDiv:w,pdfPage:I,annotationStorage:q||(null==(se=this.pdfDocument)?void 0:se.annotationStorage),imageResourcesPath:ge,renderForms:fe,linkService:this.linkService,downloadManager:this.downloadManager,l10n:me,enableScripting:null!=ve?ve:this.enableScripting,hasJSActionsPromise:Se||(null==(R=this.pdfDocument)?void 0:R.hasJSActions()),fieldObjectsPromise:Le||(null==(F=this.pdfDocument)?void 0:F.getFieldObjects()),mouseState:Te||(null==(he=this._scriptingManager)?void 0:he.mouseState),annotationCanvasMap:ke})}createXfaLayerBuilder(w,I,q=null){var ge;return new e.XfaLayerBuilder({pageDiv:w,pdfPage:I,annotationStorage:q||(null==(ge=this.pdfDocument)?void 0:ge.annotationStorage),linkService:this.linkService})}createStructTreeLayerBuilder(w){return new P.StructTreeLayerBuilder({pdfPage:w})}get hasEqualPageSizes(){const w=this._pages[0];for(let I=1,q=this._pages.length;I<q;++I){const ge=this._pages[I];if(ge.width!==w.width||ge.height!==w.height)return!1}return!0}getPagesOverview(){return this._pages.map(w=>{const I=w.pdfPage.getViewport({scale:1});return!this.enablePrintAutoRotate||(0,r.isPortraitOrientation)(I)?{width:I.width,height:I.height,rotation:I.rotation}:{width:I.height,height:I.width,rotation:(I.rotation-90)%360}})}get optionalContentConfigPromise(){return this.pdfDocument?this._optionalContentConfigPromise?this._optionalContentConfigPromise:this.pdfDocument.getOptionalContentConfig():Promise.resolve(null)}set optionalContentConfigPromise(w){if(!(w instanceof Promise))throw new Error(`Invalid optionalContentConfigPromise: ${w}`);if(!this.pdfDocument||!this._optionalContentConfigPromise)return;this._optionalContentConfigPromise=w;const I={optionalContentConfigPromise:w};for(const q of this._pages)q.update(I);this.update(),this.eventBus.dispatch("optionalcontentconfigchanged",{source:this,promise:w})}get scrollMode(){return this._scrollMode}set scrollMode(w){if(this._scrollMode!==w){if(!(0,r.isValidScrollMode)(w))throw new Error(`Invalid scroll mode: ${w}`);this.pagesCount>m.FORCE_SCROLL_MODE_PAGE||(this._previousScrollMode=this._scrollMode,this._scrollMode=w,this.eventBus.dispatch("scrollmodechanged",{source:this,mode:w}),this._updateScrollMode(this._currentPageNumber))}}_updateScrollMode(w=null){const I=this._scrollMode,q=this.viewer;q.classList.toggle("scrollHorizontal",I===r.ScrollMode.HORIZONTAL),q.classList.toggle("scrollWrapped",I===r.ScrollMode.WRAPPED),this.pdfDocument&&w&&(I===r.ScrollMode.PAGE?xe(this,l,He).call(this):this._previousScrollMode===r.ScrollMode.PAGE&&this._updateSpreadMode(),this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(w,!0),this.update())}get spreadMode(){return this._spreadMode}set spreadMode(w){if(this._spreadMode!==w){if(!(0,r.isValidSpreadMode)(w))throw new Error(`Invalid spread mode: ${w}`);this._spreadMode=w,this.eventBus.dispatch("spreadmodechanged",{source:this,mode:w}),this._updateSpreadMode(this._currentPageNumber)}}_updateSpreadMode(w=null){if(!this.pdfDocument)return;const I=this.viewer,q=this._pages;if(this._scrollMode===r.ScrollMode.PAGE)xe(this,l,He).call(this);else if(I.textContent="",this._spreadMode===r.SpreadMode.NONE)for(const ge of this._pages)I.appendChild(ge.div);else{const ge=this._spreadMode-1;let fe=null;for(let me=0,ve=q.length;me<ve;++me)null===fe?(fe=document.createElement("div"),fe.className="spread",I.appendChild(fe)):me%2===ge&&(fe=fe.cloneNode(!1),I.appendChild(fe)),fe.appendChild(q[me].div)}!w||(this._currentScaleValue&&isNaN(this._currentScaleValue)&&this._setScale(this._currentScaleValue,!0),this._setCurrentPageNumber(w,!0),this.update())}_getPageAdvance(w,I=!1){switch(this._scrollMode){case r.ScrollMode.WRAPPED:{const{views:q}=this._getVisiblePages(),ge=new Map;for(const{id:fe,y:me,percent:ve,widthPercent:Se}of q){if(0===ve||Se<100)continue;let Te=ge.get(me);Te||ge.set(me,Te||(Te=[])),Te.push(fe)}for(const fe of ge.values()){const me=fe.indexOf(w);if(-1===me)continue;const ve=fe.length;if(1===ve)break;if(I)for(let Se=me-1,Te=0;Se>=Te;Se--){const ke=fe[Se+1]-1;if(fe[Se]<ke)return w-ke}else for(let Se=me+1,Te=ve;Se<Te;Se++){const ke=fe[Se-1]+1;if(fe[Se]>ke)return ke-w}if(I){const Se=fe[0];if(Se<w)return w-Se+1}else{const Se=fe[ve-1];if(Se>w)return Se-w+1}break}break}case r.ScrollMode.HORIZONTAL:break;case r.ScrollMode.PAGE:case r.ScrollMode.VERTICAL:{if(this._spreadMode===r.SpreadMode.NONE)break;const q=this._spreadMode-1;if(I&&w%2!==q)break;if(!I&&w%2===q)break;const{views:ge}=this._getVisiblePages(),fe=I?w-1:w+1;for(const{id:me,percent:ve,widthPercent:Se}of ge)if(me===fe){if(ve>0&&100===Se)return 2;break}break}}return 1}nextPage(){const w=this._currentPageNumber,I=this.pagesCount;if(w>=I)return!1;const q=this._getPageAdvance(w,!1)||1;return this.currentPageNumber=Math.min(w+q,I),!0}previousPage(){const w=this._currentPageNumber;if(w<=1)return!1;const I=this._getPageAdvance(w,!0)||1;return this.currentPageNumber=Math.max(w-I,1),!0}increaseScale(w=1){let I=this._currentScale;do{I=(I*r.DEFAULT_SCALE_DELTA).toFixed(2),I=Math.ceil(10*I)/10,I=Math.min(r.MAX_SCALE,I)}while(--w>0&&I<r.MAX_SCALE);this.currentScaleValue=I}decreaseScale(w=1){let I=this._currentScale;do{I=(I/r.DEFAULT_SCALE_DELTA).toFixed(2),I=Math.floor(10*I)/10,I=Math.max(r.MIN_SCALE,I)}while(--w>0&&I>r.MIN_SCALE);this.currentScaleValue=I}updateContainerHeightCss(){const w=this.container.clientHeight;w!==Ce(this,J)&&(Fe(this,J,w),this._doc.style.setProperty("--viewer-container-height",`${w}px`))}};let T=ce;X=new WeakMap,Q=new WeakMap,B=new WeakMap,$=new WeakMap,J=new WeakMap,ae=new WeakMap,de=new WeakMap,M=new WeakSet,yt=function(w){!w||(w.includes(b.PermissionFlag.COPY)||this.viewer.classList.add(_),!w.includes(b.PermissionFlag.MODIFY_ANNOTATIONS)&&!w.includes(b.PermissionFlag.FILL_INTERACTIVE_FORMS)&&Ce(this,Q)===b.AnnotationMode.ENABLE_FORMS&&(Fe(this,B,Ce(this,Q)),Fe(this,Q,b.AnnotationMode.ENABLE)))},u=new WeakSet,vt=function(){if("hidden"===document.visibilityState||!this.container.offsetParent||0===this._getVisiblePages().views.length)return Promise.resolve();const w=new Promise(I=>{Fe(this,de,()=>{"hidden"===document.visibilityState&&(I(),document.removeEventListener("visibilitychange",Ce(this,de)),Fe(this,de,null))}),document.addEventListener("visibilitychange",Ce(this,de))});return Promise.race([this._onePageRenderedCapability.promise,w])},l=new WeakSet,He=function(){if(this._scrollMode!==r.ScrollMode.PAGE)throw new Error("#ensurePageViewVisible: Invalid scrollMode value.");const w=this._currentPageNumber,I=Ce(this,ae),q=this.viewer;if(q.textContent="",I.pages.length=0,this._spreadMode!==r.SpreadMode.NONE||this.isInPresentationMode){const ge=new Set,fe=this._spreadMode-1;-1===fe?ge.add(w-1):w%2!==fe?(ge.add(w-1),ge.add(w)):(ge.add(w-2),ge.add(w-1));const me=document.createElement("div");if(me.className="spread",this.isInPresentationMode){const ve=document.createElement("div");ve.className="dummyPage",me.appendChild(ve)}for(const ve of ge){const Se=this._pages[ve];!Se||(me.appendChild(Se.div),I.pages.push(Se))}q.appendChild(me)}else{const ge=this._pages[w-1];q.appendChild(ge.div),I.pages.push(ge)}I.scrollDown=w>=I.previousPageNumber,I.previousPageNumber=w},S=new WeakSet,Ke=function(w,I=null){const{div:q,id:ge}=w;if(this._scrollMode===r.ScrollMode.PAGE&&(this._setCurrentPageNumber(ge),xe(this,l,He).call(this),this.update()),!I&&!this.isInPresentationMode){const fe=q.offsetLeft+q.clientLeft,me=fe+q.clientWidth,{scrollLeft:ve,clientWidth:Se}=this.container;(this._scrollMode===r.ScrollMode.HORIZONTAL||fe<ve||me>ve+Se)&&(I={left:0,top:0})}(0,r.scrollIntoView)(q,I)},E=new WeakSet,St=function(w){return w===this._currentScale||Math.abs(w-this._currentScale)<1e-15},U=new WeakSet,at=function(){const w=this._pages[this._currentPageNumber-1];this.isInPresentationMode&&this._setScale(this._currentScaleValue,!0),xe(this,S,Ke).call(this,w)},z=new WeakSet,Ct=function(w){var I=this;return g(function*(){var q,ge;if(w.pdfPage)return w.pdfPage;try{const fe=yield I.pdfDocument.getPage(w.id);return w.pdfPage||w.setPdfPage(fe),(null==(ge=(q=I.linkService)._cachedPageNumber)?void 0:ge.call(q,fe.ref))||I.linkService.cachePageRef(w.id,fe.ref),fe}catch(fe){return console.error("Unable to get page for page view",fe),null}})()},Z=new WeakSet,Pt=function(w){var I,q;if(1===(null==(I=w.first)?void 0:I.id))return!0;if((null==(q=w.last)?void 0:q.id)===this.pagesCount)return!1;switch(this._scrollMode){case r.ScrollMode.PAGE:return Ce(this,ae).scrollDown;case r.ScrollMode.HORIZONTAL:return this.scroll.right}return this.scroll.down},ye=new WeakSet,wt=function(w){for(const I of w){const q=this._pages[I-1];null==q||q.toggleLoadingIconSpinner(!0)}for(const I of Ce(this,X))w.has(I.id)||I.toggleLoadingIconSpinner(!1)},d.BaseViewer=T},(D,d,x)=>{var c;Object.defineProperty(d,"__esModule",{value:!0}),d.PDFPageView=void 0;var b=x(3),r=x(6),C=x(13),o=x(4);const s=C.compatibilityParams.maxCanvasPixels||16777216;c=new WeakMap,d.PDFPageView=class n{constructor(f){var _,m,y,T;Ee(this,c,b.AnnotationMode.ENABLE_FORMS);const p=f.container,e=f.defaultViewport;this.id=f.id,this.renderingId="page"+this.id,this.pdfPage=null,this.pageLabel=null,this.rotation=0,this.scale=f.scale||r.DEFAULT_SCALE,this.viewport=e,this.pdfPageRotate=e.rotation,this._optionalContentConfigPromise=f.optionalContentConfigPromise||null,this.hasRestrictedScaling=!1,this.textLayerMode=null!=(_=f.textLayerMode)?_:r.TextLayerMode.ENABLE,Fe(this,c,null!=(m=f.annotationMode)?m:b.AnnotationMode.ENABLE_FORMS),this.imageResourcesPath=f.imageResourcesPath||"",this.useOnlyCssZoom=f.useOnlyCssZoom||!1,this.maxCanvasPixels=f.maxCanvasPixels||s,this.pageColors=f.pageColors||null,this.eventBus=f.eventBus,this.renderingQueue=f.renderingQueue,this.textLayerFactory=f.textLayerFactory,this.annotationLayerFactory=f.annotationLayerFactory,this.xfaLayerFactory=f.xfaLayerFactory,this.textHighlighter=null==(y=f.textHighlighterFactory)?void 0:y.createTextHighlighter(this.id-1,this.eventBus),this.structTreeLayerFactory=f.structTreeLayerFactory,this.renderer=f.renderer||r.RendererType.CANVAS,this.l10n=f.l10n||o.NullL10n,this.paintTask=null,this.paintedViewportMap=new WeakMap,this.renderingState=r.RenderingStates.INITIAL,this.resume=null,this._renderError=null,this._isStandalone=!(null==(T=this.renderingQueue)?void 0:T.hasViewer()),this._annotationCanvasMap=null,this.annotationLayer=null,this.textLayer=null,this.zoomLayer=null,this.xfaLayer=null,this.structTreeLayer=null;const i=document.createElement("div");i.className="page",i.style.width=Math.floor(this.viewport.width)+"px",i.style.height=Math.floor(this.viewport.height)+"px",i.setAttribute("data-page-number",this.id),i.setAttribute("role","region"),this.l10n.get("page_landmark",{page:this.id}).then(k=>{i.setAttribute("aria-label",k)}),this.div=i,null==p||p.appendChild(i)}setPdfPage(f){this.pdfPage=f,this.pdfPageRotate=f.rotate,this.viewport=f.getViewport({scale:this.scale*b.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this.reset()}destroy(){this.reset(),this.pdfPage&&this.pdfPage.cleanup()}_renderAnnotationLayer(){var f=this;return g(function*(){let p=null;try{yield f.annotationLayer.render(f.viewport,"display")}catch(e){p=e}finally{f.eventBus.dispatch("annotationlayerrendered",{source:f,pageNumber:f.id,error:p})}})()}_renderXfaLayer(){var f=this;return g(function*(){let p=null;try{const e=yield f.xfaLayer.render(f.viewport,"display");f.textHighlighter&&f._buildXfaTextContentItems(e.textDivs)}catch(e){p=e}finally{f.eventBus.dispatch("xfalayerrendered",{source:f,pageNumber:f.id,error:p})}})()}_buildXfaTextContentItems(f){var p=this;return g(function*(){const e=yield p.pdfPage.getTextContent(),i=[];for(const _ of e.items)i.push(_.str);p.textHighlighter.setTextMapping(f,i),p.textHighlighter.enable()})()}_resetZoomLayer(f=!1){if(!this.zoomLayer)return;const p=this.zoomLayer.firstChild;this.paintedViewportMap.delete(p),p.width=0,p.height=0,f&&this.zoomLayer.remove(),this.zoomLayer=null}reset({keepZoomLayer:f=!1,keepAnnotationLayer:p=!1,keepXfaLayer:e=!1}={}){var k,O;this.cancelRendering({keepAnnotationLayer:p,keepXfaLayer:e}),this.renderingState=r.RenderingStates.INITIAL;const i=this.div;i.style.width=Math.floor(this.viewport.width)+"px",i.style.height=Math.floor(this.viewport.height)+"px";const _=i.childNodes,m=f&&this.zoomLayer||null,y=p&&(null==(k=this.annotationLayer)?void 0:k.div)||null,T=e&&(null==(O=this.xfaLayer)?void 0:O.div)||null;for(let V=_.length-1;V>=0;V--){const G=_[V];switch(G){case m:case y:case T:continue}G.remove()}i.removeAttribute("data-loaded"),y&&this.annotationLayer.hide(),T&&this.xfaLayer.hide(),m||(this.canvas&&(this.paintedViewportMap.delete(this.canvas),this.canvas.width=0,this.canvas.height=0,delete this.canvas),this._resetZoomLayer()),this.svg&&(this.paintedViewportMap.delete(this.svg),delete this.svg),this.loadingIconDiv=document.createElement("div"),this.loadingIconDiv.className="loadingIcon notVisible",this._isStandalone&&this.toggleLoadingIconSpinner(!0),this.loadingIconDiv.setAttribute("role","img"),this.l10n.get("loading").then(V=>{var G;null==(G=this.loadingIconDiv)||G.setAttribute("aria-label",V)}),i.appendChild(this.loadingIconDiv)}update({scale:f=0,rotation:p=null,optionalContentConfigPromise:e=null}){if(this.scale=f||this.scale,"number"==typeof p&&(this.rotation=p),e instanceof Promise&&(this._optionalContentConfigPromise=e),this.viewport=this.viewport.clone({scale:this.scale*b.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:(this.rotation+this.pdfPageRotate)%360}),this._isStandalone){const{style:m}=document.documentElement;m.setProperty("--zoom-factor",this.scale)}if(this.svg)return this.cssTransform({target:this.svg,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});let _=!1;if(this.canvas&&this.maxCanvasPixels>0){const m=this.outputScale;(Math.floor(this.viewport.width)*m.sx|0)*(Math.floor(this.viewport.height)*m.sy|0)>this.maxCanvasPixels&&(_=!0)}if(this.canvas){if(this.useOnlyCssZoom||this.hasRestrictedScaling&&_)return this.cssTransform({target:this.canvas,redrawAnnotationLayer:!0,redrawXfaLayer:!0}),void this.eventBus.dispatch("pagerendered",{source:this,pageNumber:this.id,cssTransform:!0,timestamp:performance.now(),error:this._renderError});!this.zoomLayer&&!this.canvas.hidden&&(this.zoomLayer=this.canvas.parentNode,this.zoomLayer.style.position="absolute")}this.zoomLayer&&this.cssTransform({target:this.zoomLayer.firstChild}),this.reset({keepZoomLayer:!0,keepAnnotationLayer:!0,keepXfaLayer:!0})}cancelRendering({keepAnnotationLayer:f=!1,keepXfaLayer:p=!1}={}){var e;this.paintTask&&(this.paintTask.cancel(),this.paintTask=null),this.resume=null,this.textLayer&&(this.textLayer.cancel(),this.textLayer=null),this.annotationLayer&&(!f||!this.annotationLayer.div)&&(this.annotationLayer.cancel(),this.annotationLayer=null,this._annotationCanvasMap=null),this.xfaLayer&&(!p||!this.xfaLayer.div)&&(this.xfaLayer.cancel(),this.xfaLayer=null,null==(e=this.textHighlighter)||e.disable()),this._onTextLayerRendered&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null)}cssTransform({target:f,redrawAnnotationLayer:p=!1,redrawXfaLayer:e=!1}){const i=this.viewport.width,_=this.viewport.height,m=this.div;f.style.width=f.parentNode.style.width=m.style.width=Math.floor(i)+"px",f.style.height=f.parentNode.style.height=m.style.height=Math.floor(_)+"px";const y=this.viewport.rotation-this.paintedViewportMap.get(f).rotation,T=Math.abs(y);let k=1,O=1;if((90===T||270===T)&&(k=_/i,O=i/_),f.style.transform=`rotate(${y}deg) scale(${k}, ${O})`,this.textLayer){const V=this.textLayer.viewport,X=Math.abs(this.viewport.rotation-V.rotation);let Q=i/V.width;(90===X||270===X)&&(Q=i/V.height);const B=this.textLayer.textLayerDiv;let $,J;switch(X){case 0:$=J=0;break;case 90:$=0,J="-"+B.style.height;break;case 180:$="-"+B.style.width,J="-"+B.style.height;break;case 270:$="-"+B.style.width,J=0;break;default:console.error("Bad rotation value.")}B.style.transform=`rotate(${X}deg) scale(${Q}) translate(${$}, ${J})`,B.style.transformOrigin="0% 0%"}p&&this.annotationLayer&&this._renderAnnotationLayer(),e&&this.xfaLayer&&this._renderXfaLayer()}get width(){return this.viewport.width}get height(){return this.viewport.height}getPagePoint(f,p){return this.viewport.convertToPdfPoint(f,p)}toggleLoadingIconSpinner(f=!1){var p;null==(p=this.loadingIconDiv)||p.classList.toggle("notVisible",!f)}draw(){var O,V,G,f=this;this.renderingState!==r.RenderingStates.INITIAL&&(console.error("Must be in new state before drawing"),this.reset());const{div:p,pdfPage:e}=this;if(!e)return this.renderingState=r.RenderingStates.FINISHED,this.loadingIconDiv&&(this.loadingIconDiv.remove(),delete this.loadingIconDiv),Promise.reject(new Error("pdfPage is not loaded"));this.renderingState=r.RenderingStates.RUNNING;const i=document.createElement("div");i.style.width=p.style.width,i.style.height=p.style.height,i.classList.add("canvasWrapper"),(null==(O=this.annotationLayer)?void 0:O.div)?p.insertBefore(i,this.annotationLayer.div):p.appendChild(i);let _=null;if(this.textLayerMode!==r.TextLayerMode.DISABLE&&this.textLayerFactory){const X=document.createElement("div");X.className="textLayer",X.style.width=i.style.width,X.style.height=i.style.height,(null==(V=this.annotationLayer)?void 0:V.div)?p.insertBefore(X,this.annotationLayer.div):p.appendChild(X),_=this.textLayerFactory.createTextLayerBuilder(X,this.id-1,this.viewport,this.textLayerMode===r.TextLayerMode.ENABLE_ENHANCE,this.eventBus,this.textHighlighter)}this.textLayer=_,Ce(this,c)!==b.AnnotationMode.DISABLE&&this.annotationLayerFactory&&(this._annotationCanvasMap||(this._annotationCanvasMap=new Map),this.annotationLayer||(this.annotationLayer=this.annotationLayerFactory.createAnnotationLayerBuilder(p,e,null,this.imageResourcesPath,Ce(this,c)===b.AnnotationMode.ENABLE_FORMS,this.l10n,null,null,null,null,this._annotationCanvasMap))),(null==(G=this.xfaLayer)?void 0:G.div)&&p.appendChild(this.xfaLayer.div);let m=null;this.renderingQueue&&(m=X=>{if(!this.renderingQueue.isHighestPriority(this))return this.renderingState=r.RenderingStates.PAUSED,void(this.resume=()=>{this.renderingState=r.RenderingStates.RUNNING,X()});X()});const y=function(){var X=g(function*(Q=null){if(T===f.paintTask&&(f.paintTask=null),Q instanceof b.RenderingCancelledException)f._renderError=null;else if(f._renderError=Q,f.renderingState=r.RenderingStates.FINISHED,f.loadingIconDiv&&(f.loadingIconDiv.remove(),delete f.loadingIconDiv),f._resetZoomLayer(!0),f.eventBus.dispatch("pagerendered",{source:f,pageNumber:f.id,cssTransform:!1,timestamp:performance.now(),error:f._renderError}),Q)throw Q});return function(){return X.apply(this,arguments)}}(),T=this.renderer===r.RendererType.SVG?this.paintOnSvg(i):this.paintOnCanvas(i);T.onRenderContinue=m,this.paintTask=T;const k=T.promise.then(()=>y(null).then(()=>{if(_){const X=e.streamTextContent({includeMarkedContent:!0});_.setTextContentStream(X),_.render()}this.annotationLayer&&this._renderAnnotationLayer()}),function(X){return y(X)});return this.xfaLayerFactory&&(this.xfaLayer||(this.xfaLayer=this.xfaLayerFactory.createXfaLayerBuilder(p,e,null)),this._renderXfaLayer()),this.structTreeLayerFactory&&this.textLayer&&this.canvas&&(this._onTextLayerRendered=X=>{X.pageNumber===this.id&&(this.eventBus._off("textlayerrendered",this._onTextLayerRendered),this._onTextLayerRendered=null,this.canvas&&this.pdfPage.getStructTree().then(Q=>{if(!Q||!this.canvas)return;const B=this.structTreeLayer.render(Q);B.classList.add("structTree"),this.canvas.appendChild(B)}))},this.eventBus._on("textlayerrendered",this._onTextLayerRendered),this.structTreeLayer=this.structTreeLayerFactory.createStructTreeLayerBuilder(e)),p.setAttribute("data-loaded",!0),this.eventBus.dispatch("pagerender",{source:this,pageNumber:this.id}),k}paintOnCanvas(f){const p=(0,b.createPromiseCapability)(),e={promise:p.promise,onRenderContinue(B){B()},cancel(){Q.cancel()}},i=this.viewport,_=document.createElement("canvas");_.hidden=!0;let m=!0;const y=function(){m&&(_.hidden=!1,m=!1)};f.appendChild(_),this.canvas=_;const T=_.getContext("2d",{alpha:!1}),k=this.outputScale=new r.OutputScale;if(this.useOnlyCssZoom){const B=i.clone({scale:b.PixelsPerInch.PDF_TO_CSS_UNITS});k.sx*=B.width/i.width,k.sy*=B.height/i.height}if(this.maxCanvasPixels>0){const $=Math.sqrt(this.maxCanvasPixels/(i.width*i.height));k.sx>$||k.sy>$?(k.sx=$,k.sy=$,this.hasRestrictedScaling=!0):this.hasRestrictedScaling=!1}const O=(0,r.approximateFraction)(k.sx),V=(0,r.approximateFraction)(k.sy);_.width=(0,r.roundToDivide)(i.width*k.sx,O[0]),_.height=(0,r.roundToDivide)(i.height*k.sy,V[0]),_.style.width=(0,r.roundToDivide)(i.width,O[1])+"px",_.style.height=(0,r.roundToDivide)(i.height,V[1])+"px",this.paintedViewportMap.set(_,i);const X={canvasContext:T,transform:k.scaled?[k.sx,0,0,k.sy,0,0]:null,viewport:this.viewport,annotationMode:Ce(this,c),optionalContentConfigPromise:this._optionalContentConfigPromise,annotationCanvasMap:this._annotationCanvasMap,pageColors:this.pageColors},Q=this.pdfPage.render(X);return Q.onContinue=function(B){y(),e.onRenderContinue?e.onRenderContinue(B):B()},Q.promise.then(function(){y(),p.resolve()},function(B){y(),p.reject(B)}),e}paintOnSvg(f){let p=!1;const e=()=>{if(p)throw new b.RenderingCancelledException(`Rendering cancelled, page ${this.id}`,"svg")},i=this.pdfPage,_=this.viewport.clone({scale:b.PixelsPerInch.PDF_TO_CSS_UNITS});return{promise:i.getOperatorList({annotationMode:Ce(this,c)}).then(y=>(e(),new b.SVGGraphics(i.commonObjs,i.objs).getSVG(y,_).then(k=>{e(),this.svg=k,this.paintedViewportMap.set(k,_),k.style.width=f.style.width,k.style.height=f.style.height,this.renderingState=r.RenderingStates.FINISHED,f.appendChild(k)}))),onRenderContinue(y){y()},cancel(){p=!0}}}setPageLabel(f){this.pageLabel="string"==typeof f?f:null,null!==this.pageLabel?this.div.setAttribute("data-page-label",this.pageLabel):this.div.removeAttribute("data-page-label")}}},(D,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.compatibilityParams=d.OptionKind=d.AppOptions=void 0;const x=Object.create(null);d.compatibilityParams=x;{const s=navigator.userAgent||"",n=navigator.platform||"",c=navigator.maxTouchPoints||1,P=/Android/.test(s);(/\b(iPad|iPhone|iPod)(?=;)/.test(s)||"MacIntel"===n&&c>1||P)&&(x.maxCanvasPixels=5242880)}const b={VIEWER:2,API:4,WORKER:8,PREFERENCE:128};d.OptionKind=b;const r={annotationMode:{value:2,kind:b.VIEWER+b.PREFERENCE},cursorToolOnLoad:{value:0,kind:b.VIEWER+b.PREFERENCE},defaultUrl:{value:"compressed.tracemonkey-pldi-09.pdf",kind:b.VIEWER},defaultZoomValue:{value:"",kind:b.VIEWER+b.PREFERENCE},disableHistory:{value:!1,kind:b.VIEWER},disablePageLabels:{value:!1,kind:b.VIEWER+b.PREFERENCE},enablePermissions:{value:!1,kind:b.VIEWER+b.PREFERENCE},enablePrintAutoRotate:{value:!0,kind:b.VIEWER+b.PREFERENCE},enableScripting:{value:!0,kind:b.VIEWER+b.PREFERENCE},externalLinkRel:{value:"noopener noreferrer nofollow",kind:b.VIEWER},externalLinkTarget:{value:0,kind:b.VIEWER+b.PREFERENCE},historyUpdateUrl:{value:!1,kind:b.VIEWER+b.PREFERENCE},ignoreDestinationZoom:{value:!1,kind:b.VIEWER+b.PREFERENCE},imageResourcesPath:{value:"./images/",kind:b.VIEWER},maxCanvasPixels:{value:16777216,compatibility:x.maxCanvasPixels,kind:b.VIEWER},pageColorsBackground:{value:"Canvas",kind:b.VIEWER+b.PREFERENCE},pageColorsForeground:{value:"CanvasText",kind:b.VIEWER+b.PREFERENCE},pdfBugEnabled:{value:!1,kind:b.VIEWER+b.PREFERENCE},printResolution:{value:150,kind:b.VIEWER},renderer:{value:"canvas",kind:b.VIEWER},sidebarViewOnLoad:{value:-1,kind:b.VIEWER+b.PREFERENCE},scrollModeOnLoad:{value:-1,kind:b.VIEWER+b.PREFERENCE},spreadModeOnLoad:{value:-1,kind:b.VIEWER+b.PREFERENCE},textLayerMode:{value:1,kind:b.VIEWER+b.PREFERENCE},useOnlyCssZoom:{value:!1,kind:b.VIEWER+b.PREFERENCE},viewerCssTheme:{value:0,kind:b.VIEWER+b.PREFERENCE},viewOnLoad:{value:0,kind:b.VIEWER+b.PREFERENCE},cMapPacked:{value:!0,kind:b.API},cMapUrl:{value:"../web/cmaps/",kind:b.API},disableAutoFetch:{value:!1,kind:b.API+b.PREFERENCE},disableFontFace:{value:!1,kind:b.API+b.PREFERENCE},disableRange:{value:!1,kind:b.API+b.PREFERENCE},disableStream:{value:!1,kind:b.API+b.PREFERENCE},docBaseUrl:{value:"",kind:b.API},enableXfa:{value:!0,kind:b.API+b.PREFERENCE},fontExtraProperties:{value:!1,kind:b.API},isEvalSupported:{value:!0,kind:b.API},maxImageSize:{value:-1,kind:b.API},pdfBug:{value:!1,kind:b.API},standardFontDataUrl:{value:"../web/standard_fonts/",kind:b.API},verbosity:{value:1,kind:b.API},workerPort:{value:null,kind:b.WORKER},workerSrc:{value:"../build/pdf.worker.js",kind:b.WORKER}};r.disablePreferences={value:!1,kind:b.VIEWER},r.locale={value:navigator.language||"en-US",kind:b.VIEWER},r.sandboxBundleSrc={value:"../build/pdf.sandbox.js",kind:b.VIEWER},r.renderer.kind+=b.PREFERENCE;const C=Object.create(null);d.AppOptions=class o{constructor(){throw new Error("Cannot initialize AppOptions.")}static get(n){var f;const c=C[n];if(void 0!==c)return c;const P=r[n];return void 0!==P?null!=(f=P.compatibility)?f:P.value:void 0}static getAll(n=null){var P;const c=Object.create(null);for(const f in r){const p=r[f];if(n){if(0==(n&p.kind))continue;if(n===b.PREFERENCE){const i=p.value,_=typeof i;if("boolean"===_||"string"===_||"number"===_&&Number.isInteger(i)){c[f]=i;continue}throw new Error(`Invalid type for preference: ${f}`)}}const e=C[f];c[f]=void 0!==e?e:null!=(P=p.compatibility)?P:p.value}return c}static set(n,c){C[n]=c}static setAll(n){for(const c in n)C[c]=n[c]}static remove(n){delete C[n]}static _hasUserOptions(){return Object.keys(C).length>0}}},(D,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFRenderingQueue=void 0;var b=x(3),r=x(6);d.PDFRenderingQueue=class o{constructor(){this.pdfViewer=null,this.pdfThumbnailViewer=null,this.onIdle=null,this.highestPriorityPage=null,this.idleTimeout=null,this.printing=!1,this.isThumbnailViewEnabled=!1}setViewer(n){this.pdfViewer=n}setThumbnailViewer(n){this.pdfThumbnailViewer=n}isHighestPriority(n){return this.highestPriorityPage===n.renderingId}hasViewer(){return!!this.pdfViewer}renderHighestPriority(n){var c;this.idleTimeout&&(clearTimeout(this.idleTimeout),this.idleTimeout=null),!this.pdfViewer.forceRendering(n)&&(this.isThumbnailViewEnabled&&(null==(c=this.pdfThumbnailViewer)?void 0:c.forceRendering())||this.printing||this.onIdle&&(this.idleTimeout=setTimeout(this.onIdle.bind(this),3e4)))}getHighestPriority(n,c,P,f=!1){const p=n.views,e=p.length;if(0===e)return null;for(let T=0;T<e;T++){const k=p[T].view;if(!this.isViewFinished(k))return k}const i=n.first.id,_=n.last.id;if(_-i+1>e){const T=n.ids;for(let k=1,O=_-i;k<O;k++){const V=P?i+k:_-k;if(T.has(V))continue;const G=c[V-1];if(!this.isViewFinished(G))return G}}let m=P?_:i-2,y=c[m];return y&&!this.isViewFinished(y)||f&&(m+=P?1:-1,y=c[m],y&&!this.isViewFinished(y))?y:null}isViewFinished(n){return n.renderingState===r.RenderingStates.FINISHED}renderView(n){switch(n.renderingState){case r.RenderingStates.FINISHED:return!1;case r.RenderingStates.PAUSED:this.highestPriorityPage=n.renderingId,n.resume();break;case r.RenderingStates.RUNNING:this.highestPriorityPage=n.renderingId;break;case r.RenderingStates.INITIAL:this.highestPriorityPage=n.renderingId,n.draw().finally(()=>{this.renderHighestPriority()}).catch(c=>{c instanceof b.RenderingCancelledException||console.error(`renderView: "${c}"`)})}return!0}}},(D,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.TextHighlighter=void 0,d.TextHighlighter=class x{constructor({findController:r,eventBus:C,pageIndex:o}){this.findController=r,this.matches=[],this.eventBus=C,this.pageIdx=o,this._onUpdateTextLayerMatches=null,this.textDivs=null,this.textContentItemsStr=null,this.enabled=!1}setTextMapping(r,C){this.textDivs=r,this.textContentItemsStr=C}enable(){if(!this.textDivs||!this.textContentItemsStr)throw new Error("Text divs and strings have not been set.");if(this.enabled)throw new Error("TextHighlighter is already enabled.");this.enabled=!0,this._onUpdateTextLayerMatches||(this._onUpdateTextLayerMatches=r=>{(r.pageIndex===this.pageIdx||-1===r.pageIndex)&&this._updateMatches()},this.eventBus._on("updatetextlayermatches",this._onUpdateTextLayerMatches)),this._updateMatches()}disable(){!this.enabled||(this.enabled=!1,this._onUpdateTextLayerMatches&&(this.eventBus._off("updatetextlayermatches",this._onUpdateTextLayerMatches),this._onUpdateTextLayerMatches=null))}_convertMatches(r,C){if(!r)return[];const{textContentItemsStr:o}=this;let s=0,n=0;const c=o.length-1,P=[];for(let f=0,p=r.length;f<p;f++){let e=r[f];for(;s!==c&&e>=n+o[s].length;)n+=o[s].length,s++;s===o.length&&console.error("Could not find a matching mapping");const i={begin:{divIdx:s,offset:e-n}};for(e+=C[f];s!==c&&e>n+o[s].length;)n+=o[s].length,s++;i.end={divIdx:s,offset:e-n},P.push(i)}return P}_renderMatches(r){if(0===r.length)return;const{findController:C,pageIdx:o}=this,{textContentItemsStr:s,textDivs:n}=this,c=o===C.selected.pageIdx,P=C.selected.matchIdx;let p=null;function i(T,k){const O=T.divIdx;return n[O].textContent="",_(O,0,T.offset,k)}function _(T,k,O,V){let G=n[T];if(G.nodeType===Node.TEXT_NODE){const B=document.createElement("span");G.parentNode.insertBefore(B,G),B.appendChild(G),n[T]=B,G=B}const X=s[T].substring(k,O),Q=document.createTextNode(X);if(V){const B=document.createElement("span");return B.className=`${V} appended`,B.appendChild(Q),G.appendChild(B),V.includes("selected")?B.offsetLeft:0}return G.appendChild(Q),0}let m=P,y=m+1;if(C.state.highlightAll)m=0,y=r.length;else if(!c)return;for(let T=m;T<y;T++){const k=r[T],O=k.begin,V=k.end,G=c&&T===P,X=G?" selected":"";let Q=0;if(p&&O.divIdx===p.divIdx?_(p.divIdx,p.offset,O.offset):(null!==p&&_(p.divIdx,p.offset,undefined),i(O)),O.divIdx===V.divIdx)Q=_(O.divIdx,O.offset,V.offset,"highlight"+X);else{Q=_(O.divIdx,O.offset,undefined,"highlight begin"+X);for(let B=O.divIdx+1,$=V.divIdx;B<$;B++)n[B].className="highlight middle"+X;i(V,"highlight end"+X)}p=V,G&&C.scrollMatchIntoView({element:n[O.divIdx],selectedLeft:Q,pageIndex:o,matchIndex:P})}p&&_(p.divIdx,p.offset,undefined)}_updateMatches(){if(!this.enabled)return;const{findController:r,matches:C,pageIdx:o}=this,{textContentItemsStr:s,textDivs:n}=this;let c=-1;for(let p=0,e=C.length;p<e;p++){const i=C[p];for(let m=Math.max(c,i.begin.divIdx),y=i.end.divIdx;m<=y;m++){const T=n[m];T.textContent=s[m],T.className=""}c=i.end.divIdx+1}(null==r?void 0:r.highlightMatches)&&(this.matches=this._convertMatches(r.pageMatches[o]||null,r.pageMatchesLength[o]||null),this._renderMatches(this.matches))}}},(D,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.DownloadManager=void 0;var b=x(3);function r(o,s){const n=document.createElement("a");if(!n.click)throw new Error('DownloadManager: "a.click()" is not supported.');n.href=o,n.target="_parent","download"in n&&(n.download=s),(document.body||document.documentElement).appendChild(n),n.click(),n.remove()}d.DownloadManager=class C{constructor(){this._openBlobUrls=new WeakMap}downloadUrl(s,n){(0,b.createValidAbsoluteUrl)(s,"http://example.com")?r(s+"#pdfjs.action=download",n):console.error(`downloadUrl - not a valid URL: ${s}`)}downloadData(s,n,c){r(URL.createObjectURL(new Blob([s],{type:c})),n)}openOrDownloadData(s,n,c){const P=(0,b.isPdfFile)(c),f=P?"application/pdf":"";if(P){let e,p=this._openBlobUrls.get(s);p||(p=URL.createObjectURL(new Blob([n],{type:f})),this._openBlobUrls.set(s,p)),e="?file="+encodeURIComponent(p+"#"+c);try{return window.open(e),!0}catch(i){console.error(`openOrDownloadData: ${i}`),URL.revokeObjectURL(p),this._openBlobUrls.delete(s)}}return this.downloadData(n,c,f),!1}download(s,n,c,P="download"){r(URL.createObjectURL(s),c)}}},(D,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.WaitOnType=d.EventBus=d.AutomationEventBus=void 0,d.waitOnEventOrTimeout=function b({target:o,name:s,delay:n=0}){return new Promise(function(c,P){if("object"!=typeof o||!s||"string"!=typeof s||!(Number.isInteger(n)&&n>=0))throw new Error("waitOnEventOrTimeout - invalid parameters.");function f(_){o instanceof r?o._off(s,p):o.removeEventListener(s,p),i&&clearTimeout(i),c(_)}const p=f.bind(null,x.EVENT);o instanceof r?o._on(s,p):o.addEventListener(s,p);const e=f.bind(null,x.TIMEOUT),i=setTimeout(e,n)})};const x={EVENT:"event",TIMEOUT:"timeout"};d.WaitOnType=x;class r{constructor(){this._listeners=Object.create(null)}on(s,n,c=null){this._on(s,n,{external:!0,once:null==c?void 0:c.once})}off(s,n,c=null){this._off(s,n,{external:!0,once:null==c?void 0:c.once})}dispatch(s,n){const c=this._listeners[s];if(!c||0===c.length)return;let P;for(const{listener:f,external:p,once:e}of c.slice(0))e&&this._off(s,f),p?(P||(P=[])).push(f):f(n);if(P){for(const f of P)f(n);P=null}}_on(s,n,c=null){var f;((f=this._listeners)[s]||(f[s]=[])).push({listener:n,external:!0===(null==c?void 0:c.external),once:!0===(null==c?void 0:c.once)})}_off(s,n,c=null){const P=this._listeners[s];if(P)for(let f=0,p=P.length;f<p;f++)if(P[f].listener===n)return void P.splice(f,1)}}d.EventBus=r,d.AutomationEventBus=class C extends r{dispatch(s,n){throw new Error("Not implemented: AutomationEventBus.dispatch")}}},(D,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericL10n=void 0,x(19);var b=x(4);const r=document.webL10n;d.GenericL10n=class C{constructor(s){this._lang=s,this._ready=new Promise((n,c)=>{r.setLanguage((0,b.fixupLangCode)(s),()=>{n(r)})})}getLanguage(){var s=this;return g(function*(){return(yield s._ready).getLanguage()})()}getDirection(){var s=this;return g(function*(){return(yield s._ready).getDirection()})()}get(s,n=null,c=(0,b.getL10nFallback)(s,n)){var P=this;return g(function*(){return(yield P._ready).get(s,n,c)})()}translate(s){var n=this;return g(function*(){return(yield n._ready).translate(s)})()}}},()=>{document.webL10n=function(D,d,x){var b={},r="",C="textContent",o="",s={},n="loading";function i(B,$,J){$=$||function(M){},J=J||function(){};var ae=new XMLHttpRequest;ae.open("GET",B,!0),ae.overrideMimeType&&ae.overrideMimeType("text/plain; charset=utf-8"),ae.onreadystatechange=function(){4==ae.readyState&&(200==ae.status||0===ae.status?$(ae.responseText):J())},ae.onerror=J,ae.ontimeout=J;try{ae.send(null)}catch(de){J()}}function m(B,$){B&&(B=B.toLowerCase()),$=$||function(){},function y(){b={},r="",o=""}(),o=B;var J=function P(){return d.querySelectorAll('link[type="application/l10n"]')}(),ae=J.length;if(0!==ae){var u,t=0;u=function(){++t>=ae&&($(),n="complete")};for(var h=0;h<ae;h++)new l(J[h]).load(B,u)}else{var de=function f(){var B=d.querySelector('script[type="application/l10n"]');return B?JSON.parse(B.innerHTML):null}();if(de&&de.locales&&de.default_locale){if(console.log("using the embedded JSON directory, early way out"),!(b=de.locales[B])){var M=de.default_locale.toLowerCase();for(var a in de.locales){if((a=a.toLowerCase())===B){b=de.locales[B];break}a===M&&(b=de.locales[M])}}$()}else console.log("no resource to load, early way out");n="complete"}function l(A){var E=A.href;this.load=function(j,U){!function _(B,$,J,ae){var de=B.replace(/[^\/]*$/,"")||"./";function M(u){return u.lastIndexOf("\\")<0?u:u.replace(/\\\\/g,"\\").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\b/g,"\b").replace(/\\f/g,"\f").replace(/\\{/g,"{").replace(/\\}/g,"}").replace(/\\"/g,'"').replace(/\\'/g,"'")}i(B,function(u){r+=u,function a(u,t){var l={},h=/^\s*|\s*$/,S=/^\s*#|^\s*$/,A=/^\s*\[(.*)\]\s*$/,E=/^\s*@import\s+url\((.*)\)\s*$/i,j=/^([^=\s]*)\s*=\s*(.+)$/;function U(z,Y,Z){var ue=z.replace(h,"").split(/[\r\n]+/),ye="*",te=$.split("-",1)[0],ce=!1,oe="";!function w(){for(;;){if(!ue.length)return void Z();var I=ue.shift();if(!S.test(I)){if(Y){if(oe=A.exec(I)){ye=oe[1].toLowerCase(),ce="*"!==ye&&ye!==$&&ye!==te;continue}if(ce)continue;if(oe=E.exec(I))return void H(de+oe[1],w)}var q=I.match(j);q&&3==q.length&&(l[q[1]]=M(q[2]))}}}()}function H(z,Y){i(z,function(Z){U(Z,!1,Y)},function(){console.warn(z+" not found."),Y()})}U(u,!0,function(){t(l)})}(u,function(t){for(var l in t){var h,S,A=l.lastIndexOf(".");A>0?(h=l.substring(0,A),S=l.substring(A+1)):(h=l,S=C),b[h]||(b[h]={}),b[h][S]=t[l]}J&&J()})},ae)}(E,j,U,function(){console.warn(E+" not found."),console.warn('"'+j+'" resource not found'),o="",U()})}}}function k(B,$,J){var ae=b[B];if(!ae){if(console.warn("#"+B+" is undefined."),!J)return null;ae=J}var de={};for(var M in ae){var a=ae[M];a=V(a=O(a,$,B,M),$,B),de[M]=a}return de}function O(B,$,J,ae){var M=/\{\[\s*([a-zA-Z]+)\(([a-zA-Z]+)\)\s*\]\}/.exec(B);if(!M||!M.length)return B;var t,a=M[1],u=M[2];return $&&u in $?t=$[u]:u in b&&(t=b[u]),a in s&&(B=(0,s[a])(B,t,J,ae)),B}function V(B,$,J){return B.replace(/\{\{\s*(.+?)\s*\}\}/g,function(de,M){return $&&M in $?$[M]:M in b?b[M]:(console.log("argument {{"+M+"}} for #"+J+" is undefined."),de)})}function G(B){var $=function e(B){if(!B)return{};var $=B.getAttribute("data-l10n-id"),J=B.getAttribute("data-l10n-args"),ae={};if(J)try{ae=JSON.parse(J)}catch(de){console.warn("could not parse arguments for #"+$)}return{id:$,args:ae}}(B);if($.id){var J=k($.id,$.args);if(!J)return void console.warn("#"+$.id+" is undefined.");if(J[C]){if(0===function X(B){if(B.children)return B.children.length;if(void 0!==B.childElementCount)return B.childElementCount;for(var $=0,J=0;J<B.childNodes.length;J++)$+=1===B.nodeType?1:0;return $}(B))B[C]=J[C];else{for(var ae=B.childNodes,de=!1,M=0,a=ae.length;M<a;M++)3===ae[M].nodeType&&/\S/.test(ae[M].nodeValue)&&(de?ae[M].nodeValue="":(ae[M].nodeValue=J[C],de=!0));if(!de){var u=d.createTextNode(J[C]);B.insertBefore(u,B.firstChild)}}delete J[C]}for(var t in J)B[t]=J[t]}}return s.plural=function(B,$,J,ae){var de=parseFloat($);if(isNaN(de)||ae!=C)return B;s._pluralRules||(s._pluralRules=function T(B){function J(a,u){return-1!==u.indexOf(a)}function ae(a,u,t){return u<=a&&a<=t}var de={0:function(a){return"other"},1:function(a){return ae(a%100,3,10)?"few":0===a?"zero":ae(a%100,11,99)?"many":2==a?"two":1==a?"one":"other"},2:function(a){return 0!==a&&a%10==0?"many":2==a?"two":1==a?"one":"other"},3:function(a){return 1==a?"one":"other"},4:function(a){return ae(a,0,1)?"one":"other"},5:function(a){return ae(a,0,2)&&2!=a?"one":"other"},6:function(a){return 0===a?"zero":a%10==1&&a%100!=11?"one":"other"},7:function(a){return 2==a?"two":1==a?"one":"other"},8:function(a){return ae(a,3,6)?"few":ae(a,7,10)?"many":2==a?"two":1==a?"one":"other"},9:function(a){return 0===a||1!=a&&ae(a%100,1,19)?"few":1==a?"one":"other"},10:function(a){return ae(a%10,2,9)&&!ae(a%100,11,19)?"few":a%10!=1||ae(a%100,11,19)?"other":"one"},11:function(a){return ae(a%10,2,4)&&!ae(a%100,12,14)?"few":a%10==0||ae(a%10,5,9)||ae(a%100,11,14)?"many":a%10==1&&a%100!=11?"one":"other"},12:function(a){return ae(a,2,4)?"few":1==a?"one":"other"},13:function(a){return ae(a%10,2,4)&&!ae(a%100,12,14)?"few":1!=a&&ae(a%10,0,1)||ae(a%10,5,9)||ae(a%100,12,14)?"many":1==a?"one":"other"},14:function(a){return ae(a%100,3,4)?"few":a%100==2?"two":a%100==1?"one":"other"},15:function(a){return 0===a||ae(a%100,2,10)?"few":ae(a%100,11,19)?"many":1==a?"one":"other"},16:function(a){return a%10==1&&11!=a?"one":"other"},17:function(a){return 3==a?"few":0===a?"zero":6==a?"many":2==a?"two":1==a?"one":"other"},18:function(a){return 0===a?"zero":ae(a,0,2)&&0!==a&&2!=a?"one":"other"},19:function(a){return ae(a,2,10)?"few":ae(a,0,1)?"one":"other"},20:function(a){return!ae(a%10,3,4)&&a%10!=9||ae(a%100,10,19)||ae(a%100,70,79)||ae(a%100,90,99)?a%1e6==0&&0!==a?"many":a%10!=2||J(a%100,[12,72,92])?a%10!=1||J(a%100,[11,71,91])?"other":"one":"two":"few"},21:function(a){return 0===a?"zero":1==a?"one":"other"},22:function(a){return ae(a,0,1)||ae(a,11,99)?"one":"other"},23:function(a){return ae(a%10,1,2)||a%20==0?"one":"other"},24:function(a){return ae(a,3,10)||ae(a,13,19)?"few":J(a,[2,12])?"two":J(a,[1,11])?"one":"other"}},M={af:3,ak:4,am:4,ar:1,asa:3,az:0,be:11,bem:3,bez:3,bg:3,bh:4,bm:0,bn:3,bo:0,br:20,brx:3,bs:11,ca:3,cgg:3,chr:3,cs:12,cy:17,da:3,de:3,dv:3,dz:0,ee:3,el:3,en:3,eo:3,es:3,et:3,eu:3,fa:0,ff:5,fi:3,fil:4,fo:3,fr:5,fur:3,fy:3,ga:8,gd:24,gl:3,gsw:3,gu:3,guw:4,gv:23,ha:3,haw:3,he:2,hi:4,hr:11,hu:0,id:0,ig:0,ii:0,is:3,it:3,iu:7,ja:0,jmc:3,jv:0,ka:0,kab:5,kaj:3,kcg:3,kde:0,kea:0,kk:3,kl:3,km:0,kn:0,ko:0,ksb:3,ksh:21,ku:3,kw:7,lag:18,lb:3,lg:3,ln:4,lo:0,lt:10,lv:6,mas:3,mg:4,mk:16,ml:3,mn:3,mo:9,mr:3,ms:0,mt:15,my:0,nah:3,naq:7,nb:3,nd:3,ne:3,nl:3,nn:3,no:3,nr:3,nso:4,ny:3,nyn:3,om:3,or:3,pa:3,pap:3,pl:13,ps:3,pt:3,rm:3,ro:9,rof:3,ru:11,rwk:3,sah:0,saq:3,se:7,seh:3,ses:0,sg:0,sh:11,shi:19,sk:12,sl:14,sma:7,smi:7,smj:7,smn:7,sms:7,sn:3,so:3,sq:3,sr:11,ss:3,ssy:3,st:3,sv:3,sw:3,syr:3,ta:3,te:3,teo:3,th:0,ti:4,tig:3,tk:3,tl:4,tn:3,to:0,tr:0,ts:3,tzm:22,uk:11,ur:3,ve:3,vi:0,vun:3,wa:4,wae:3,wo:0,xh:3,xog:3,yo:0,zh:0,zu:3}[B.replace(/-.*$/,"")];return M in de?de[M]:(console.warn("plural form unknown for ["+B+"]"),function(){return"other"})}(o));var M="["+s._pluralRules(de)+"]";return 0===de&&J+"[zero]"in b?B=b[J+"[zero]"][ae]:1==de&&J+"[one]"in b?B=b[J+"[one]"][ae]:2==de&&J+"[two]"in b?B=b[J+"[two]"][ae]:J+M in b?B=b[J+M][ae]:J+"[other]"in b&&(B=b[J+"[other]"][ae]),B},{get:function(B,$,J){var M,ae=B.lastIndexOf("."),de=C;ae>0&&(de=B.substring(ae+1),B=B.substring(0,ae)),J&&((M={})[de]=J);var a=k(B,$,M);return a&&de in a?a[de]:"{{"+B+"}}"},getData:function(){return b},getText:function(){return r},getLanguage:function(){return o},setLanguage:function(B,$){m(B,function(){$&&$()})},getDirection:function(){var $=o.split("-",1)[0];return["ar","he","fa","ps","ur"].indexOf($)>=0?"rtl":"ltr"},translate:function Q(B){for(var $=function p(B){return B?B.querySelectorAll("*[data-l10n-id]"):[]}(B=B||d.documentElement),J=$.length,ae=0;ae<J;ae++)G($[ae]);G(B)},getReadyState:function(){return n},ready:function(B){B&&("complete"==n||"interactive"==n?D.setTimeout(function(){B()}):d.addEventListener&&d.addEventListener("localized",function $(){d.removeEventListener("localized",$),B()}))}}}(window,document)},(D,d,x)=>{var V,xt,X,ot,B,lt,J,Et,de,Tt,a,Mt,t,ct,h,Lt,A,kt,j,Je,H,Ge,Y,je,ue,Rt,te,ht,oe,dt,I,Ze,ge,Ft,me,ut,Se,Ot,Le,ze;Object.defineProperty(d,"__esModule",{value:!0}),d.PDFFindController=d.FindState=void 0;var b=x(6),r=x(3),C=x(21);const o={FOUND:0,NOT_FOUND:1,WRAPPED:2,PENDING:3};d.FindState=o;const P={"\u2010":"-","\u2018":"'","\u2019":"'","\u201a":"'","\u201b":"'","\u201c":'"',"\u201d":'"',"\u201e":'"',"\u201f":'"',"\xbc":"1/4","\xbd":"1/2","\xbe":"3/4"},f=new Set([12441,12442,2381,2509,2637,2765,2893,3021,3149,3277,3387,3388,3405,3530,3642,3770,3972,4153,4154,5908,5940,6098,6752,6980,7082,7083,7154,7155,11647,43014,43052,43204,43347,43456,43766,44013,3158,3953,3954,3962,3963,3964,3965,3968,3956]),p=[...f.values()].map(se=>String.fromCharCode(se)).join(""),e=/\p{M}+/gu,i=/([.*+?^${}()|[\]\\])|(\p{P})|(\s+)|(\p{M})|(\p{L})/gu,_=/([^\p{M}])\p{M}*$/u,m=/^\p{M}*([^\p{M}])/u;let y=null;function T(se){if(!y){const Ae=Object.keys(P).join("");y=new RegExp(`([${Ae}])|(\\p{M}+(?:-\\n)?)|(\\S-\\n)|(\\n)`,"gum")}const R=[];let F;for(;null!==(F=e.exec(se));)R.push([F[0].length,F.index]);let he=se.normalize("NFD");const pe=[[0,0]];let N=0,ie=0,v=0,W=0,le=!1;return he=he.replace(y,(Ae,Pe,we,Re,Me,Oe)=>{var Ve;if(Oe-=v,Pe){const Be=P[Ae],Ie=Be.length;for(let Ne=1;Ne<Ie;Ne++)pe.push([Oe-ie+Ne,ie-Ne]);return ie-=Ie-1,Be}if(we){const Be=we.endsWith("\n"),Ie=Be?we.length-2:we.length;le=!0;let Ne=Ie;Oe+W===(null==(Ve=R[N])?void 0:Ve[1])&&(Ne-=R[N][0],++N);for(let De=1;De<Ne+1;De++)pe.push([Oe-1-ie+De,ie-De]);return ie-=Ne,v+=Ne,Be?(pe.push([(Oe+=Ie-1)-ie+1,1+ie]),ie+=1,v+=1,W+=1,we.slice(0,Ie)):we}return Re?(pe.push([Oe-ie+1,1+ie]),ie+=1,v+=1,W+=1,Re.charAt(0)):(pe.push([Oe-ie+1,ie-1]),ie-=1,v+=1,W+=1," ")}),pe.push([he.length,ie]),[he,pe,le]}function k(se,R,F){if(!se)return[R,F];const he=R,pe=R+F;let N=(0,b.binarySearchFirstItem)(se,v=>v[0]>=he);se[N][0]>he&&--N;let ie=(0,b.binarySearchFirstItem)(se,v=>v[0]>=pe,N);return se[ie][0]>pe&&--ie,[he+se[N][1],F+se[ie][1]-se[N][1]]}V=new WeakSet,xt=function(R){if(!R)return;const F=this._pdfDocument,{type:he}=R;(null===this._state||xe(this,J,Et).call(this,R))&&(this._dirtyMatch=!0),this._state=R,"highlightallchange"!==he&&xe(this,Le,ze).call(this,o.PENDING),this._firstPageCapability.promise.then(()=>{if(!this._pdfDocument||F&&this._pdfDocument!==F)return;xe(this,A,kt).call(this);const pe=!this._highlightMatches,N=!!this._findTimeout;this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),he?this._dirtyMatch?xe(this,Y,je).call(this):"again"===he?(xe(this,Y,je).call(this),pe&&this._state.highlightAll&&xe(this,H,Ge).call(this)):"highlightallchange"===he?(N?xe(this,Y,je).call(this):this._highlightMatches=!0,xe(this,H,Ge).call(this)):xe(this,Y,je).call(this):this._findTimeout=setTimeout(()=>{xe(this,Y,je).call(this),this._findTimeout=null},250)})},X=new WeakSet,ot=function(){this._highlightMatches=!1,this._scrollMatches=!1,this._pdfDocument=null,this._pageMatches=[],this._pageMatchesLength=[],this._state=null,this._selected={pageIdx:-1,matchIdx:-1},this._offset={pageIdx:null,matchIdx:null,wrapped:!1},this._extractTextPromises=[],this._pageContents=[],this._pageDiffs=[],this._hasDiacritics=[],this._matchesCountTotal=0,this._pagesToSearch=null,this._pendingFindMatches=new Set,this._resumePageIdx=null,this._dirtyMatch=!1,clearTimeout(this._findTimeout),this._findTimeout=null,this._firstPageCapability=(0,r.createPromiseCapability)()},B=new WeakSet,lt=function(){return this._state.query!==this._rawQuery&&(this._rawQuery=this._state.query,[this._normalizedQuery]=T(this._state.query)),this._normalizedQuery},J=new WeakSet,Et=function(R){if(R.query!==this._state.query)return!0;switch(R.type){case"again":const F=this._selected.pageIdx+1,he=this._linkService;return F>=1&&F<=he.pagesCount&&F!==he.page&&!he.isPageVisible(F);case"highlightallchange":return!1}return!0},de=new WeakSet,Tt=function(R,F,he){let pe=R.slice(0,F).match(_);if(pe){const N=R.charCodeAt(F),ie=pe[1].charCodeAt(0);if((0,C.getCharacterType)(N)===(0,C.getCharacterType)(ie))return!1}if(pe=R.slice(F+he).match(m),pe){const N=R.charCodeAt(F+he-1),ie=pe[1].charCodeAt(0);if((0,C.getCharacterType)(N)===(0,C.getCharacterType)(ie))return!1}return!0},a=new WeakSet,Mt=function(R,F,he,pe){const N=[],ie=[],v=this._pageDiffs[he];let W;for(;null!==(W=R.exec(pe));){if(F&&!xe(this,de,Tt).call(this,pe,W.index,W[0].length))continue;const[le,Ae]=k(v,W.index,W[0].length);Ae&&(N.push(le),ie.push(Ae))}this._pageMatches[he]=N,this._pageMatchesLength[he]=ie},t=new WeakSet,ct=function(R,F){const{matchDiacritics:he}=this._state;let pe=!1;const N="[ ]*";return(R=R.replace(i,(ie,v,W,le,Ae,Pe)=>v?`[ ]*\\${v}[ ]*`:W?`[ ]*${W}[ ]*`:le?"[ ]+":he?Ae||Pe:Ae?f.has(Ae.charCodeAt(0))?Ae:"":F?(pe=!0,`${Pe}\\p{M}*`):Pe)).endsWith(N)&&(R=R.slice(0,R.length-N.length)),he&&F&&(pe=!0,R=`${R}(?=[${p}]|[^\\p{M}]|$)`),[pe,R]},h=new WeakSet,Lt=function(R){let F=Ce(this,B,lt);if(0===F.length)return;const{caseSensitive:he,entireWord:pe,phraseSearch:N}=this._state,ie=this._pageContents[R],v=this._hasDiacritics[R];let W=!1;if(N)[W,F]=xe(this,t,ct).call(this,F,v);else{const Pe=F.match(/\S+/g);Pe&&(F=Pe.sort().reverse().map(we=>{const[Re,Me]=xe(this,t,ct).call(this,we,v);return W||(W=Re),`(${Me})`}).join("|"))}F=new RegExp(F,`g${W?"u":""}${he?"":"i"}`),xe(this,a,Mt).call(this,F,pe,R,ie),this._state.highlightAll&&xe(this,j,Je).call(this,R),this._resumePageIdx===R&&(this._resumePageIdx=null,xe(this,te,ht).call(this));const Ae=this._pageMatches[R].length;Ae>0&&(this._matchesCountTotal+=Ae,xe(this,Se,Ot).call(this))},A=new WeakSet,kt=function(){if(this._extractTextPromises.length>0)return;let R=Promise.resolve();for(let F=0,he=this._linkService.pagesCount;F<he;F++){const pe=(0,r.createPromiseCapability)();this._extractTextPromises[F]=pe.promise,R=R.then(()=>this._pdfDocument.getPage(F+1).then(N=>N.getTextContent()).then(N=>{const ie=[];for(const v of N.items)ie.push(v.str),v.hasEOL&&ie.push("\n");[this._pageContents[F],this._pageDiffs[F],this._hasDiacritics[F]]=T(ie.join("")),pe.resolve()},N=>{console.error(`Unable to get text content for page ${F+1}`,N),this._pageContents[F]="",this._pageDiffs[F]=null,this._hasDiacritics[F]=!1,pe.resolve()}))}},j=new WeakSet,Je=function(R){this._scrollMatches&&this._selected.pageIdx===R&&(this._linkService.page=R+1),this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:R})},H=new WeakSet,Ge=function(){this._eventBus.dispatch("updatetextlayermatches",{source:this,pageIndex:-1})},Y=new WeakSet,je=function(){const R=this._state.findPrevious,F=this._linkService.page-1,he=this._linkService.pagesCount;if(this._highlightMatches=!0,this._dirtyMatch){this._dirtyMatch=!1,this._selected.pageIdx=this._selected.matchIdx=-1,this._offset.pageIdx=F,this._offset.matchIdx=null,this._offset.wrapped=!1,this._resumePageIdx=null,this._pageMatches.length=0,this._pageMatchesLength.length=0,this._matchesCountTotal=0,xe(this,H,Ge).call(this);for(let N=0;N<he;N++)this._pendingFindMatches.has(N)||(this._pendingFindMatches.add(N),this._extractTextPromises[N].then(()=>{this._pendingFindMatches.delete(N),xe(this,h,Lt).call(this,N)}))}if(""===Ce(this,B,lt))return void xe(this,Le,ze).call(this,o.FOUND);if(this._resumePageIdx)return;const pe=this._offset;if(this._pagesToSearch=he,null!==pe.matchIdx){const N=this._pageMatches[pe.pageIdx].length;if(!R&&pe.matchIdx+1<N||R&&pe.matchIdx>0)return pe.matchIdx=R?pe.matchIdx-1:pe.matchIdx+1,void xe(this,I,Ze).call(this,!0);xe(this,oe,dt).call(this,R)}xe(this,te,ht).call(this)},ue=new WeakSet,Rt=function(R){const F=this._offset,he=R.length,pe=this._state.findPrevious;return he?(F.matchIdx=pe?he-1:0,xe(this,I,Ze).call(this,!0),!0):(xe(this,oe,dt).call(this,pe),!!(F.wrapped&&(F.matchIdx=null,this._pagesToSearch<0))&&(xe(this,I,Ze).call(this,!1),!0))},te=new WeakSet,ht=function(){null!==this._resumePageIdx&&console.error("There can only be one pending page.");let R=null;do{const F=this._offset.pageIdx;if(R=this._pageMatches[F],!R){this._resumePageIdx=F;break}}while(!xe(this,ue,Rt).call(this,R))},oe=new WeakSet,dt=function(R){const F=this._offset,he=this._linkService.pagesCount;F.pageIdx=R?F.pageIdx-1:F.pageIdx+1,F.matchIdx=null,this._pagesToSearch--,(F.pageIdx>=he||F.pageIdx<0)&&(F.pageIdx=R?he-1:0,F.wrapped=!0)},I=new WeakSet,Ze=function(R=!1){let F=o.NOT_FOUND;const he=this._offset.wrapped;if(this._offset.wrapped=!1,R){const pe=this._selected.pageIdx;this._selected.pageIdx=this._offset.pageIdx,this._selected.matchIdx=this._offset.matchIdx,F=he?o.WRAPPED:o.FOUND,-1!==pe&&pe!==this._selected.pageIdx&&xe(this,j,Je).call(this,pe)}xe(this,Le,ze).call(this,F,this._state.findPrevious),-1!==this._selected.pageIdx&&(this._scrollMatches=!0,xe(this,j,Je).call(this,this._selected.pageIdx))},ge=new WeakSet,Ft=function(R){const F=this._pdfDocument;this._firstPageCapability.promise.then(()=>{!this._pdfDocument||F&&this._pdfDocument!==F||(this._findTimeout&&(clearTimeout(this._findTimeout),this._findTimeout=null),this._resumePageIdx&&(this._resumePageIdx=null,this._dirtyMatch=!0),xe(this,Le,ze).call(this,o.FOUND),this._highlightMatches=!1,xe(this,H,Ge).call(this))})},me=new WeakSet,ut=function(){var N;const{pageIdx:R,matchIdx:F}=this._selected;let he=0,pe=this._matchesCountTotal;if(-1!==F){for(let ie=0;ie<R;ie++)he+=(null==(N=this._pageMatches[ie])?void 0:N.length)||0;he+=F+1}return(he<1||he>pe)&&(he=pe=0),{current:he,total:pe}},Se=new WeakSet,Ot=function(){this._eventBus.dispatch("updatefindmatchescount",{source:this,matchesCount:xe(this,me,ut).call(this)})},Le=new WeakSet,ze=function(R,F=!1){var he,pe;this._eventBus.dispatch("updatefindcontrolstate",{source:this,state:R,previous:F,matchesCount:xe(this,me,ut).call(this),rawQuery:null!=(pe=null==(he=this._state)?void 0:he.query)?pe:null})},d.PDFFindController=class O{constructor({linkService:R,eventBus:F}){Ee(this,V),Ee(this,X),Ee(this,B),Ee(this,J),Ee(this,de),Ee(this,a),Ee(this,t),Ee(this,h),Ee(this,A),Ee(this,j),Ee(this,H),Ee(this,Y),Ee(this,ue),Ee(this,te),Ee(this,oe),Ee(this,I),Ee(this,ge),Ee(this,me),Ee(this,Se),Ee(this,Le),this._linkService=R,this._eventBus=F,xe(this,X,ot).call(this),F._on("find",xe(this,V,xt).bind(this)),F._on("findbarclose",xe(this,ge,Ft).bind(this))}get highlightMatches(){return this._highlightMatches}get pageMatches(){return this._pageMatches}get pageMatchesLength(){return this._pageMatchesLength}get selected(){return this._selected}get state(){return this._state}setDocument(R){this._pdfDocument&&xe(this,X,ot).call(this),R&&(this._pdfDocument=R,this._firstPageCapability.resolve())}scrollMatchIntoView({element:R=null,selectedLeft:F=0,pageIndex:he=-1,matchIndex:pe=-1}){this._scrollMatches&&R&&-1!==pe&&pe===this._selected.matchIdx&&-1!==he&&he===this._selected.pageIdx&&(this._scrollMatches=!1,(0,b.scrollIntoView)(R,{top:-50,left:F+-400},!0))}}},(D,d)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.CharacterType=void 0,d.getCharacterType=function e(i){return function b(i){return i<11904}(i)?function r(i){return 0==(65408&i)}(i)?function s(i){return 32===i||9===i||13===i||10===i}(i)?x.SPACE:function C(i){return i>=97&&i<=122||i>=65&&i<=90}(i)||function o(i){return i>=48&&i<=57}(i)||95===i?x.ALPHA_LETTER:x.PUNCT:function p(i){return 3584==(65408&i)}(i)?x.THAI_LETTER:160===i?x.SPACE:x.ALPHA_LETTER:function n(i){return i>=13312&&i<=40959||i>=63744&&i<=64255}(i)?x.HAN_LETTER:function c(i){return i>=12448&&i<=12543}(i)?x.KATAKANA_LETTER:function P(i){return i>=12352&&i<=12447}(i)?x.HIRAGANA_LETTER:function f(i){return i>=65376&&i<=65439}(i)?x.HALFWIDTH_KATAKANA_LETTER:x.ALPHA_LETTER};const x={SPACE:0,ALPHA_LETTER:1,PUNCT:2,HAN_LETTER:3,KATAKANA_LETTER:4,HIRAGANA_LETTER:5,HALFWIDTH_KATAKANA_LETTER:6,THAI_LETTER:7};d.CharacterType=x},(D,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFHistory=void 0,d.isDestArraysEqual=f,d.isDestHashesEqual=P;var b=x(6),r=x(17);function n(){return document.location.hash}function P(p,e){return"string"==typeof p&&"string"==typeof e&&(p===e||(0,b.parseQueryString)(p).get("nameddest")===e)}function f(p,e){function i(_,m){if(typeof _!=typeof m||Array.isArray(_)||Array.isArray(m))return!1;if(null!==_&&"object"==typeof _&&null!==m){if(Object.keys(_).length!==Object.keys(m).length)return!1;for(const y in _)if(!i(_[y],m[y]))return!1;return!0}return _===m||Number.isNaN(_)&&Number.isNaN(m)}if(!Array.isArray(p)||!Array.isArray(e)||p.length!==e.length)return!1;for(let _=0,m=p.length;_<m;_++)if(!i(p[_],e[_]))return!1;return!0}d.PDFHistory=class c{constructor({linkService:e,eventBus:i}){this.linkService=e,this.eventBus=i,this._initialized=!1,this._fingerprint="",this.reset(),this._boundEvents=null,this.eventBus._on("pagesinit",()=>{this._isPagesLoaded=!1,this.eventBus._on("pagesloaded",_=>{this._isPagesLoaded=!!_.pagesCount},{once:!0})})}initialize({fingerprint:e,resetHistory:i=!1,updateUrl:_=!1}){if(!e||"string"!=typeof e)return void console.error('PDFHistory.initialize: The "fingerprint" must be a non-empty string.');this._initialized&&this.reset();const m=""!==this._fingerprint&&this._fingerprint!==e;this._fingerprint=e,this._updateUrl=!0===_,this._initialized=!0,this._bindEvents();const y=window.history.state;if(this._popStateInProgress=!1,this._blockHashChange=0,this._currentHash=n(),this._numPositionUpdates=0,this._uid=this._maxUid=0,this._destination=null,this._position=null,!this._isValidState(y,!0)||i){const{hash:k,page:O,rotation:V}=this._parseCurrentHash(!0);return!k||m||i?void this._pushOrReplaceState(null,!0):void this._pushOrReplaceState({hash:k,page:O,rotation:V},!0)}const T=y.destination;this._updateInternalState(T,y.uid,!0),void 0!==T.rotation&&(this._initialRotation=T.rotation),T.dest?(this._initialBookmark=JSON.stringify(T.dest),this._destination.page=null):T.hash?this._initialBookmark=T.hash:T.page&&(this._initialBookmark=`page=${T.page}`)}reset(){this._initialized&&(this._pageHide(),this._initialized=!1,this._unbindEvents()),this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._initialBookmark=null,this._initialRotation=null}push({namedDest:e=null,explicitDest:i,pageNumber:_}){if(!this._initialized)return;if(e&&"string"!=typeof e)return void console.error(`PDFHistory.push: "${e}" is not a valid namedDest parameter.`);if(!Array.isArray(i))return void console.error(`PDFHistory.push: "${i}" is not a valid explicitDest parameter.`);if(!this._isValidPage(_)&&(null!==_||this._destination))return void console.error(`PDFHistory.push: "${_}" is not a valid pageNumber parameter.`);const m=e||JSON.stringify(i);if(!m)return;let y=!1;if(this._destination&&(P(this._destination.hash,m)||f(this._destination.dest,i))){if(this._destination.page)return;y=!0}this._popStateInProgress&&!y||(this._pushOrReplaceState({dest:i,hash:m,page:_,rotation:this.linkService.rotation},y),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1})))}pushPage(e){var i;if(this._initialized){if(!this._isValidPage(e))return void console.error(`PDFHistory.pushPage: "${e}" is not a valid page number.`);(null==(i=this._destination)?void 0:i.page)!==e&&(this._popStateInProgress||(this._pushOrReplaceState({dest:null,hash:`page=${e}`,page:e,rotation:this.linkService.rotation}),this._popStateInProgress||(this._popStateInProgress=!0,Promise.resolve().then(()=>{this._popStateInProgress=!1}))))}}pushCurrentPosition(){!this._initialized||this._popStateInProgress||this._tryPushCurrentPosition()}back(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this._isValidState(e)&&e.uid>0&&window.history.back()}forward(){if(!this._initialized||this._popStateInProgress)return;const e=window.history.state;this._isValidState(e)&&e.uid<this._maxUid&&window.history.forward()}get popStateInProgress(){return this._initialized&&(this._popStateInProgress||this._blockHashChange>0)}get initialBookmark(){return this._initialized?this._initialBookmark:null}get initialRotation(){return this._initialized?this._initialRotation:null}_pushOrReplaceState(e,i=!1){const _=i||!this._destination,m={fingerprint:this._fingerprint,uid:_?this._uid:this._uid+1,destination:e};let y;if(this._updateInternalState(e,m.uid),this._updateUrl&&(null==e?void 0:e.hash)){const T=document.location.href.split("#")[0];T.startsWith("file://")||(y=`${T}#${e.hash}`)}_?window.history.replaceState(m,"",y):window.history.pushState(m,"",y)}_tryPushCurrentPosition(e=!1){if(!this._position)return;let i=this._position;if(e&&(i=Object.assign(Object.create(null),this._position),i.temporary=!0),!this._destination)return void this._pushOrReplaceState(i);if(this._destination.temporary)return void this._pushOrReplaceState(i,!0);if(this._destination.hash===i.hash||!this._destination.page&&this._numPositionUpdates<=50)return;let _=!1;if(this._destination.page>=i.first&&this._destination.page<=i.page){if(void 0!==this._destination.dest||!this._destination.first)return;_=!0}this._pushOrReplaceState(i,_)}_isValidPage(e){return Number.isInteger(e)&&e>0&&e<=this.linkService.pagesCount}_isValidState(e,i=!1){if(!e)return!1;if(e.fingerprint!==this._fingerprint){if(!i)return!1;{if("string"!=typeof e.fingerprint||e.fingerprint.length!==this._fingerprint.length)return!1;const[_]=performance.getEntriesByType("navigation");if("reload"!==(null==_?void 0:_.type))return!1}}return!(!Number.isInteger(e.uid)||e.uid<0||null===e.destination||"object"!=typeof e.destination)}_updateInternalState(e,i,_=!1){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),_&&(null==e?void 0:e.temporary)&&delete e.temporary,this._destination=e,this._uid=i,this._maxUid=Math.max(this._maxUid,i),this._numPositionUpdates=0}_parseCurrentHash(e=!1){const i=unescape(n()).substring(1),_=(0,b.parseQueryString)(i),m=_.get("nameddest")||"";let y=0|_.get("page");return(!this._isValidPage(y)||e&&m.length>0)&&(y=null),{hash:i,page:y,rotation:this.linkService.rotation}}_updateViewarea({location:e}){this._updateViewareaTimeout&&(clearTimeout(this._updateViewareaTimeout),this._updateViewareaTimeout=null),this._position={hash:e.pdfOpenParams.substring(1),page:this.linkService.page,first:e.pageNumber,rotation:e.rotation},!this._popStateInProgress&&(this._isPagesLoaded&&this._destination&&!this._destination.page&&this._numPositionUpdates++,this._updateViewareaTimeout=setTimeout(()=>{this._popStateInProgress||this._tryPushCurrentPosition(!0),this._updateViewareaTimeout=null},1e3))}_popState({state:e}){const i=n(),_=this._currentHash!==i;if(this._currentHash=i,!e){this._uid++;const{hash:y,page:T,rotation:k}=this._parseCurrentHash();return void this._pushOrReplaceState({hash:y,page:T,rotation:k},!0)}if(!this._isValidState(e))return;this._popStateInProgress=!0,_&&(this._blockHashChange++,(0,r.waitOnEventOrTimeout)({target:window,name:"hashchange",delay:1e3}).then(()=>{this._blockHashChange--}));const m=e.destination;this._updateInternalState(m,e.uid,!0),(0,b.isValidRotation)(m.rotation)&&(this.linkService.rotation=m.rotation),m.dest?this.linkService.goToDestination(m.dest):m.hash?this.linkService.setHash(m.hash):m.page&&(this.linkService.page=m.page),Promise.resolve().then(()=>{this._popStateInProgress=!1})}_pageHide(){(!this._destination||this._destination.temporary)&&this._tryPushCurrentPosition()}_bindEvents(){this._boundEvents||(this._boundEvents={updateViewarea:this._updateViewarea.bind(this),popState:this._popState.bind(this),pageHide:this._pageHide.bind(this)},this.eventBus._on("updateviewarea",this._boundEvents.updateViewarea),window.addEventListener("popstate",this._boundEvents.popState),window.addEventListener("pagehide",this._boundEvents.pageHide))}_unbindEvents(){!this._boundEvents||(this.eventBus._off("updateviewarea",this._boundEvents.updateViewarea),window.removeEventListener("popstate",this._boundEvents.popState),window.removeEventListener("pagehide",this._boundEvents.pageHide),this._boundEvents=null)}}},(D,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.PDFScriptingManager=void 0;var b=x(6),r=x(3);d.PDFScriptingManager=class C{constructor({eventBus:s,sandboxBundleSrc:n=null,scriptingFactory:c=null,docPropertiesLookup:P=null}){this._pdfDocument=null,this._pdfViewer=null,this._closeCapability=null,this._destroyCapability=null,this._scripting=null,this._mouseState=Object.create(null),this._ready=!1,this._eventBus=s,this._sandboxBundleSrc=n,this._scriptingFactory=c,this._docPropertiesLookup=P,this._scriptingFactory||window.addEventListener("updatefromsandbox",f=>{this._eventBus.dispatch("updatefromsandbox",{source:window,detail:f.detail})})}setViewer(s){this._pdfViewer=s}setDocument(s){var n=this;return g(function*(){var p;if(n._pdfDocument&&(yield n._destroyScripting()),n._pdfDocument=s,!s)return;const[c,P,f]=yield Promise.all([s.getFieldObjects(),s.getCalculationOrderIds(),s.getJSActions()]);if(c||f){if(s===n._pdfDocument){try{n._scripting=n._createScripting()}catch(e){return console.error(`PDFScriptingManager.setDocument: "${null==e?void 0:e.message}".`),void(yield n._destroyScripting())}n._internalEvents.set("updatefromsandbox",e=>{(null==e?void 0:e.source)===window&&n._updateFromSandbox(e.detail)}),n._internalEvents.set("dispatcheventinsandbox",e=>{var i;null==(i=n._scripting)||i.dispatchEventInSandbox(e.detail)}),n._internalEvents.set("pagechanging",({pageNumber:e,previous:i})=>{e!==i&&(n._dispatchPageClose(i),n._dispatchPageOpen(e))}),n._internalEvents.set("pagerendered",({pageNumber:e})=>{!n._pageOpenPending.has(e)||e===n._pdfViewer.currentPageNumber&&n._dispatchPageOpen(e)}),n._internalEvents.set("pagesdestroy",function(){var e=g(function*(i){var _,m;yield n._dispatchPageClose(n._pdfViewer.currentPageNumber),yield null==(_=n._scripting)?void 0:_.dispatchEventInSandbox({id:"doc",name:"WillClose"}),null==(m=n._closeCapability)||m.resolve()});return function(i){return e.apply(this,arguments)}}()),n._domEvents.set("mousedown",e=>{n._mouseState.isDown=!0}),n._domEvents.set("mouseup",e=>{n._mouseState.isDown=!1});for(const[e,i]of n._internalEvents)n._eventBus._on(e,i);for(const[e,i]of n._domEvents)window.addEventListener(e,i,!0);try{const e=yield n._getDocProperties();if(s!==n._pdfDocument)return;yield n._scripting.createSandbox({objects:c,calculationOrder:P,appInfo:{platform:navigator.platform,language:navigator.language},docInfo:Ye($e({},e),{actions:f})}),n._eventBus.dispatch("sandboxcreated",{source:n})}catch(e){return console.error(`PDFScriptingManager.setDocument: "${null==e?void 0:e.message}".`),void(yield n._destroyScripting())}yield null==(p=n._scripting)?void 0:p.dispatchEventInSandbox({id:"doc",name:"Open"}),yield n._dispatchPageOpen(n._pdfViewer.currentPageNumber,!0),Promise.resolve().then(()=>{s===n._pdfDocument&&(n._ready=!0)})}}else yield n._destroyScripting()})()}dispatchWillSave(s){var n=this;return g(function*(){var c;return null==(c=n._scripting)?void 0:c.dispatchEventInSandbox({id:"doc",name:"WillSave"})})()}dispatchDidSave(s){var n=this;return g(function*(){var c;return null==(c=n._scripting)?void 0:c.dispatchEventInSandbox({id:"doc",name:"DidSave"})})()}dispatchWillPrint(s){var n=this;return g(function*(){var c;return null==(c=n._scripting)?void 0:c.dispatchEventInSandbox({id:"doc",name:"WillPrint"})})()}dispatchDidPrint(s){var n=this;return g(function*(){var c;return null==(c=n._scripting)?void 0:c.dispatchEventInSandbox({id:"doc",name:"DidPrint"})})()}get mouseState(){return this._mouseState}get destroyPromise(){var s;return(null==(s=this._destroyCapability)?void 0:s.promise)||null}get ready(){return this._ready}get _internalEvents(){return(0,r.shadow)(this,"_internalEvents",new Map)}get _domEvents(){return(0,r.shadow)(this,"_domEvents",new Map)}get _pageOpenPending(){return(0,r.shadow)(this,"_pageOpenPending",new Set)}get _visitedPages(){return(0,r.shadow)(this,"_visitedPages",new Map)}_updateFromSandbox(s){var n=this;return g(function*(){var _;const c=n._pdfViewer.isInPresentationMode||n._pdfViewer.isChangingPresentationMode,{id:P,siblings:f,command:p,value:e}=s;if(!P){switch(p){case"clear":console.clear();break;case"error":console.error(e);break;case"layout":if(c)return;const m=(0,b.apiPageLayoutToViewerModes)(e);n._pdfViewer.spreadMode=m.spreadMode;break;case"page-num":n._pdfViewer.currentPageNumber=e+1;break;case"print":yield n._pdfViewer.pagesPromise,n._eventBus.dispatch("print",{source:n});break;case"println":console.log(e);break;case"zoom":if(c)return;n._pdfViewer.currentScaleValue=e;break;case"SaveAs":n._eventBus.dispatch("save",{source:n});break;case"FirstPage":n._pdfViewer.currentPageNumber=1;break;case"LastPage":n._pdfViewer.currentPageNumber=n._pdfViewer.pagesCount;break;case"NextPage":n._pdfViewer.nextPage();break;case"PrevPage":n._pdfViewer.previousPage();break;case"ZoomViewIn":if(c)return;n._pdfViewer.increaseScale();break;case"ZoomViewOut":if(c)return;n._pdfViewer.decreaseScale()}return}if(c&&s.focus)return;delete s.id,delete s.siblings;const i=f?[P,...f]:[P];for(const m of i){const y=document.getElementById(m);y?y.dispatchEvent(new CustomEvent("updatefromsandbox",{detail:s})):null==(_=n._pdfDocument)||_.annotationStorage.setValue(m,s)}})()}_dispatchPageOpen(s,n=!1){var c=this;return g(function*(){const P=c._pdfDocument,f=c._visitedPages;if(n&&(c._closeCapability=(0,r.createPromiseCapability)()),!c._closeCapability)return;const p=c._pdfViewer.getPageView(s-1);if((null==p?void 0:p.renderingState)!==b.RenderingStates.FINISHED)return void c._pageOpenPending.add(s);c._pageOpenPending.delete(s);const e=g(function*(){var _,m;const i=yield f.has(s)?null:null==(_=p.pdfPage)?void 0:_.getJSActions();P===c._pdfDocument&&(yield null==(m=c._scripting)?void 0:m.dispatchEventInSandbox({id:"page",name:"PageOpen",pageNumber:s,actions:i}))})();f.set(s,e)})()}_dispatchPageClose(s){var n=this;return g(function*(){var p;const c=n._pdfDocument,P=n._visitedPages;if(!n._closeCapability||n._pageOpenPending.has(s))return;const f=P.get(s);!f||(P.set(s,null),yield f,c===n._pdfDocument&&(yield null==(p=n._scripting)?void 0:p.dispatchEventInSandbox({id:"page",name:"PageClose",pageNumber:s})))})()}_getDocProperties(){var s=this;return g(function*(){if(s._docPropertiesLookup)return s._docPropertiesLookup(s._pdfDocument);const{docPropertiesLookup:n}=x(24);return n(s._pdfDocument)})()}_createScripting(){if(this._destroyCapability=(0,r.createPromiseCapability)(),this._scripting)throw new Error("_createScripting: Scripting already exists.");if(this._scriptingFactory)return this._scriptingFactory.createScripting({sandboxBundleSrc:this._sandboxBundleSrc});const{GenericScripting:s}=x(24);return new s(this._sandboxBundleSrc)}_destroyScripting(){var s=this;return g(function*(){var n,c;if(!s._scripting)return s._pdfDocument=null,void(null==(n=s._destroyCapability)||n.resolve());s._closeCapability&&(yield Promise.race([s._closeCapability.promise,new Promise(P=>{setTimeout(P,1e3)})]).catch(P=>{}),s._closeCapability=null),s._pdfDocument=null;try{yield s._scripting.destroySandbox()}catch(P){}for(const[P,f]of s._internalEvents)s._eventBus._off(P,f);s._internalEvents.clear();for(const[P,f]of s._domEvents)window.removeEventListener(P,f,!0);s._domEvents.clear(),s._pageOpenPending.clear(),s._visitedPages.clear(),s._scripting=null,delete s._mouseState.isDown,s._ready=!1,null==(c=s._destroyCapability)||c.resolve()})()}}},(D,d,x)=>{Object.defineProperty(d,"__esModule",{value:!0}),d.GenericScripting=void 0,d.docPropertiesLookup=function r(s){return C.apply(this,arguments)};var b=x(3);function C(){return(C=g(function*(s){const c="".split("#")[0];let{info:P,metadata:f,contentDispositionFilename:p,contentLength:e}=yield s.getMetadata();if(!e){const{length:i}=yield s.getDownloadInfo();e=i}return Ye($e({},P),{baseURL:c,filesize:e,filename:p||(0,b.getPdfFilenameFromUrl)(""),metadata:null==f?void 0:f.getRaw(),authors:null==f?void 0:f.get("dc:creator"),numPages:s.numPages,URL:""})})).apply(this,arguments)}d.GenericScripting=class o{constructor(n){this._ready=(0,b.loadScript)(n,!0).then(()=>window.pdfjsSandbox.QuickJSSandbox())}createSandbox(n){var c=this;return g(function*(){(yield c._ready).create(n)})()}dispatchEventInSandbox(n){var c=this;return g(function*(){const P=yield c._ready;setTimeout(()=>P.dispatchEvent(n),0)})()}destroySandbox(){var n=this;return g(function*(){(yield n._ready).nukeSandbox()})()}}}],re={};function ne(D){var d=re[D];if(void 0!==d)return d.exports;var x=re[D]={exports:{}};return _e[D](x,x.exports,ne),x.exports}var ee={};return(()=>{var D=ee;Object.defineProperty(D,"__esModule",{value:!0}),Object.defineProperty(D,"AnnotationLayerBuilder",{enumerable:!0,get:function(){return C.AnnotationLayerBuilder}}),Object.defineProperty(D,"DefaultAnnotationLayerFactory",{enumerable:!0,get:function(){return d.DefaultAnnotationLayerFactory}}),Object.defineProperty(D,"DefaultStructTreeLayerFactory",{enumerable:!0,get:function(){return d.DefaultStructTreeLayerFactory}}),Object.defineProperty(D,"DefaultTextLayerFactory",{enumerable:!0,get:function(){return d.DefaultTextLayerFactory}}),Object.defineProperty(D,"DefaultXfaLayerFactory",{enumerable:!0,get:function(){return d.DefaultXfaLayerFactory}}),Object.defineProperty(D,"DownloadManager",{enumerable:!0,get:function(){return o.DownloadManager}}),Object.defineProperty(D,"EventBus",{enumerable:!0,get:function(){return s.EventBus}}),Object.defineProperty(D,"GenericL10n",{enumerable:!0,get:function(){return n.GenericL10n}}),Object.defineProperty(D,"LinkTarget",{enumerable:!0,get:function(){return x.LinkTarget}}),Object.defineProperty(D,"NullL10n",{enumerable:!0,get:function(){return c.NullL10n}}),Object.defineProperty(D,"PDFFindController",{enumerable:!0,get:function(){return P.PDFFindController}}),Object.defineProperty(D,"PDFHistory",{enumerable:!0,get:function(){return f.PDFHistory}}),Object.defineProperty(D,"PDFLinkService",{enumerable:!0,get:function(){return x.PDFLinkService}}),Object.defineProperty(D,"PDFPageView",{enumerable:!0,get:function(){return p.PDFPageView}}),Object.defineProperty(D,"PDFScriptingManager",{enumerable:!0,get:function(){return e.PDFScriptingManager}}),Object.defineProperty(D,"PDFSinglePageViewer",{enumerable:!0,get:function(){return r.PDFSinglePageViewer}}),Object.defineProperty(D,"PDFViewer",{enumerable:!0,get:function(){return r.PDFViewer}}),Object.defineProperty(D,"ProgressBar",{enumerable:!0,get:function(){return b.ProgressBar}}),Object.defineProperty(D,"SimpleLinkService",{enumerable:!0,get:function(){return x.SimpleLinkService}}),Object.defineProperty(D,"StructTreeLayerBuilder",{enumerable:!0,get:function(){return i.StructTreeLayerBuilder}}),Object.defineProperty(D,"TextLayerBuilder",{enumerable:!0,get:function(){return _.TextLayerBuilder}}),Object.defineProperty(D,"XfaLayerBuilder",{enumerable:!0,get:function(){return m.XfaLayerBuilder}}),Object.defineProperty(D,"parseQueryString",{enumerable:!0,get:function(){return b.parseQueryString}});var d=ne(1),x=ne(5),b=ne(6),r=ne(10),C=ne(2),o=ne(16),s=ne(17),n=ne(18),c=ne(4),P=ne(20),f=ne(22),p=ne(12),e=ne(23),i=ne(7),_=ne(8),m=ne(9)})(),ee})(),be.exports=ne()},8926:be=>{function L(g,_e,re,ne,ee,D,d){try{var x=g[D](d),b=x.value}catch(r){return void re(r)}x.done?_e(b):Promise.resolve(b).then(ne,ee)}be.exports=function K(g){return function(){var _e=this,re=arguments;return new Promise(function(ne,ee){var D=g.apply(_e,re);function d(b){L(D,ne,ee,d,x,"next",b)}function x(b){L(D,ne,ee,d,x,"throw",b)}d(void 0)})}},be.exports.__esModule=!0,be.exports.default=be.exports},3414:()=>{},172:()=>{},2001:()=>{},3779:()=>{},6558:()=>{},2258:()=>{}}]);