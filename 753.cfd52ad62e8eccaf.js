"use strict";(self.webpackChunkmakatiportal2022=self.webpackChunkmakatiportal2022||[]).push([[753],{4753:(yt,S,c)=>{c.r(S),c.d(S,{ContentModule:()=>ht});var m=c(9808),l=c(3075),g=c(4776),Z=c(3290),R=c(2234),B=c(8231),e=c(4893),L=c(3650);let O=(()=>{class i{constructor(t,o){this._auth_service=t,this.router=o}canActivate(t,o){return!!this._auth_service.is_authenticated||this.router.createUrlTree(["/auth"])}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(L.e),e.LFG(g.F0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var j=c(9841),U=c(4004),V=c(8372),D=c(1884),b=c(7854),w=c(2340),F=c(6947),A=c(520);let X=(()=>{class i{constructor(t){this.http=t}get_featured(t=!0){return(0,b._B)(F.eU,[],this.http,`${w.N.api}/api/GalleryAlbum/Featured`,t,!0)}get_album(t,o,s=!0){return(0,b._B)(`${F.eU}_${o+t}_c`,[],this.http,`${w.N.api}/api/GalleryAlbum/ByYearMonth/${o}/${t}`,s,!1)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(A.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var x=c(6470),E=c(4986),K=c(8306),W=c(3532);function oe(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1,".\xa0"),e.qZA())}let P=(()=>{class i{constructor(){this.message="Loading",this.description="Please wait.",this.is_loading=!1,this.image="/assets/images/illustrations/undraw_my_personal_files_re_3q0p.svg",this.dot=[],this._subs=[]}ngOnInit(){if(!0===this.is_loading){const t=function ie(i=0,n=E.z){return i<0&&(i=0),function te(i=0,n,t=E.P){let o=-1;return null!=n&&((0,W.K)(n)?t=n:o=n),new K.y(s=>{let a=function ee(i){return i instanceof Date&&!isNaN(i)}(i)?+i-t.now():i;a<0&&(a=0);let r=0;return t.schedule(function(){s.closed||(s.next(r++),0<=o?this.schedule(void 0,o):s.complete())},a)})}(i,i,n)}(500).subscribe(o=>{this.dot.length>=3?this.dot=[]:this.dot.push(1)});this._subs.push(t)}}ngOnDestroy(){this._subs.forEach(t=>t.unsubscribe())}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["util-message"]],inputs:{message:"message",description:"description",is_loading:"is_loading",image:"image"},decls:8,vars:4,consts:[[1,"d-flex","flex-column","align-items-center"],["width","300px","alt","",1,"m-auto","mb-3",3,"src"],[1,"sheader","p-relative"],[1,"ld"],[4,"ngFor","ngForOf"],[1,"sheadersub","mb-3","text-center"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"img",1),e.TgZ(2,"div",2),e._uU(3),e.TgZ(4,"div",3),e.YNc(5,oe,2,0,"span",4),e.qZA()(),e.TgZ(6,"div",5),e._uU(7),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("src",o.image,e.LSH),e.xp6(2),e.hij(" ",o.message," "),e.xp6(2),e.Q6J("ngForOf",o.dot),e.xp6(2),e.hij(" ",o.description," "))},directives:[m.sg],styles:[".ld[_ngcontent-%COMP%]{position:absolute;right:-2.1em;top:0;width:2em}"]}),i})();var q=c(9817);function ne(i,n){if(1&i&&(e.TgZ(0,"div",13)(1,"div"),e._UZ(2,"img",14),e.ALo(3,"safeUrl"),e.TgZ(4,"div",15),e._uU(5),e.qZA()()()),2&i){const t=n.$implicit;e.xp6(2),e.Q6J("src",e.lcZ(3,2,t.content),e.LSH),e.xp6(3),e.hij(" ",t.albumName," ")}}function se(i,n){if(1&i&&(e.TgZ(0,"option",16),e._uU(1),e.qZA()),2&i){const t=n.index,o=e.oxw(2);e.s9C("value",t+1),e.xp6(1),e.Oqu(o.months[t])}}function re(i,n){if(1&i&&(e.TgZ(0,"option",16),e._uU(1),e.qZA()),2&i){const t=n.$implicit;e.s9C("value",t),e.xp6(1),e.Oqu(t)}}function ae(i,n){if(1&i&&(e.TgZ(0,"div",13)(1,"div"),e._UZ(2,"img",14),e.ALo(3,"safeUrl"),e.TgZ(4,"div",15),e._uU(5),e.qZA()()()),2&i){const t=n.$implicit;e.xp6(2),e.Q6J("src",e.lcZ(3,2,t.content),e.LSH),e.xp6(3),e.hij(" ",t.albumName," ")}}function le(i,n){if(1&i&&(e.TgZ(0,"div",3),e.YNc(1,ae,6,4,"div",4),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.month_album)}}function ce(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"div",2),e._uU(2," Featured Album "),e.qZA(),e.TgZ(3,"div",3),e.YNc(4,ne,6,4,"div",4),e.qZA(),e._UZ(5,"br"),e.TgZ(6,"div",5)(7,"span",6),e._uU(8," Date: "),e.qZA(),e.TgZ(9,"div",7)(10,"div",8)(11,"select",9),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().month=s}),e.YNc(12,se,2,2,"option",10),e.qZA()(),e.TgZ(13,"div",11)(14,"select",9),e.NdJ("ngModelChange",function(s){return e.CHM(t),e.oxw().year=s}),e.YNc(15,re,2,2,"option",10),e.qZA()()()(),e.TgZ(16,"div",2),e._uU(17," All Album "),e.qZA(),e.YNc(18,le,2,1,"div",12),e.qZA()}if(2&i){const t=e.oxw(),o=e.MAs(2);e.xp6(4),e.Q6J("ngForOf",t.featureds),e.xp6(7),e.Q6J("ngModel",t.month)("disabled",1==t.is_loading_album),e.xp6(1),e.Q6J("ngForOf",t.months),e.xp6(2),e.Q6J("ngModel",t.year)("disabled",1==t.is_loading_album),e.xp6(1),e.Q6J("ngForOf",t.years),e.xp6(3),e.Q6J("ngIf",0==t.is_loading_album)("ngIfElse",o)}}function pe(i,n){1&i&&e._UZ(0,"util-message",17),2&i&&e.Q6J("message","Loading")("is_loading",!0)("description","Please wait while we load the albums.")("image","/assets/images/illustrations/undraw_photograph_re_up3b.svg")}let me=(()=>{class i{constructor(t,o,s,a){this._mayors_corner_service=t,this._alert_service=o,this._route=s,this._router=a,this._sub=[],this.featureds=[],this.month_album=[],this.is_loading_content=!1,this.is_loading_album=!1,this.months=["January","February","March","April","May","June","July","August","September","October","November","December"],this.years=[],this._year=this._route.snapshot.queryParamMap.get("year"),this._month=this._route.snapshot.queryParamMap.get("month")}get year(){let t=this._year;return t?+t:(new Date).getFullYear()}set year(t){this._router.navigate([],{relativeTo:this._route,queryParams:{month:this.month,year:t},queryParamsHandling:"merge"})}get month(){let t=this._month;return t?+t:(new Date).getMonth()+1}set month(t){this._router.navigate([],{relativeTo:this._route,queryParams:{month:t,year:this.year},queryParamsHandling:"merge"})}ngOnInit(){this.refresh_content();for(let s=(new Date).getFullYear();s>=2010;s--)this.years.push(s);const o=(0,j.a)([this._route.queryParamMap.pipe((0,U.U)(s=>s.get("month"))),this._route.queryParamMap.pipe((0,U.U)(s=>s.get("year")))]).pipe((0,V.b)(200),(0,D.x)()).subscribe(s=>{var a,r;return this.show_montly_album(+(null!==(a=s[0])&&void 0!==a?a:this.month),+(null!==(r=s[1])&&void 0!==r?r:this.year))});this._sub.push(o)}show_montly_album(t,o){this.is_loading_album=!0,this._mayors_corner_service.get_album(null!=t?t:this.month,null!=o?o:this.year).subscribe({next:s=>{this.is_loading_album=!1,this.month_album=s.map(a=>(a.content=(0,b.qo)(a.content),a))},error:s=>{this.is_loading_album=!1,this._alert_service.http_error(s)}})}refresh_content(){this.is_loading_content=!0,this._mayors_corner_service.get_featured().subscribe({next:t=>{this.featureds=t.map(o=>(o.content=(0,b.qo)(o.content),o)).slice(0,4),this.is_loading_content=!1},error:t=>{this._alert_service.http_error(t)}})}ngOnDestroy(){this._sub.forEach(t=>t.unsubscribe())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(X),e.Y36(x.c),e.Y36(g.gz),e.Y36(g.F0))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-mayors-corner-gallery"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"sub-content-header","mb-3"],[1,"row"],["class","col-lg-6 mb-5",4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","mb-4"],[2,"font-weight","600","font-size","24px"],[1,"ms-2","row","flex-grow-1"],[1,"col-8","col-lg-4"],[1,"form-select","sform-control",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"col-4","col-lg-3"],["class","row",4,"ngIf","ngIfElse"],[1,"col-lg-6","mb-5"],[1,"gallery-thumb",3,"src"],[1,"album-name"],[3,"value"],[3,"message","is_loading","description","image"]],template:function(t,o){if(1&t&&(e.YNc(0,ce,19,9,"div",0),e.YNc(1,pe,1,4,"ng-template",null,1,e.W1O)),2&t){const s=e.MAs(2);e.Q6J("ngIf",0==o.is_loading_content)("ngIfElse",s)}},directives:[m.O5,m.sg,l.EJ,l.JJ,l.On,l.YN,l.Kr,P],pipes:[q.Q],styles:[""]}),i})();var J=c(1135);let k=(()=>{class i{constructor(t,o){this._router=t,this._route=o,this.default_size=20,this.valid_items_per_page=[5,10,20,50,100],this.is_pending=!1,this._items_per_page=new J.X(20),this._data=new J.X([]),this._subscriptions=[],this.items$=this._data.pipe((0,U.U)(s=>null==s?[]:s)),this.no_items=!1}ngOnInit(){null==this.page&&(this.page=1),this.update_list_upon_query_param_changes()}update_list_upon_query_param_changes(){const t=this._route.queryParamMap.pipe((0,V.b)(200)).subscribe(o=>this.refresh_items());this._subscriptions.push(t)}refresh_items(t={}){throw"Not implemented"}show_item(t){throw"Not implemented"}ngOnDestroy(){this.destroy_all_subscriptions()}destroy_all_subscriptions(){this._subscriptions.forEach(t=>t.unsubscribe())}set data(t){this._data.next(t)}get data(){return this._data.getValue()}get page(){var t;const o=+(null!==(t=this._route.snapshot.queryParamMap.get("page"))&&void 0!==t?t:1);return 0==o?1:o}set page(t){this.page!=t&&this._router.navigate([],{relativeTo:this._route,queryParams:{page:t},queryParamsHandling:"merge"})}get size(){var t;const o=+(null!==(t=this._route.snapshot.queryParamMap.get("size"))&&void 0!==t?t:this.default_size);return 0==o?this.default_size:o}set size(t){this.size!=t&&this._router.navigate([],{relativeTo:this._route,queryParams:{size:t},queryParamsHandling:"merge"})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(g.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],inputs:{default_size:"default_size"},decls:0,vars:0,template:function(t,o){},encapsulation:2}),i})(),M=(()=>{class i{constructor(t){this.http=t}get_list(t=1,o=5){return this.http.get(`${w.N.api}/api/PhotoRelease/Published/${t}/${o}`)}get_by_content_id(t){return this.http.get(`${w.N.api}/api/PhotoRelease/${t}`)}get_by_img_id(t){return this.http.get(`${w.N.api}/api/PhotoReleaseImage/${t}`)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(A.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function de(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7),e._UZ(2,"img",8),e.ALo(3,"safeUrl"),e.qZA(),e.TgZ(4,"div",9),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).show_item(a)}),e._uU(5),e.qZA()()}if(2&i){const t=n.$implicit;e.xp6(2),e.Q6J("src",e.lcZ(3,2,t.photoImage),e.LSH),e.xp6(3),e.Oqu(t.photoCaption)}}function _e(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,de,6,4,"div",3),e.TgZ(2,"div",4)(3,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().load_more()}),e._uU(4,"Load More"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data),e.xp6(2),e.Q6J("disabled",t.disabled_load)}}function ue(i,n){1&i&&e._UZ(0,"util-message",10),2&i&&e.Q6J("message","Loading")("is_loading",!0)("description","Please wait while we load the photo release.")}let ge=(()=>{class i extends k{constructor(t,o,s,a){super(t,o),this._photo_release_service=s,this._alert_service=a,this.disabled_load=!1}ngOnInit(){this.page=1,super.ngOnInit()}refresh_items(t={}){0==this.data.length&&(this.is_pending=!0),this.disabled_load=!0,this._photo_release_service.get_list(this.page).subscribe({next:o=>{this.is_pending=!1,this.disabled_load=!1,o=o.map(s=>(s.photoImage=(0,b.qo)(s.photoImage),s)),this.data=[...this.data,...o]},error:o=>{this.is_pending=!1,this.disabled_load=!1,this._alert_service.http_error(o)}})}load_more(){this.page=this.page+1}show_item(t){this._router.navigate(["/content","mayors-corner","photo-release",t.photoId])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(g.gz),e.Y36(M),e.Y36(x.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-photo-release"]],features:[e.qOj],decls:5,vars:2,consts:[[1,"sub-content-header","mb-3"],[4,"ngIf","ngIfElse"],["loading",""],["class","row mb-4 border-bottom",4,"ngFor","ngForOf"],[1,"d-flex"],[1,"m-auto","btn","btn-primary",3,"disabled","click"],[1,"row","mb-4","border-bottom"],[1,"col-lg-4","col-5","mb-3"],["alt","",1,"gallery-thumb",3,"src"],[1,"col-lg-8","col-7","mb-3","c-pointer","pr-title",3,"click"],[3,"message","is_loading","description"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e._uU(1," Photo Release "),e.qZA(),e.YNc(2,_e,5,2,"div",1),e.YNc(3,ue,1,3,"ng-template",null,2,e.W1O)),2&t){const s=e.MAs(4);e.xp6(2),e.Q6J("ngIf",0==o.is_pending)("ngIfElse",s)}},directives:[m.O5,m.sg,P],pipes:[q.Q],styles:[""]}),i})();var N=c(7787);const fe=function(){return["text-primary","tx-active"]};function he(i,n){if(1&i&&(e.TgZ(0,"div",8)(1,"a",9),e._uU(2),e.qZA()()),2&i){const t=n.$implicit;e.xp6(1),e.Q6J("routerLink",t.path)("routerLinkActive",e.DdM(3,fe)),e.xp6(1),e.Oqu(t.title)}}let ve=(()=>{class i{constructor(){this.sidebar_content=[{title:"Gallery",path:["/content","mayors-corner","gallery"]},{title:"Photo Release",path:["/content","mayors-corner","photo-release"]},{title:"Speeches",path:["/content","mayors-corner","speeches"]},{title:"Achievements",path:["/content","mayors-corner","achievements"]}]}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-mayors-corner-layout"]],decls:10,vars:4,consts:[[3,"title","is_cms_content","show_mayora"],[1,"bg-white","py-5","mayora-overflow-fix"],[1,"container","layout-container"],[1,"row"],[1,"col-md-4","mb-5"],[1,"sidebar-bg"],["class","d-flex flex-column p-3",4,"ngFor","ngForOf"],[1,"col-md-8"],[1,"d-flex","flex-column","p-3"],[1,"sidebar-link",3,"routerLink","routerLinkActive"]],template:function(t,o){1&t&&(e.TgZ(0,"div"),e._UZ(1,"util-page-title",0),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e.YNc(7,he,3,4,"div",6),e.qZA()(),e.TgZ(8,"div",7),e._UZ(9,"router-outlet"),e.qZA()()()()()),2&t&&(e.xp6(1),e.Q6J("title","The Mayor's Corner")("is_cms_content",!1)("show_mayora",!0),e.xp6(6),e.Q6J("ngForOf",o.sidebar_content))},directives:[N.T,m.sg,g.yS,g.Od,g.lC],styles:[""]}),i})(),be=(()=>{class i{constructor(){}ngOnInit(){}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-news"]],decls:6,vars:2,consts:[["cms",""],[3,"title","is_cms_content"],[1,"bg-white","py-5","mayora-overflow-fix"],[1,"container"]],template:function(t,o){1&t&&(e.TgZ(0,"div",null,0),e._UZ(2,"util-page-title",1),e.TgZ(3,"div",2)(4,"div",3),e._uU(5," Lorem ipsum dolor, sit amet consectetur adipisicing elit. Eveniet illo odio amet possimus eaque atque! Minus impedit aut modi consequatur ea maiores placeat quaerat. Nam, inventore deleniti? Exercitationem, non quis! "),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("title","Makati News")("is_cms_content",!1))},directives:[N.T],styles:[""]}),i})();var $=c(7286);function xe(i,n){if(1&i&&(e.TgZ(0,"div")(1,"div",2),e._uU(2),e.qZA(),e.TgZ(3,"div",3),e.Hsn(4),e.qZA(),e.TgZ(5,"div",3)(6,"i"),e._uU(7),e.ALo(8,"date"),e.qZA()(),e._UZ(9,"div",4),e.ALo(10,"safeHtml"),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.cont?null:t.cont.photoSubject),e.xp6(5),e.Oqu(e.xi3(8,3,null==t.cont?null:t.cont.datespecified,"EEEE, MMMM d, y")),e.xp6(2),e.Q6J("innerHtml",e.lcZ(10,6,null==t.cont?null:t.cont.photoCaption),e.oJD)}}function we(i,n){1&i&&e._UZ(0,"util-message",5),2&i&&e.Q6J("message","Loading")("is_loading",!0)("description","Please wait while we loading the content.")}const ye=["*"];let Ce=(()=>{class i{constructor(t,o){this._photo_release_service=t,this._alert_service=o,this.is_loading=!1}ngOnInit(){this.is_loading=!0,this._photo_release_service.get_by_content_id(this.id).subscribe({next:t=>{this.is_loading=!1,this.cont=t},error:t=>{this._alert_service.http_error(t),this.is_loading=!1}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M),e.Y36(x.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-pr-content-viewer"]],inputs:{id:"id"},ngContentSelectors:ye,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"sub-content-header","mb-3"],[1,"mb-4"],[1,"mb-4",3,"innerHtml"],[3,"message","is_loading","description"]],template:function(t,o){if(1&t&&(e.F$t(),e.YNc(0,xe,11,8,"div",0),e.YNc(1,we,1,3,"ng-template",null,1,e.W1O)),2&t){const s=e.MAs(2);e.Q6J("ngIf",0==o.is_loading)("ngIfElse",s)}},directives:[m.O5,P],pipes:[m.uU,$.z],styles:[""]}),i})();function Ze(i,n){if(1&i&&(e._UZ(0,"img",1),e.ALo(1,"safeUrl")),2&i){const t=e.oxw();e.Q6J("src",e.lcZ(1,1,t.image_path),e.LSH)}}let Pe=(()=>{class i{constructor(t){this._photo_release_service=t,this.image_path=""}ngOnInit(){this._photo_release_service.get_by_img_id(this.id).subscribe(t=>this.image_path=(0,b.qo)(t.photoImage))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-pr-image-viewer"]],inputs:{id:"id"},decls:1,vars:1,consts:[["alt","",3,"src",4,"ngIf"],["alt","",3,"src"]],template:function(t,o){1&t&&e.YNc(0,Ze,2,3,"img",0),2&t&&e.Q6J("ngIf",o.image_path)},directives:[m.O5],pipes:[q.Q],styles:["img[_ngcontent-%COMP%]{width:100%}"]}),i})();function Te(i,n){if(1&i&&(e.TgZ(0,"app-pr-content-viewer",2),e._UZ(1,"app-pr-image-viewer",2),e.qZA()),2&i){const t=e.oxw();e.Q6J("id",t.id),e.xp6(1),e.Q6J("id",t.id)}}const Fe=function(){return["/content","mayors-corner","photo-release"]};let Me=(()=>{class i{constructor(t,o){this._photo_release_service=t,this._route=o}ngOnInit(){var t;this.id=+(null!==(t=this._route.snapshot.paramMap.get("id"))&&void 0!==t?t:0)}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(M),e.Y36(g.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-photo-release-view"]],decls:3,vars:3,consts:[[1,"mb-4","d-block",3,"routerLink"],[3,"id",4,"ngIf"],[3,"id"]],template:function(t,o){1&t&&(e.TgZ(0,"a",0),e._uU(1,"Go back"),e.qZA(),e.YNc(2,Te,2,2,"app-pr-content-viewer",1)),2&t&&(e.Q6J("routerLink",e.DdM(2,Fe)),e.xp6(2),e.Q6J("ngIf",o.id))},directives:[g.yS,m.O5,Ce,Pe],styles:[""]}),i})();var z=c(695),Ue=c(3900),Ae=c(9646),G=c(628),qe=c(2313),Je=c(655),v=(()=>{return(i=v||(v={}))[i.Up=1]="Up",i[i.Down=3]="Down",i[i.Right=6]="Right",i[i.Left=8]="Left",i[i.UpMirrored=2]="UpMirrored",i[i.DownMirrored=4]="DownMirrored",i[i.LeftMirrored=5]="LeftMirrored",i[i.RightMirrored=7]="RightMirrored",i[i.Default=0]="Default",i[i.NotJpeg=-1]="NotJpeg",i[i.NotDefined=-2]="NotDefined",v;var i})();class _{}_.getOrientation=i=>new Promise((n,t)=>{try{const o=new FileReader;o.onload=()=>{const s=new DataView(o.result);if(!s.byteLength||65496!==s.getUint16(0,!1))return n(v.NotDefined);const a=s.byteLength;let r=2;for(;r<a;){const u=s.getUint16(r,!1);if(r+=2,65505===u){if(1165519206!==s.getUint32(r+=2,!1))return n(v.NotJpeg);const h=18761===s.getUint16(r+=6,!1);r+=s.getUint32(r+4,h);const f=s.getUint16(r,h);r+=2;for(let p=0;p<f;p++)if(274===s.getUint16(r+12*p,h))return n(s.getUint16(r+12*p+8,h))}else{if(65280!=(65280&u))break;r+=s.getUint16(r,!1)}}return n(v.NotJpeg)},o.readAsArrayBuffer(i)}catch(o){return t(v.Default)}}),_.uploadFile=(i,n=!0,t=!1)=>new Promise(function(o,s){const a=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);Promise.resolve(a).then(r=>r?_.generateUploadInputNative(window.document,n,t):_.generateUploadInputRenderer(i,n,t)).then(r=>{const u=r?Array.from(r):[],h=u.map(d=>_.getOrientation(d)),f=u.map(d=>_.fileToDataURL(d));let p=[];Promise.all(h).then(d=>(p=d,Promise.all(f))).then(d=>{const y=d.map((C,Y)=>({image:C.dataUrl,orientation:p[Y],fileName:C.fileName}));o(n?y:y[0])})}).catch(r=>s(r))}),_.fileToDataURL=i=>new Promise((n,t)=>{const o=new FileReader;o.onload=s=>{n({dataUrl:s.target.result,fileName:i.name})};try{o.readAsDataURL(i)}catch(s){t(`ngx-image-compress - probably no file have been selected: ${s}`)}}),_.generateUploadInputRenderer=(i,n=!0,t=!1)=>{let o=!1;return new Promise((s,a)=>{const r=i.createElement("input");i.setStyle(r,"display","none"),i.setProperty(r,"type","file"),i.setProperty(r,"accept","image/*"),n&&i.setProperty(r,"multiple","true"),i.listen(r,"click",u=>{u.target.value=""}),i.listen(r,"change",u=>{o=!0,s(u.target.files)}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{o||a(new Error("file upload on blur - no file selected"))},300)},{once:!0}),r.click()})},_.generateUploadInputNative=(i,n=!0,t=!1)=>{let o=!1;return new Promise((s,a)=>{const r=i.createElement("input");r.id="upload-input"+new Date,r.style.display="none",r.setAttribute("type","file"),n&&r.setAttribute("multiple","true"),i.body.appendChild(r),r.addEventListener("change",()=>{o=!0,s(r.files),i.body.removeChild(i.getElementById(r.id))},{once:!0}),t&&window.addEventListener("focus",()=>{setTimeout(()=>{!o&&i.getElementById(r.id)&&(a(new Error("file upload on blur - no file selected")),i.body.removeChild(i.getElementById(r.id)))},300)},{once:!0}),r.click()})},_.compress=(i,n,t,o=50,s=50,a=0,r=0)=>new Promise(function(u,h){s/=100,o/=100;const f=new Image;f.onload=()=>{const p=t.createElement("canvas"),d=p.getContext("2d");if(!d)return h("No canvas context available");let y=f.naturalWidth,C=f.naturalHeight;if(!CSS.supports("image-orientation","from-image")&&(n===v.Right||n===v.Left)){const wt=y;y=C,C=wt}o=Math.min(o,a?a/y:1,r?r/C:1),p.width=y*o,p.height=C*o;const Q=Math.PI/180;CSS.supports("image-orientation","from-image")||n===v.Up?d.drawImage(f,0,0,p.width,p.height):n===v.Right?(d.save(),d.rotate(90*Q),d.translate(0,-p.width),d.drawImage(f,0,0,p.height,p.width),d.restore()):n===v.Left?(d.save(),d.rotate(-90*Q),d.translate(-p.width,0),d.drawImage(f,0,0,p.height,p.width),d.restore()):n===v.Down?(d.save(),d.rotate(180*Q),d.translate(-p.width,-p.height),d.drawImage(f,0,0,p.width,p.height),d.restore()):d.drawImage(f,0,0,p.width,p.height);const bt=i.substr(5,i.split(";")[0].length-5),xt=p.toDataURL(bt,s);u(xt)},f.onerror=p=>h(p),f.src=i}),_.byteCount=i=>encodeURI(i).split(/%..|./).length-1,_.getImageMaxSize=(i,n,t)=>(0,Je.mG)(void 0,void 0,void 0,function*(){const s=u=>(u/1024/1024).toFixed(2);n&&console.debug("NgxImageCompress - Opening upload window");let r,a=yield _.uploadFile(t,!1);for(let u=0;u<10;u++){const h=_.byteCount(a.image);r=yield _.compress(a.image,a.orientation,t,50,100);const f=_.byteCount(r);if(console.debug("NgxImageCompress -","Compression from",s(h),"MB to",s(f),"MB"),f>=h)throw 0===u?(n&&console.debug("NgxImageCompress -","File can't be reduced at all - returning the original",s(h),"MB large"),a.image):(n&&console.debug("NgxImageCompress -","File can't be reduced more - returning the best we can, which is ",s(h),"MB large"),a.image);if(f<1024*i*1024)return n&&console.debug("NgxImageCompress -","Here your file",s(f),"MB large"),r;if(9===u)throw n&&console.debug("NgxImageCompress -","File can't reach the desired size after",10,"tries. Returning file ",s(h),"MB large"),a.image;n&&console.debug("NgxImageCompress -","Reached",s(f),"MB large. Trying another time after",u+1,"times"),a.image=r}throw n&&console.debug("NgxImageCompress - Unexpected error"),""});let Ie=(()=>{class i{constructor(t){this.DOC_ORIENTATION=v,this.render=t.createRenderer(null,null)}byteCount(t){return _.byteCount(t)}getOrientation(t){return _.getOrientation(t)}uploadFile(){return _.uploadFile(this.render,!1)}uploadMultipleFiles(){return _.uploadFile(this.render,!0)}uploadFileOrReject(){return _.uploadFile(this.render,!1,!0)}uploadMultipleFilesOrReject(){return _.uploadFile(this.render,!0,!0)}compressFile(t,o,s=50,a=50,r=0,u=0){return _.compress(t,o,this.render,s,a,r,u)}uploadAndGetImageWithMaxSize(t=1,o=!1){return _.getImageMaxSize(t,o,this.render)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(e.FYo))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),Ye=(()=>{class i{constructor(t){this.imageCompress=t,this.base64_image="",this.default_image="/assets/images/illustrations/undraw_male_avatar_re_y880.svg",this.on_change=new e.vpe,this.img=this.default_image}ngOnInit(){this.base64_image&&(this.img=this.base64_image)}compressFile(){this.imageCompress.uploadFile().then(({image:t,orientation:o})=>{this.imageCompress.compressFile(t,o,50,50,200,200).then(s=>{this.on_change.emit(s)})})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(Ie))},i.\u0275cmp=e.Xpm({type:i,selectors:[["util-img-base64"]],inputs:{base64_image:"base64_image",default_image:"default_image"},outputs:{on_change:"on_change"},decls:5,vars:1,consts:[[1,"p-relative","img-holder"],["alt","","width","100%",3,"src"],[1,"upload-btn","c-pointer",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div")(1,"div",0),e._UZ(2,"img",1),e.TgZ(3,"span",2),e.NdJ("click",function(){return o.compressFile()}),e._uU(4,"Edit"),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("src",o.img,e.LSH))},styles:["img[_ngcontent-%COMP%]{aspect-ratio:1 / 1;object-fit:cover}.upload-btn[_ngcontent-%COMP%]{background-color:#00000080;color:#fff;text-align:center;width:100%;position:absolute;bottom:0;left:0;padding:.5em 0}.img-holder[_ngcontent-%COMP%]{border-radius:50%;overflow:hidden}"]}),i})();function Qe(i,n){if(1&i&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.validation_msg("firstName","First Name")," ")}}function Se(i,n){if(1&i&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.validation_msg("middleName","Middle Name")," ")}}function Le(i,n){if(1&i&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.validation_msg("lastName","Last Name")," ")}}function Ve(i,n){if(1&i&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.validation_msg("birthdate","Birthdate")," ")}}function Ee(i,n){if(1&i&&(e.TgZ(0,"div",26),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.validation_msg("gender","Gender")," ")}}function ke(i,n){1&i&&(e.TgZ(0,"div")(1,"small",27),e._uU(2,"reCAPTCHA is required."),e.qZA()())}const T=function(i){return{"is-invalid":i}};function $e(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().submit()}),e.TgZ(1,"div",2)(2,"div",3)(3,"div",4)(4,"label",5),e._uU(5,"First Name"),e.qZA(),e._UZ(6,"input",6),e.YNc(7,Qe,2,1,"div",7),e.qZA(),e.TgZ(8,"div",4)(9,"label",8),e._uU(10,"Middle Name"),e.qZA(),e._UZ(11,"input",9),e.YNc(12,Se,2,1,"div",7),e.qZA(),e.TgZ(13,"div",4)(14,"label",10),e._uU(15,"Last Name"),e.qZA(),e._UZ(16,"input",11),e.YNc(17,Le,2,1,"div",7),e.qZA(),e.TgZ(18,"div",4)(19,"label",12),e._uU(20,"Birthdate"),e.qZA(),e._UZ(21,"input",13),e.ALo(22,"date"),e.YNc(23,Ve,2,1,"div",7),e.qZA(),e.TgZ(24,"div",2)(25,"div",14)(26,"div",4)(27,"label",15),e._uU(28,"Gender"),e.qZA(),e.TgZ(29,"select",16)(30,"option",17),e._uU(31,"Please Select"),e.qZA(),e.TgZ(32,"option",18),e._uU(33,"Male"),e.qZA(),e.TgZ(34,"option",19),e._uU(35,"Female"),e.qZA()(),e.YNc(36,Ee,2,1,"div",7),e.qZA()()(),e.TgZ(37,"div",4),e._UZ(38,"re-captcha",20),e.YNc(39,ke,3,0,"div",21),e.qZA()(),e.TgZ(40,"div",22)(41,"div",23)(42,"util-img-base64",24),e.NdJ("on_change",function(s){return e.CHM(t),e.oxw().image_change(s)}),e.qZA()()()(),e.TgZ(43,"button",25),e._uU(44,"Submit"),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(6),e.Q6J("ngClass",e.VKq(19,T,t.control_is_invalid("firstName"))),e.xp6(1),e.Q6J("ngIf",t.control_is_invalid("firstName")),e.xp6(4),e.Q6J("ngClass",e.VKq(21,T,t.control_is_invalid("middleName"))),e.xp6(1),e.Q6J("ngIf",t.control_is_invalid("middleName")),e.xp6(4),e.Q6J("ngClass",e.VKq(23,T,t.control_is_invalid("lastName"))),e.xp6(1),e.Q6J("ngIf",t.control_is_invalid("lastName")),e.xp6(4),e.Q6J("max",e.xi3(22,16,t.now,"y-LL-dd"))("ngClass",e.VKq(25,T,t.control_is_invalid("birthdate"))),e.xp6(2),e.Q6J("ngIf",t.control_is_invalid("birthdate")),e.xp6(6),e.Q6J("ngClass",e.VKq(27,T,t.control_is_invalid("gender"))),e.xp6(7),e.Q6J("ngIf",t.control_is_invalid("gender")),e.xp6(3),e.Q6J("ngIf",t.control_is_invalid("recaptcha")),e.xp6(3),e.Q6J("base64_image",t.img)("default_image",t.img),e.xp6(1),e.Q6J("disabled",t.is_pending)}}let ze=(()=>{class i extends G.l{constructor(t,o,s,a,r){super(t),this._fb=o,this._profile_service=s,this._router=a,this._sanitizer=r,this.img=b.tb}ngOnInit(){this.now=new Date,this.initialValue=this._profile_service.get_profile(!0).pipe((0,Ue.w)(t=>t?(0,Ae.of)(t):this._profile_service.get_profile(!1))).subscribe({next:t=>{this.initialValue=t,this.initialValue.birthdate&&(this.initialValue.birthdate=this.initialValue.birthdate.split("T")[0]),this.set_image(),this.initialize(this._fb.group({profilePicture:[""],firstName:["",l.kI.required],middleName:[""],lastName:["",l.kI.required],birthdate:["",l.kI.required],gender:["",l.kI.required],recaptcha:["",l.kI.required]}))},error:t=>{this._alert_service.add_alert("Could not load profile."),this._router.navigate(["/"])}})}image_change(t){var o;null===(o=this.ctrl("profilePicture"))||void 0===o||o.setValue(t.split(",")[1])}set_image(){if(this.initialValue.profilePicture)try{return void(this.img=this._sanitizer.bypassSecurityTrustUrl((0,b.qo)(this.initialValue.profilePicture)))}catch(t){return void(this.img=this.get_default_image())}this.img=this.get_default_image()}get_default_image(){return this.initialValue.gender?"MALE"==this.initialValue.gender.toUpperCase().trim()?b.tb:b.Ld:b.tb}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.c),e.Y36(l.qu),e.Y36(z.H),e.Y36(g.F0),e.Y36(qe.H7))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-profile-form"]],features:[e.qOj],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"row"],[1,"col-lg-8"],[1,"mb-3"],["for","firstName",1,"form-label","sform-label"],["type","text","id","firstName","placeholder","Type here","autocomplete","false","formControlName","firstName","tabindex","1",1,"form-control","sform-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","middleName",1,"form-label","sform-label"],["type","text","id","middleName","placeholder","Type here","autocomplete","false","formControlName","middleName","tabindex","2",1,"form-control","sform-control",3,"ngClass"],["for","lastName",1,"form-label","sform-label"],["type","text","id","lastName","placeholder","Type here","autocomplete","false","formControlName","lastName","tabindex","3",1,"form-control","sform-control",3,"ngClass"],["for","birthdate",1,"form-label","sform-label"],["type","date","id","birthdate","autocomplete","false","formControlName","birthdate","tabindex","4",1,"form-control","sform-control",3,"max","ngClass"],[1,"col-lg-5"],["for","gender",1,"form-label","sform-label"],["id","gender","formControlName","gender","tabindex","5",1,"form-select","sform-control",3,"ngClass"],["selected","","value",""],["value","MALE"],["value","FEMALE"],["tabindex","2","formControlName","recaptcha"],[4,"ngIf"],[1,"col-lg-4"],[1,"d-none","d-lg-block"],[3,"base64_image","default_image","on_change"],["type","submit","tabindex","3",1,"btn","btn-primary","px-5","py-2","mt-3",3,"disabled"],[1,"invalid-feedback"],[1,"text-danger"]],template:function(t,o){1&t&&e.YNc(0,$e,45,29,"form",0),2&t&&e.Q6J("ngIf",o.form)},directives:[m.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,m.mk,l.EJ,l.YN,l.Kr,Z.wT,Z.Vd,Ye],pipes:[m.uU],styles:[""]}),i})();function Ge(i,n){if(1&i&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.validation_msg("oldPassword","Old Password")," ")}}const Re=function(){return{name:"pattern",msg:"New Password should be atleast 6 characters length that consists of alteast 1 Uppercase, 1 Lowercase, 1 Numeric and 1 Special Character."}},Be=function(i){return[i]};function Oe(i,n){if(1&i&&(e.TgZ(0,"div",14),e._uU(1),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.hij(" ",t.validation_msg("newPassword","New Password",null,e.VKq(2,Be,e.DdM(1,Re)))," ")}}function je(i,n){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&i){const t=e.oxw(3);e.xp6(1),e.Oqu(t.validation_msg("confirmPassword","Password confirmation"))}}function De(i,n){1&i&&(e.TgZ(0,"span"),e._uU(1,"Password does not match."),e.qZA())}function Xe(i,n){if(1&i&&(e.TgZ(0,"div",14),e.YNc(1,je,2,1,"span",12),e.YNc(2,De,2,0,"span",12),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.control_is_invalid("confirmPassword")),e.xp6(1),e.Q6J("ngIf",t.form.hasError("notSame"))}}function Ke(i,n){1&i&&(e.TgZ(0,"div")(1,"small",15),e._uU(2,"reCAPTCHA is required."),e.qZA()())}const I=function(i){return{"is-invalid":i}};function We(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"form",1),e.NdJ("ngSubmit",function(){return e.CHM(t),e.oxw().submit()}),e.TgZ(1,"div",2)(2,"label",3),e._uU(3,"Old Password "),e.qZA(),e._UZ(4,"input",4),e.YNc(5,Ge,2,1,"div",5),e.qZA(),e.TgZ(6,"div",2)(7,"label",6),e._uU(8,"New Password "),e.qZA(),e._UZ(9,"input",7),e.YNc(10,Oe,2,4,"div",5),e.qZA(),e.TgZ(11,"div",8)(12,"label",9),e._uU(13,"Confirm Password "),e.qZA(),e._UZ(14,"input",10),e.YNc(15,Xe,3,2,"div",5),e.qZA(),e.TgZ(16,"div",2),e._UZ(17,"re-captcha",11),e.YNc(18,Ke,3,0,"div",12),e.qZA(),e.TgZ(19,"button",13),e._uU(20,"Submit"),e.qZA()()}if(2&i){const t=e.oxw();e.Q6J("formGroup",t.form),e.xp6(4),e.Q6J("ngClass",e.VKq(9,I,t.control_is_invalid("oldPassword"))),e.xp6(1),e.Q6J("ngIf",t.control_is_invalid("oldPassword")),e.xp6(4),e.Q6J("ngClass",e.VKq(11,I,t.control_is_invalid("newPassword"))),e.xp6(1),e.Q6J("ngIf",t.control_is_invalid("newPassword")),e.xp6(4),e.Q6J("ngClass",e.VKq(13,I,t.form.hasError("notSame")||t.control_is_invalid("confirmPassword"))),e.xp6(1),e.Q6J("ngIf",t.form.hasError("notSame")||t.control_is_invalid("password")),e.xp6(3),e.Q6J("ngIf",t.control_is_invalid("recaptcha")),e.xp6(1),e.Q6J("disabled",t.is_pending)}}let et=(()=>{class i extends G.l{constructor(t,o){super(t),this._fb=o,this.checkPasswords=s=>{var a,r;return(null===(a=null==s?void 0:s.get("newPassword"))||void 0===a?void 0:a.value)===(null===(r=null==s?void 0:s.get("confirmPassword"))||void 0===r?void 0:r.value)?null:{notSame:!0}}}ngOnInit(){this.initialize(this._fb.group({confirmPassword:["",l.kI.required],newPassword:["",[l.kI.required,l.kI.pattern("^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#?!@$%^&*-]).{6,}$")]],oldPassword:["",l.kI.required],recaptcha:["",l.kI.required]},{validators:this.checkPasswords}))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(x.c),e.Y36(l.qu))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-change-password-form"]],features:[e.qOj],decls:1,vars:1,consts:[["autocomplete","off",3,"formGroup","ngSubmit",4,"ngIf"],["autocomplete","off",3,"formGroup","ngSubmit"],[1,"mb-3"],["for","oldPassword",1,"form-label","sform-label"],["type","password","id","oldPassword","placeholder","Type here","autocomplete","false","formControlName","oldPassword","tabindex","1",1,"form-control","sform-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","newPassword",1,"form-label","sform-label"],["type","password","id","newPassword","placeholder","Type here","autocomplete","false","formControlName","newPassword","tabindex","2",1,"form-control","sform-control",3,"ngClass"],[1,"mb-4"],["for","confirmPassword",1,"form-label","sform-label"],["type","password","id","confirmPassword","placeholder","Type here","autocomplete","false","formControlName","confirmPassword","tabindex","3",1,"form-control","sform-control",3,"ngClass"],["tabindex","4","formControlName","recaptcha"],[4,"ngIf"],["type","submit","tabindex","5",1,"btn","btn-primary","px-5","py-2","mt-3",3,"disabled"],[1,"invalid-feedback"],[1,"text-danger"]],template:function(t,o){1&t&&e.YNc(0,We,21,15,"form",0),2&t&&e.Q6J("ngIf",o.form)},directives:[m.O5,l._Y,l.JL,l.sg,l.Fj,l.JJ,l.u,m.mk,Z.wT,Z.Vd],styles:[""]}),i})();const tt=function(i){return{"text-primary tx-active":i}};function it(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",10)(1,"div",11),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw().navigate(a)}),e.TgZ(2,"span",12),e.ALo(3,"async"),e._uU(4),e.qZA()()()}if(2&i){const t=n.$implicit,o=e.oxw();e.xp6(2),e.Q6J("ngClass",e.VKq(4,tt,e.lcZ(3,2,o.active_cont$)==t)),e.xp6(2),e.hij(" ",t," ")}}function ot(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"app-profile-form",17),e.NdJ("on_submit",function(s){return e.CHM(t),e.oxw(2).update_profile(s)}),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("is_pending",t.is_pending)}}function nt(i,n){1&i&&e._UZ(0,"util-message",18),2&i&&e.Q6J("message","Loading")("is_loading",!0)("description","Please wait while we load your profile.")}function st(i,n){if(1&i&&(e.TgZ(0,"div")(1,"h2",13),e._UZ(2,"div",14),e._uU(3," Personal Details "),e.qZA(),e.YNc(4,ot,1,1,"app-profile-form",15),e.ALo(5,"async"),e.YNc(6,nt,1,3,"ng-template",null,16,e.W1O),e.qZA()),2&i){const t=e.MAs(7),o=e.oxw();e.xp6(4),e.Q6J("ngIf",0==e.lcZ(5,2,o.profile_service.profile_loading$))("ngIfElse",t)}}function rt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div")(1,"h2",13),e._UZ(2,"div",14),e._uU(3," Change Password "),e.qZA(),e.TgZ(4,"app-change-password-form",17),e.NdJ("on_submit",function(s){return e.CHM(t),e.oxw().change_password(s)}),e.qZA()()}if(2&i){const t=e.oxw();e.xp6(4),e.Q6J("is_pending",t.is_pending)}}let at=(()=>{class i{constructor(t,o,s){this.profile_service=t,this._alert_service=o,this._auth_service=s,this.sidebar_content=["Personal Details","Change Password"],this._active_cont=new J.X("Personal Details"),this.active_cont$=this._active_cont.asObservable(),this.is_pending=!1}ngOnInit(){this.profile_service.get_profile(!0).subscribe()}load_profile(){}navigate(t){this._active_cont.next(t)}ngOnDestroy(){}update_profile(t){this.is_pending=!0,this.profile_service.submit(t).subscribe({next:o=>{this.is_pending=!1,this._alert_service.add_alert("Profile successfully updated.")},error:o=>{this.is_pending=!1,this._alert_service.http_error(o)}})}change_password(t){this.is_pending=!0,this._auth_service.change_password(t).subscribe({next:o=>{this.is_pending=!1,this._alert_service.add_alert("Password changed successfully."),this._active_cont.next(""),setTimeout(()=>{this._active_cont.next("Change Password")},50)},error:o=>{this.is_pending=!1,this._alert_service.http_error(o)}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(z.H),e.Y36(x.c),e.Y36(L.e))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-profile"]],decls:13,vars:8,consts:[[3,"title","is_cms_content"],[1,"bg-white","py-5","mayora-overflow-fix"],[1,"container","layout-container"],[1,"row"],[1,"col-md-4","mb-5"],[1,"sidebar-bg"],["class","d-flex flex-column p-3",4,"ngFor","ngForOf"],[1,"col-md-8",3,"ngSwitch"],[1,"cms-cont","ms-3"],[4,"ngSwitchCase"],[1,"d-flex","flex-column","p-3"],[1,"d-flex","justify-content-between","c-pointer",3,"click"],[1,"pb-3","tx",3,"ngClass"],[1,"cms-title","mb-3","p-relative"],[1,"priority"],[3,"is_pending","on_submit",4,"ngIf","ngIfElse"],["profile_loading",""],[3,"is_pending","on_submit"],[3,"message","is_loading","description"]],template:function(t,o){1&t&&(e.TgZ(0,"div"),e._UZ(1,"util-page-title",0),e.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),e.YNc(7,it,5,6,"div",6),e.qZA()(),e.TgZ(8,"div",7),e.ALo(9,"async"),e.TgZ(10,"div",8),e.YNc(11,st,8,4,"div",9),e.YNc(12,rt,5,1,"div",9),e.qZA()()()()()()),2&t&&(e.xp6(1),e.Q6J("title","Profile")("is_cms_content",!1),e.xp6(6),e.Q6J("ngForOf",o.sidebar_content),e.xp6(1),e.Q6J("ngSwitch",e.lcZ(9,6,o.active_cont$)),e.xp6(3),e.Q6J("ngSwitchCase","Personal Details"),e.xp6(1),e.Q6J("ngSwitchCase","Change Password"))},directives:[N.T,m.sg,m.mk,m.RF,m.n9,m.O5,ze,P,et],pipes:[m.Ov],styles:[""]}),i})(),H=(()=>{class i{constructor(t){this.http=t}get_list(t=1,o=20){return this.http.get(`${w.N.api}/api/MayorsCorner/Published/${t}/${o}`)}get_by_content_id(t,o=!0){return(0,b._B)(`${F.Zp}_${t}_c`,null,this.http,`${w.N.api}/api/MayorsCorner/${t}`,o,!0)}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(A.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function lt(i,n){if(1&i&&(e.TgZ(0,"div")(1,"div",3),e._uU(2),e.qZA(),e.TgZ(3,"div",4)(4,"i"),e._uU(5),e.ALo(6,"date"),e.qZA()(),e._UZ(7,"div",5),e.ALo(8,"safeHtml"),e.qZA()),2&i){const t=e.oxw();e.xp6(2),e.Oqu(null==t.cont?null:t.cont.speechTitle),e.xp6(3),e.Oqu(e.xi3(6,3,null==t.cont?null:t.cont.datespecified,"EEEE, MMMM d, y")),e.xp6(2),e.Q6J("innerHtml",e.lcZ(8,6,null==t.cont?null:t.cont.speechContent),e.oJD)}}function ct(i,n){1&i&&e._UZ(0,"util-message",6),2&i&&e.Q6J("message","Loading")("is_loading",!0)("description","Please wait while we loading the content.")}const pt=function(){return["/content","mayors-corner","speeches"]};function dt(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",7),e.NdJ("click",function(){const a=e.CHM(t).$implicit;return e.oxw(2).show_item(a)}),e._uU(2),e.qZA()()}if(2&i){const t=n.$implicit;e.xp6(2),e.Oqu(t.speechTitle)}}function _t(i,n){if(1&i){const t=e.EpF();e.TgZ(0,"div"),e.YNc(1,dt,3,1,"div",3),e.TgZ(2,"div",4)(3,"button",5),e.NdJ("click",function(){return e.CHM(t),e.oxw().load_more()}),e._uU(4,"Load More"),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data),e.xp6(2),e.Q6J("disabled",t.disabled_load)}}function ut(i,n){1&i&&e._UZ(0,"util-message",8),2&i&&e.Q6J("message","Loading")("is_loading",!0)("description","Please wait while we load the speeches.")}const gt=[{path:"profile",component:at,canActivate:[O]},{path:"news",component:be},{path:"mayors-corner",component:ve,children:[{path:"photo-release",children:[{path:":id",component:Me},{path:"",component:ge}]},{path:"gallery",children:[{path:"",component:me}]},{path:"speeches",children:[{path:":id",component:(()=>{class i{constructor(t,o,s){this._speeches_service=t,this._route=o,this._alert_service=s,this.is_pending=!1}ngOnInit(){var t;this.is_pending=!0,this.id=+(null!==(t=this._route.snapshot.paramMap.get("id"))&&void 0!==t?t:0),this._speeches_service.get_by_content_id(this.id).subscribe({next:o=>{this.is_pending=!1,this.cont=o},error:o=>{this.is_pending=!1,this._alert_service.http_error(o)}})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(H),e.Y36(g.gz),e.Y36(x.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-speeches-view"]],decls:5,vars:4,consts:[[1,"mb-4","d-block",3,"routerLink"],[4,"ngIf","ngIfElse"],["loading",""],[1,"sub-content-header","mb-3"],[1,"mb-4"],[1,"mb-4",3,"innerHtml"],[3,"message","is_loading","description"]],template:function(t,o){if(1&t&&(e.TgZ(0,"a",0),e._uU(1,"Go back"),e.qZA(),e.YNc(2,lt,9,8,"div",1),e.YNc(3,ct,1,3,"ng-template",null,2,e.W1O)),2&t){const s=e.MAs(4);e.Q6J("routerLink",e.DdM(3,pt)),e.xp6(2),e.Q6J("ngIf",0==o.is_pending)("ngIfElse",s)}},directives:[g.yS,m.O5,P],pipes:[m.uU,$.z],styles:[""]}),i})()},{path:"",component:(()=>{class i extends k{constructor(t,o,s,a){super(t,o),this._speech_service=s,this._alert_service=a,this.disabled_load=!1}ngOnInit(){this.page=1,super.ngOnInit()}refresh_items(t={}){0==this.data.length&&(this.is_pending=!0),this.disabled_load=!0,this._speech_service.get_list(this.page,5).subscribe({next:o=>{this.is_pending=!1,this.disabled_load=!1,this.data=[...this.data,...o]},error:o=>{this.is_pending=!1,this.disabled_load=!1,this._alert_service.http_error(o)}})}load_more(){this.page=this.page+1}show_item(t){(0,b.wP)(t,`${F.Zp}_${t.speechId}_c`),this._router.navigate(["/content","mayors-corner","speeches",t.speechId])}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(g.F0),e.Y36(g.gz),e.Y36(H),e.Y36(x.c))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-speeches"]],features:[e.qOj],decls:5,vars:2,consts:[[1,"sub-content-header","mb-3"],[4,"ngIf","ngIfElse"],["loading",""],["class","mb-4 border-bottom",4,"ngFor","ngForOf"],[1,"d-flex"],[1,"m-auto","btn","btn-primary",3,"disabled","click"],[1,"mb-4","border-bottom"],[1,"c-pointer","pr-title","mb-4",3,"click"],[3,"message","is_loading","description"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e._uU(1," Speeches "),e.qZA(),e.YNc(2,_t,5,2,"div",1),e.YNc(3,ut,1,3,"ng-template",null,2,e.W1O)),2&t){const s=e.MAs(4);e.xp6(2),e.Q6J("ngIf",0==o.is_pending)("ngIfElse",s)}},directives:[m.O5,m.sg,P],styles:[""]}),i})()}]}]}];let ft=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[g.Bz.forChild(gt)],g.Bz]}),i})(),ht=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[m.ez,ft,B.A,R.m,l.u5,l.UX,g.Bz,Z.a,Z.lQ]]}),i})()}}]);