"use strict";(self.webpackChunkmakatiportal2022=self.webpackChunkmakatiportal2022||[]).push([[888],{7888:(de,y,a)=>{a.r(y),a.d(y,{ForumsModule:()=>me});var l=a(9808),p=a(4776),b=a(2234),Z=a(8231),f=a(7854),m=a(2340),n=a(4893),A=a(7787);const P=function(){return["text-primary","tx-active"]};function D(t,r){if(1&t&&(n.TgZ(0,"div",8)(1,"a",9),n._uU(2),n.qZA()()),2&t){const e=r.$implicit;n.xp6(1),n.Q6J("routerLink",e.path)("routerLinkActive",n.DdM(3,P)),n.xp6(1),n.Oqu(e.title)}}let O=(()=>{class t{constructor(){this.sidebar_content=[]}ngOnInit(){this.setup_sidebar()}setup_sidebar(){this.sidebar_content=m.N.forum_categories.map(e=>({title:e.title,path:["/forums",(0,f.e5)(e.title),e.id]}))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-forum-layout"]],decls:10,vars:4,consts:[[3,"title","is_cms_content","show_mayora"],[1,"bg-white","py-5","mayora-overflow-fix"],[1,"container","layout-container"],[1,"row"],[1,"col-md-4","mb-5"],[1,"sidebar-bg"],["class","d-flex flex-column p-3",4,"ngFor","ngForOf"],[1,"col-md-8"],[1,"d-flex","flex-column","p-3"],[1,"sidebar-link",3,"routerLink","routerLinkActive"]],template:function(e,i){1&e&&(n.TgZ(0,"div"),n._UZ(1,"util-page-title",0),n.TgZ(2,"div",1)(3,"div",2)(4,"div",3)(5,"div",4)(6,"div",5),n.YNc(7,D,3,4,"div",6),n.qZA()(),n.TgZ(8,"div",7),n._UZ(9,"router-outlet"),n.qZA()()()()()),2&e&&(n.xp6(1),n.Q6J("title","Question & Answer")("is_cms_content",!1)("show_mayora",!1),n.xp6(6),n.Q6J("ngForOf",i.sidebar_content))},directives:[A.T,l.sg,p.yS,p.Od,p.lC],styles:[""]}),t})();var g=a(4004),U=a(4128),T=a(8467),F=a(6947),I=a(520);let h=(()=>{class t{constructor(e){this.http=e}get_paginated(e,i=1){if(0==e)return this.http.get(`${m.N.api}/api/ThreadableReply/Published/${i}/4`).pipe((0,f.II)(),(0,g.U)(w=>new T.r(4,w.count,w.items)));const u=(0,f._B)(`${F.bd}_${e}_count`,0,this.http,`${m.N.api}/api/Threadable/CountByCategory/${e}/1`,!0,!0),c=this.http.get(`${m.N.api}/api/Threadable/ListPublishedByCat/${e}/${i}/4`).pipe((0,f.II)());return(0,U.D)([u,c]).pipe((0,g.U)(d=>new T.r(4,d[0],d[1])))}get_by_id(e){return(0,f._B)(`${F.bd}_${e}_c`,{userAccountid:0,threadId:0,threadCategoryId:0,threadTitle:"",threadTimestamp:"",threadableAuthor:"",threadContent:"",threadIsPublished:!1,datespecified:"",threadIsPinned:!1},this.http,`${m.N.api}/api/Threadable/${e}`,!0,!0)}get_comments(e){return this.http.get(`${m.N.api}/api/ThreadableReply/${e}`).pipe((0,f.II)())}}return t.\u0275fac=function(e){return new(e||t)(n.LFG(I.eN))},t.\u0275prov=n.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var v=a(8150),s=a(5439);const x=new n.OlP("NGX_MOMENT_OPTIONS");let _=(()=>{class t{constructor(e,i){this.cdRef=e,this.ngZone=i}format(e){return e.from(s(),this.lastOmitSuffix)}transform(e,i,o){return this.hasChanged(e,i)?(this.lastTime=this.getTime(e),this.lastValue=e,this.lastOmitSuffix=i,this.lastLocale=this.getLocale(e),this.formatFn=o||this.format.bind(this),this.removeTimer(),this.createTimer(),this.lastText=this.formatFn(s(e))):this.createTimer(),this.lastText}ngOnDestroy(){this.removeTimer()}createTimer(){if(this.currentTimer)return;const e=s(this.lastValue),i=1e3*this.getSecondsUntilUpdate(e);this.currentTimer=this.ngZone.runOutsideAngular(()=>"undefined"!=typeof window?window.setTimeout(()=>{this.lastText=this.formatFn(s(this.lastValue)),this.currentTimer=null,this.ngZone.run(()=>this.cdRef.markForCheck())},i):null)}removeTimer(){this.currentTimer&&(window.clearTimeout(this.currentTimer),this.currentTimer=null)}getSecondsUntilUpdate(e){const i=Math.abs(s().diff(e,"minute"));return i<1?1:i<60?30:i<180?300:3600}hasChanged(e,i){return this.getTime(e)!==this.lastTime||this.getLocale(e)!==this.lastLocale||i!==this.lastOmitSuffix}getTime(e){return s.isDate(e)?e.getTime():s.isMoment(e)?e.valueOf():s(e).valueOf()}getLocale(e){return s.isMoment(e)?e.locale():s.locale()}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(n.sBO,16),n.Y36(n.R0b,16))},t.\u0275pipe=n.Yjl({name:"amTimeAgo",type:t,pure:!1}),t})(),H=(()=>{class t{static forRoot(e){return{ngModule:t,providers:[{provide:x,useValue:Object.assign({},e)}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({}),t})();var M=a(7286);function V(t,r){if(1&t&&(n.TgZ(0,"div",4)(1,"div",5),n._UZ(2,"img",6),n.qZA(),n.TgZ(3,"div",7)(4,"div",8)(5,"small",9),n._uU(6),n.qZA(),n.TgZ(7,"small",10),n._uU(8),n.ALo(9,"amTimeAgo"),n.qZA()(),n._UZ(10,"div",11),n.ALo(11,"safeHtml"),n.qZA()()),2&t){const e=r.$implicit;n.xp6(6),n.hij(" ",e.replyAuthor," "),n.xp6(2),n.hij(" ",n.lcZ(9,3,e.replyTimestamp)," "),n.xp6(2),n.Q6J("innerHTML",n.lcZ(11,5,e.replyContent),n.oJD)}}function X(t,r){if(1&t&&(n.TgZ(0,"div")(1,"div",2)(2,"strong")(3,"small"),n._uU(4),n.qZA()()(),n.TgZ(5,"div"),n.YNc(6,V,12,7,"div",3),n.qZA()()),2&t){const e=n.oxw();n.xp6(4),n.hij(" ",e.comments.length," Comment(s) "),n.xp6(2),n.Q6J("ngForOf",e.comments)}}function k(t,r){1&t&&n._UZ(0,"util-message",12),2&t&&n.Q6J("message","Loading")("is_loading",!0)("description","Please wait while we load the comments.")}let G=(()=>{class t{constructor(e){this._forum_service=e}ngOnInit(){this._forum_service.get_comments(this.thread_id).subscribe(e=>{this.comments=e})}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(h))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-thread-replies"]],inputs:{thread_id:"thread_id"},decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"mb-3"],["class","d-flex justify-content-start trd mb-3",4,"ngFor","ngForOf"],[1,"d-flex","justify-content-start","trd","mb-3"],[1,"forum-logo","me-3"],["width","100%","height","auto","src","/assets/images/forum-makati-logo.png","alt",""],[1,"w-100"],[1,"d-flex","justify-content-between"],[1,"text-primary"],[1,"text-muted"],[3,"innerHTML"],[3,"message","is_loading","description"]],template:function(e,i){if(1&e&&(n.YNc(0,X,7,2,"div",0),n.YNc(1,k,1,3,"ng-template",null,1,n.W1O)),2&e){const o=n.MAs(2);n.Q6J("ngIf",i.comments)("ngIfElse",o)}},directives:[l.O5,l.sg,v.q],pipes:[_,M.z],styles:[".forum-logo[_ngcontent-%COMP%]{width:100px}"]}),t})();function W(t,r){if(1&t&&(n.TgZ(0,"div")(1,"div",2),n._uU(2),n.qZA(),n.TgZ(3,"div"),n._uU(4," Posted by "),n.TgZ(5,"span",3),n._uU(6),n.qZA(),n._uU(7),n.ALo(8,"amTimeAgo"),n.qZA(),n._UZ(9,"div",4),n.ALo(10,"safeHtml"),n._UZ(11,"app-thread-replies",5),n.qZA()),2&t){const e=n.oxw();n.xp6(2),n.hij(" ",e.item.threadTitle," "),n.xp6(4),n.Oqu(e.item.threadableAuthor),n.xp6(1),n.hij(" about ",n.lcZ(8,5,e.item.threadTimestamp)," "),n.xp6(2),n.Q6J("innerHTML",n.lcZ(10,7,e.item.threadContent),n.oJD),n.xp6(2),n.Q6J("thread_id",e.item.threadId)}}function K(t,r){1&t&&n._UZ(0,"util-message",6),2&t&&n.Q6J("message","Loading")("is_loading",!0)("description","Please wait while we load the content.")}let ee=(()=>{class t{constructor(e,i,o){this._forum_service=e,this._route=i,this._router=o}ngOnInit(){const e=this._route.snapshot.paramMap.get("id");this._forum_service.get_by_id(+e).subscribe(i=>{this.item=i})}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(h),n.Y36(p.gz),n.Y36(p.F0))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-forum-view"]],decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["loading",""],[1,"sub-content-header","mb-3"],[1,"text-primary"],[1,"my-4",3,"innerHTML"],[3,"thread_id"],[3,"message","is_loading","description"]],template:function(e,i){if(1&e&&(n.YNc(0,W,12,9,"div",0),n.YNc(1,K,1,3,"ng-template",null,1,n.W1O)),2&e){const o=n.MAs(2);n.Q6J("ngIf",i.item)("ngIfElse",o)}},directives:[l.O5,G,v.q],pipes:[_,M.z],styles:[""]}),t})();var te=a(9841),ne=a(8372),ie=a(5648),re=a(7592);function oe(t,r){if(1&t&&(n.TgZ(0,"div",12),n._uU(1),n.qZA()),2&t){const e=n.oxw().$implicit;n.xp6(1),n.hij(" Last Comment by ",e.lastCommentAuthor," ")}}function se(t,r){if(1&t){const e=n.EpF();n.TgZ(0,"div",6),n.NdJ("click",function(){const u=n.CHM(e).$implicit;return n.oxw(2).navigate(u)}),n.TgZ(1,"div",7),n._UZ(2,"img",8),n.qZA(),n.TgZ(3,"div",9)(4,"div",10),n._uU(5),n.qZA(),n.YNc(6,oe,2,1,"div",11),n.qZA()()}if(2&t){const e=r.$implicit;n.xp6(5),n.hij(" ",e.threadTitle," "),n.xp6(1),n.Q6J("ngIf",e.lastCommentAuthor)}}function ae(t,r){if(1&t){const e=n.EpF();n.TgZ(0,"div"),n.YNc(1,se,7,2,"div",4),n.TgZ(2,"util-pagination",5),n.NdJ("next",function(){return n.CHM(e),n.oxw().go_next()})("previous",function(){return n.CHM(e),n.oxw().go_prev()}),n.qZA()()}if(2&t){const e=n.oxw();n.xp6(1),n.Q6J("ngForOf",e.res.items),n.xp6(1),n.Q6J("page",e.page)("content",e.res)("featured_count",0)}}function ue(t,r){1&t&&(n.TgZ(0,"div",13),n._UZ(1,"util-message",14),n.qZA()),2&t&&(n.xp6(1),n.Q6J("message","Loading")("is_loading",!0)("description","Please wait while we load the content."))}const ce=[{path:":pageTitle/:threadId",component:O,children:[{path:"thread/:id",component:ee},{path:"",component:(()=>{class t extends ie.q{constructor(e,i,o){super(i,e),this._forum_service=o,this._subscriptions=[],this.page_title=""}ngOnInit(){super.ngOnInit(),this.reset_page_upon_changing_category(),this.setup_page_title()}reset_page_upon_changing_category(){const e=this._route.paramMap.pipe((0,g.U)(i=>i.get("threadId"))).subscribe(i=>{this.page=1});this._subscriptions.push(e)}update_list_upon_query_param_changes(){const e=(0,te.a)([this._route.queryParamMap,this._route.paramMap]).pipe((0,ne.b)(200)).subscribe(i=>this.refresh_items());this._subscriptions.push(e)}refresh_items(e={}){this.res=void 0;const i=this._route.snapshot.paramMap.get("threadId");!i||this._forum_service.get_paginated(+i,this.page).subscribe(o=>{this.res=o})}setup_page_title(){const e=this._route.paramMap.pipe((0,g.U)(i=>i.get("threadId"))).subscribe(i=>{this.update_title(+i)});this._subscriptions.push(e)}update_title(e){const i=m.N.forum_categories.find(o=>+o.id==+e);i?this.page_title=i.title:(console.warn("Invalid thread category"),this.page_title=m.N.forum_categories[0].title)}ngOnDestroy(){this._subscriptions.forEach(e=>e.unsubscribe())}navigate(e){const i=this._route.snapshot.paramMap.get("threadId"),o=this._route.snapshot.paramMap.get("pageTitle");this._router.navigate(["/forums",o,i,"thread",e.threadId])}}return t.\u0275fac=function(e){return new(e||t)(n.Y36(p.gz),n.Y36(p.F0),n.Y36(h))},t.\u0275cmp=n.Xpm({type:t,selectors:[["app-forums"]],features:[n.qOj],decls:7,vars:3,consts:[[1,"d-flex"],[1,"cms-title"],[4,"ngIf","ngIfElse"],["loading",""],["class","d-flex justify-content-start trd",3,"click",4,"ngFor","ngForOf"],[3,"page","content","featured_count","next","previous"],[1,"d-flex","justify-content-start","trd",3,"click"],[1,"forum-logo","me-3"],["width","100%","height","auto","src","/assets/images/branding/makati-logo.png","alt",""],[1,"w-100"],[1,"mb-3",2,"font-size","40px","line-height","37.16px"],["style","font-size: 16px; line-height: 24.37px; color: #B5B5B5;",4,"ngIf"],[2,"font-size","16px","line-height","24.37px","color","#B5B5B5"],[1,"mt-4"],[3,"message","is_loading","description"]],template:function(e,i){if(1&e&&(n.TgZ(0,"div")(1,"div",0)(2,"div",1),n._uU(3),n.qZA()(),n.YNc(4,ae,3,4,"div",2),n.qZA(),n.YNc(5,ue,2,3,"ng-template",null,3,n.W1O)),2&e){const o=n.MAs(6);n.xp6(3),n.hij(" ",i.page_title," "),n.xp6(1),n.Q6J("ngIf",i.res)("ngIfElse",o)}},directives:[l.O5,l.sg,re.Q,v.q],styles:[".forum-logo[_ngcontent-%COMP%]{width:154px}.trd[_ngcontent-%COMP%]{padding:2em 1em;cursor:pointer;border-bottom:1px solid rgba(0,0,0,.2)}.trd[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}"]}),t})()}]}];let pe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[p.Bz.forChild(ce)],p.Bz]}),t})(),me=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=n.oAB({type:t}),t.\u0275inj=n.cJS({imports:[[l.ez,pe,p.Bz,Z.A,b.m,H]]}),t})()}}]);